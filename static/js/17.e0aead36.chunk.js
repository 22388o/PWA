(this["webpackJsonpshocknet-pwa"]=this["webpackJsonpshocknet-pwa"]||[]).push([[17],{488:function(e,t,a){"use strict";var n=a(3),c=a(73),o=a.n(c),l=(a(489),a(7));t.a=function(e){var t=e.pageTitle,a=e.drawerVisible,c=Object(n.useCallback)((function(){window.history.back()}),[]);return Object(l.jsxs)("div",{className:"dialog-nav-container",children:[Object(l.jsx)("div",{className:"dialog-nav-back",onClick:c,children:Object(l.jsx)("i",{className:"icon icon-thin-back"})}),Object(l.jsx)("p",{className:"dialog-nav-title",children:t}),Object(l.jsxs)("div",{className:o()({"dialog-nav-menu-btn":!0,"dialog-nav-hidden":!a}),children:[Object(l.jsx)("div",{className:"dialog-nav-menu-dash"}),Object(l.jsx)("div",{className:"dialog-nav-menu-dash"}),Object(l.jsx)("div",{className:"dialog-nav-menu-dash"})]})]})}},489:function(e,t,a){},491:function(e,t,a){"use strict";a.d(t,"k",(function(){return o})),a.d(t,"r",(function(){return l})),a.d(t,"h",(function(){return r})),a.d(t,"c",(function(){return s})),a.d(t,"d",(function(){return i})),a.d(t,"t",(function(){return u})),a.d(t,"u",(function(){return b})),a.d(t,"s",(function(){return d})),a.d(t,"w",(function(){return h})),a.d(t,"g",(function(){return j})),a.d(t,"e",(function(){return p})),a.d(t,"f",(function(){return f})),a.d(t,"q",(function(){return _})),a.d(t,"i",(function(){return g})),a.d(t,"j",(function(){return m})),a.d(t,"l",(function(){return O})),a.d(t,"m",(function(){return x})),a.d(t,"a",(function(){return v})),a.d(t,"n",(function(){return k})),a.d(t,"b",(function(){return w})),a.d(t,"o",(function(){return N})),a.d(t,"p",(function(){return C})),a.d(t,"v",(function(){return S}));var n=a(511),c=a.n(n),o=c.a.flex,l=c.a.row,r=c.a.col,s=c.a["center-align"],i=c.a["center-justify"],u=(c.a["col-centered"],c.a["space-around"]),b=c.a["space-between"],d=c.a["row-centered"],h=(c.a["center-align-self"],c.a["flex-grow-1"],c.a["height-full"],c.a["width-auto"],c.a["width-100"]),j=(c.a["font-white"],c.a["font-black"],c.a.rotate90Ccw,c.a["common-padding-left"],c.a["common-padding-right"],c.a["common-padding-h"],c.a["common-margin-left"],c.a["common-margin-right"],c.a["common-margin-h"],c.a["bg-black"],c.a["bg-white"],c.a["corners-rounded"],c.a["children-spaced-4"],c.a["children-spaced-8"]),p=(c.a["children-spaced-12"],c.a["children-spaced-16"]),f=c.a["children-spaced-24"],_=(c.a["padding-0"],c.a["padding-2"],c.a["padding-4"],c.a["padding-8"],c.a["padding-12"]),g=(c.a["padding-16"],c.a["padding-24"],c.a["flat-btn"]),m=c.a["flat-btn-full-width"],O=(c.a["flat-btn-no-border"],c.a["font-size-4"],c.a["font-size-6"],c.a["font-size-8"],c.a["font-size-10"],c.a["font-size-12"]),x=(c.a["font-size-14"],c.a["font-size-16"],c.a["font-size-18"]),v=c.a.absolute,k=c.a["horizontally-centered-absolute"],w=(c.a["vertically-centered-absolute"],c.a["absolute-stick-to-top"]),N=(c.a["absolute-stick-to-bottom"],c.a["absolute-stick-to-left"],c.a["absolute-stick-to-right"],c.a["opacity-full"],c.a["opacity-half"],c.a["opacity-none"]),C=c.a["opacity-three-quarters"],S=c.a.unselectable},511:function(e,t,a){e.exports={PAD_H:"24px",flex:"global_flex__3EqcS",row:"global_row__1A5FW global_flex__3EqcS",col:"global_col__3mp_5 global_flex__3EqcS","center-align":"global_center-align__2UEY8 global_flex__3EqcS","center-justify":"global_center-justify__3etS9 global_flex__3EqcS","col-centered":"global_col-centered__1rqsl global_col__3mp_5 global_flex__3EqcS global_center-align__2UEY8 global_flex__3EqcS","space-around":"global_space-around__3HlTi global_flex__3EqcS","space-between":"global_space-between__2G6yv global_flex__3EqcS","row-centered":"global_row-centered__1H_cv global_row__1A5FW global_flex__3EqcS global_center-align__2UEY8 global_flex__3EqcS","center-align-self":"global_center-align-self__1GUs5","flex-grow-1":"global_flex-grow-1__2unHa global_flex__3EqcS","height-full":"global_height-full__1ZI6F","width-auto":"global_width-auto__1USRU","width-100":"global_width-100__29aAp","font-white":"global_font-white__NE-CT","font-black":"global_font-black__wjo9k",rotate90Ccw:"global_rotate90Ccw__11MjX","common-padding-left":"global_common-padding-left__2oqNo","common-padding-right":"global_common-padding-right__MpvbN","common-padding-h":"global_common-padding-h__8YHOB global_common-padding-left__2oqNo global_common-padding-right__MpvbN","common-margin-left":"global_common-margin-left__17kyp","common-margin-right":"global_common-margin-right__26jhw","common-margin-h":"global_common-margin-h__2btHF global_common-margin-left__17kyp global_common-margin-right__26jhw","bg-black":"global_bg-black__AftPu","bg-white":"global_bg-white__3CREm","corners-rounded":"global_corners-rounded__12rFn","children-spaced-4":"global_children-spaced-4__1gmtr","children-spaced-8":"global_children-spaced-8__97gHF","children-spaced-12":"global_children-spaced-12__1mIIN","children-spaced-16":"global_children-spaced-16__GafSh","children-spaced-24":"global_children-spaced-24__2XpHO","padding-0":"global_padding-0__3w7nl","padding-2":"global_padding-2__3jsyO","padding-4":"global_padding-4__3mek9","padding-8":"global_padding-8__3xaKp","padding-12":"global_padding-12__1Fp31","padding-16":"global_padding-16__3S0ZC","padding-24":"global_padding-24__PWluU","flat-btn":"global_flat-btn__QCoQD","flat-btn-full-width":"global_flat-btn-full-width__1KMEz global_flat-btn__QCoQD global_width-100__29aAp","flat-btn-no-border":"global_flat-btn-no-border__1D6YS global_flat-btn__QCoQD","font-size-4":"global_font-size-4__152Yi","font-size-6":"global_font-size-6__1TiYJ","font-size-8":"global_font-size-8__3J8qe","font-size-10":"global_font-size-10__18w42","font-size-12":"global_font-size-12__3uTVa","font-size-14":"global_font-size-14__10gBO","font-size-16":"global_font-size-16__1VztM","font-size-18":"global_font-size-18__11bmr",absolute:"global_absolute__1CUuW","horizontally-centered-absolute":"global_horizontally-centered-absolute__U2Y8G global_absolute__1CUuW","vertically-centered-absolute":"global_vertically-centered-absolute__1G9Ok global_absolute__1CUuW","absolute-stick-to-top":"global_absolute-stick-to-top__2J4DW","absolute-stick-to-bottom":"global_absolute-stick-to-bottom__3uJed","absolute-stick-to-left":"global_absolute-stick-to-left__1p8ve","absolute-stick-to-right":"global_absolute-stick-to-right__15ROv","opacity-full":"global_opacity-full__3pv-G","opacity-half":"global_opacity-half__2Kryw","opacity-none":"global_opacity-none__1cDP9","opacity-three-quarters":"global_opacity-three-quarters__1uI42",unselectable:"global_unselectable__20lft"}},519:function(e,t,a){"use strict";var n=a(73),c=a.n(n),o=a(488),l=a(491),r=(a(531),a(532)),s=a.n(r),i=a(7);t.a=function(e){var t=e.containerClassName,a=void 0===t?"":t,n=e.contentClassName,r=void 0===n?"":n,u=e.title,b=e.children,d=e.disableNav,h=void 0!==d&&d,j=e.onBack,p=e.showBackBtn,f=void 0!==p&&p;return Object(i.jsxs)("div",{className:"page-container dialog-page ".concat(a),style:h?{paddingTop:0}:{},children:[f&&Object(i.jsx)("div",{className:s.a["back-btn"],onClick:j,children:Object(i.jsx)("i",{className:c()("icon icon-thin-back",l.m)})}),h?null:Object(i.jsx)(o.a,{drawerVisible:!1,pageTitle:u}),Object(i.jsx)("div",{className:"dialog-content-container ".concat(r),children:b})]})}},531:function(e,t,a){},532:function(e,t,a){e.exports={"back-btn":"DialogPageContainer_back-btn__2U-0S"}},533:function(e,t,a){},574:function(e,t,a){"use strict";var n=a(580),c=function(){return!navigator.userAgent.match(/(iPad)|(iPhone)|(iPod)|(android)|(webOS)/i)},o=(a(533),a(7)),l={wizard:{title:"SCAN A",target:"QR CODE",description:"Point your camera at a ShockWizard QR Code"},invoice:{title:"SCAN AN",target:"INVOICE",description:"Point your camera at an LND Invoice"}};t.a=function(e){var t=e.mode,a=void 0===t?"wizard":t,r=e.onScan,s=e.onError,i=e.onClose,u=l[a],b=c()?"user":"environment";return Object(o.jsxs)("div",{className:"qr-code-scanner-container",children:[Object(o.jsx)("div",{className:"qr-scanner-top-section",children:Object(o.jsx)("i",{className:"fas fa-times",onClick:i})}),Object(o.jsx)(n.a,{constraints:{video:{facingMode:{exact:b}}},onScan:r,onError:s}),Object(o.jsx)("div",{className:"qr-scanner-target"}),Object(o.jsxs)("div",{className:"qr-scanner-bottom-section",children:[Object(o.jsxs)("p",{className:"qr-scanner-bottom-title",children:[u.title," ",Object(o.jsx)("span",{className:"qr-scanner-bottom-title-highlight",children:u.target})]}),Object(o.jsx)("p",{className:"qr-scanner-bottom-description",children:u.description}),Object(o.jsx)("div",{className:"qr-scanner-btn",onClick:i,children:"Cancel Scan"})]})]})}},645:function(e,t,a){},646:function(e,t,a){},647:function(e,t,a){},648:function(e,t,a){},751:function(e,t,a){"use strict";a.r(t);var n=a(2),c=a.n(n),o=a(5),l=a(17),r=a(3),s=a(37),i=a(113),u=a(25),b=a(14),d=a(48),h=a(19),j=a(519),p=a(73),f=a.n(p),_=a(7),g=function(e){var t=e.split(".");return 4===t.length&&!t.find((function(e){return isNaN(e)||parseInt(e,10)>255}))},m=function(e){if(console.log("check ip"),"localhost"===e||"http://localhost"===e)return e+":9835";if(g(e))return e+":9835";var t=e.startsWith("http")?e:"http://"+e,a=new URL(t);return!a.port&&g(a.hostname)?a.hostname+":9835":a.host},O=function(){var e=Object(s.c)(),t=Object(r.useState)(),a=Object(l.a)(t,2),n=a[0],i=a[1],b=Object(r.useState)(""),j=Object(l.a)(b,2),p=j[0],g=j[1],O=Object(r.useState)(!1),x=Object(l.a)(O,2),v=x[0],k=x[1],w=Object(r.useCallback)((function(e){var t=e.target,a=t.value;switch(t.name){case"hostIP":return void g(a);default:return}}),[]),N=function(){var t=Object(o.a)(c.a.mark((function t(a){var n,o,l;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,a.preventDefault(),!v){t.next=4;break}return t.abrupt("return");case 4:return k(!0),i(null),n=m(p),t.next=9,Object(d.c)(n)(e);case 9:o=t.sent,l=o.withProtocolHostIP,Object(u.a)(l),t.next=18;break;case 14:t.prev=14,t.t0=t.catch(0),k(!1),i("Unable to connect to host");case 18:case"end":return t.stop()}}),t,null,[[0,14]])})));return function(e){return t.apply(this,arguments)}}(),C=Object(r.useCallback)((function(){e(Object(h.c)(null)),e(Object(h.d)(null))}),[e]);return Object(_.jsxs)("div",{className:"auth-form-container",children:[!v&&Object(_.jsx)("p",{className:"auth-form-container-title",children:"Connect to Node"}),Object(_.jsx)("form",{className:"auth-form",onSubmit:N,children:v?Object(_.jsx)("p",{children:"Connecting..."}):Object(_.jsxs)(_.Fragment,{children:[Object(_.jsx)("input",{type:"text",name:"hostIP",placeholder:"Host Address (in IP or DNS form)",value:p,onChange:w,className:f()({"input-field":!0,"input-field-error":!!n})}),n?Object(_.jsx)("p",{className:"error-container",children:n}):null,Object(_.jsx)("button",{className:"submit-btn",type:"submit",children:"Connect"}),Object(_.jsx)("p",{className:"inline-link",onClick:C,children:"Choose another method"})]})})]})},x=a(150),v=a(20),k=function(){var e=Object(s.c)(),t=Object(r.useState)(),a=Object(l.a)(t,2),n=a[0],i=a[1],u=Object(r.useState)(""),b=Object(l.a)(u,2),j=b[0],p=b[1],f=v.useSelector((function(e){return e.node.alias})),g=Object(r.useState)(!1),m=Object(l.a)(g,2),O=m[0],k=m[1],w=Object(r.useState)(""),N=Object(l.a)(w,2),C=N[0],S=N[1],y=Object(r.useState)(!1),z=Object(l.a)(y,2),P=z[0],W=z[1],q=Object(r.useCallback)((function(e){var t=e.target,a=t.value;switch(t.name){case"alias":return void p(a);case"password":return void S(a);default:return}}),[]),E=Object(r.useCallback)(function(){var t=Object(o.a)(c.a.mark((function t(a){var n;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a.preventDefault(),W(!0),t.prev=2,t.next=5,e(Object(d.f)({alias:j||f,password:C}));case 5:n=t.sent,console.log("Wallet Response:",n),t.next=13;break;case 9:t.prev=9,t.t0=t.catch(2),i(t.t0.message),W(!1);case 13:case"end":return t.stop()}}),t,null,[[2,9]])})));return function(e){return t.apply(this,arguments)}}(),[j,O,f,C,e,i]),I=Object(r.useCallback)((function(){e(Object(h.c)(null)),e(Object(h.d)(null))}),[e]);return Object(_.jsxs)("div",{className:"auth-form-container",children:[P?Object(_.jsx)(x.a,{overlay:!0,fullScreen:!0,text:"Unlocking Wallet..."}):null,Object(_.jsx)("p",{className:"auth-form-container-title",children:"Unlock Wallet"}),Object(_.jsxs)("form",{className:"auth-form",onSubmit:E,children:[f&&!O?Object(_.jsxs)(_.Fragment,{children:[Object(_.jsxs)("div",{style:{display:"flex",justifyContent:"space-around",alignItems:"center",flexDirection:"row",width:"100%"},children:[Object(_.jsxs)("span",{children:["Alias: ",f]}),Object(_.jsx)("span",{className:"inline-link",style:{marginTop:"0px"},onClick:function(){k(!0)},children:"change"})]}),Object(_.jsx)("div",{style:{height:24}})]}):Object(_.jsx)("input",{type:"text",name:"alias",placeholder:"Wallet Alias",value:j,onChange:q,className:"input-field",autoCorrect:"off",autoCapitalize:"none"}),Object(_.jsx)("input",{type:"password",name:"password",placeholder:"Wallet Password",value:C,onChange:q,className:"input-field"}),n?Object(_.jsx)("p",{className:"error-container",children:n}):null,Object(_.jsx)("button",{className:"submit-btn",children:"Unlock"}),Object(_.jsx)("p",{className:"inline-link",onClick:I,children:"Create a new alias"}),Object(_.jsx)("p",{className:"inline-link",onClick:I,children:"Choose another method"})]})]})},w=function(){var e=Object(s.c)(),t=Object(r.useState)(),a=Object(l.a)(t,2),n=a[0],i=a[1],u=Object(r.useState)(""),b=Object(l.a)(u,2),j=b[0],p=b[1],f=Object(r.useState)(""),g=Object(l.a)(f,2),m=g[0],O=g[1],v=Object(r.useState)(""),k=Object(l.a)(v,2),w=k[0],N=k[1],C=Object(r.useState)(!1),S=Object(l.a)(C,2),y=S[0],z=S[1],P=Object(r.useCallback)((function(e){var t=e.target,a=t.value;switch(t.name){case"alias":return void p(a);case"password":return void O(a);case"confirmPassword":return void N(a);default:return}}),[]),W=Object(r.useCallback)(function(){var t=Object(o.a)(c.a.mark((function t(a){var n;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a.preventDefault(),!(j.length<3||j.length>32)){t.next=4;break}return i("Please specify an alias that is 3-32 characters long"),t.abrupt("return");case 4:if(m===w){t.next=7;break}return i("Password and Confirm password fields must match"),t.abrupt("return");case 7:if(!(m.length<8||m.length>32)){t.next=10;break}return i("Password length should be 8-32 characters long"),t.abrupt("return");case 10:return t.prev=10,z(!0),t.next=14,e(Object(d.d)({alias:j,password:m}));case 14:n=t.sent,console.log("Wallet Response:",n),t.next=21;break;case 18:t.prev=18,t.t0=t.catch(10),i(t.t0.message);case 21:return t.prev=21,z(!1),t.finish(21);case 24:case"end":return t.stop()}}),t,null,[[10,18,21,24]])})));return function(e){return t.apply(this,arguments)}}(),[j,m,w,e]),q=Object(r.useCallback)((function(){e(Object(h.c)(null)),e(Object(h.d)(null))}),[e]);return Object(_.jsxs)("div",{className:"auth-form-container",children:[y?Object(_.jsx)(x.a,{overlay:!0,fullScreen:!0,text:"Creating New Wallet..."}):null,Object(_.jsx)("p",{className:"auth-form-container-title",children:"Create New Wallet"}),Object(_.jsxs)("form",{className:"auth-form",onSubmit:W,children:[Object(_.jsx)("input",{type:"text",name:"alias",placeholder:"Wallet Alias",value:j,onChange:P,className:"input-field",autoCorrect:"off",autoCapitalize:"none"}),Object(_.jsx)("input",{type:"password",name:"password",placeholder:"Wallet Password",value:m,onChange:P,className:"input-field"}),Object(_.jsx)("input",{type:"password",name:"confirmPassword",placeholder:"Confirm Wallet Password",value:w,onChange:P,className:"input-field"}),n?Object(_.jsx)("p",{className:"error-container",children:n}):null,Object(_.jsx)("button",{className:"submit-btn",children:"Create"}),Object(_.jsx)("p",{className:"inline-link",onClick:q,children:"Choose another method"})]})]})},N=a.p+"static/media/shocklogo-dark.ebc8cee3.png",C=(a(645),function(){return Object(_.jsx)("div",{className:"auth-logo-header",children:Object(_.jsx)("img",{className:"auth-logo",src:N,alt:"ShockWallet Logo"})})}),S=(a(646),function(e){var t=e.icon,a=e.details,n=e.method,c=Object(s.c)(),o=Object(r.useCallback)((function(){c(Object(h.c)(n))}),[c,n]);return Object(_.jsxs)("div",{className:"choice-container",onClick:o,children:[Object(_.jsx)("div",{className:"choice-icon-container",children:Object(_.jsx)("i",{className:"choice-icon fas fa-".concat(t)})}),Object(_.jsx)("p",{className:"choice-info",children:a})]})}),y=(a(647),function(){var e=Object(s.c)(),t=Object(r.useCallback)((function(){e(Object(h.c)("shockCloud"))}),[e]);return Object(_.jsxs)("div",{className:"choices-step-container",children:[Object(_.jsx)("p",{className:"choices-title",children:"Node Up"}),Object(_.jsx)("p",{className:"choices-desc",children:"In a decentralized network, a node is like a personal server that works even as your mobile sleeps."}),Object(_.jsxs)("div",{className:"choices-container",children:[Object(_.jsx)(S,{icon:"code-branch",details:"I already have a node, and want to enter a network address",method:"manual"}),Object(_.jsx)(S,{icon:"qrcode",details:"I'll install the ShockNode Wizard app on a computer",method:"shockWizard"}),Object(_.jsx)(S,{icon:"cloud",details:"I'd like a personal cloud node provided as a service",method:"shockCloud"}),Object(_.jsx)("p",{className:"inline-link",onClick:t,children:"I have a guest invite"})]})]})}),z="pool.shock.network",P=function(){var e=Object(s.c)(),t=Object(s.d)((function(e){return e.node.hostingAttemptsDone})),a=Object(r.useState)(!1),n=Object(l.a)(a,2),i=n[0],j=n[1],p=Object(r.useState)(""),g=Object(l.a)(p,2),m=g[0],O=g[1],v=Object(r.useState)(""),k=Object(l.a)(v,2),w=k[0],N=k[1],C=Object(r.useCallback)((function(e){var t=e.target,a=t.value;switch(t.name){case"inviteCode":return void N(a);default:return}}),[]),S=function(){var e=Object(o.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,a){var n=t.match(/:(\d+)/);if(!n)return e(t);var c=new WebSocket("wss://".concat(z,"/ws/healthz"));c.addEventListener("open",(function(e){c.send("health(".concat(n[1],")"))})),c.addEventListener("message",(function(t){var a=JSON.parse(t.data);a.api_uri&&""!=a.api_uri&&(c.close(),e(a.api_uri))}))})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),y=Object(r.useCallback)(function(){var a=Object(o.a)(c.a.mark((function a(n){var o,l,r,s,i,h,p,f;return c.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,n.preventDefault(),O(null),j(!0),a.next=6,b.a.get("https://".concat(z,"/mainnet"),{headers:{Accept:"application/json",Authorization:"Bearer ".concat(w)}});case 6:return o=a.sent,l=o.data,r=l.data.address,a.next=11,S(r);case 11:return s=a.sent,i=s.replace(/^http(s)?:\/\//gi,""),h=t?0:4,a.next=16,Object(d.c)(i,!0,h)(e);case 16:p=a.sent,f=p.withProtocolHostIP,t&&Object(d.b)()(e),Object(u.a)(f),a.next=26;break;case 22:a.prev=22,a.t0=a.catch(0),j(!1),O("Unable to connect to host");case 26:case"end":return a.stop()}}),a,null,[[0,22]])})));return function(e){return a.apply(this,arguments)}}(),[e,d.b,t,w]),P=Object(r.useCallback)((function(){e(Object(h.c)(null)),e(Object(h.d)(null))}),[e]);return Object(_.jsxs)("div",{className:"auth-form-container",children:[Object(_.jsx)("p",{className:"auth-form-container-title",children:"Invitation Code"}),Object(_.jsxs)("form",{className:"auth-form",onSubmit:y,children:[i?Object(_.jsx)(x.a,{fullScreen:!0,overlay:!0}):null,Object(_.jsx)("input",{type:"text",name:"inviteCode",placeholder:"Enter your invitation code",value:w,onChange:C,className:f()({"input-field":!0,"input-field-error":!!m})}),m?Object(_.jsx)("p",{className:"error-container",children:m}):null,Object(_.jsx)("button",{className:"submit-btn",type:"submit",children:"Connect"}),Object(_.jsx)("p",{className:"inline-link",onClick:P,children:"Choose another method"})]})]})},W=a(574),q=function(){var e=Object(s.c)(),t=Object(r.useState)(),a=Object(l.a)(t,2),n=(a[0],a[1]),i=Object(r.useState)(!1),b=Object(l.a)(i,2),j=b[0],p=b[1],f=Object(r.useCallback)(function(){var t=Object(o.a)(c.a.mark((function t(a,n){var o,l,r;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,console.log("connectHostIP:",a),o=a.replace(/^http(s)?:\/\//gi,""),t.next=5,Object(d.c)("".concat(o,":").concat(n))(e);case 5:return l=t.sent,r=l.withProtocolHostIP,Object(u.a)(r),t.abrupt("return",!0);case 11:return t.prev=11,t.t0=t.catch(0),t.abrupt("return",!1);case 14:case"end":return t.stop()}}),t,null,[[0,11]])})));return function(e,a){return t.apply(this,arguments)}}(),[e]),g=Object(r.useCallback)(function(){var e=Object(o.a)(c.a.mark((function e(t){var a,o,l,r;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,t){e.next=3;break}return e.abrupt("return");case 3:return p(!0),console.log("Scanned Code:",t),n(null),a=JSON.parse(t.text),o=a.internalIP,l=a.externalIP,r=a.walletPort,e.next=9,f(o,r);case 9:if(!e.sent){e.next=13;break}return p(!1),e.abrupt("return",!0);case 13:return e.next=15,f(l,r);case 15:if(!e.sent){e.next=19;break}return p(!1),e.abrupt("return",!0);case 19:n("Unable to connect to host, please ensure that your ShockWizard node is up and fully synced to the blockchain."),e.next=27;break;case 22:e.prev=22,e.t0=e.catch(0),p(!1),console.error(e.t0),n(e.t0.message);case 27:case"end":return e.stop()}}),e,null,[[0,22]])})));return function(t){return e.apply(this,arguments)}}(),[f]),m=Object(r.useCallback)((function(e){console.error(e),n("Unable to detect a camera, please make sure that the Camera permission is allowed in order to be able to scan QR Codes")}),[]),O=Object(r.useCallback)((function(){e(Object(h.c)(null)),e(Object(h.d)(null))}),[e]);return Object(_.jsxs)("div",{className:"auth-form-container",children:[j?Object(_.jsx)(x.a,{fullScreen:!0,overlay:!0,text:"Loading Host..."}):null,Object(_.jsx)(W.a,{mode:"wizard",onScan:g,onError:m,onClose:O})]})};a(648),t.default=function(){var e=Object(s.c)(),t=Object(s.d)((function(e){return e.node.hostIP})),a=Object(r.useState)(!!t),n=Object(l.a)(a,2),p=n[0],f=n[1],g=Object(r.useState)(null),m=Object(l.a)(g,2),x=m[0],v=m[1],N=Object(s.d)((function(e){return e.node.authTokenExpirationDate})),S=Object(s.d)((function(e){return e.node.authToken})),z=Object(s.d)((function(e){return e.auth.authStep})),W=Object(s.d)((function(e){return e.auth.authMethod})),E=Object(r.useCallback)((function(){v(null),e(Object(h.d)("host"))}),[v,e]),I=Object(r.useMemo)((function(){return"manual"===W&&"host"===z?Object(_.jsx)(O,{}):"shockWizard"===W&&"scan"===z?Object(_.jsx)(q,{}):"shockCloud"===W&&"inviteCode"===z?Object(_.jsx)(P,{}):"unlockWallet"===z||"gunAuth"===z?Object(_.jsx)(k,{}):"createWallet"===z?Object(_.jsx)(w,{}):Object(_.jsx)(y,{})}),[z,W]),U=Object(r.useCallback)(Object(o.a)(c.a.mark((function a(){var n,o,l,r;return c.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(a.prev=0,!t){a.next=25;break}return console.log("Loading cached node IP"),a.next=5,Object(d.c)(t,!1)(e);case 5:if(!!a.sent&&f(!1),!(S&&i.DateTime.fromSeconds(N).diffNow().milliseconds>0)){a.next=24;break}return f(!0),a.next=11,b.a.get("/api/gun/auth");case 11:if(n=a.sent,(o=n.data).data){a.next=19;break}return a.next=16,b.a.get("/api/lnd/wallet/status");case 16:l=a.sent,r=l.data,console.log(r);case 19:return Object(h.d)("unlockWallet"),Object(u.a)(t),f(!1),e(Object(h.e)(o.data)),a.abrupt("return");case 24:S&&(f(!0),Object(h.d)("unlockWallet"),f(!1));case 25:a.next=31;break;case 27:a.prev=27,a.t0=a.catch(0),v("Unable to connect to cached Node IP, make sure ShockAPI is up and running on your machine"),f(!1);case 31:case"end":return a.stop()}}),a,null,[[0,27]])}))),[t,e,S,N]);return Object(r.useEffect)((function(){U()}),[U]),Object(_.jsxs)(j.a,{disableNav:!0,contentClassName:"auth-page-content",onBack:E,showBackBtn:!!x,children:[Object(_.jsx)(C,{}),p&&Object(_.jsx)("span",{children:"Loading..."}),x&&Object(_.jsxs)("span",{children:["There was an error: ",x]}),!p&&!x&&I]})}}}]);
//# sourceMappingURL=17.e0aead36.chunk.js.map