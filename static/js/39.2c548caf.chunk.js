(this["webpackJsonpshocknet-pwa"]=this["webpackJsonpshocknet-pwa"]||[]).push([[39],{802:function(e,t,a){"use strict";a.r(t);var c=a(3),n=a.n(c),s=a(5),i=a(13),o=a(0),l=a(19),d=a(803),f=a.n(d),r=a(650),u=a(807),b=a.n(u),j=a(47),p=a(183),v=(a(810),a(32)),m=a(4);t.default=function(e){var t=e.publicKey,a=e.tipData,c=e.toggleOpen,d=Object(l.useDispatch)(),u=Object(l.useSelector)((function(e){return e.guest.user})),O=Object(l.useSelector)((function(e){var t;return null===(t=e.guest.paymentRequest)||void 0===t?void 0:t.response})),h=Object(o.useState)(!1),x=Object(i.a)(h,2),N=x[0],g=x[1],y=Object(o.useState)("10"),k=Object(i.a)(y,2),C=k[0],I=k[1],w=Object(o.useState)(!1),S=Object(i.a)(w,2),T=S[0],P=S[1],q=Object(o.useState)(""),E=Object(i.a)(q,2),R=E[0],D=E[1],V=Object(o.useState)(!1),A=Object(i.a)(V,2),J=A[0],K=A[1],Y=Object(o.useCallback)((function(){P(!0),r.a.rebuild();var e=setTimeout((function(){P(!1),r.a.rebuild()}),500);return function(){clearTimeout(e)}}),[]),z=Object(o.useCallback)(Object(s.a)(n.a.mark((function e(){var c,s;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,g(!0),e.next=4,d(Object(j.d)({senderPair:u,recipientPublicKey:t,amount:parseFloat(C),metadata:{targetType:"tip",ackInfo:a.postID}}));case 4:c=e.sent,s=c.ackNode,g(!1),s&&D(s),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.error(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])}))),[d,u,t,C,a.postID]);Object(o.useEffect)((function(){R&&Object(v.e)({query:"".concat(t,"::orderToResponse/").concat(R,"::on")}).then((function(){return Object(v.e)({query:"".concat(t,"::orderToResponse/").concat(R)})})).then((function(e){"orderAck"===e.type&&K(!0)}))}),[R,t,K]);var B=Object(o.useCallback)((function(){c()}),[c]),F="";return O&&(F="paymentRequest"),J&&(F="done"),Object(m.jsxs)("div",{className:"tip-modal","data-v-f6f8efec":"",children:[N?Object(m.jsx)("div",{className:"tip-modal-loading","data-v-f6f8efec":"",children:Object(m.jsx)(p.a,{text:"Submitting Tip Request...",style:{marginBottom:0},"data-v-f6f8efec":""})}):null,Object(m.jsx)("div",{className:"tip-modal-head","data-v-f6f8efec":"",children:Object(m.jsx)("div",{className:"tip-modal-title","data-v-f6f8efec":"",children:"Send Tip"})}),""===F&&Object(m.jsxs)("div",{className:"tip-modal-content","data-v-f6f8efec":"",children:[Object(m.jsx)("p",{className:"tip-modal-instructions","data-v-f6f8efec":"",children:"Please specify the amount of sats you'd like to tip this user with below and we'll generate an invoice for you to scan."}),Object(m.jsx)("input",{className:"tip-modal-input",value:C,onChange:function(e){return I(e.target.value)},"data-v-f6f8efec":""})]}),"paymentRequest"===F&&Object(m.jsxs)("div",{className:"tip-modal-content","data-v-f6f8efec":"",children:[Object(m.jsx)("p",{className:"tip-modal-instructions","data-v-f6f8efec":"",children:"We've successfully generated an invoice for you to tip, please scan the QR Code below using a Lightning wallet to pay it!"}),Object(m.jsx)("div",{className:"tip-modal-qr-code-container","data-v-f6f8efec":"",children:Object(m.jsx)(b.a,{value:O,size:210,bgColor:"#4db1ff",fgColor:"#1b2129","data-v-f6f8efec":""})}),Object(m.jsxs)("div",{className:"tip-modal-action-btns","data-v-f6f8efec":"",children:[Object(m.jsx)("a",{href:"lightning:".concat(O),className:"tip-modal-action-btn","data-v-f6f8efec":"",children:"PAY INVOICE"}),Object(m.jsx)(f.a,{text:O,onCopy:Y,"data-v-f6f8efec":"",children:Object(m.jsx)("div",{className:"tip-modal-action-btn","data-v-f6f8efec":"",children:T?"INVOICE COPIED!":"COPY INVOICE"})})]})]}),"done"===F&&Object(m.jsx)("div",{className:"tip-modal-footer",onClick:B,"data-v-f6f8efec":"",children:Object(m.jsx)("div",{className:"tip-modal-submit","data-v-f6f8efec":"",children:"TIP SENT!"})}),""===F&&Object(m.jsx)("div",{className:"tip-modal-footer",onClick:z,"data-v-f6f8efec":"",children:Object(m.jsx)("div",{className:"tip-modal-submit","data-v-f6f8efec":"",children:"SEND TIP"})})]})}},810:function(e,t,a){}}]);
//# sourceMappingURL=39.2c548caf.chunk.js.map