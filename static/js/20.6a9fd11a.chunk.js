(this["webpackJsonpshocknet-pwa"]=this["webpackJsonpshocknet-pwa"]||[]).push([[20],{483:function(e,t,a){"use strict";var s=a(3),c=a(72),n=a.n(c),i=(a(489),a(7)),r=function(e){var t=e.children,a=e.style;return Object(i.jsx)("div",{className:"content",style:a,"data-v-2d47ec9c":"",children:t})},l=(a(490),function(e){var t=e.title,a=e.toggleModal;return t?Object(i.jsxs)("div",{className:"head","data-v-f1fed9ef":"",children:[Object(i.jsx)("p",{className:"head-title","data-v-f1fed9ef":"",children:t}),Object(i.jsx)("div",{className:"head-close",onClick:a,"data-v-f1fed9ef":"",children:Object(i.jsx)("i",{className:"fas fa-times","data-v-f1fed9ef":""})})]}):null});a(491),t.a=function(e){var t=e.modalOpen,a=void 0!==t&&t,c=e.toggleModal,d=e.modalTitle,o=void 0===d?"":d,u=e.children,b=e.contentStyle,v=void 0===b?{}:b,j=Object(s.useCallback)((function(){c()}),[c]);return Object(i.jsxs)("div",{className:n()({modal:!0,open:a}),"data-v-f13c32fb":"",children:[Object(i.jsx)("div",{className:"backdrop",onClick:j,"data-v-f13c32fb":""}),Object(i.jsxs)("div",{className:"container","data-v-f13c32fb":"",children:[Object(i.jsx)(l,{title:o,toggleModal:j,"data-v-f13c32fb":""}),Object(i.jsx)(r,{style:v,"data-v-f13c32fb":"",children:u})]})]})}},489:function(e,t,a){},490:function(e,t,a){},491:function(e,t,a){},495:function(e,t,a){"use strict";var s=a(52),c=a(7);t.a=function(){return Object(c.jsxs)("div",{className:"bottom-nav-container",children:[Object(c.jsx)(s.c,{className:"bottom-nav-btn",to:"/overview",activeClassName:"active-nav-btn",children:Object(c.jsx)("i",{className:"bottom-nav-btn-icon icon-thin-wallet"})}),Object(c.jsx)(s.c,{className:"bottom-nav-btn",to:"/chat",activeClassName:"active-nav-btn",children:Object(c.jsx)("i",{className:"bottom-nav-btn-icon icon-thin-chat"})}),Object(c.jsx)(s.c,{className:"bottom-nav-btn",to:"/profile",activeClassName:"active-nav-btn",children:Object(c.jsx)("i",{className:"bottom-nav-btn-icon icon-thin-profile"})}),Object(c.jsx)(s.c,{className:"bottom-nav-btn",to:"/feed",activeClassName:"active-nav-btn",children:Object(c.jsx)("i",{className:"bottom-nav-btn-icon icon-thin-feed"})})]})}},500:function(e,t,a){"use strict";var s=a(16),c=a(3),n=a(72),i=a.n(n),r=(a(505),a(7));t.a=function(e){var t=e.label,a=void 0===t?null:t,n=e.icon,l=void 0===n?null:n,d=e.iconURL,o=void 0===d?null:d,u=e.onClick,b=void 0===u?void 0:u,v=e.nestedMode,j=void 0!==v&&v,f=e.large,m=void 0!==f&&f,h=e.small,O=void 0!==h&&h,p=e.relative,x=void 0!==p&&p,N=e.children,g=void 0===N?null:N,k=e.style,y=void 0===k?{}:k,q=Object(c.useState)(!1),S=Object(s.a)(q,2),w=S[0],C=S[1],R=Object(c.useCallback)((function(){j&&C(!w)}),[w,j]),E=Object(c.useMemo)((function(){return o?Object(r.jsx)("img",{src:o,className:"add-btn-icon",alt:"","data-v-14974ffe":""}):Object(r.jsx)("i",{className:"fas fa-".concat(null!==l&&void 0!==l?l:"plus"),"data-v-14974ffe":""})}),[l,o]),K=Object(c.useMemo)((function(){return a?Object(r.jsx)("p",{className:"add-btn-label","data-v-14974ffe":"",children:a}):null}),[a]);return Object(r.jsxs)("div",{className:i()({"add-btn-container":!0,"add-btn-round-container":!a,"add-btn-large":m,"add-btn-small":O}),"data-v-14974ffe":"",children:[Object(r.jsxs)("div",{className:i()({"add-btn":!0,"add-btn-round":!a,"add-btn-extended":!!a,"add-btn-relative":x,"add-btn-open":w,"add-btn-nested":j}),onClick:null!==b&&void 0!==b?b:R,style:y,"data-v-14974ffe":"",children:[E,K]}),g?Object(r.jsx)("div",{className:i()({"add-btn-options":!0,"add-btn-options-open":w}),"data-v-14974ffe":"",children:g}):null]})}},505:function(e,t,a){},617:function(e,t,a){},618:function(e,t,a){},619:function(e,t,a){},765:function(e,t,a){"use strict";a.r(t);var s=a(21),c=a(2),n=a.n(c),i=a(6),r=a(16),l=a(3),d=a(40),o=a(112),u=a(24),b=a(49),v=a(495),j=a(52),f=a(496),m={height:"55px",width:"55px"},h=a(18),O=(a(617),a(20)),p=a(7),x=function(e){var t=e.subtitle,a=void 0===t?"":t,s=e.time,c=e.publicKey,n=e.chatLoaded,i=void 0!==n&&n,r=Object(d.b)(),o=h.useSelector((function(e){return e.node.publicKey})),b=h.useSelector(h.selectUser(c)),v=Object(l.useCallback)((function(){var e=r(Object(u.h)(o,c));return Object(O.f)(e)}),[r,o,c]);return Object(l.useEffect)((function(){if(i)return v()}),[v,c,i]),Object(p.jsxs)(j.b,{to:"/chat/".concat(c),className:"message-container","data-v-56241d60":"",children:[Object(p.jsxs)("div",{className:"message-author-container","data-v-56241d60":"",children:[Object(p.jsx)("div",{className:"message-author-avatar",style:m,"data-v-56241d60":"",children:Object(p.jsx)(f.a,{publicKey:c,height:55,"data-v-56241d60":""})}),Object(p.jsxs)("div",{className:"message-author-details","data-v-56241d60":"",children:[Object(p.jsx)("p",{className:"message-author-username","data-v-56241d60":"",children:b.displayName}),Object(p.jsx)("p",{className:"message-author-text","data-v-56241d60":"",children:a})]})]}),Object(p.jsx)("p",{className:"message-timestamp","data-v-56241d60":"",children:s})]})},N=(a(618),function(e){var t=e.publicKey,a=void 0===t?"":t,s=e.time,c=e.sent,n=h.useSelector(h.selectUser(a));return Object(p.jsxs)(j.b,{to:"/chat/".concat(a),className:"request-container","data-v-aa31ab40":"",children:[Object(p.jsxs)("div",{className:"request-author-container","data-v-aa31ab40":"",children:[Object(p.jsx)("div",{className:"request-author-avatar",style:m,"data-v-aa31ab40":"",children:Object(p.jsx)(f.a,{publicKey:a,height:55,"data-v-aa31ab40":""})}),Object(p.jsxs)("div",{className:"request-author-details","data-v-aa31ab40":"",children:[Object(p.jsxs)("p",{className:"request-author-username","data-v-aa31ab40":"",children:[c?"Sent Request":"Received Request"," - ",n.displayName]}),Object(p.jsx)("p",{className:"request-author-text","data-v-aa31ab40":"",children:"Request pending acceptance..."})]})]}),Object(p.jsx)("p",{className:"request-timestamp","data-v-aa31ab40":"",children:s})]})}),g=a(504),k=a(500),y=a(150),q=a(66),S=(a(619),a(483));t.default=function(){var e=Object(d.b)(),t=Object(l.useState)(!1),a=Object(r.a)(t,2),c=a[0],j=a[1],f=Object(l.useState)(""),m=Object(r.a)(f,2),O=m[0],w=m[1],C=Object(l.useState)(!1),R=Object(r.a)(C,2),E=R[0],K=R[1],M=Object(l.useState)(!1),T=Object(r.a)(M,2),A=T[0],U=T[1],P=h.useSelector((function(e){return e.chat.contacts})),D=h.useSelector((function(e){return e.chat.messages})),L=h.useSelector((function(e){return e.chat.sentRequests})),Q=h.useSelector((function(e){return e.chat.receivedRequests})),I=Object(l.useCallback)(Object(i.a)(n.a.mark((function t(){return n.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e(Object(u.c)());case 2:U(!0);case 3:case"end":return t.stop()}}),t)}))),[e]);Object(l.useEffect)((function(){I()}),[I]),Object(l.useEffect)((function(){var t=[].concat(Object(s.a)(P),Object(s.a)(L),Object(s.a)(Q)).map((function(t){return e(Object(b.b)(t.pk))}));return function(){t.map((function(e){return e()}))}}),[P,L,Q,e]);var J=Object(l.useCallback)((function(){j(!c)}),[c]),z=Object(l.useCallback)(function(){var t=Object(i.a)(n.a.mark((function t(a){var s;return n.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,w(null),K(!0),null===(s=(c=a).startsWith("http")?c.split("/").slice(-1)[0]:c)||void 0===s?void 0:s.length){t.next=6;break}throw new q.a({field:"publicKey",message:"Please specify a public key"});case 6:if(/^[0-9A-Za-z\-_.+/]+[=]{0,3}/.test(s)){t.next=8;break}throw new q.a({field:"publicKey",message:"Invalid public key format specified"});case 8:return t.next=10,e(Object(u.f)(a));case 10:return j(!1),t.abrupt("return");case 14:if(t.prev=14,t.t0=t.catch(0),!(t.t0 instanceof q.a)){t.next=19;break}return w(t.t0.message),t.abrupt("return");case 19:console.error(t.t0),w("An unknown error has occurred");case 21:return t.prev=21,K(!1),t.finish(21);case 24:case"end":return t.stop()}var c}),t,null,[[0,14,21,24]])})));return function(e){return t.apply(this,arguments)}}(),[e]),B=Object(l.useCallback)(Object(i.a)(n.a.mark((function e(){var t;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,navigator.clipboard.readText();case 3:return t=e.sent,e.abrupt("return",z(t));case 7:e.prev=7,e.t0=e.catch(0),alert(e.t0.message);case 10:case"end":return e.stop()}}),e,null,[[0,7]])}))),[z]);return Object(p.jsxs)("div",{className:"page-container messages-page","data-v-9f392550":"",children:[Object(p.jsx)(g.a,{solid:!0,pageTitle:"MESSAGES","data-v-9f392550":""}),Object(p.jsxs)("div",{className:"messages-container","data-v-9f392550":"",children:[Object(p.jsxs)("div",{className:"message-list-container","data-v-9f392550":"",children:[L.length>0?Object(p.jsx)("p",{className:"messages-section-title","data-v-9f392550":"",children:"Sent Requests"}):null,L.map((function(e){return Object(p.jsx)(N,{publicKey:e.pk,sent:!0,time:void 0,"data-v-9f392550":""},e.pk)})),Q.length>0?Object(p.jsx)("p",{className:"messages-section-title","data-v-9f392550":"",children:"Received Requests"}):null,Q.map((function(e){return Object(p.jsx)(N,{publicKey:e.pk,sent:!1,time:void 0,"data-v-9f392550":""},e.pk)})),P.length>0?Object(p.jsx)("p",{className:"messages-section-title","data-v-9f392550":"",children:"Messages"}):null,P.map((function(e){var t,a,s=null!==(a=(null!==(t=D[e.pk])&&void 0!==t?t:[])[0])&&void 0!==a?a:{body:"Unable to preview last message...",timestamp:Date.now()};return Object(p.jsx)(x,{publicKey:e.pk,subtitle:s.body,time:o.DateTime.fromMillis(s.timestamp).toRelative(),chatLoaded:A,"data-v-9f392550":""},e.pk)}))]}),Object(p.jsx)(k.a,{onClick:J,label:"REQUEST","data-v-9f392550":""}),Object(p.jsxs)(S.a,{modalTitle:"SEND REQUEST",toggleModal:J,modalOpen:c,"data-v-9f392550":"",children:[E?Object(p.jsx)(y.a,{text:"Sending Request...",overlay:!0,style:{borderRadius:"0 0 15px 15px"},"data-v-9f392550":""}):null,O?Object(p.jsx)("div",{className:"send-request-error","data-v-9f392550":"",children:O}):null,Object(p.jsxs)("div",{className:"send-request-cards","data-v-9f392550":"",children:[Object(p.jsxs)("div",{className:"send-request-card",onClick:z,"data-v-9f392550":"",children:[Object(p.jsx)("i",{className:"send-request-card-icon fas fa-qrcode","data-v-9f392550":""}),Object(p.jsx)("p",{className:"send-request-card-title","data-v-9f392550":"",children:"SCAN QR"}),Object(p.jsx)("p",{className:"send-request-card-desc","data-v-9f392550":"",children:"Scan another users QR to send a message request."})]}),Object(p.jsxs)("div",{className:"send-request-card",onClick:B,"data-v-9f392550":"",children:[Object(p.jsx)("i",{className:"send-request-card-icon fas fa-clipboard","data-v-9f392550":""}),Object(p.jsx)("p",{className:"send-request-card-title","data-v-9f392550":"",children:"PASTE CLIPBOARD"}),Object(p.jsx)("p",{className:"send-request-card-desc","data-v-9f392550":"",children:"Paste another users Public Key to send a message request."})]})]})]})]}),Object(p.jsx)(v.a,{"data-v-9f392550":""})]})}}}]);
//# sourceMappingURL=20.6a9fd11a.chunk.js.map