(this["webpackJsonpshocknet-pwa"]=this["webpackJsonpshocknet-pwa"]||[]).push([[42],{891:function(e,t,a){"use strict";a.r(t);var c=a(3),n=a.n(c),s=a(5),i=a(13),o=a(1),l=a(19),d=a(892),r=a.n(d),u=a(631),b=a(896),j=a.n(b),p=a(47),v=a(183),m=(a(899),a(32)),O=a(4);t.default=function(e){var t=e.publicKey,a=e.tipData,c=e.toggleOpen,d=Object(l.useDispatch)(),b=Object(l.useSelector)((function(e){return e.guest.user})),h=Object(l.useSelector)((function(e){var t;return null===(t=e.guest.paymentRequest)||void 0===t?void 0:t.response})),f=Object(o.useState)(!1),x=Object(i.a)(f,2),N=x[0],g=x[1],y=Object(o.useState)("10"),k=Object(i.a)(y,2),C=k[0],I=k[1],w=Object(o.useState)(!1),S=Object(i.a)(w,2),T=S[0],P=S[1],q=Object(o.useState)(""),E=Object(i.a)(q,2),R=E[0],D=E[1],V=Object(o.useState)(!1),A=Object(i.a)(V,2),J=A[0],K=A[1],Y=Object(o.useCallback)((function(){P(!0),u.a.rebuild();var e=setTimeout((function(){P(!1),u.a.rebuild()}),500);return function(){clearTimeout(e)}}),[]),z=Object(o.useCallback)(Object(s.a)(n.a.mark((function e(){var c,s;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,g(!0),e.next=4,d(Object(p.d)({senderPair:b,recipientPublicKey:t,amount:parseFloat(C),metadata:{targetType:"tip",ackInfo:a.postID}}));case 4:c=e.sent,s=c.ackNode,g(!1),s&&D(s),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.error(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])}))),[d,b,t,C,a.postID]);Object(o.useEffect)((function(){R&&Object(m.e)({query:"".concat(t,"::orderToResponse/").concat(R,"::on")}).then((function(){return Object(m.e)({query:"".concat(t,"::orderToResponse/").concat(R)})})).then((function(e){"orderAck"===e.type&&K(!0)}))}),[R,t,K]);var B=Object(o.useCallback)((function(){c()}),[c]),F="";return h&&(F="paymentRequest"),J&&(F="done"),Object(O.jsxs)("div",{className:"tip-modal","data-v-89828c55":"",children:[N?Object(O.jsx)("div",{className:"tip-modal-loading","data-v-89828c55":"",children:Object(O.jsx)(v.a,{text:"Submitting Tip Request...",style:{marginBottom:0},"data-v-89828c55":""})}):null,Object(O.jsx)("div",{className:"tip-modal-head","data-v-89828c55":"",children:Object(O.jsx)("div",{className:"tip-modal-title","data-v-89828c55":"",children:"Send Tip"})}),""===F&&Object(O.jsxs)("div",{className:"tip-modal-content","data-v-89828c55":"",children:[Object(O.jsx)("p",{className:"tip-modal-instructions","data-v-89828c55":"",children:"Please specify the amount of sats you'd like to tip this user with below and we'll generate an invoice for you to scan."}),Object(O.jsx)("input",{className:"tip-modal-input",value:C,onChange:function(e){return I(e.target.value)},"data-v-89828c55":""})]}),"paymentRequest"===F&&Object(O.jsxs)("div",{className:"tip-modal-content","data-v-89828c55":"",children:[Object(O.jsx)("p",{className:"tip-modal-instructions","data-v-89828c55":"",children:"We've successfully generated an invoice for you to tip, please scan the QR Code below using a Lightning wallet to pay it!"}),Object(O.jsx)("div",{className:"tip-modal-qr-code-container","data-v-89828c55":"",children:Object(O.jsx)(j.a,{value:h,size:210,bgColor:"#4db1ff",fgColor:"#1b2129","data-v-89828c55":""})}),Object(O.jsxs)("div",{className:"tip-modal-action-btns","data-v-89828c55":"",children:[Object(O.jsx)("a",{href:"lightning:".concat(h),className:"tip-modal-action-btn","data-v-89828c55":"",children:"PAY INVOICE"}),Object(O.jsx)(r.a,{text:h,onCopy:Y,"data-v-89828c55":"",children:Object(O.jsx)("div",{className:"tip-modal-action-btn","data-v-89828c55":"",children:T?"INVOICE COPIED!":"COPY INVOICE"})})]})]}),"done"===F&&Object(O.jsx)("div",{className:"tip-modal-footer",onClick:B,"data-v-89828c55":"",children:Object(O.jsx)("div",{className:"tip-modal-submit","data-v-89828c55":"",children:"TIP SENT!"})}),""===F&&Object(O.jsx)("div",{className:"tip-modal-footer",onClick:z,"data-v-89828c55":"",children:Object(O.jsx)("div",{className:"tip-modal-submit","data-v-89828c55":"",children:"SEND TIP"})})]})}},899:function(e,t,a){}}]);
//# sourceMappingURL=42.d8048cf2.chunk.js.map