{"version":3,"sources":["pages/MoonPay/index.jsx"],"names":["ProfilePage","useState","src","setSrc","useEffect","Http","post","type","then","res","data","originalUrl","address","fetch","method","headers","body","JSON","stringify","json","urlWithSignature","console","log","catch","e","className","pageTitle","enableBackButton","width","height"],"mappings":"sMA4CeA,UApCK,WAAO,IAAD,EACHC,mBAAS,IADN,mBACjBC,EADiB,KACbC,EADa,KA8BxB,OA3BAC,qBAAU,WACRC,IAAKC,KAAK,sBAAuB,CAC/BC,KAAM,UAEPC,MAAK,SAAAC,GAAQ,IACJC,EAASD,EAATC,KACFC,EAAW,iDAZL,2CAYK,2CAAyFD,EAAKE,SAC/G,OAAOC,MAda,uCAcW,CAC7BC,OAAQ,OACRC,QAAS,CACP,eAAgB,oBAElBC,KAAKC,KAAKC,UAAU,CAACP,qBAGxBH,MAAK,SAAAC,GAAG,OAAIA,EAAIU,UAChBX,MAAK,SAAAW,GACDA,EAAKC,mBACNjB,EAAOgB,EAAKC,kBACZC,QAAQC,IAAI,yBAAyBH,EAAKC,sBAG7CG,OAAM,SAAAC,GACLH,QAAQC,IAAI,sCACZD,QAAQC,IAAIE,QAEd,IACK,sBAAKC,UAAU,mBAAf,UACL,cAAC,IAAD,CAASC,UAAU,UAAUC,kBAAkB,IAC/C,wBAAQC,MAAM,OAAOC,OAAO,OAAO3B,IAAKA","file":"static/js/30.40027999.chunk.js","sourcesContent":["import { useEffect, useState } from \"react\";\nimport MainNav from \"../../common/MainNav\";\nimport \"./css/index.css\";\nimport Http from \"../../utils/Http\";\nconst signingServiceUrl = 'https://moon-sign.shock.network/sign'\nconst apiPubKey = 'pk_test_C8jSPDtsKQqXwP7nkScpqZI5tsaOiQPH'\n\n\nconst ProfilePage = () => {\n  const [src,setSrc] = useState('')\n\n  useEffect(() => {\n    Http.post(\"/api/lnd/newaddress\", {\n      type: \"p2wkh\"\n    })\n    .then(res => {\n      const { data } = res\n      const originalUrl = `https://buy-staging.moonpay.io/?apiKey=${apiPubKey}&currencyCode=btc&walletAddress=${data.address}`\n      return fetch(signingServiceUrl,{\n        method: 'post',\n        headers: {\n          \"Content-type\": \"application/json\"\n        },\n        body:JSON.stringify({originalUrl})\n      })\n    })\n    .then(res => res.json())\n    .then(json =>{\n      if(json.urlWithSignature){\n        setSrc(json.urlWithSignature)\n        console.log(\"MOONPAY SIGNATURE DONE\"+json.urlWithSignature)\n      }\n    })\n    .catch(e => {\n      console.log('Error generating MoonPay signature')\n      console.log(e)\n    })\n  },[])\n  return <div className='moonPayContainer'>\n    <MainNav pageTitle='MOONPAY' enableBackButton={true} />\n    <iframe width='100%' height='100%' src={src}>\n    </iframe></div>\n};\n\nexport default ProfilePage;\n"],"sourceRoot":""}