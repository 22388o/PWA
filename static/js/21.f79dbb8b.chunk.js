(this["webpackJsonpshocknet-pwa"]=this["webpackJsonpshocknet-pwa"]||[]).push([[21,41],{615:function(e,t,c){"use strict";var n=c(1),a=c(13),r=c(0),i=c(922),o=c(186),s=(c(639),c(623),c(4)),l=function(e){var t=e.id,c=void 0===t?"":t,l=e.item,d=e.index,b=void 0===d?0:d,u=e.postId,j=void 0===u?"":u,p=e.tipValue,O=void 0===p?0:p,f=e.tipCounter,h=void 0===f?0:f,v=e.hideRibbon,m=void 0!==v&&v,x=e.width,g=void 0===x?null:x,_=e.disableZoom,C=void 0!==_&&_,y=e.style,S=void 0===y?{}:y,k=Object(r.useState)(!1),N=Object(a.a)(k,2),w=N[0],U=N[1],P=Object(r.useState)(!1),D=Object(a.a)(P,2),T=D[0],q=D[1],I=Object(r.useState)(!0),B=Object(a.a)(I,2),M=B[0],E=B[1],R=Object(r.useState)(null),K=Object(a.a)(R,2),F=K[0],L=K[1],z=Object(r.useCallback)((function(e){if(clearTimeout(F),U(e),!e&&T){q(!1);var t=setTimeout((function(){E(!0)}),200);L(t)}e&&E(!1)}),[F,T,U,q,E,L]),W=decodeURIComponent(l.magnetURI.replace(/.*(ws=)/gi,"")),Y=Object(n.a)(Object(n.a)({},S),{},{opacity:M?1:0});g&&(Y.width=g);var J=Object(s.jsxs)(s.Fragment,{children:[Object(s.jsx)("img",{className:"image torrent-img torrent-img-".concat(j,"-").concat(c),alt:"Post Media","data-torrent":l.magnetURI,"data-file-key":b,style:Y,src:W,"data-v-dda523a1":""}),Object(s.jsx)("img",{className:"image enlarged-img enlarged-img-".concat(j,"-").concat(c),alt:"Post Media","data-file-key":b,onLoad:function(){q(!0)},style:{opacity:w?1:0,display:w?"block":"none"},src:W,"data-v-dda523a1":""}),!m&&Object(s.jsx)(o.a,{tipCounter:h,tipValue:O,zoomed:w,"data-v-dda523a1":""})]});return Object(s.jsx)("div",{className:"media-container","data-v-dda523a1":"",children:C?J:Object(s.jsx)(i.a,{isZoomed:w,onZoomChange:z,overlayBgColorStart:"#16191c00",overlayBgColorEnd:"#16191c","data-v-dda523a1":"",children:J})})};t.a=Object(r.memo)(l)},623:function(e,t,c){},630:function(e,t,c){"use strict";var n=c(0),a=c(4),r=function(e){var t=e.color,c=e.length,r=e.type,i=e.width,o=Object(n.useMemo)((function(){return"vertical"===r?{borderLeftStyle:"solid",borderLeftWidth:"".concat(i/2,"px"),borderLeftColor:t,borderRightStyle:"solid",borderRightWidth:"".concat(i/2,"px"),borderRightColor:t,height:c}:"horizontal"===r?{borderTopStyle:"solid",borderTopWidth:i/2,borderTopColor:t,borderBottomStyle:"solid",borderBottomWidth:i/2,borderBottomColor:t,width:c}:{}}),[t,c,r,i]);return Object(a.jsx)("div",{style:o})};t.a=Object(n.memo)(r)},667:function(e,t,c){"use strict";var n=c(0),a=c(88),r=c.n(a),i=c(608),o=c(630),s=c(668),l=c.n(s),d=c(4),b=function(e){var t=e.onChange,c=e.selected,n=e.showContentBtn;return Object(d.jsxs)("div",{className:r()(i.D,i.z,i.A,i.w,l.a.container),children:[Object(d.jsx)("span",{className:r()(i.C,"posts"===c?l.a.selected:l.a.unselected),onClick:function(){t("posts")},children:"Posts"}),Object(d.jsx)("div",{className:r()(i.a,n&&l.a["left-line"]),children:Object(d.jsx)(o.a,{color:"white",length:16,type:"vertical",width:2})}),Object(d.jsx)("span",{className:r()(i.C,"services"===c?l.a.selected:l.a.unselected),onClick:function(){t("services")},children:"Services"}),n&&Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)("div",{className:r()(i.a,l.a["right-line"]),children:Object(d.jsx)(o.a,{color:"white",length:16,type:"vertical",width:2})}),Object(d.jsx)("span",{className:r()(i.C,"content"===c?l.a.selected:l.a.unselected),onClick:function(){t("content")},children:"Content"})]})]})};t.a=Object(n.memo)(b)},668:function(e,t,c){e.exports={container:"ProfileDivider_container__3ob9k",selected:"ProfileDivider_selected__3U98y",unselected:"ProfileDivider_unselected__1Z_qd","left-line":"ProfileDivider_left-line__2xjlN","right-line":"ProfileDivider_right-line__1d2KH"}},669:function(e,t,c){"use strict";t.a=c.p+"static/media/clipboard.beb19e1e.svg"},670:function(e,t,c){"use strict";t.a=c.p+"static/media/qrcode.69103c6c.svg"},785:function(e,t,c){},786:function(e,t,c){},787:function(e,t,c){e.exports={"profile-page":"OtherUser_profile-page__OhC-_","profile-container":"OtherUser_profile-container__2oq7s","profile-cover":"OtherUser_profile-cover__3Fq6P","profile-info-container":"OtherUser_profile-info-container__3qnqN","profile-avatar":"OtherUser_profile-avatar__S6INq","profile-name":"OtherUser_profile-name__3chmC","profile-desc":"OtherUser_profile-desc__f9Dsj","config-btn":"OtherUser_config-btn__t33_B","config-btn-icon":"OtherUser_config-btn-icon__1p_6O","config-btn-text":"OtherUser_config-btn-text__1Wg_T","profile-choice-container":"OtherUser_profile-choice-container__3-xgF","profile-choice-icon":"OtherUser_profile-choice-icon__3iOE1","profile-choice-text":"OtherUser_profile-choice-text__deYLl","profile-qrcode":"OtherUser_profile-qrcode__2Ok54","profile-qrcode-desc":"OtherUser_profile-qrcode-desc__3cp0P","profile-clipboard-container":"OtherUser_profile-clipboard-container__1P_p8","profile-clipboard-icon":"OtherUser_profile-clipboard-icon__1nW2U","profile-clipboard-text":"OtherUser_profile-clipboard-text__2g4AC","publish-content-form":"OtherUser_publish-content-form__1YdVa","publish-content-title":"OtherUser_publish-content-title__3EsYE","publish-content-icon":"OtherUser_publish-content-icon__291ch","m-1":"OtherUser_m-1__1dpvP","content-container":"OtherUser_content-container__1lOOL"}},788:function(e,t,c){e.exports={container:"FollowBtn_container__2c7Cj",text:"FollowBtn_text__1o7CS"}},789:function(e,t,c){e.exports={container:"SendReqBtn_container__2nY4E",text:"SendReqBtn_text__2_2zC"}},911:function(e,t,c){"use strict";c.r(t);var n=c(49),a=c(1),r=c(13),i=c(0),o=c.n(i),s=c(661),l=c.n(s),d=c(26),b=c(88),u=c.n(b),j=c(9),p=c(81),O=c(15),f=c(68),h=c(628),v=c(629),m=c(610),x=c(183),g=c(609),_=c(667),C=c(607),y=c(28),S=c(46),k=c(7),N=c(615),w=(c(785),c(4)),U=function(e){var t=e.publicKey,c=Object(d.g)(),n=o.a.useState({}),a=Object(r.a)(n,2),i=a[0],s=a[1],l=o.a.useState(""),b=Object(r.a)(l,2),u=b[0],j=b[1];o.a.useEffect((function(){var e=Object(O.b)({query:"".concat(t,"::publishedContentPublic::map.on"),onError:function(e){j(JSON.stringify(e,null,4))},onData:function(e,c){s(Object(y.a)((function(n){S.e(e)?n[c]=e:k.g.warn("Invalid/incomplete public published content found for public key ...".concat(t.slice(-8),", might be due to pending replication or was deleted if null: ").concat(JSON.stringify(e,null,4)))})))}});return function(){e.then((function(e){return e.off()}))}}),[t]);var p=o.a.useMemo((function(){return Object.values(i).sort((function(e,t){return t.timestamp-e.timestamp}))}),[i]);return u?Object(w.jsx)("p",{"data-v-def4fb27":"",children:u}):Object(w.jsx)(w.Fragment,{children:p.map((function(e,t){return Object(w.jsxs)("div",{className:"item",onClick:function(){c.push("/item/".concat(e.author,"/").concat(e.id))},"data-v-def4fb27":"",children:["image/embedded"===e.type&&Object(w.jsx)("div",{style:P,"data-v-def4fb27":"",children:Object(w.jsx)(N.a,{disableZoom:!0,hideRibbon:!0,id:e.id,index:t,item:e,postId:null,tipCounter:null,tipValue:null,style:P,"data-v-def4fb27":""})}),"video/embedded"===e.type&&Object(w.jsx)("div",{className:"video-placeholder",style:P,"data-v-def4fb27":"",children:Object(w.jsx)("i",{className:"fas fa-video video-icon","data-v-def4fb27":""})}),Object(w.jsxs)("div",{className:"title-and-description","data-v-def4fb27":"",children:[Object(w.jsx)("h2",{className:"title","data-v-def4fb27":"",children:e.title}),Object(w.jsx)("p",{className:"description","data-v-def4fb27":"",children:e.description||" "}),Object(w.jsx)("span",{className:"timestamp","data-v-def4fb27":"",children:k.f(e.timestamp)})]})]},e.id)}))})},P={height:100,width:100,objectFit:"contain"},D=Object(i.memo)(U),T=c(687),q=c(669),I=c(670),B=c.p+"static/media/logo-alone-2.512c5854.png",M=c(684),E=c(686),R=c(3),K=c.n(R),F=c(5),L=c(38),z=c(650),W=c(117),Y=c(30),J=(c(786),function(e){var t=e.service,c=e.toggleOpen,n=Object(L.b)(),a=Object(i.useState)(""),o=Object(r.a)(a,2),s=o[0],l=o[1],d=Object(i.useState)(!1),b=Object(r.a)(d,2),u=b[0],j=b[1],p=Object(i.useState)(null),O=Object(r.a)(p,2),f=O[0],h=O[1],v=Object(i.useState)(!1),g=Object(r.a)(v,2),_=g[0],C=g[1],y=Object(i.useCallback)(function(){var e=Object(F.a)(K.a.mark((function e(c){var a,r,i,o,s,d,b,u,p;return K.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c.preventDefault(),e.prev=1,a=t.servicePrice,r=t.owner,i=t.serviceID,o=t.serviceType,r&&i&&"number"===typeof Number(a)){e.next=7;break}return console.error("invalid service provided"),console.error(t),e.abrupt("return");case 7:return j(!0),e.next=10,Object(W.b)(r,i,a)(n);case 10:s=e.sent,console.log(s),h(s),"torrentSeed"===o&&Object(Y.b)(s.seedUrl,s.tokens[0])(n),"streamSeed"===o&&Object(Y.e)(s.seedUrl,s.tokens[0])(n),e.next=21;break;case 17:e.prev=17,e.t0=e.catch(1),console.error(e.t0),t&&(u=e.t0.message,p=null===(d=e.t0.response)||void 0===d||null===(b=d.data)||void 0===b?void 0:b.errorMessage,l(null!==p&&void 0!==p?p:u));case 21:return e.prev=21,j(!1),e.finish(21);case 24:case"end":return e.stop()}}),e,null,[[1,17,21,24]])})));return function(t){return e.apply(this,arguments)}}(),[n,t]);Object(i.useEffect)((function(){t||(j(!1),l(null),h(null))}),[f,t]);var S=Object(i.useCallback)((function(){navigator.clipboard.writeText(JSON.stringify(f)),C(!0)}),[f,C]);return Object(w.jsx)(m.a,{toggleModal:c,modalOpen:!!t,modalTitle:"Buy Service","data-v-5282b4b9":"",children:f?Object(w.jsxs)("div",{className:"tip-modal-success","data-v-5282b4b9":"",children:[Object(w.jsx)("i",{className:"tip-success-icon fas fa-check-circle","data-v-5282b4b9":""}),Object(w.jsx)("p",{className:"tip-success-title","data-v-5282b4b9":"",children:"You successfully bought this service!"}),Object(w.jsx)("p",{"data-v-5282b4b9":"",children:JSON.stringify(f)}),Object(w.jsx)("button",{onClick:S,"data-v-5282b4b9":"",children:"COPY TO CLIPBOARD"}),_&&Object(w.jsx)("p",{"data-v-5282b4b9":"",children:"Copied!"})]}):Object(w.jsxs)("form",{className:"modal-form tip-form",onSubmit:y,"data-v-5282b4b9":"",children:[s?Object(w.jsx)("div",{className:"form-error","data-v-5282b4b9":"",children:s}):null,u?Object(w.jsx)(x.a,{overlay:!0,text:"Sending Tip...","data-v-5282b4b9":""}):null,Object(w.jsxs)("p",{className:"tip-modal-desc","data-v-5282b4b9":"",children:[t&&t.servicePrice," sats will be sent to the owner of the service provider"]}),Object(w.jsx)(z.a,{text:"BUY",onClick:y,"data-v-5282b4b9":""})]})})}),V=c(685),Z=c(19),A=c(608),H=c(787),G=c.n(H),Q=c(788),X=c.n(Q),$=c(47),ee=function(e){var t=e.publicKey,c=Object(k.n)(),n=Z.useSelector((function(e){return e.auth.authenticated})),a=!!Z.useSelector(Z.selectFollows).find((function(e){return e.user===t})),o=Object(i.useState)(!1),s=Object(r.a)(o,2),l=s[0],d=s[1],b=Object(i.useCallback)(Object(F.a)(K.a.mark((function e(){var c;return K.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!l){e.next=3;break}return e.abrupt("return");case 3:if(d(!0),c={status:-1,data:{errorMessage:""}},!a){e.next=11;break}return e.next=8,k.d.delete("/api/gun/follows/".concat(t));case 8:c=e.sent,e.next=14;break;case 11:return e.next=13,k.d.put("/api/gun/follows/".concat(t),{});case 13:c=e.sent;case 14:if(200===c.status){e.next=16;break}throw new Error(c.data.errorMessage);case 16:e.next=21;break;case 18:e.prev=18,e.t0=e.catch(0),a?alert("Could not unfollow: ".concat(e.t0.message)):alert("Could not follow: ".concat(e.t0.message));case 21:return e.prev=21,d(!1),e.finish(21);case 24:case"end":return e.stop()}}),e,null,[[0,18,21,24]])}))),[l,d,a,t]),j=Object(i.useCallback)((function(){c(Object($.c)({publicKey:t}))}),[c,t]);return Object(w.jsx)("div",{className:X.a.container,onClick:n?b:j,children:Object(w.jsx)("p",{className:u()(A.C,X.a.text),children:l?"...":a?"Unfollow":"Follow"})})},te=Object(i.memo)(ee),ce=c(50),ne=c(789),ae=c.n(ne),re=function(e){var t=e.publicKey,c=Object(L.b)(),n=Object(d.g)(),a=Z.useSelector(Z.selectIsInContact(t)),o=Object(i.useState)(!1),s=Object(r.a)(o,2),l=s[0],b=s[1],j=Object(i.useCallback)(Object(F.a)(K.a.mark((function e(){return K.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!l){e.next=3;break}return e.abrupt("return");case 3:if(!a){e.next=6;break}return n.push("/chat/".concat(t)),e.abrupt("return");case 6:return b(!0),e.next=9,c(Object(ce.l)(t));case 9:b(!1),e.next=17;break;case 12:e.prev=12,e.t0=e.catch(0),alert("Could not send contact request: ".concat(e.t0.message)),k.g.error(e.t0),b(!1);case 17:case"end":return e.stop()}}),e,null,[[0,12]])}))),[l,c,n,a,t]);return Object(w.jsx)("div",{className:u()(ae.a.container),onClick:j,children:Object(w.jsx)("p",{className:u()(A.C,ae.a.text),children:l?"...":a?"Message":"Request Contact"})})},ie=Object(i.memo)(re),oe=c(36),se=o.a.lazy((function(){return Promise.all([c.e(1),c.e(3),c.e(4),c.e(39)]).then(c.bind(null,638))})),le=o.a.lazy((function(){return Promise.all([c.e(1),c.e(3),c.e(4),c.e(10),c.e(43)]).then(c.bind(null,691))})),de=function(){var e=Z.useDispatch(),t=Object(d.g)(),c=Z.useSelector((function(e){return e.node.publicKey})),o=Z.useSelector((function(e){return e.auth.authenticated})),s=Object(i.useState)(!1),b=Object(r.a)(s,2),y=b[0],S=b[1],N=Object(d.i)(),U=N.publicKey,P=N.selectedView,B=void 0===P?"posts":P,R=Z.useSelector(Z.selectUser(U)),K=Object(i.useState)({}),F=Object(r.a)(K,2),L=F[0],z=F[1],W=Object(i.useState)(null),Y=Object(r.a)(W,2),H=Y[0],Q=Y[1],X=Object(i.useState)(null),$=Object(r.a)(X,2),ee=$[0],ce=$[1],ne=Object(i.useState)(null),ae=Object(r.a)(ne,2),re=ae[0],de=ae[1],ue=Object(i.useState)(null),je=Object(r.a)(ue,2),pe=je[0],Oe=je[1],fe=c===R.publicKey;Object(i.useEffect)((function(){return e(Object(oe.p)()),function(){e(Object(oe.r)())}}),[e]),Object(i.useEffect)((function(){var t=e(Object(oe.q)(U)),c=e(Object(oe.n)(U)),n=e(Object(f.b)(U));return function(){t(),c(),n()}}),[e,U]),Object(i.useEffect)((function(){var e=Object(O.b)({onData:function(e,t){z((function(c){return Object(a.a)(Object(a.a)({},c),{},Object(n.a)({},t,e))}))},query:"".concat(U,"::offeredServices::map.on"),onError:function(e){var t=k.e(e);t.startsWith("timeout of ")||"TIMEOUT_ERR"===t?k.g.warn("Could not fetch this user's (...".concat(U.slice(-8),") offered services due to a timeout error, this can be expected if the data hasn't been populated yet.")):(p.b.dark("There was an error fetching ".concat(R.displayName,"'s offered services: ").concat(t)),k.g.error(e))}});return function(){e.then((function(e){e.off()}))}}),[R.displayName,U]);var he=Object(i.useCallback)((function(){S(!y)}),[y]),ve=Object(i.useCallback)((function(e){!H&&e||Q(null),Q(e)}),[H]),me=Object(i.useCallback)((function(e){!re&&e||de(null),de(e)}),[re]),xe=Object(i.useCallback)((function(e){!ee&&e||ce(null),ce(e)}),[ee]),ge=Object(i.useCallback)((function(e){console.log("share click yo"),console.log(e),!pe&&e||Oe(null),Oe(e)}),[pe]),_e=Z.useSelector(Z.selectPostsNewestToOldest(U)),Ce=(Object(i.useCallback)((function(){t.push("/auth")}),[t]),Object(i.useCallback)((function(){navigator.clipboard.writeText(U)}),[U])),ye=Object(i.useCallback)((function(e){t.replace("/otherUser/".concat(U,"/").concat(e))}),[t,U]);return Object(w.jsxs)("div",{className:u()("page-container",G.a["profile-page"]),children:[Object(w.jsxs)("div",{className:u()(G.a["profile-container"]),children:[Object(w.jsx)("div",{className:"profile-cover",children:R.header&&Object(w.jsx)("img",{className:"w-100",alt:"User set profile header.",src:"data:image/jpeg;base64,".concat(R.header)})}),Object(w.jsxs)("div",{className:G.a["profile-info-container"],children:[Object(w.jsx)("div",{className:G.a["profile-avatar"],style:{height:"".concat(122,"px"),width:"".concat(122,"px")},children:Object(w.jsx)(g.a,{height:122,publicKey:U,greyBorder:!0})}),Object(w.jsxs)("div",{children:[Object(w.jsx)("p",{className:G.a["profile-name"],children:R.displayName}),Object(w.jsx)("p",{className:G.a["profile-desc"],children:R.bio||"Lightning.Page user"}),Object(w.jsxs)("div",{className:A.z,children:[!fe&&Object(w.jsx)(te,{publicKey:U}),Object(w.jsx)(C.a,{amt:24,insideRow:!0}),!fe&&Object(w.jsx)(ie,{publicKey:U})]})]})]}),Object(w.jsx)(_.a,{onChange:ye,selected:B,showContentBtn:!0}),Object(w.jsx)(C.a,{amt:30}),Object(w.jsxs)("div",{children:["posts"===B&&(0===_e.length?Object(w.jsx)(x.a,{text:"loading posts..."}):_e.map((function(e){return j.o(e)?Object(w.jsx)(i.Suspense,{fallback:Object(w.jsx)(x.a,{}),children:Object(w.jsx)(le,{openTipModal:ve,openUnlockModal:xe,openShareModal:ge,postID:e.originalPostID,sharerPublicKey:e.sharedBy})},e.originalPostID):Object(w.jsx)(i.Suspense,{fallback:Object(w.jsx)(x.a,{}),children:Object(w.jsx)(se,{id:e.id,publicKey:e.authorId,openTipModal:ve,openUnlockModal:xe,openDeleteModal:null,openShareModal:ge})},e.id)}))),"services"===B&&Object.entries(L).filter((function(e){var t=Object(r.a)(e,2);return t[0],!!t[1]})).map((function(e){var t=Object(r.a)(e,2),c=t[0],n=t[1];return Object(w.jsxs)("div",{className:G.a.post,children:[Object(w.jsx)("strong",{children:"Service ID"}),Object(w.jsx)("p",{children:c}),Object(w.jsx)("strong",{children:"Service Tpe"}),Object(w.jsx)("p",{children:n.serviceType}),Object(w.jsx)("strong",{children:"Service Title"}),Object(w.jsx)("p",{children:n.serviceTitle}),Object(w.jsx)("strong",{children:"Service Description"}),Object(w.jsx)("p",{children:n.serviceDescription}),Object(w.jsx)("strong",{children:"Service Condition"}),Object(w.jsx)("p",{children:n.serviceCondition}),Object(w.jsx)("strong",{children:"Service Price"}),Object(w.jsx)("p",{children:n.servicePrice}),Object(w.jsx)("button",{onClick:function(){de(Object(a.a)(Object(a.a)({},n),{},{serviceID:c,owner:U}))},children:"BUY SERVICE"})]})})),"content"===B&&Object(w.jsx)("div",{className:G.a["content-container"],children:Object(w.jsx)(D,{publicKey:U})})]}),Object(w.jsx)(C.a,{amt:200}),Object(w.jsxs)(m.a,{toggleModal:he,modalOpen:y,contentStyle:{padding:"40px 30px"},noFullWidth:!0,children:[Object(w.jsx)(l.a,{bgColor:"#23282d",fgColor:"#64bbff",value:U,size:180,className:G.a["profile-qrcode"],imageSettings:be}),Object(w.jsx)("p",{className:G.a["profile-qrcode-desc"],children:"Scan this code to contact this user"}),Object(w.jsxs)("div",{className:G.a["profile-clipboard-container"],onClick:Ce,children:[Object(w.jsx)("img",{src:q.a,className:G.a["profile-clipboard-icon"],alt:""}),Object(w.jsx)("p",{className:G.a["profile-clipboard-text"],children:"Tap to copy to clipboard"})]})]}),Object(w.jsx)(M.a,{tipData:H,toggleOpen:ve}),Object(w.jsx)(T.a,{publicKey:U,tipData:H,toggleOpen:ve}),Object(w.jsx)(E.a,{unlockData:ee,toggleOpen:xe}),Object(w.jsx)(J,{service:re,toggleOpen:me}),Object(w.jsx)(V.a,{shareData:pe,toggleOpen:ge})]}),o&&Object(w.jsx)(v.a,{onClick:he,large:!0,iconURL:I.a,icon:null,label:null}),Object(w.jsx)(h.a,{})]})},be={src:B,height:36,width:36,excavate:!0};t.default=Object(i.memo)(de)}}]);
//# sourceMappingURL=21.f79dbb8b.chunk.js.map