(this["webpackJsonpshocknet-pwa"]=this["webpackJsonpshocknet-pwa"]||[]).push([[18],{482:function(e,t,s){"use strict";var a=s(3),c=s(73),n=s.n(c),i=(s(484),s(7)),l=function(e){var t=e.children,s=e.style;return Object(i.jsx)("div",{className:"modal-content",style:s,children:t})},r=(s(485),function(e){var t=e.title,s=e.toggleModal;return t?Object(i.jsxs)("div",{className:"modal-head",children:[Object(i.jsx)("p",{className:"modal-head-title",children:t}),Object(i.jsx)("div",{className:"modal-head-close",onClick:s,children:Object(i.jsx)("i",{className:"fas fa-times"})})]}):null});s(486),t.a=function(e){var t=e.modalOpen,s=void 0!==t&&t,c=e.toggleModal,o=e.modalTitle,d=void 0===o?"":o,u=e.children,b=e.contentStyle,j=void 0===b?{}:b,m=Object(a.useCallback)((function(){c()}),[c]);return Object(i.jsxs)("div",{className:n()({modal:!0,"modal-open":s}),children:[Object(i.jsx)("div",{className:"modal-backdrop",onClick:m}),Object(i.jsxs)("div",{className:"modal-container",children:[Object(i.jsx)(r,{title:d,toggleModal:m}),Object(i.jsx)(l,{style:j,children:u})]})]})}},484:function(e,t,s){},485:function(e,t,s){},486:function(e,t,s){},493:function(e,t,s){"use strict";var a=s(53),c=s(7);t.a=function(){return Object(c.jsxs)("div",{className:"bottom-nav-container",children:[Object(c.jsx)(a.c,{className:"bottom-nav-btn",to:"/overview",activeClassName:"active-nav-btn",children:Object(c.jsx)("i",{className:"bottom-nav-btn-icon icon-thin-wallet"})}),Object(c.jsx)(a.c,{className:"bottom-nav-btn",to:"/chat",activeClassName:"active-nav-btn",children:Object(c.jsx)("i",{className:"bottom-nav-btn-icon icon-thin-chat"})}),Object(c.jsx)(a.c,{className:"bottom-nav-btn",to:"/profile",activeClassName:"active-nav-btn",children:Object(c.jsx)("i",{className:"bottom-nav-btn-icon icon-thin-profile"})}),Object(c.jsx)(a.c,{className:"bottom-nav-btn",to:"/feed",activeClassName:"active-nav-btn",children:Object(c.jsx)("i",{className:"bottom-nav-btn-icon icon-thin-feed"})})]})}},494:function(e,t,s){"use strict";var a=s(3),c=s(73),n=s.n(c),i=(s(495),s(37)),l=s(60),r=s(77),o=s(492),d=s(20),u=s(7);t.a=function(e){var t=e.pageTitle,s=e.absolute,c=void 0!==s&&s,b=e.solid,j=void 0!==b&&b,m=e.enableBackButton,v=void 0!==m&&m,h=e.onHeight,O=void 0===h?l.a:h,p=Object(i.c)(),x=Object(a.useCallback)((function(){window.history.back()}),[]),f=Object(a.useCallback)((function(){p(Object(r.c)())}),[p]),N=Object(d.useSelector)((function(e){return e.node.publicKey})),g=Object(a.useCallback)((function(e){if(e)try{O(e.getBoundingClientRect().height)}catch(t){console.log("Error inside onHeight mechanism in MainNav:"),console.log(t)}}),[O]);return Object(u.jsxs)("div",{className:n()({"main-nav-container":!0,"main-nav-absolute":c,"main-nav-solid":j}),ref:g,children:[v?Object(u.jsx)("div",{className:"main-nav-back",onClick:x,children:Object(u.jsx)("i",{className:"icon icon-thin-back"})}):Object(u.jsx)(o.a,{disableOnlineRing:!0,height:40,publicKey:N}),Object(u.jsx)("p",{className:"main-nav-title unselectable",children:t}),Object(u.jsxs)("div",{className:"main-nav-menu-btn",onClick:f,children:[Object(u.jsx)("div",{className:"main-nav-menu-dash"}),Object(u.jsx)("div",{className:"main-nav-menu-dash"}),Object(u.jsx)("div",{className:"main-nav-menu-dash"})]})]})}},495:function(e,t,s){},500:function(e,t,s){"use strict";var a=s(17),c=s(3),n=s(73),i=s.n(n),l=(s(501),s(7));t.a=function(e){var t=e.label,s=void 0===t?null:t,n=e.icon,r=void 0===n?null:n,o=e.iconURL,d=void 0===o?null:o,u=e.onClick,b=void 0===u?void 0:u,j=e.nestedMode,m=void 0!==j&&j,v=e.large,h=void 0!==v&&v,O=e.small,p=void 0!==O&&O,x=e.relative,f=void 0!==x&&x,N=e.children,g=void 0===N?null:N,k=e.style,y=void 0===k?{}:k,q=Object(c.useState)(!1),S=Object(a.a)(q,2),C=S[0],w=S[1],R=Object(c.useCallback)((function(){m&&w(!C)}),[C,m]),K=Object(c.useMemo)((function(){return d?Object(l.jsx)("img",{src:d,className:"add-btn-icon",alt:""}):Object(l.jsx)("i",{className:"fas fa-".concat(null!==r&&void 0!==r?r:"plus")})}),[r,d]),E=Object(c.useMemo)((function(){return s?Object(l.jsx)("p",{className:"add-btn-label",children:s}):null}),[s]);return Object(l.jsxs)("div",{className:i()({"add-btn-container":!0,"add-btn-round-container":!s,"add-btn-large":h,"add-btn-small":p}),children:[Object(l.jsxs)("div",{className:i()({"add-btn":!0,"add-btn-round":!s,"add-btn-extended":!!s,"add-btn-relative":f,"add-btn-open":C,"add-btn-nested":m}),onClick:null!==b&&void 0!==b?b:R,style:y,children:[K,E]}),g?Object(l.jsx)("div",{className:i()({"add-btn-options":!0,"add-btn-options-open":C}),children:g}):null]})}},501:function(e,t,s){},619:function(e,t,s){},620:function(e,t,s){},621:function(e,t,s){},755:function(e,t,s){"use strict";s.r(t);var a=s(2),c=s.n(a),n=s(5),i=s(17),l=s(3),r=s(37),o=s(113),d=s(24),u=s(493),b=s(53),j=s(492),m={height:"55px",width:"55px"},v=s(20),h=(s(619),s(7)),O=function(e){var t=e.subtitle,s=void 0===t?"":t,a=e.time,o=e.publicKey,u=e.chatLoaded,O=void 0!==u&&u,p=Object(r.c)(),x=v.useSelector((function(e){return e.node.publicKey})),f=v.useSelector(v.selectUser(o)),N=Object(l.useState)(),g=Object(i.a)(N,2),k=g[0],y=g[1],q=Object(l.useCallback)(Object(n.a)(c.a.mark((function e(){var t;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,p(Object(d.h)(x,o));case 3:t=e.sent,y(t),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.warn(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])}))),[p,x,o]);return Object(l.useEffect)((function(){return!k&&O&&q(),function(){console.log("Closing Subscription...",o),null===k||void 0===k||k.close()}}),[k,q,o,O]),Object(h.jsxs)(b.b,{to:"/chat/".concat(o),className:"message-container",children:[Object(h.jsxs)("div",{className:"message-author-container",children:[Object(h.jsx)("div",{className:"message-author-avatar",style:m,children:Object(h.jsx)(j.a,{publicKey:o,height:55})}),Object(h.jsxs)("div",{className:"message-author-details",children:[Object(h.jsx)("p",{className:"message-author-username",children:f.displayName}),Object(h.jsx)("p",{className:"message-author-text",children:s})]})]}),Object(h.jsx)("p",{className:"message-timestamp",children:a})]})},p=(s(620),function(e){var t=e.publicKey,s=void 0===t?"":t,a=e.time,c=e.sent,n=v.useSelector(v.selectUser(s));return Object(h.jsxs)(b.b,{to:"/chat/".concat(s),className:"request-container",children:[Object(h.jsxs)("div",{className:"request-author-container",children:[Object(h.jsx)("div",{className:"request-author-avatar",style:m,children:Object(h.jsx)(j.a,{publicKey:s,height:55})}),Object(h.jsxs)("div",{className:"request-author-details",children:[Object(h.jsxs)("p",{className:"request-author-username",children:[c?"Sent Request":"Received Request"," - ",n.displayName]}),Object(h.jsx)("p",{className:"request-author-text",children:"Request pending acceptance..."})]})]}),Object(h.jsx)("p",{className:"request-timestamp",children:a})]})}),x=s(494),f=s(500),N=s(150),g=s(51),k=(s(621),s(482));t.default=function(){var e=Object(r.c)(),t=Object(l.useState)(!1),s=Object(i.a)(t,2),a=s[0],b=s[1],j=Object(l.useState)(""),m=Object(i.a)(j,2),y=m[0],q=m[1],S=Object(l.useState)(!1),C=Object(i.a)(S,2),w=C[0],R=C[1],K=Object(l.useState)(!1),E=Object(i.a)(K,2),M=E[0],T=E[1],A=v.useSelector((function(e){return e.chat.contacts})),U=v.useSelector((function(e){return e.chat.messages})),P=v.useSelector((function(e){return e.chat.sentRequests})),B=v.useSelector((function(e){return e.chat.receivedRequests})),D=Object(l.useCallback)(Object(n.a)(c.a.mark((function t(){return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e(Object(d.c)());case 2:T(!0);case 3:case"end":return t.stop()}}),t)}))),[e]);Object(l.useEffect)((function(){D()}),[D]);var L=Object(l.useCallback)((function(){b(!a)}),[a]),Q=Object(l.useCallback)(function(){var t=Object(n.a)(c.a.mark((function t(s){var a;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,q(null),R(!0),null===(a=(c=s).startsWith("http")?c.split("/").slice(-1)[0]:c)||void 0===a?void 0:a.length){t.next=6;break}throw new g.a({field:"publicKey",message:"Please specify a public key"});case 6:if(/^[0-9A-Za-z\-_.+/]+[=]{0,3}/.test(a)){t.next=8;break}throw new g.a({field:"publicKey",message:"Invalid public key format specified"});case 8:return t.next=10,e(Object(d.f)(s));case 10:return b(!1),t.abrupt("return");case 14:if(t.prev=14,t.t0=t.catch(0),!(t.t0 instanceof g.a)){t.next=19;break}return q(t.t0.message),t.abrupt("return");case 19:console.error(t.t0),q("An unknown error has occurred");case 21:return t.prev=21,R(!1),t.finish(21);case 24:case"end":return t.stop()}var c}),t,null,[[0,14,21,24]])})));return function(e){return t.apply(this,arguments)}}(),[e]),H=Object(l.useCallback)(Object(n.a)(c.a.mark((function e(){var t;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,navigator.clipboard.readText();case 2:return t=e.sent,e.abrupt("return",Q(t));case 4:case"end":return e.stop()}}),e)}))),[Q]);return Object(h.jsxs)("div",{className:"page-container messages-page",children:[Object(h.jsx)(x.a,{solid:!0,pageTitle:"MESSAGES"}),Object(h.jsxs)("div",{className:"messages-container",children:[Object(h.jsxs)("div",{className:"message-list-container",children:[P.length>0?Object(h.jsx)("p",{className:"messages-section-title",children:"Sent Requests"}):null,P.map((function(e){return Object(h.jsx)(p,{publicKey:e.pk,sent:!0,time:void 0},e.pk)})),B.length>0?Object(h.jsx)("p",{className:"messages-section-title",children:"Received Requests"}):null,B.map((function(e){return Object(h.jsx)(p,{publicKey:e.pk,sent:!1,time:void 0},e.pk)})),A.length>0?Object(h.jsx)("p",{className:"messages-section-title",children:"Messages"}):null,A.map((function(e){var t,s,a=null!==(s=(null!==(t=U[e.pk])&&void 0!==t?t:[])[0])&&void 0!==s?s:{body:"Unable to preview last message...",timestamp:Date.now()};return Object(h.jsx)(O,{publicKey:e.pk,subtitle:a.body,time:o.DateTime.fromMillis(a.timestamp).toRelative(),chatLoaded:M},e.pk)}))]}),Object(h.jsx)(f.a,{onClick:L,label:"REQUEST"}),Object(h.jsxs)(k.a,{modalTitle:"SEND REQUEST",toggleModal:L,modalOpen:a,children:[w?Object(h.jsx)(N.a,{text:"Sending Request...",overlay:!0,style:{borderRadius:"0 0 15px 15px"}}):null,y?Object(h.jsx)("div",{className:"send-request-error",children:y}):null,Object(h.jsxs)("div",{className:"send-request-cards",children:[Object(h.jsxs)("div",{className:"send-request-card",onClick:Q,children:[Object(h.jsx)("i",{className:"send-request-card-icon fas fa-qrcode"}),Object(h.jsx)("p",{className:"send-request-card-title",children:"SCAN QR"}),Object(h.jsx)("p",{className:"send-request-card-desc",children:"Scan another users QR to send a message request."})]}),Object(h.jsxs)("div",{className:"send-request-card",onClick:H,children:[Object(h.jsx)("i",{className:"send-request-card-icon fas fa-clipboard"}),Object(h.jsx)("p",{className:"send-request-card-title",children:"PASTE CLIPBOARD"}),Object(h.jsx)("p",{className:"send-request-card-desc",children:"Paste another users Public Key to send a message request."})]})]})]})]}),Object(h.jsx)(u.a,{})]})}}}]);
//# sourceMappingURL=18.d0a2647c.chunk.js.map