{"version":3,"sources":["common/InputGroup/index.js","common/Line/index.tsx","pages/Profile/GoLive/css/GoLive.module.css","images/obs-2.svg","pages/Profile/GoLive/GoLive.tsx"],"names":["InputGroup","label","name","onChange","inputAction","Utils","actionIcon","value","inputMode","type","element","small","disabled","className","classNames","group","onClick","fas","Line","color","length","width","style","useMemo","borderLeftStyle","borderLeftWidth","borderLeftColor","borderRightStyle","borderRightWidth","borderRightColor","height","borderTopStyle","borderTopWidth","borderTopColor","borderBottomStyle","borderBottomWidth","borderBottomColor","module","exports","GoLive","dispatch","useDispatch","history","useHistory","nodeIP","Store","node","hostIP","relayId","seedProviderPub","content","seedInfo","seedUrl","seedToken","streamLiveToken","streamUserToken","availableTokens","streamBroadcasterUrl","streamContentId","tipOverlayUrl","streamPostId","userProfiles","useState","selectedSource","setSelectedSource","loading","setLoading","streamToken","setStreamToken","setUserToken","paragraph","setParagraph","error","setError","promptInfo","setPromptInfo","starting","setStarting","copiedUrl","setCopiedUrl","copiedToken","setCopiedToken","copiedOverlayUrl","setCopiedOverlayUrl","enableTipsOverlay","setEnableTipsOverlay","onSubmitCb","React","useCallback","servicePrice","serviceID","a","RequestToken","finalSeedUrl","tokens","latestUserToken","Http","post","token","streamData","data","obsToken","console","log","liveToken","streamPlaybackUrl","rtmp","replace","rtmpUrl","stUrl","viewersSocketUrl","contentItems","push","text","streamContent","isPreview","isPrivate","liveStatus","magnetURI","playbackMagnet","statusUrl","userToken","viewersCounter","tags","title","res","status","postId","newPost","overlayAccessId","tipsNotificationsOverlayUrl","relayIdParam","Object","entries","find","item","contentId","addStream","streamUrl","streamStatusUrl","errorMessage","message","closePrompt","submitPrompt","onSubmit","e","preventDefault","availableToken","key","prototype","hasOwnProperty","call","offerSeedService","get","copyToken","navigator","clipboard","writeText","copyOverlayUrl","copyUri","onInputChange","target","onTipsOverlayChange","checked","stopStream","endUrl","urlForMagnet","removeStream","info","btnClass","c","gStyles","styles","DarkPage","pageTitle","scrolls","bind","Pad","amt","alt","src","obsLogo","id","htmlFor","Modal","modalOpen","toggleModal","contentClass","blueBtn","onClickBlueBtn","forceRenderTitleBar","noFullWidth","Loader","overlay","fullScreen"],"mappings":"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","file":"static/js/28.35f9e9d9.chunk.js","sourcesContent":["import React from \"react\";\nimport classNames from \"classnames\";\n\nimport * as Utils from \"../../utils\";\n\nimport \"./css/index.scoped.css\";\n\nconst InputGroup = ({\n  label = \"\",\n  name = \"\",\n  onChange,\n  inputAction = Utils.EMPTY_FN,\n  actionIcon = \"\",\n  value,\n  inputMode = /** @type {React.HTMLAttributes['inputMode']} */ (\"text\"),\n  type = \"text\",\n  element = \"input\",\n  small = false,\n  disabled = false\n}) => {\n  return (\n    <div\n      className={classNames({\n        group: true,\n        \"group-disabled\": disabled,\n        \"group-small\": small\n      })}\n    >\n      {label ? <p className=\"group-label\">{label}</p> : null}\n      <div\n        className={classNames({\n          \"group-input-container\": true,\n          \"group-input-textarea-container\": element === \"textarea\"\n        })}\n      >\n        {element === \"textarea\" ? (\n          <textarea\n            className=\"group-input group-input-textarea\"\n            name={name}\n            onChange={onChange}\n            inputMode={inputMode}\n            value={value}\n            disabled={disabled}\n          />\n        ) : (\n          <input\n            className=\"group-input\"\n            type={type}\n            name={name}\n            onChange={onChange}\n            inputMode={inputMode}\n            value={value}\n            disabled={disabled}\n          />\n        )}\n        {inputAction && actionIcon ? (\n          <div className=\"group-input-action\" onClick={inputAction}>\n            <i\n              className={classNames({\n                \"group-input-action-icon\": true,\n                fas: true,\n                [actionIcon]: true\n              })}\n              onClick={inputAction}\n            ></i>\n          </div>\n        ) : null}\n      </div>\n    </div>\n  );\n};\n\nexport default InputGroup;\n","import { useMemo } from \"react\";\n\nexport interface LineProps {\n  color: string;\n  length: number;\n  type: \"vertical\" | \"horizontal\";\n  width: number;\n}\n\nconst Line = ({ color, length, type, width }: LineProps) => {\n  const style = useMemo<React.CSSProperties>(() => {\n    if (type === \"vertical\") {\n      return {\n        borderLeftStyle: \"solid\",\n        borderLeftWidth: `${width / 2}px`,\n        borderLeftColor: color,\n        borderRightStyle: \"solid\",\n        borderRightWidth: `${width / 2}px`,\n        borderRightColor: color,\n        height: length\n      };\n    }\n\n    if (type === \"horizontal\") {\n      return {\n        borderTopStyle: \"solid\",\n        borderTopWidth: width / 2,\n        borderTopColor: color,\n        borderBottomStyle: \"solid\",\n        borderBottomWidth: width / 2,\n        borderBottomColor: color,\n        width: length\n      };\n    }\n\n    return {};\n  }, [color, length, type, width]);\n\n  return <div style={style} />;\n};\n\nexport default Line;\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"stream-type-btn\":\"GoLive_stream-type-btn__3sNtJ\",\"stream-type-btn-icon\":\"GoLive_stream-type-btn-icon__2p9-P\",\"obs-logo\":\"GoLive_obs-logo__1p3Hh\"};","export default __webpack_public_path__ + \"static/media/obs-2.7c61e78e.svg\";","import React, { useCallback, useState } from \"react\";\nimport * as Common from \"shock-common\";\nimport { useDispatch } from \"react-redux\";\nimport c from \"classnames\";\n\nimport \"../css/index.scoped.css\";\nimport { addStream, removeStream } from \"../../../actions/ContentActions\";\nimport Loader from \"../../../common/Loader\";\nimport Http from \"../../../utils/Http\";\nimport obsLogo from \"../../../images/obs-2.svg\";\nimport { RequestToken } from \"../../../utils/seed\";\nimport { useHistory } from \"react-router\";\nimport Modal from \"../../../common/Modal\";\nimport * as Store from \"../../../store\";\nimport DarkPage from \"../../../common/DarkPage\";\nimport * as gStyles from \"../../../styles\";\nimport Line from \"../../../common/Line\";\nimport Pad from \"../../../common/Pad\";\n\nimport styles from \"./css/GoLive.module.css\";\nimport InputGroup from \"../../../common/InputGroup\";\n\nconst GoLive = () => {\n  const dispatch = useDispatch();\n  const history = useHistory();\n  const nodeIP = Store.useSelector(({ node }) => node.hostIP);\n  const relayId = Store.useSelector(({ node }) => node.relayId);\n  const seedProviderPub = Store.useSelector(\n    ({ content }) => content.seedProviderPub\n  );\n  const { seedUrl, seedToken } = Store.useSelector(\n    ({ content }) => content.seedInfo\n  );\n  const streamLiveToken = Store.useSelector(\n    ({ content }) => content.streamLiveToken\n  );\n  const streamUserToken = Store.useSelector(\n    ({ content }) => content.streamUserToken\n  );\n  const availableTokens = Store.useSelector(\n    ({ content }) => content.availableTokens\n  );\n  const streamBroadcasterUrl = Store.useSelector(\n    ({ content }) => content.streamBroadcasterUrl\n  );\n  const streamContentId = Store.useSelector(\n    ({ content }) => content.streamContentId\n  );\n  const tipOverlayUrl = Store.useSelector(\n    ({ content }) => content.tipOverlayUrl\n  );\n  const streamPostId = Store.useSelector(({ content }) => content.streamPostId);\n  const userProfiles = Store.useSelector(({ userProfiles }) => userProfiles);\n  const [selectedSource, setSelectedSource] = useState<\"camera\" | \"obs\">(\"obs\");\n  const [loading, setLoading] = useState(false);\n  const [streamToken, setStreamToken] = useState(streamLiveToken);\n  const [, setUserToken] = useState(streamUserToken);\n  const [paragraph, setParagraph] = useState(\"Look I'm streaming!\");\n\n  const [error, setError] = useState<string | null>(null);\n  const [promptInfo, setPromptInfo] = useState(null);\n  const [starting, setStarting] = useState(false);\n\n  const [copiedUrl, setCopiedUrl] = useState(false);\n  const [copiedToken, setCopiedToken] = useState(false);\n  const [copiedOverlayUrl, setCopiedOverlayUrl] = useState(false);\n  const [enableTipsOverlay, setEnableTipsOverlay] = useState(true);\n  const onSubmitCb = React.useCallback(\n    async (servicePrice?, serviceID?) => {\n      try {\n        setLoading(true);\n        const { seedUrl: finalSeedUrl, tokens } = await RequestToken({\n          availableTokens,\n          seedProviderPub,\n          seedToken,\n          seedUrl,\n          serviceID,\n          servicePrice\n        });\n        const [latestUserToken] = tokens;\n        setUserToken(latestUserToken);\n        const { data: streamData } = await Http.post(\n          `${finalSeedUrl}/api/stream/auth`,\n          {\n            token: latestUserToken\n          }\n        );\n        const { token: obsToken } = streamData.data;\n        console.log(obsToken);\n        const liveToken = `${latestUserToken}?key=${obsToken}`;\n        setStreamToken(`${latestUserToken}?key=${obsToken}`);\n        const streamPlaybackUrl = `${finalSeedUrl}/rtmpapi/live/${latestUserToken}/index.m3u8`;\n        const rtmp = finalSeedUrl.replace(\"https\", \"rtmp\");\n        const rtmpUrl = `${rtmp}/live`;\n        const stUrl = `${finalSeedUrl}/rtmpapi/api/streams/live/${latestUserToken}`;\n        const viewersSocketUrl = `${finalSeedUrl.replace(\n          \"https\",\n          \"wss\"\n        )}/websocket`;\n        let contentItems = [];\n        if (paragraph !== \"\") {\n          contentItems.push({\n            type: \"text/paragraph\",\n            text: paragraph\n          });\n        }\n\n        const streamContent: Common.EmbeddedStream = {\n          height: 0,\n          isPreview: false,\n          isPrivate: false,\n          liveStatus: \"waiting\",\n          magnetURI: streamPlaybackUrl,\n          playbackMagnet: \"\",\n          statusUrl: stUrl,\n          type: \"stream/embedded\",\n          userToken: latestUserToken,\n          viewersCounter: 0,\n          // @ts-expect-error\n          viewersSocketUrl,\n          width: 0\n        };\n\n        contentItems.push(streamContent);\n\n        const res = await Http.post(`/api/gun/wall`, {\n          tags: [],\n          title: \"Post\",\n          contentItems,\n          enableTipsOverlay\n        });\n        if (res.status === 200) {\n          const { data } = res;\n\n          const [postId, newPost, overlayAccessId] = data as [\n            string,\n            Common.RawPost,\n            string\n          ];\n          let tipsNotificationsOverlayUrl = \"\";\n          if (overlayAccessId) {\n            const relayIdParam = relayId\n              ? `&x-shock-hybrid-relay-id-x=${relayId}`\n              : \"\";\n            tipsNotificationsOverlayUrl = `${nodeIP}/api/subscribeStream?accessId=${overlayAccessId}${relayIdParam}`;\n          }\n          console.log(newPost.contentItems);\n\n          const [contentId] = Object.entries(newPost.contentItems ?? {}).find(\n            ([_, item]) =>\n              item.type === \"stream/embedded\" &&\n              item.magnetURI === streamPlaybackUrl\n          );\n          addStream({\n            seedToken: latestUserToken,\n            liveToken,\n            streamUrl: streamPlaybackUrl,\n            streamPostId: postId,\n            streamContentId: contentId,\n            streamStatusUrl: stUrl,\n            streamBroadcasterUrl: rtmpUrl,\n            tipOverlayUrl: tipsNotificationsOverlayUrl\n          })(dispatch);\n          await Http.post(`/api/listenStream`, {\n            postId,\n            contentId,\n            statusUrl: `${finalSeedUrl}/rtmpapi/api/streams/live/${latestUserToken}`\n          });\n          console.log(\"post created successfully\");\n          setLoading(false);\n        } else {\n          setError(\"invalid response status\");\n          setLoading(false);\n        }\n      } catch (err) {\n        console.log(err);\n        setError(err?.errorMessage ?? err?.message);\n        setLoading(false);\n      }\n    },\n    [\n      availableTokens,\n      seedProviderPub,\n      seedToken,\n      seedUrl,\n      enableTipsOverlay,\n      dispatch,\n      paragraph,\n      nodeIP,\n      relayId\n    ]\n  );\n  const closePrompt = useCallback(() => {\n    setPromptInfo(null);\n  }, [setPromptInfo]);\n\n  const submitPrompt = useCallback(() => {\n    const { servicePrice, serviceID } = promptInfo;\n    onSubmitCb(servicePrice, serviceID);\n    setPromptInfo(null);\n  }, [promptInfo, onSubmitCb, setPromptInfo]);\n\n  const onSubmit = useCallback(\n    async e => {\n      try {\n        if (starting) {\n          return;\n        }\n        setStarting(true);\n        e.preventDefault();\n        let availableToken = false;\n        for (const key in availableTokens) {\n          if (Object.prototype.hasOwnProperty.call(availableTokens, key)) {\n            const element = availableTokens[key];\n            if (element[0]) {\n              availableToken = true;\n              break;\n            }\n          }\n        }\n        let serviceID = \"\";\n        if (userProfiles[seedProviderPub]) {\n          //@ts-expect-error\n          serviceID = userProfiles[seedProviderPub].offerSeedService;\n        }\n        if (availableToken || (seedUrl && seedToken)) {\n          onSubmitCb();\n        } else if (serviceID && seedProviderPub) {\n          const { data: servicePrice } = await Http.get(\n            `/api/gun/otheruser/${seedProviderPub}/once/offeredServices>${serviceID}>servicePrice`\n          );\n          setPromptInfo({ servicePrice, serviceID });\n        } else {\n          setError(\"No way found to publish content\");\n        }\n      } catch (e) {\n        setError(e.message);\n      } finally {\n        setStarting(false);\n      }\n    },\n    [\n      starting,\n      userProfiles,\n      seedProviderPub,\n      seedUrl,\n      seedToken,\n      availableTokens,\n      onSubmitCb\n    ]\n  );\n  const copyToken = useCallback(() => {\n    navigator.clipboard.writeText(streamToken);\n    setCopiedToken(true);\n  }, [streamToken, setCopiedToken]);\n\n  const copyOverlayUrl = useCallback(() => {\n    navigator.clipboard.writeText(tipOverlayUrl);\n    setCopiedOverlayUrl(true);\n  }, [tipOverlayUrl, setCopiedOverlayUrl]);\n\n  const copyUri = useCallback(() => {\n    navigator.clipboard.writeText(streamBroadcasterUrl);\n    setCopiedUrl(true);\n  }, [streamBroadcasterUrl, setCopiedUrl]);\n\n  const onInputChange = useCallback(\n    e => {\n      const { value, name } = e.target;\n      switch (name) {\n        case \"paragraph\": {\n          setParagraph(value);\n          return;\n        }\n        case \"source\": {\n          setSelectedSource(value);\n          return;\n        }\n        default:\n          return;\n      }\n    },\n    [setParagraph, setSelectedSource]\n  );\n\n  const onTipsOverlayChange = useCallback(\n    (e: { target: { checked: boolean } }) => {\n      setEnableTipsOverlay(e.target.checked);\n    },\n    []\n  );\n\n  const stopStream = useCallback(() => {\n    Http.post(\"/api/stopStream\", {\n      postId: streamPostId,\n      contentId: streamContentId,\n      endUrl: `https://stream.shock.network/api/stream/end`,\n      urlForMagnet: `https://stream.shock.network/api/stream/torrent/${streamUserToken}`,\n      obsToken: streamLiveToken\n    });\n    removeStream()(dispatch);\n    console.info(streamUserToken);\n    history.push(\"/profile\");\n  }, [\n    dispatch,\n    history,\n    streamContentId,\n    streamLiveToken,\n    streamPostId,\n    streamUserToken\n  ]);\n  const btnClass = c(\n    gStyles.col,\n    gStyles.centerJustify,\n    gStyles.centerAlign,\n    styles[\"stream-type-btn\"]\n  );\n\n  return (\n    <>\n      <DarkPage pageTitle=\"GO LIVE\" scrolls>\n        {/*hide for now since it's not implemented and causes a duplication*/}\n        {/*!isLive && selectedSource === \"camera\" ? <CamFeed /> : <Static /> */}\n\n        <div className={c(gStyles.rowCentered, gStyles.width100)}>\n          <div\n            className={btnClass}\n            onClick={setSelectedSource.bind(null, \"camera\")}\n          >\n            <i\n              className={c(styles[\"stream-type-btn-icon\"], \"fas\", \"fa-camera\")}\n            ></i>\n\n            <Pad amt={16} />\n            <Line\n              color={selectedSource === \"camera\" ? \"#4285b9\" : \"white\"}\n              length={36}\n              type=\"horizontal\"\n              width={2}\n            />\n          </div>\n\n          <div\n            className={btnClass}\n            onClick={setSelectedSource.bind(null, \"obs\")}\n          >\n            <img alt=\"\" className={styles[\"obs-logo\"]} src={obsLogo} />\n\n            <Pad amt={16} />\n            <Line\n              color={selectedSource === \"obs\" ? \"#4285b9\" : \"white\"}\n              length={36}\n              type=\"horizontal\"\n              width={2}\n            />\n          </div>\n        </div>\n\n        <div className={gStyles.commonPaddingH}>\n          {(() => {\n            if (error) {\n              return (\n                <>\n                  <p> An error ocurred: </p>\n\n                  <br />\n\n                  <p className=\"error-container\">{error}</p>\n\n                  <button\n                    className=\"shock-form-button\"\n                    onClick={setError.bind(null, null)}\n                  >\n                    Dismiss\n                  </button>\n                </>\n              );\n            }\n\n            if (streamToken) {\n              return (\n                <>\n                  {selectedSource === \"obs\" && (\n                    <p className=\"m-b-1\">\n                      You are ready to go! setup the stream with OBS and watch\n                      it from your profile\n                    </p>\n                  )}\n\n                  <p>Broadcaster:</p>\n\n                  <div className=\"d-flex flex-align-center\">\n                    {/*@ts-expect-error*/}\n                    <InputGroup\n                      name=\"Streamer Url\"\n                      value={streamBroadcasterUrl}\n                      disabled\n                    />\n                    <i\n                      className={\n                        !copiedUrl\n                          ? \"far fa-copy fa-lg m-1\"\n                          : \"fas fa-check fa-lg m-1\"\n                      }\n                      onClick={copyUri}\n                    ></i>\n                  </div>\n                  <p>Stream Key:</p>\n\n                  <div className=\"d-flex flex-align-center\">\n                    {/*@ts-expect-error*/}\n                    <InputGroup\n                      name=\"Stream Key\"\n                      value={streamToken}\n                      disabled\n                    />\n                    <i\n                      className={\n                        !copiedToken\n                          ? \"far fa-copy fa-lg m-1\"\n                          : \"fas fa-check fa-lg m-1\"\n                      }\n                      onClick={copyToken}\n                    ></i>\n                  </div>\n                  {tipOverlayUrl && <p>Tips notifications overlay Url:</p>}\n                  {tipOverlayUrl && (\n                    <div className=\"d-flex flex-align-center\">\n                      {/*@ts-expect-error*/}\n                      <InputGroup\n                        name=\"Overlay Url\"\n                        value={tipOverlayUrl}\n                        disabled\n                      />\n                      <i\n                        className={\n                          !copiedOverlayUrl\n                            ? \"far fa-copy fa-lg m-1\"\n                            : \"fas fa-check fa-lg m-1\"\n                        }\n                        onClick={copyOverlayUrl}\n                      ></i>\n                    </div>\n                  )}\n                  <div className=\"flex-center\">\n                    <button\n                      onClick={stopStream}\n                      className=\"shock-form-button-confirm\"\n                    >\n                      STOP\n                    </button>\n                  </div>\n                </>\n              );\n            }\n\n            return (\n              <>\n                <input\n                  className=\"input-field\"\n                  type=\"text\"\n                  name=\"paragraph\"\n                  id=\"paragraph\"\n                  value={paragraph}\n                  onChange={onInputChange}\n                />\n                <label htmlFor=\"enable-tips-notifications\">\n                  Enable Tips notifications overlay{\" \"}\n                </label>\n                <input\n                  type=\"checkbox\"\n                  name=\"enable-tips-notifications\"\n                  id=\"enable-tips-notifications\"\n                  checked={enableTipsOverlay}\n                  onChange={onTipsOverlayChange}\n                />\n                <button\n                  onClick={onSubmit}\n                  className={c(gStyles.width100, \"shock-form-button-confirm\")}\n                  disabled={selectedSource === \"camera\" || starting}\n                >\n                  {starting ? \"...\" : \"START NOW\"}\n                </button>\n              </>\n            );\n          })()}\n        </div>\n      </DarkPage>\n\n      {promptInfo && (\n        <Modal\n          modalOpen={promptInfo && !loading}\n          toggleModal={closePrompt}\n          contentClass=\"p-1\"\n          blueBtn=\"Confirm\"\n          onClickBlueBtn={submitPrompt}\n          forceRenderTitleBar\n          noFullWidth\n        >\n          <p className=\"text-center\">\n            The service from the default service provider will cost:{\" \"}\n            <strong>{promptInfo.servicePrice} sats</strong>\n          </p>\n        </Modal>\n      )}\n\n      {loading ? <Loader overlay fullScreen text=\"Creating stream...\" /> : null}\n    </>\n  );\n};\n\nexport default GoLive;\n"],"sourceRoot":""}