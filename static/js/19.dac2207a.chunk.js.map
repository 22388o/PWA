{"version":3,"sources":["common/Modal/components/ModalContent/index.js","common/Modal/components/ModalTitle/index.js","common/Modal/index.js","common/Post/components/TipRibbon/index.js","common/DialogNav/index.js","common/Post/components/Stream/index.tsx","utils/seed.tsx","images/obs-2.svg","pages/Profile/goLive.tsx"],"names":["ModalContent","children","style","className","ModalTitle","title","toggleModal","onClick","Modal","modalOpen","modalTitle","contentStyle","closeModal","useCallback","classNames","modal","TipRibbon","tipCounter","tipValue","zoomed","opacity","DialogNav","pageTitle","drawerVisible","goBack","window","history","back","STREAM_STATUS_URI","Stream","id","item","index","postId","hideRibbon","width","timeout","playerDOM","useRef","useState","isLive","setIsLive","videoStyle","useEffect","recheckInterval","checkStatus","a","magnetURI","split","seedToken","Http","get","data","player","videojs","current","autoplay","muted","aspectRatio","src","type","play","then","setInterval","clearInterval","cursor","display","ref","preload","controls","autoPlay","EnrollToken","seedUrl","array","Uint8Array","crypto","getRandomValues","token","Array","prototype","map","call","x","toString","slice","join","reqData","seed_token","wallet_token","fetch","method","headers","body","JSON","stringify","status","Error","RequestToken","availableTokens","seedProviderPub","serviceID","servicePrice","tokenInfo","deleteToken","availableToken","key","Object","hasOwnProperty","element","tokens","console","log","post","amt","to","memo","feeLimit","ackInfo","orderAck","parse","response","GoLive","dispatch","useDispatch","useHistory","Store","content","seedInfo","streamLiveToken","streamUserToken","streamUrl","userProfiles","selectedSource","setSelectedSource","loading","setLoading","streamToken","setStreamToken","setUserToken","paragraph","setParagraph","error","setError","rtmpUri","setRtmpUri","promptInfo","setPromptInfo","onSubmitCb","finalSeedUrl","latestUserToken","streamData","obsToken","liveToken","streamPlaybackUrl","rtmp","replace","addStream","contentItems","push","text","height","isPreview","isPrivate","userToken","tags","errorMessage","message","closePrompt","submitPrompt","onSubmit","e","preventDefault","SeedServiceProvided","service","copyToken","navigator","clipboard","writeText","copyUri","onInputChange","target","value","name","checked","stopStream","removeStream","StreamRender","useMemo","Loader","overlay","fullScreen","onChange","backgroundColor","color","border","marginBottom","obsLogo","alt","fontSize","padding","justifyContent","substring","length"],"mappings":"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","file":"static/js/19.dac2207a.chunk.js","sourcesContent":["// @ts-check\nimport \"./css/index.css\";\n\nconst ModalContent = ({ children, style }) => (\n  <div className=\"modal-content\" style={style}>\n    {children}\n  </div>\n);\n\nexport default ModalContent;\n","import React from \"react\";\nimport \"./css/index.css\";\n\nconst ModalTitle = ({ title, toggleModal }) =>\n  title ? (\n    <div className=\"modal-head\">\n      <p className=\"modal-head-title\">{title}</p>\n      <div className=\"modal-head-close\" onClick={toggleModal}>\n        <i className=\"fas fa-times\"></i>\n      </div>\n    </div>\n  ) : null;\n\nexport default ModalTitle;\n","// @ts-check\nimport { useCallback } from \"react\";\nimport classNames from \"classnames\";\nimport ModalContent from \"./components/ModalContent\";\nimport ModalTitle from \"./components/ModalTitle\";\nimport \"./css/index.css\";\n\nconst Modal = ({\n  modalOpen = false,\n  toggleModal,\n  modalTitle = \"\",\n  children,\n  contentStyle = {}\n}) => {\n  const closeModal = useCallback(() => {\n    toggleModal();\n  }, [toggleModal]);\n  return (\n    <div className={classNames({ modal: true, \"modal-open\": modalOpen })}>\n      <div className=\"modal-backdrop\" onClick={closeModal} />\n      <div className=\"modal-container\">\n        <ModalTitle title={modalTitle} toggleModal={closeModal} />\n        <ModalContent style={contentStyle}>{children}</ModalContent>\n      </div>\n    </div>\n  );\n};\n\nexport default Modal;\n","import React from \"react\";\nimport \"./css/index.css\";\n\nconst TipRibbon = ({ tipCounter, tipValue, zoomed }) =>\n  tipValue > 0 ? (\n    <div className=\"ribbon-container\" style={{ opacity: !zoomed ? 1 : 0 }}>\n      <p className=\"ribbon-title\">Total Tips</p>\n      <p className=\"ribbon-value\">\n        {tipCounter} {tipCounter === 1 ? \"Tip\" : \"Tips\"}\n      </p>\n    </div>\n  ) : null;\n\nexport default TipRibbon;\n","import React, { useCallback } from \"react\";\nimport classNames from \"classnames\";\nimport \"./css/index.css\";\n\nconst DialogNav = ({ pageTitle, drawerVisible }) => {\n  const goBack = useCallback(() => {\n    window.history.back();\n  }, []);\n  return (\n    <div className=\"dialog-nav-container\">\n      <div className=\"dialog-nav-back\" onClick={goBack}>\n        <i className=\"icon icon-thin-back\"></i>\n      </div>\n      <p className=\"dialog-nav-title\">{pageTitle}</p>\n      <div\n        className={classNames({\n          \"dialog-nav-menu-btn\": true,\n          \"dialog-nav-hidden\": !drawerVisible\n        })}\n      >\n        <div className=\"dialog-nav-menu-dash\" />\n        <div className=\"dialog-nav-menu-dash\" />\n        <div className=\"dialog-nav-menu-dash\" />\n      </div>\n    </div>\n  );\n};\n\nexport default DialogNav;\n","import React, { useRef, useEffect, useState } from \"react\";\nimport TipRibbon from \"../TipRibbon\";\nimport \"./css/index.css\";\nimport videojs from \"video.js\";\nimport Http from \"../../../../utils/Http\";\n\nconst REACT_APP_SL_SEED_URI = \"https://webtorrent.shock.network\";\nconst STREAM_STATUS_URI = `${REACT_APP_SL_SEED_URI}/rtmpapi/api/streams/live`;\n\nconst Stream = ({\n  id,\n  item,\n  index,\n  postId,\n  tipValue,\n  tipCounter,\n  hideRibbon,\n  width,\n  timeout = 10000\n}) => {\n  const playerDOM = useRef(null);\n  const [isLive, setIsLive] = useState(false);\n  const videoStyle = { width: \"100%\" };\n  if (width) {\n    videoStyle.width = width;\n  }\n  useEffect(() => {\n    let recheckInterval = null;\n    const checkStatus = async () => {\n      try {\n        //TODO regex (?) `${REACT_APP_SL_RTMP_API_URI}/live/${seedToken}/index.m3u8`\n        const [seedToken] = item.magnetURI\n          .split(\"/live/\")[1]\n          .split(\"/index.m3u8\");\n        const res = await Http.get(`${STREAM_STATUS_URI}/${seedToken}`);\n        if (!res.data.isLive) {\n          return false;\n        }\n        const player = videojs(playerDOM.current, {\n          autoplay: true,\n          muted: true,\n          aspectRatio: \"16:9\"\n        });\n        player.src({\n          src: item.magnetURI,\n          type: \"application/x-mpegURL\"\n        });\n        /*listen for 404s from the player\n        player.tech().on('retryplaylist', () => {\n          console.log('retryplaylist');\n        });*/\n        player.play();\n        return true;\n      } catch (err) {\n        return false;\n      }\n    };\n    checkStatus().then(isLive => {\n      if (isLive) {\n        setIsLive(true);\n        return;\n      }\n      recheckInterval = setInterval(async () => {\n        const isLive = await checkStatus();\n        if (isLive) {\n          setIsLive(true);\n          clearInterval(recheckInterval);\n          return;\n        }\n      }, timeout);\n    });\n\n    return () => {\n      clearInterval(recheckInterval);\n    };\n  }, [item, timeout]);\n  return (\n    <div className=\"media-container w-100\">\n      <div\n        className=\"video-container w-100\"\n        style={{\n          cursor: \"pointer\",\n          width: \"100%\"\n        }}\n      >\n        {!isLive && <p>The streamer has disconnected.</p>}\n        <div\n          style={\n            isLive ? { width: \"100%\" } : { display: \"none\", width: \"100%\" }\n          }\n        >\n          <video\n            className=\"video-js vjs-default-skin\"\n            ref={playerDOM}\n            style={videoStyle}\n            preload=\"auto\"\n            controls\n            muted\n            autoPlay\n          />\n        </div>\n        {!hideRibbon && (\n          <TipRibbon\n            tipCounter={tipCounter}\n            tipValue={tipValue}\n            zoomed={false}\n          />\n        )}\n      </div>\n    </div>\n  );\n};\n\nexport default Stream;\n","import Http from \"./Http\";\n\n\nexport const EnrollToken = async (seedUrl,seedToken) => {\n    const array = new Uint8Array(32);\n    window.crypto.getRandomValues(array);\n    const token = Array.prototype.map.call(array, x => ('00' + x.toString(16)).slice(-2)).join('');\n    const reqData = {\n      seed_token: seedToken,\n      wallet_token: token\n    }\n    const res = await fetch(`${seedUrl}/api/enroll_token`, {\n      method: 'POST',\n      headers: {\n      'Content-Type': 'application/json'\n    },\n      body: JSON.stringify(reqData)\n    })\n    if (res.status !== 200) {\n      throw new Error('torrentSeed service currently not available')\n    }\n    return token\n}\n\nexport const RequestToken = async ({\n  availableTokens,\n  seedUrl,\n  seedToken,\n  seedProviderPub,\n  serviceID,\n  servicePrice\n}) => {\n  let tokenInfo = null\n  let deleteToken = false\n  let availableToken = null\n  for (const key in availableTokens) {\n    if (Object.prototype.hasOwnProperty.call(availableTokens, key)) {\n      const element = availableTokens[key];\n      if(element[0]){\n        availableToken = {seedUrl:key,tokens:element}\n        break\n      }\n    }\n  }\n  console.log(seedProviderPub)\n  console.log(serviceID)\n  console.log(servicePrice)\n  if(seedUrl && seedToken){\n    console.log(\"USING SELF SEED TOKEN\")\n    const token = await EnrollToken(seedUrl,seedToken)\n    console.log(\"token\")\n    console.log(token)\n    tokenInfo = {seedUrl, tokens:[token]}\n  } else if(availableToken) {\n    console.log(\"USING AVAILABLE TOKEN\")\n    tokenInfo = availableToken\n    deleteToken = true\n  } else if(seedProviderPub && serviceID && servicePrice){\n    console.log(\"USING DEFAULT TOKEN PROVIDER\")\n    const {data,status} = await Http.post('/api/lnd/unifiedTrx',{\n      type: 'service',\n      amt: servicePrice,\n      to:seedProviderPub,\n      memo:'',\n      feeLimit:500,\n      ackInfo:serviceID\n    })\n    if(status !== 200){\n      throw new Error(\"seed token request failed\")\n    }\n    console.log(data)\n    const {orderAck} = data\n    tokenInfo = JSON.parse(orderAck.response)\n  } else {\n    throw new Error(\"provide the token data or use default seed provider\")\n  }\n  return {...tokenInfo,deleteToken}\n}","export default __webpack_public_path__ + \"static/media/obs-2.7c61e78e.svg\";","import React, {  useCallback,   useMemo,   useState } from \"react\";\nimport { useSelector,useDispatch } from \"react-redux\";\nimport {addStream,removeStream} from \"../../actions/ContentActions\"\nimport \"./css/index.css\";\nimport Loader from \"../../common/Loader\";\nimport Http from \"../../utils/Http\";\nimport DialogNav from \"../../common/DialogNav\";\nimport obsLogo from \"../../images/obs-2.svg\"\nimport Stream from \"../../common/Post/components/Stream\";\nimport {EnrollToken, RequestToken} from '../../utils/seed'\nimport { useHistory } from \"react-router\";\nimport Modal from \"../../common/Modal\";\nimport * as Store from \"../../store\";\n\nconst GoLive = () => {\n  const dispatch = useDispatch();\n  const history = useHistory()\n  const seedProviderPub = Store.useSelector(({content}) => content.seedProviderPub)\n  const {seedUrl,seedToken} = Store.useSelector(({content}) => content.seedInfo)\n  const streamLiveToken = Store.useSelector(({content}) => content.streamLiveToken)\n  const streamUserToken = Store.useSelector(({content}) => content.streamUserToken)\n  const availableTokens = Store.useSelector(({content}) => content.availableTokens)\n  const streamUrl = Store.useSelector(({content}) => content.streamUrl)\n  const userProfiles = Store.useSelector(({ userProfiles }) => userProfiles);\n  const [selectedSource, setSelectedSource] = useState('obs');\n  const [loading, setLoading] = useState(false);\n  const [streamToken,setStreamToken] = useState(streamLiveToken)\n  const [userToken,setUserToken] = useState(streamUserToken)\n  const [paragraph,setParagraph] = useState(\"Look I'm streaming!\")\n  const [isLive,setIsLive] = useState(true)\n  const [error, setError] = useState<string|null>(null);\n  const [rtmpUri,setRtmpUri] = useState(\"\")\n  const [promptInfo,setPromptInfo] = useState(null)\n  const onSubmitCb = useCallback(async (servicePrice?,serviceID?) =>{\n    try {\n      setLoading(true)\n      const {seedUrl:finalSeedUrl,tokens} = await RequestToken({\n        availableTokens,\n        seedProviderPub,\n        seedToken,\n        seedUrl,\n        serviceID,\n        servicePrice\n      })\n      const [latestUserToken] = tokens\n      setUserToken(latestUserToken)\n      const {data:streamData} = await Http.post(\n        `${finalSeedUrl}/api/stream/auth`,\n        { token: latestUserToken }\n      );\n      const {token:obsToken} = streamData.data;\n      console.log(obsToken)\n      const liveToken = `${latestUserToken}?key=${obsToken}`\n      setStreamToken(`${latestUserToken}?key=${obsToken}`)\n      const streamPlaybackUrl = `${finalSeedUrl}/rtmpapi/live/${latestUserToken}/index.m3u8`\n      const rtmp = finalSeedUrl.replace('https','rtmp')\n      setRtmpUri(`${rtmp}/live`)\n      addStream(latestUserToken,liveToken,streamPlaybackUrl)(dispatch)\n      let contentItems = []\n      if(paragraph !== ''){\n        contentItems.push({\n          type: 'text/paragraph',\n          text: paragraph,\n        })\n      }\n      contentItems.push({\n        type:'stream/embedded',\n        width:0,\n        height:0,\n        magnetURI:streamPlaybackUrl,\n        isPreview:false,\n        isPrivate:false,\n        userToken:latestUserToken\n      })\n      const res = await Http.post(`/api/gun/wall`, {\n        tags: [],\n        title: 'Post',\n        contentItems,\n      })\n      if (res.status === 200) {\n        console.log('post created successfully')\n        setLoading(false)\n      } else {\n        setError('invalid response status')\n        setLoading(false)\n      }\n      \n    } catch(err) {\n      console.log(err)\n      setError(err?.errorMessage ?? err?.message)\n      setLoading(false)\n    }\n  },[paragraph,seedProviderPub,seedUrl,seedToken,setLoading,setStreamToken,setError,setUserToken,setRtmpUri,addStream])\n  const closePrompt = useCallback(()=>{\n    setPromptInfo(null)\n  },[setPromptInfo])\n\n  const submitPrompt = useCallback(()=>{\n    const {servicePrice,serviceID} = promptInfo\n    onSubmitCb(servicePrice,serviceID)\n    setPromptInfo(null)\n  },[promptInfo,onSubmitCb,setPromptInfo])\n  \n  const onSubmit = useCallback(async(e)=>{\n    e.preventDefault();\n    let availableToken = false\n    for (const key in availableTokens) {\n      if (Object.prototype.hasOwnProperty.call(availableTokens, key)) {\n        const element = availableTokens[key];\n        if(element[0]){\n          availableToken = true\n          break\n        }\n      }\n    }\n    let serviceID = \"\"\n    if(userProfiles[seedProviderPub]){\n      //@ts-expect-error\n      serviceID = userProfiles[seedProviderPub].SeedServiceProvided\n    }\n    if(availableToken || (seedUrl && seedToken)){\n      onSubmitCb()\n    } else if(serviceID && seedProviderPub) {\n      const {data:service} = await Http.get(\n        `/api/gun/otheruser/${seedProviderPub}/load/offeredServices>${serviceID}`\n      )\n      const {servicePrice} = service.data\n      console.log(service)\n      setPromptInfo({servicePrice,serviceID})\n    } else {\n      setError(\"No way found to publish content\")\n    }\n  },[availableTokens,setPromptInfo,setError,onSubmitCb])\n  const copyToken = useCallback(() => {\n    navigator.clipboard.writeText(streamToken);\n  }, [streamToken]);\n  const copyUri = useCallback(() => {\n    navigator.clipboard.writeText(rtmpUri);\n  }, []);\n  const onInputChange = useCallback(e => {\n    const { value, name,checked } = e.target;\n    switch (name) {\n      case \"paragraph\": {\n        setParagraph(value)\n        return;\n      }\n      case \"source\": {\n        setSelectedSource(value)\n        return;\n      }\n      default:\n        return;\n    }\n  }, [setParagraph,setSelectedSource]);\n  const stopStream = useCallback(()=>{\n    removeStream()(dispatch)\n    history.push(\"/profile\")\n  },[history])\n\n  const StreamRender = useMemo(()=>{\n    {/*@ts-expect-error */}\n    return <Stream\n      hideRibbon={true}\n      item={{magnetURI:streamUrl}}\n      timeout={1500}\n    />\n  },[streamUrl])\n  return <div className=\"h-100 m-1\">\n    {loading ? (\n      <Loader overlay fullScreen text=\"Creating stream...\" />\n    ) : null}\n    <DialogNav  drawerVisible={false} pageTitle=\"GO LIVE\" />\n    \n    \n    {isLive && <div >{StreamRender}</div>}\n    <select value={selectedSource} onChange={onInputChange} name=\"source\" id=\"source\" style={{backgroundColor:\"rgba(0,0,0,0)\",color:'white',width:'100%',border:'0',marginBottom:'1em'}}>\n      <option value=\"camera\" style={{backgroundColor:\"rgba(0,0,0,0)\",color:'var(--main-blue)'}}>Camera</option>\n      <option value=\"obs\" style={{backgroundColor:\"rgba(0,0,0,0)\",color:'var(--main-blue)'}}>OBS</option>\n    </select>\n    <div className=\"flex-center m-b-1\">\n      {selectedSource === 'obs' && <img src={obsLogo} style={{width:\"10em\",height:\"10em\"}}alt=\"\"/>}\n      {selectedSource === 'camera' && <i className=\"fas fa-camera\" style={{fontSize:\"10em\"}}></i>}\n    </div>\n    {streamToken ? <div  >\n        {selectedSource === 'obs' && <p className=\"m-b-1\">You are ready to go! setup the stream with OBS and watch it from your profile</p>}\n        <p>Broadcaster:</p>\n        <div style={{border:\"1px solid var(--main-blue)\",padding:\"0.5rem\",display:\"flex\",justifyContent:\"space-between\",marginBottom:\"1rem\"}}>\n          <p >{rtmpUri.substring(0,20)+ (rtmpUri.length >21 ? \"...\" : \"\") }</p>\n          <i className=\"far fa-copy\" onClick={copyUri}></i>\n        </div>\n        <p>Stream Key:</p>\n        <div style={{border:\"1px solid var(--main-blue)\",padding:\"0.5rem\",display:\"flex\",justifyContent:\"space-between\",marginBottom:\"1rem\"}}>\n          <p >{streamToken.substring(0,20)+ (streamToken.length >21 ? \"...\" : \"\")}</p>\n          <i className=\"far fa-copy\" onClick={copyToken}></i>\n        </div>\n        <div className=\"flex-center\">\n          <button onClick={stopStream} className =\"shock-form-button-confirm\">STOP</button>\n        </div>\n      </div>\n      : <div className=\"vertical-flex-center\">\n        <input className=\"input-field\" type=\"text\" name=\"paragraph\" id=\"paragraph\" value={paragraph} onChange={onInputChange}/>\n        <button onClick={onSubmit} className =\"shock-form-button-confirm\">START NOW</button>\n      </div>}\n      {error ? <p className=\"error-container\">{error}</p> : null}\n      {promptInfo && <Modal modalOpen={(promptInfo && !loading)} toggleModal={closePrompt}>\n      <div style={{padding:\"1rem\"}}>\n        <p>The service from the default service provider will cost: <strong>{promptInfo.servicePrice} sats</strong></p>\n        \n        <button className='shock-form-button m-1' onClick={closePrompt}>cancel</button>\n        <button className='shock-form-button-confirm m-1' onClick={submitPrompt}>confirm</button>\n      </div>\n    </Modal>}\n  </div>\n}\n\nexport default GoLive"],"sourceRoot":""}