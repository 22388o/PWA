(this["webpackJsonpshocknet-pwa"]=this["webpackJsonpshocknet-pwa"]||[]).push([[18],{590:function(e,t,a){"use strict";var c=a(1),n=a(84),s=a.n(n),i=(a(596),a(4)),d=function(e){var t=e.children,a=e.style;return Object(i.jsx)("div",{className:"content",style:a,"data-v-f40b8e4b":"",children:t})},l=(a(597),function(e){var t=e.title,a=e.toggleModal;return t?Object(i.jsxs)("div",{className:"head","data-v-dfa0f746":"",children:[Object(i.jsx)("p",{className:"head-title","data-v-dfa0f746":"",children:t}),Object(i.jsx)("div",{className:"head-close",onClick:a,"data-v-dfa0f746":"",children:Object(i.jsx)("i",{className:"fas fa-times","data-v-dfa0f746":""})})]}):null});a(598),t.a=function(e){var t=e.modalOpen,a=void 0!==t&&t,n=e.toggleModal,r=e.modalTitle,o=void 0===r?"":r,b=e.children,u=e.contentStyle,v=void 0===u?{}:u,j=e.disableBackdropClose,m=void 0!==j&&j,f=Object(c.useCallback)((function(){n()}),[n]),h=Object(c.useCallback)((function(){m||n()}),[m,n]);return Object(i.jsxs)("div",{className:s()({modal:!0,open:a}),"data-v-6c508060":"",children:[Object(i.jsx)("div",{className:"backdrop",onClick:h,"data-v-6c508060":""}),Object(i.jsxs)("div",{className:"container","data-v-6c508060":"",children:[Object(i.jsx)(l,{title:o,toggleModal:f,"data-v-6c508060":""}),Object(i.jsx)(d,{style:v,"data-v-6c508060":"",children:b})]})]})}},596:function(e,t,a){},597:function(e,t,a){},598:function(e,t,a){},601:function(e,t,a){"use strict";var c=a(1),n=a(84),s=a.n(n),i=(a(602),a(36)),d=a(8),l=a(87),r=a(592),o=a(20),b=a(4);t.a=function(e){var t=e.pageTitle,a=e.absolute,n=void 0!==a&&a,u=e.solid,v=void 0!==u&&u,j=e.enableBackButton,m=void 0!==j&&j,f=e.onHeight,h=void 0===f?d.b:f,O=Object(i.b)(),p=Object(c.useCallback)((function(){window.history.back()}),[]),x=Object(c.useCallback)((function(){O(Object(l.c)())}),[O]),N=Object(o.useSelector)((function(e){return e.node.publicKey})),g=Object(c.useCallback)((function(e){if(e)try{h(e.getBoundingClientRect().height)}catch(t){console.log("Error inside onHeight mechanism in MainNav:"),console.log(t)}}),[h]);return Object(b.jsxs)("div",{className:s()({"main-nav-container":!0,"main-nav-absolute":n,"main-nav-solid":v}),ref:g,"data-v-b51b5c5b":"",children:[m?Object(b.jsx)("div",{className:"main-nav-back",onClick:p,"data-v-b51b5c5b":"",children:Object(b.jsx)("i",{className:"icon icon-thin-back","data-v-b51b5c5b":""})}):Object(b.jsx)(r.a,{height:40,publicKey:N,"data-v-b51b5c5b":""}),Object(b.jsx)("p",{className:"main-nav-title unselectable","data-v-b51b5c5b":"",children:t}),Object(b.jsxs)("div",{className:"main-nav-menu-btn",onClick:x,"data-v-b51b5c5b":"",children:[Object(b.jsx)("div",{className:"main-nav-menu-dash","data-v-b51b5c5b":""}),Object(b.jsx)("div",{className:"main-nav-menu-dash","data-v-b51b5c5b":""}),Object(b.jsx)("div",{className:"main-nav-menu-dash","data-v-b51b5c5b":""})]})]})}},602:function(e,t,a){},605:function(e,t,a){"use strict";var c=a(60),n=a(4);t.a=function(){return Object(n.jsxs)("div",{className:"bottom-nav-container",children:[Object(n.jsx)(c.c,{className:"bottom-nav-btn",to:"/overview",activeClassName:"active-nav-btn",children:Object(n.jsx)("i",{className:"bottom-nav-btn-icon icon-thin-wallet"})}),Object(n.jsx)(c.c,{className:"bottom-nav-btn",to:"/chat",activeClassName:"active-nav-btn",children:Object(n.jsx)("i",{className:"bottom-nav-btn-icon icon-thin-chat"})}),Object(n.jsx)(c.c,{className:"bottom-nav-btn",to:"/profile",activeClassName:"active-nav-btn",children:Object(n.jsx)("i",{className:"bottom-nav-btn-icon icon-thin-profile"})}),Object(n.jsx)(c.c,{className:"bottom-nav-btn",to:"/feed",activeClassName:"active-nav-btn",children:Object(n.jsx)("i",{className:"bottom-nav-btn-icon icon-thin-feed"})})]})}},610:function(e,t,a){"use strict";var c=a(19),n=a(1),s=a(84),i=a.n(s),d=(a(611),a(4));t.a=function(e){var t=e.label,a=void 0===t?null:t,s=e.icon,l=void 0===s?null:s,r=e.iconURL,o=void 0===r?null:r,b=e.onClick,u=void 0===b?void 0:b,v=e.nestedMode,j=void 0!==v&&v,m=e.large,f=void 0!==m&&m,h=e.small,O=void 0!==h&&h,p=e.relative,x=void 0!==p&&p,N=e.children,g=void 0===N?null:N,k=e.style,C=void 0===k?{}:k,y=Object(n.useState)(!1),q=Object(c.a)(y,2),S=q[0],w=q[1],R=Object(n.useCallback)((function(){j&&w(!S)}),[S,j]),E=Object(n.useMemo)((function(){return o?Object(d.jsx)("img",{src:o,className:"add-btn-icon",alt:"","data-v-12801f58":""}):Object(d.jsx)("i",{className:"fas fa-".concat(null!==l&&void 0!==l?l:"plus"),"data-v-12801f58":""})}),[l,o]),K=Object(n.useMemo)((function(){return a?Object(d.jsx)("p",{className:"add-btn-label","data-v-12801f58":"",children:a}):null}),[a]);return Object(d.jsxs)("div",{className:i()({"add-btn-container":!0,"add-btn-round-container":!a,"add-btn-large":f,"add-btn-small":O}),"data-v-12801f58":"",children:[Object(d.jsxs)("div",{className:i()({"add-btn":!0,"add-btn-round":!a,"add-btn-extended":!!a,"add-btn-relative":x,"add-btn-open":S,"add-btn-nested":j}),onClick:null!==u&&void 0!==u?u:R,style:C,"data-v-12801f58":"",children:[E,K]}),g?Object(d.jsx)("div",{className:i()({"add-btn-options":!0,"add-btn-options-open":S}),"data-v-12801f58":"",children:g}):null]})}},611:function(e,t,a){},613:function(e,t,a){"use strict";a.d(t,"a",(function(){return c}));var c=function(){return!navigator.userAgent.match(/(iPad)|(iPhone)|(iPod)|(android)|(webOS)/i)}},617:function(e,t,a){"use strict";var c=a(636),n=a(613),s=(a(618),a(4)),i={wizard:{title:"SCAN A",target:"QR CODE",description:"Point your camera at a ShockWizard QR Code"},invoice:{title:"SCAN AN",target:"INVOICE",description:"Point your camera at an LND Invoice"}};t.a=function(e){var t=e.mode,a=void 0===t?"wizard":t,d=e.onScan,l=e.onError,r=e.onClose,o=i[a],b={};return Object(n.a)()||(b.facingMode={exact:"environment"}),Object(s.jsxs)("div",{className:"qr-code-scanner-container","data-v-5cb1e403":"",children:[Object(s.jsx)("div",{className:"qr-scanner-top-section","data-v-5cb1e403":"",children:Object(s.jsx)("i",{className:"fas fa-times",onClick:r,"data-v-5cb1e403":""})}),Object(s.jsx)(c.a,{constraints:{video:b},onScan:d,onError:l,"data-v-5cb1e403":""}),Object(s.jsx)("div",{className:"qr-scanner-target","data-v-5cb1e403":""}),Object(s.jsxs)("div",{className:"qr-scanner-bottom-section","data-v-5cb1e403":"",children:[Object(s.jsxs)("p",{className:"qr-scanner-bottom-title","data-v-5cb1e403":"",children:[o.title," ",Object(s.jsx)("span",{className:"qr-scanner-bottom-title-highlight","data-v-5cb1e403":"",children:o.target})]}),Object(s.jsx)("p",{className:"qr-scanner-bottom-description","data-v-5cb1e403":"",children:o.description}),Object(s.jsx)("div",{className:"qr-scanner-btn",onClick:r,"data-v-5cb1e403":"",children:"Cancel Scan"})]})]})}},618:function(e,t,a){},737:function(e,t,a){},738:function(e,t,a){},739:function(e,t,a){},892:function(e,t,a){"use strict";a.r(t);var c=a(3),n=a.n(c),s=a(6),i=a(26),d=a(19),l=a(1),r=a(179),o=a(47),b=a(57),u=a(605),v=a(60),j=a(592),m={height:"55px",width:"55px"},f=a(20),h=a(8),O=(a(737),a(186)),p=a(4),x=function(e){var t=e.subtitle,a=void 0===t?"":t,c=e.time,n=e.publicKey,s=e.id,i=(h.l(),f.useSelector((function(e){return e.node.publicKey})),f.useSelector(f.selectUser(n)));return Object(p.jsxs)(v.b,{to:"/chat/".concat(s),className:"container","data-v-8df13258":"",children:[Object(p.jsxs)("div",{className:"author-container","data-v-8df13258":"",children:[Object(p.jsx)("div",{className:"author-avatar",style:m,"data-v-8df13258":"",children:Object(p.jsx)(j.a,{publicKey:n,height:55,"data-v-8df13258":""})}),Object(p.jsxs)("div",{className:"author-details","data-v-8df13258":"",children:[Object(p.jsx)("p",{className:"author-username","data-v-8df13258":"",children:Object(O.b)(i.publicKey,i.displayName)}),Object(p.jsx)("p",{className:"author-text","data-v-8df13258":"",children:a})]})]}),Object(p.jsx)("p",{className:"timestamp","data-v-8df13258":"",children:c})]})},N=(a(738),function(e){var t=e.publicKey,a=void 0===t?"":t,c=e.time,n=e.sent,s=e.id,i=f.useSelector(f.selectUser(a));return Object(p.jsxs)(v.b,{to:"/chat/".concat(s),className:"request-container","data-v-937429a9":"",children:[Object(p.jsxs)("div",{className:"request-author-container","data-v-937429a9":"",children:[Object(p.jsx)("div",{className:"request-author-avatar",style:m,"data-v-937429a9":"",children:Object(p.jsx)(j.a,{publicKey:a,height:55,"data-v-937429a9":""})}),Object(p.jsxs)("div",{className:"request-author-details","data-v-937429a9":"",children:[Object(p.jsxs)("p",{className:"request-author-username","data-v-937429a9":"",children:[n?"Sent Request":"Received Request"," - ",i.displayName]}),Object(p.jsx)("p",{className:"request-author-text","data-v-937429a9":"",children:"Request pending acceptance..."})]})]}),Object(p.jsx)("p",{className:"request-timestamp","data-v-937429a9":"",children:c})]})}),g=a(601),k=a(610),C=a(177),y=a(80),q=(a(739),a(590)),S=a(617);t.default=function(){var e=h.l(),t=Object(l.useState)(!1),a=Object(d.a)(t,2),c=a[0],v=a[1],j=Object(l.useState)(""),m=Object(d.a)(j,2),O=m[0],w=m[1],R=Object(l.useState)(!1),E=Object(d.a)(R,2),K=E[0],A=E[1],M=f.useSelector(f.selectConvos),P=f.useSelector(f.selectAllMessages),T=h.a,D=f.useSelector(f.selectReceivedRequests),Q=Object(l.useState)(!1),U=Object(d.a)(Q,2),B=U[0],I=U[1],z=f.useSelector(f.selectCurrentHandshakeAddress);Object(l.useEffect)((function(){var t=e(Object(o.p)());return function(){t.then((function(e){return e.off()}))}}),[e]),Object(l.useEffect)((function(){var t=e(Object(o.q)(z));return function(){t.then((function(e){return e.off()}))}}),[z,e]),Object(l.useEffect)((function(){var t=e(Object(o.o)());return function(){t.then((function(e){return e.off()}))}})),Object(l.useEffect)((function(){var t=M.map((function(t){return e(Object(b.b)(t.with))}));return t.push.apply(t,Object(i.a)(D.map((function(t){return e(Object(b.b)(t.from))})))),function(){t.map((function(e){return e()}))}}),[M,e,D]);var H=Object(l.useCallback)((function(){v(!c)}),[c]),L=Object(l.useCallback)(function(){var t=Object(s.a)(n.a.mark((function t(a){var c,s,i,d;return n.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a){t.next=2;break}return t.abrupt("return");case 2:if(t.prev=2,c=a,a.startsWith("https://")&&(s=a.split("/"),c=s[s.length-1]),w(null),A(!0),null===(i=(n=c).startsWith("http")?n.split("/").slice(-1)[0]:n)||void 0===i?void 0:i.length){t.next=10;break}throw new y.a({field:"publicKey",message:"Please specify a public key"});case 10:if(/^[0-9A-Za-z\-_.+/]+[=]{0,3}/.test(i)){t.next=12;break}throw new y.a({field:"publicKey",message:"Invalid public key format specified"});case 12:return t.next=14,e(Object(o.l)(c));case 14:v(!1),t.next=22;break;case 17:t.prev=17,t.t0=t.catch(2),d=t.t0 instanceof y.a?t.t0.message:"An unknown error has occurred",console.error(t.t0),w(d);case 22:return t.prev=22,A(!1),t.finish(22);case 25:case"end":return t.stop()}var n}),t,null,[[2,17,22,25]])})));return function(e){return t.apply(this,arguments)}}(),[e]),W=Object(l.useCallback)(Object(s.a)(n.a.mark((function e(){var t;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,navigator.clipboard.readText();case 3:return t=e.sent,e.abrupt("return",L(t));case 7:e.prev=7,e.t0=e.catch(0),alert(e.t0.message);case 10:case"end":return e.stop()}}),e,null,[[0,7]])}))),[L]),J=Object(l.useCallback)((function(){I(!0)}),[I]),G=Object(l.useCallback)((function(){I(!1)}),[I]),V=Object(l.useCallback)((function(e){console.log(e),w(e.message)}),[w]),Z=Object(l.useCallback)((function(e){e&&e.text&&(L(e.text),I(!1),console.log(e.text))}),[L,I]);return B?Object(p.jsx)("div",{"data-v-b965f3d7":"",children:Object(p.jsx)(S.a,{mode:"invoice",onClose:G,onError:V,onScan:Z,"data-v-b965f3d7":""})}):(console.log(O),Object(p.jsxs)("div",{className:"page-container messages-page","data-v-b965f3d7":"",children:[Object(p.jsx)(g.a,{solid:!0,pageTitle:"MESSAGES","data-v-b965f3d7":""}),Object(p.jsxs)("div",{className:"messages-container","data-v-b965f3d7":"",children:[Object(p.jsxs)("div",{className:"message-list-container no-scrollbar","data-v-b965f3d7":"",children:[T.length>0?Object(p.jsx)("p",{className:"messages-section-title","data-v-b965f3d7":"",children:"Sent Requests"}):null,T.map((function(e){return Object(p.jsx)(N,{publicKey:e.pk,sent:!0,time:void 0,id:e.id,"data-v-b965f3d7":""},e.id)})),D.length>0?Object(p.jsx)("p",{className:"messages-section-title","data-v-b965f3d7":"",children:"Received Requests"}):null,D.map((function(e){return Object(p.jsx)(N,{publicKey:e.from,sent:!1,time:void 0,id:e.id,"data-v-b965f3d7":""},e.id)})),M.length>0?Object(p.jsx)("p",{className:"messages-section-title","data-v-b965f3d7":"",children:"Messages"}):null,M.map((function(e){var t,a=Object.values(null!==(t=P[e.id])&&void 0!==t?t:[]),c=function(){var e;return null!==(e=a[0])&&void 0!==e?e:{body:"Unable to preview last message...",timestamp:Date.now()}}();return Object(p.jsx)(x,{publicKey:e.with,subtitle:c.body,time:r.DateTime.fromMillis(c.timestamp).toRelative(),id:e.id,"data-v-b965f3d7":""},e.id)}))]}),Object(p.jsx)(k.a,{onClick:H,label:"REQUEST","data-v-b965f3d7":""}),Object(p.jsxs)(q.a,{modalTitle:"SEND REQUEST",toggleModal:H,modalOpen:c,"data-v-b965f3d7":"",children:[K?Object(p.jsx)(C.a,{text:"Sending Request...",overlay:!0,style:{borderRadius:"0 0 15px 15px"},"data-v-b965f3d7":""}):null,O?Object(p.jsx)("div",{className:"send-request-error","data-v-b965f3d7":"",children:O}):null,Object(p.jsxs)("div",{className:"send-request-cards","data-v-b965f3d7":"",children:[Object(p.jsxs)("div",{className:"send-request-card",onClick:J,"data-v-b965f3d7":"",children:[Object(p.jsx)("i",{className:"send-request-card-icon fas fa-qrcode","data-v-b965f3d7":""}),Object(p.jsx)("p",{className:"send-request-card-title","data-v-b965f3d7":"",children:"SCAN QR"}),Object(p.jsx)("p",{className:"send-request-card-desc","data-v-b965f3d7":"",children:"Scan another users QR to send a message request."})]}),Object(p.jsxs)("div",{className:"send-request-card",onClick:W,"data-v-b965f3d7":"",children:[Object(p.jsx)("i",{className:"send-request-card-icon fas fa-clipboard","data-v-b965f3d7":""}),Object(p.jsx)("p",{className:"send-request-card-title","data-v-b965f3d7":"",children:"PASTE CLIPBOARD"}),Object(p.jsx)("p",{className:"send-request-card-desc","data-v-b965f3d7":"",children:"Paste another users Public Key to send a message request."})]})]})]})]}),Object(p.jsx)(u.a,{"data-v-b965f3d7":""})]}))}}}]);
//# sourceMappingURL=18.6b701351.chunk.js.map