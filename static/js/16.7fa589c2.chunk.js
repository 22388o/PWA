(this["webpackJsonpshocknet-pwa"]=this["webpackJsonpshocknet-pwa"]||[]).push([[16],{482:function(e,t,c){"use strict";var n=c(3),a=c(73),o=c.n(a),i=(c(485),c(7)),s=function(e){var t=e.children,c=e.style;return Object(i.jsx)("div",{className:"modal-content",style:c,children:t})},r=(c(486),function(e){var t=e.title,c=e.toggleModal;return t?Object(i.jsxs)("div",{className:"modal-head",children:[Object(i.jsx)("p",{className:"modal-head-title",children:t}),Object(i.jsx)("div",{className:"modal-head-close",onClick:c,children:Object(i.jsx)("i",{className:"fas fa-times"})})]}):null});c(487),t.a=function(e){var t=e.modalOpen,c=void 0!==t&&t,a=e.toggleModal,l=e.modalTitle,u=void 0===l?"":l,d=e.children,b=e.contentStyle,j=void 0===b?{}:b,f=Object(n.useCallback)((function(){a()}),[a]);return Object(i.jsxs)("div",{className:o()({modal:!0,"modal-open":c}),children:[Object(i.jsx)("div",{className:"modal-backdrop",onClick:f}),Object(i.jsxs)("div",{className:"modal-container",children:[Object(i.jsx)(r,{title:u,toggleModal:f}),Object(i.jsx)(s,{style:j,children:d})]})]})}},485:function(e,t,c){},486:function(e,t,c){},487:function(e,t,c){},493:function(e,t,c){"use strict";var n=c(53),a=c(7);t.a=function(){return Object(a.jsxs)("div",{className:"bottom-nav-container",children:[Object(a.jsx)(n.c,{className:"bottom-nav-btn",to:"/overview",activeClassName:"active-nav-btn",children:Object(a.jsx)("i",{className:"bottom-nav-btn-icon icon-thin-wallet"})}),Object(a.jsx)(n.c,{className:"bottom-nav-btn",to:"/chat",activeClassName:"active-nav-btn",children:Object(a.jsx)("i",{className:"bottom-nav-btn-icon icon-thin-chat"})}),Object(a.jsx)(n.c,{className:"bottom-nav-btn",to:"/profile",activeClassName:"active-nav-btn",children:Object(a.jsx)("i",{className:"bottom-nav-btn-icon icon-thin-profile"})}),Object(a.jsx)(n.c,{className:"bottom-nav-btn",to:"/feed",activeClassName:"active-nav-btn",children:Object(a.jsx)("i",{className:"bottom-nav-btn-icon icon-thin-feed"})})]})}},500:function(e,t,c){"use strict";var n=c(17),a=c(3),o=c(73),i=c.n(o),s=(c(501),c(7));t.a=function(e){var t=e.label,c=void 0===t?null:t,o=e.icon,r=void 0===o?null:o,l=e.iconURL,u=void 0===l?null:l,d=e.onClick,b=void 0===d?void 0:d,j=e.nestedMode,f=void 0!==j&&j,p=e.large,O=void 0!==p&&p,h=e.small,m=void 0!==h&&h,v=e.relative,x=void 0!==v&&v,g=e.children,k=void 0===g?null:g,C=e.style,y=void 0===C?{}:C,N=Object(a.useState)(!1),S=Object(n.a)(N,2),w=S[0],_=S[1],I=Object(a.useCallback)((function(){f&&_(!w)}),[w,f]),P=Object(a.useMemo)((function(){return u?Object(s.jsx)("img",{src:u,className:"add-btn-icon",alt:""}):Object(s.jsx)("i",{className:"fas fa-".concat(null!==r&&void 0!==r?r:"plus")})}),[r,u]),R=Object(a.useMemo)((function(){return c?Object(s.jsx)("p",{className:"add-btn-label",children:c}):null}),[c]);return Object(s.jsxs)("div",{className:i()({"add-btn-container":!0,"add-btn-round-container":!c,"add-btn-large":O,"add-btn-small":m}),children:[Object(s.jsxs)("div",{className:i()({"add-btn":!0,"add-btn-round":!c,"add-btn-extended":!!c,"add-btn-relative":x,"add-btn-open":w,"add-btn-nested":f}),onClick:null!==b&&void 0!==b?b:I,style:y,children:[P,R]}),k?Object(s.jsx)("div",{className:i()({"add-btn-options":!0,"add-btn-options-open":w}),children:k}):null]})}},501:function(e,t,c){},502:function(e,t,c){},526:function(e,t,c){e.exports={container:"ProfileDivider_container__3ob9k",selected:"ProfileDivider_selected__3U98y",unselected:"ProfileDivider_unselected__1Z_qd",divider:"ProfileDivider_divider__1IzYV"}},527:function(e,t,c){"use strict";t.a=c.p+"static/media/clipboard.beb19e1e.svg"},528:function(e,t,c){"use strict";t.a=c.p+"static/media/qrcode.69103c6c.svg"},573:function(e,t,c){"use strict";var n=c(73),a=c.n(n),o=c(484),i=c(3),s=c(7),r=function(e){var t=e.color,c=e.length,n=e.type,a=e.width,o=Object(i.useMemo)((function(){return"vertical"===n?{borderLeftStyle:"solid",borderLeftWidth:"".concat(a/2,"px"),borderLeftColor:t,borderRightStyle:"solid",borderRightWidth:"".concat(a/2,"px"),borderRightColor:t,height:c}:"horizontal"===n?{borderTopStyle:"solid",borderTopWidth:a/2,borderTopColor:t,borderBottomStyle:"solid",borderBottomWidth:a/2,borderBottomColor:t,width:c}:{}}),[t,c,n,a]);return Object(s.jsx)("div",{style:o})},l=c(526),u=c.n(l);t.a=function(e){var t=e.onChange,c=e.selected;return Object(s.jsxs)("div",{className:a()(o.w,o.s,o.t,o.q,u.a.container),children:[Object(s.jsx)("span",{className:a()(o.v,"posts"===c&&u.a.selected,"services"===c&&u.a.unselected),onClick:function(){t("posts")},children:"Posts"}),Object(s.jsx)("div",{className:o.a,children:Object(s.jsx)(r,{color:"white",length:16,type:"vertical",width:2})}),Object(s.jsx)("span",{className:a()(o.v,"services"===c&&u.a.selected,"posts"===c&&u.a.unselected),onClick:function(){t("services")},children:"Services"})]})}},627:function(e,t,c){e.exports={container:"ContentHostInputView_container__1CVAn","uri-or-token-input":"ContentHostInputView_uri-or-token-input__3vg5h","plus-or-paste-btn":"ContentHostInputView_plus-or-paste-btn__3z_k0"}},628:function(e,t,c){e.exports={"container-base":"Host_container-base__r5EJP","remove-or-cancel":"Host_remove-or-cancel__2sHhe Host_container-base__r5EJP",container:"Host_container__2hPww Host_container-base__r5EJP",pill:"Host_pill__1WzlY","display-name-or-uri":"Host_display-name-or-uri__2eaUy","price-and-status":"Host_price-and-status__3Q4n3",price:"Host_price__2oEgL",red:"Host_red__1kS00",yellow:"Host_yellow__3DLEG",blue:"Host_blue__3m2Kb"}},754:function(e,t,c){"use strict";c.r(t);var n=c(2),a=c.n(n),o=c(5),i=c(17),s=c(3),r=c.n(s),l=c(33),u=c(525),d=c.n(u),b=c(53),j=c(73),f=c.n(j),p=c(22),O=c(92),h=c(60),m=c(105),v=c(484),x=c(493),g=c(500),k=c(482),C=c(150),y=c(492),N=c(15),S=c(20),w=c(32),_=c(84),I=c(627),P=c.n(I),R=c(628),D=c.n(R),T=c(7),U=function(e){var t=e.error,c=e.isBeingAddedOrDeleted,n=e.isDefault,a=e.onClickRemove,o=e.onClickWarning,r=e.price,l=e.publicKey,u=e.URI,d=S.useSelector(S.selectUser(l)),b=Object(s.useState)(!1),j=Object(i.a)(b,2),O=j[0],h=j[1],m=Object(s.useCallback)((function(){h((function(e){return!e}))}),[]),x=Object(s.useCallback)((function(){o(l||u)}),[o,l,u]),g=Object(s.useCallback)((function(){a(l||u)}),[a,l,u]),k=t&&c||l&&u||!l&&!u,C=t;return k&&(C="Malformed host provided to <Host />, it must have either a public key or an URI (though not both), and it must not have both truthy error and isAdding props at the same time: ".concat(JSON.stringify(k))),O?Object(T.jsxs)("div",{className:f()(v.s,v.d,v.w),children:[Object(T.jsx)("button",{onClick:g,className:f()(v.j),children:"Remove"}),Object(T.jsx)("button",{onClick:m,className:f()(v.j),children:"Cancel"})]}):Object(T.jsxs)("div",{className:f()(v.s,v.u,v.f,D.a.container),children:[Object(T.jsxs)("div",{className:f()(v.s,v.u,v.g,D.a.pill),children:[l?Object(T.jsx)(y.a,{height:24,publicKey:l}):Object(T.jsx)("i",{className:f()("fas fa-globe")}),Object(T.jsx)("span",{className:D.a["display-name-or-uri"],children:u&&u.toLowerCase()||d.displayName||p.e(l)}),c||C?Object(T.jsx)("div",{}):Object(T.jsx)("span",{className:"fas fa-times",onClick:m,style:{fontSize:12}})]}),Object(T.jsxs)("div",{className:f()(v.k,v.f,D.a["price-and-status"]),children:[Object(T.jsxs)("span",{className:f()(v.k,D.a.price),children:[r," sats"]}),C?Object(T.jsx)("i",{className:f()("fas fa-exclamation-triangle",v.l,D.a.yellow),onClick:x}):c?Object(T.jsx)("i",{className:f()("fas fa-hourglass-half",v.l,D.a.yellow)}):n?Object(T.jsx)("i",{className:f()("fas fa-check",v.l,D.a.blue)}):Object(T.jsx)("i",{className:f()("fas fa-link",v.l,D.a.blue)})]})]})},E=f()(v.s,v.w,v.d,v.e,v.q),M=function(e){var t,c=e.hosts,n=e.onAddHost,a=e.onRemoveHost,o=e.onRetryHost,r=Object(s.useState)({publicKeyOrServerURI:"",URIHostAwaitingForToken:""}),l=Object(i.a)(r,2),u=l[0],d=u.publicKeyOrServerURI,b=u.URIHostAwaitingForToken,j=l[1],p=Object(s.useState)(""),O=Object(i.a)(p,2),m=O[0],x=O[1],g=Object(s.useState)(!1),C=Object(i.a)(g,2),y=C[0],S=C[1],w=Object(s.useRef)(null),I=Object(s.useState)(!1),R=Object(i.a)(I,2),D=R[0],M=R[1],H=Object(s.useState)(""),A=Object(i.a)(H,2),K=A[0],B=A[1],z=Object(s.useRef)(null),L=Object(s.useState)(!1),F=Object(i.a)(L,2),q=F[0],W=F[1],V=Object(s.useMemo)((function(){return c.slice().sort((function(e,t){return t.dateAdded-e.dateAdded}))}),[c]),$=Object(s.useMemo)((function(){return V.filter((function(e){return e.isDefault}))}),[V]),G=Object(s.useMemo)((function(){return V.filter((function(e){return!e.isDefault}))}),[V]),J=Object(s.useMemo)((function(){return[].concat(Object(N.a)($),Object(N.a)(G))}),[$,G]),Y=Object(s.useCallback)((function(){S(!0)}),[]),Q=Object(s.useCallback)((function(){D||(navigator.clipboard?(M(!0),navigator.clipboard.readText().then((function(e){j(Object(_.a)((function(t){t.publicKeyOrServerURI=e})))})).catch((function(e){alert("Could not paste: ".concat(e.message))})).finally((function(){M(!1)}))):w.current&&(w.current.focus(),document.execCommand("paste"),w.current.blur()))}),[D,M]),Z=Object(s.useCallback)((function(){j(Object(_.a)((function(e){var t=h.f(e.publicKeyOrServerURI);t&&(e.publicKeyOrServerURI=t,e.URIHostAwaitingForToken=t)}))),h.f(d)||n(d)}),[j,d,n]),X=Object(s.useCallback)((function(){q||(navigator.clipboard?(W(!0),navigator.clipboard.readText().then((function(e){B(e)})).catch((function(e){alert("Could not paste: ".concat(e.message))})).finally((function(){W(!1)}))):z.current&&(z.current.focus(),document.execCommand("paste"),z.current.blur()))}),[q,W,B]),ee=Object(s.useCallback)((function(){j(Object(_.a)((function(e){e.publicKeyOrServerURI="",e.URIHostAwaitingForToken=""}))),n(d,K)}),[j,n,d,K]),te=Object(s.useCallback)((function(e){a(e)}),[a]),ce=Object(s.useCallback)((function(){x("")}),[x]),ne=Object(s.useCallback)((function(){a(m),ce()}),[a,m,ce]),ae=Object(s.useCallback)((function(){o(m),x("")}),[o,m,x]);return Object(T.jsxs)(T.Fragment,{children:[Object(T.jsxs)("div",{className:f()(v.h,v.w,P.a.container),children:[Object(T.jsxs)("div",{className:(v.r,v.d),children:[Object(T.jsx)("input",{className:f()("input-field",P.a["uri-or-token-input"]),onChange:function(e){j(Object(_.a)((function(t){t.publicKeyOrServerURI=e.target.value,t.URIHostAwaitingForToken=""}))),B("")},type:"text",value:d,onKeyUp:function(e){"Enter"!==e.key&&13!==e.keyCode||Z()},autoCapitalize:"off",autoCorrect:"none",placeholder:"Provider Pubkey or Server URI (include https or http)",ref:w,onFocus:Y}),0===d.length&&Object(T.jsx)("button",{className:f()(v.i,P.a["plus-or-paste-btn"]),disabled:D,onClick:Q,children:Object(T.jsx)("i",{className:"fas fa-paste"})}),d.length>0&&d!==b&&Object(T.jsx)("button",{className:f()(v.i,P.a["plus-or-paste-btn"]),disabled:0===d.length,onClick:Z,children:"+"})]}),d.length>0&&d===b&&Object(T.jsxs)("div",{className:(v.r,v.d),children:[Object(T.jsx)("input",{className:f()("input-field",P.a["uri-or-token-input"]),onChange:function(e){B(e.target.value)},type:"text",value:K,onKeyUp:function(e){"Enter"!==e.key&&13!==e.keyCode||ee()},autoCapitalize:"off",autoCorrect:"none",placeholder:"Token (required)",ref:z}),0===K.length&&Object(T.jsx)("button",{className:f()(v.i,P.a["plus-or-paste-btn"]),disabled:q,onClick:X,children:Object(T.jsx)("i",{className:"fas fa-paste"})}),K.length>0&&Object(T.jsx)("button",{className:f()(v.i,P.a["plus-or-paste-btn"]),disabled:0===K.length,onClick:ee,children:"+"})]}),Object(T.jsx)("div",{className:f()(v.h),children:(y?J:$).map((function(e){return Object(T.jsx)(U,{URI:e.URI,dateAdded:0,error:e.error,isBeingAddedOrDeleted:e.isBeingAddedOrDeleted,isDefault:e.isDefault,onClickRemove:te,onClickWarning:x,price:e.price,publicKey:e.publicKey,token:e.token},e.publicKey||e.URI)}))})]}),Object(T.jsx)(k.a,{modalOpen:!!m,modalTitle:null===(t=J.find((function(e){return e.publicKey===m||e.URI===m})))||void 0===t?void 0:t.error,toggleModal:ce,children:Object(T.jsxs)("div",{className:E,children:[Object(T.jsx)("button",{onClick:ne,className:"shock-form-button m-1",children:"REMOVE"}),Object(T.jsx)("button",{onClick:ae,className:"shock-form-button-confirm m-1",children:"RETRY"})]})})]})},H=c(42),A=function(){var e=Object(l.c)(),t=S.useSelector((function(e){return e.content.seedProviderPub})),c=S.useSelector((function(e){return e.userProfiles})),n=S.useSelector((function(e){return e.content.seedInfo})),a=n.seedUrl,o=n.seedToken,r=Object(s.useState)([]),u=Object(i.a)(r,2),d=u[0],b=u[1],j=Object(s.useState)(null),f=Object(i.a)(j,2),p=f[0],O=f[1],m=Object(s.useState)(""),v=Object(i.a)(m,2),x=v[0],g=v[1];Object(s.useEffect)((function(){var e=c[t];e?p&&e.avatar===p.avatar&&e.SeedServiceProvided===p.SeedServiceProvided||O(e):O(null)}),[c,t,p,O]),Object(s.useEffect)((function(){if(p){var e=p.SeedServiceProvided;e!==x&&g(e)}}),[p,x,g]),Object(s.useEffect)((function(){var e=[];a&&o&&e.push({URI:a,token:o,price:0,isBeingAddedOrDeleted:!1,dateAdded:Date.now(),isDefault:!0,error:null,publicKey:null}),t&&p&&e.push({dateAdded:Date.now(),isBeingAddedOrDeleted:!0,isDefault:!0,publicKey:t,price:0,URI:null,token:null,error:null}),b(e)}),[a,o,t,p,b]),Object(s.useEffect)((function(){x&&h.b.get("/api/gun/otheruser/".concat(t,"/load/offeredServices>").concat(x)).then((function(e){var t=e.data.data,c=Object(N.a)(d),n=c.findIndex((function(e){return!e.URI}));-1!==n&&(c[n].isBeingAddedOrDeleted=!1,c[n].price=t.servicePrice,b(c))})).catch((function(e){var t=Object(N.a)(d),c=t.findIndex((function(e){return!e.URI}));t[c].isBeingAddedOrDeleted=!1,t[c].error=e.message||e,b(t)}))}),[x,d,b]);var k=Object(s.useCallback)((function(t,c){t.startsWith("http")?Object(H.h)(t,c)(e):Object(H.i)(t)(e)}),[H.h,H.i]),C=Object(s.useCallback)((function(t){t.startsWith("http")?Object(H.h)("","")(e):Object(H.i)("")(e)}),[H.h,H.i]);Object(s.useMemo)((function(){return[]}),[]);Object(s.useEffect)((function(){return e(Object(w.b)(t)),function(){e(Object(w.c)(t))}}),[t,e]);var y=Object(s.useMemo)((function(){return d.filter((function(e){return e}))}),[d]);return Object(T.jsx)(M,{hosts:y,onAddHost:k,onRemoveHost:C,onRetryHost:function(){}})},K=c(573),B=c(498),z=c(527),L=c(528),F=c(24),q=(c(502),c(21)),W=c(56),V=r.a.lazy((function(){return Promise.all([c.e(1),c.e(3)]).then(c.bind(null,523))})),$=r.a.lazy((function(){return Promise.all([c.e(2),c.e(1),c.e(5)]).then(c.bind(null,745))})),G=["https://shock.pub","https://shock.page","https://lightning.page","https://satoshi.watch"];t.default=function(){var e=Object(l.c)(),t=Object(s.useState)(!1),c=Object(i.a)(t,2),n=c[0],r=c[1],u=Object(s.useState)(null),j=Object(i.a)(u,2),N=j[0],w=j[1],_=S.useSelector((function(e){return e.feed.posts})),I=S.useSelector((function(e){return e.node.publicKey})),P=S.useSelector((function(e){return e.node.hostIP})),R=S.useSelector((function(e){return e.userProfiles})),D=S.useSelector((function(e){return e.orders.myServices})),U=Object(s.useState)("posts"),E=Object(i.a)(U,2),M=E[0],H=E[1],J=Object(l.d)(S.selectSelfUser),Y=Object(s.useMemo)((function(){return _&&_[I]?_[I].sort((function(e,t){var c=Object(W.b)(e)?e.shareDate:e.date;return(Object(W.b)(t)?t.shareDate:t.date)-c})):[]}),[_,I]);console.debug(_),console.debug(Y),Object(s.useEffect)((function(){var t=Object(m.e)(P)(e);return function(){t.then((function(e){return e()}))}}),[P,e]);var Q=Object(s.useCallback)((function(){r(!n)}),[n]),Z=Object(s.useState)(!1),X=Object(i.a)(Z,2),ee=X[0],te=X[1],ce=Object(s.useState)(G[0]),ne=Object(i.a)(ce,2),ae=ne[0],oe=ne[1],ie=Object(s.useState)(G[0]),se=Object(i.a)(ie,2),re=se[0],le=se[1],ue=Object(s.useCallback)((function(){if(navigator.clipboard)navigator.clipboard.writeText(re+"/"+I);else{var e=document.querySelector("#web-client-url-holder");e.style.display="block",e.select(),document.execCommand("copy"),e.blur(),e.style.display="none"}}),[re,I]);Object(s.useEffect)((function(){var e="$user::Profile>webClientPrefix::on";return Object(o.a)(a.a.mark((function t(){var c;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(F.f)({host:P,query:e});case 2:(c=t.sent).on("$shock",(function(e){"string"===typeof e?oe(e):h.b.post("/api/gun/put",{path:"$user>Profile>webClientPrefix",value:G[0]}).catch((function(e){alert("Error setting default web client prefix: ".concat(e.message))}))})),c.on("$error",(function(e){alert("There was an error fetching web client prefix: ".concat(e))}));case 5:case"end":return t.stop()}}),t)})))(),function(){Object(F.b)(e)}}),[P,I]);var de=Object(s.useCallback)((function(e){H(e)}),[]),be=re!==ae,je=Object(s.useCallback)((function(){te((function(e){return!e})),le(ae)}),[ae]),fe=Object(s.useCallback)((function(){je()}),[je]),pe=Object(s.useCallback)((function(){re!==ae&&h.b.post("/api/gun/put",{path:"$user>Profile>webClientPrefix",value:re}).catch((function(e){alert("There was an error setting your web client prefix: ".concat(e.message))})),je()}),[je,re,ae]),Oe=Object(s.useRef)(null),he=Object(s.useState)(!1),me=Object(i.a)(he,2),ve=me[0],xe=me[1],ge=function(){var e=Object(o.a)(a.a.mark((function e(t){var c,n,o,s,r,l;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,t.preventDefault(),!ve){e.next=4;break}return e.abrupt("return");case 4:if(xe(!0),c=t.target,0!==(n=c.files).length){e.next=8;break}return e.abrupt("return");case 8:if(1===n.length){e.next=12;break}return h.e.error("Profile -> files.length !== 1"),alert("An error occurred while trying to set a header. This has been logged."),e.abrupt("return");case 12:return o=Object(i.a)(n,1),s=o[0],e.next=15,h.g(s,320,.7);case 15:return r=e.sent,"data:image/jpeg;base64,",l=r.slice("data:image/jpeg;base64,".length),e.next=20,h.b.post("/api/gun/put",{path:"$user>profileBinary>header",value:l});case 20:e.next=27;break;case 22:e.prev=22,e.t0=e.catch(0),h.e.error("Error while trying to load new header."),h.e.error(e.t0),alert("There was an error loading the new header, this has error has been logged.");case 27:return e.prev=27,xe(!1),e.finish(27);case 30:case"end":return e.stop()}}),e,null,[[0,22,27,30]])})));return function(t){return e.apply(this,arguments)}}(),ke=Object(s.useCallback)((function(e){e.preventDefault();var t=Oe.current;t||(h.e.error("File input element for avatar is falsy."),alert("There was an error and it was logged.")),t.click()}),[]),Ce=Object(s.useCallback)((function(e){console.log(e),!N&&e||w(null),w(e)}),[N]),ye=Object(s.useCallback)((function(){w(null)}),[]),Ne=Object(s.useCallback)(Object(o.a)(a.a.mark((function t(){var c;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,N&&N.id){t.next=3;break}return t.abrupt("return");case 3:return console.log("deleting:"),console.log(N),c=N.shared?"sharedPosts":"posts",t.next=8,h.b.post("/api/gun/put",{path:"$user>".concat(c,">").concat(N.id),value:null});case 8:e(Object(q.b)({id:N.id,authorId:I})),Ce(null),t.next=17;break;case 12:t.prev=12,t.t0=t.catch(0),console.log("Error when deleting post:"),console.log(t.t0),alert("Could not delete post: ".concat(t.t0.message));case 17:case"end":return t.stop()}}),t,null,[[0,12]])}))),[N,e,I,Ce]),Se=Object(s.useCallback)((function(){try{if(navigator.clipboard)navigator.clipboard.writeText(I);else{var e=document.querySelector("#public-key-holder");e.style.display="block",e.select(),document.execCommand("copy"),e.blur(),e.style.display="none",r(!1)}}catch(t){alert("Could not copy to clipboard: ".concat(t.message))}}),[I]),we=Object(s.useState)(!1),_e=Object(i.a)(we,2),Ie=_e[0],Pe=_e[1],Re=J.displayName,De=Object(s.useState)(J.displayName),Te=Object(i.a)(De,2),Ue=Te[0],Ee=Te[1],Me=Object(s.useState)(null),He=Object(i.a)(Me,2),Ae=He[0],Ke=He[1],Be=Object(s.useCallback)((function(e){""!==e&&(Ke(e),h.b.put("/api/gun/me",{displayName:e}).catch((function(e){Ke(null),alert("There was an error setting a new display name: ".concat(e.message))})))}),[]);Object(s.useEffect)((function(){Ae===Re&&(console.debug("Got display name round trip from api."),Ke(null))}),[Ae,Re]);var ze=Object(s.useCallback)((function(){Ee(Re),Pe((function(e){return!e}))}),[Re]),Le=Object(s.useCallback)((function(){Ue!==Re&&Be(Ue),ze()}),[Re,Ue,Be,ze]),Fe=Object(s.useMemo)((function(){return{padding:"12px 24px"}}),[]),qe=J.bio,We=Object(s.useState)(!1),Ve=Object(i.a)(We,2),$e=Ve[0],Ge=Ve[1],Je=Object(s.useState)(qe),Ye=Object(i.a)(Je,2),Qe=Ye[0],Ze=Ye[1],Xe=Object(s.useState)(null),et=Object(i.a)(Xe,2),tt=et[0],ct=et[1],nt=Object(s.useCallback)((function(e){""!==e&&(ct(e),h.b.put("/api/gun/me",{bio:e}).catch((function(e){ct(null),alert("There was an error setting a new bio: ".concat(e.message))})))}),[]);Object(s.useEffect)((function(){tt===qe&&(console.debug("Got bio round trip from api."),ct(null))}),[tt,qe]);var at=Object(s.useCallback)((function(){Ze(qe),Ge((function(e){return!e}))}),[qe]),ot=Object(s.useCallback)((function(){Qe!==qe&&nt(Qe),at()}),[qe,Qe,nt,at]),it=Object(s.useMemo)((function(){return{padding:"12px 24px"}}),[]);return Object(T.jsxs)(T.Fragment,{children:[Object(T.jsxs)("div",{className:"page-container profile-page",children:[Object(T.jsxs)("div",{className:"profile-container",children:[Object(T.jsx)("div",{className:"profile-cover",onClick:ke,children:J.header&&Object(T.jsx)("img",{alt:"User set profile header.",src:"data:image/jpeg;base64,".concat(J.header)})}),Object(T.jsxs)("div",{className:"profile-info-container",children:[Object(T.jsx)("div",{className:"profile-avatar",style:{height:"".concat(122,"px"),width:"".concat(122,"px")},children:Object(T.jsx)(y.a,{height:122,publicKey:I,setsAvatar:!0,greyBorder:!0})}),Object(T.jsxs)("div",{className:"profile-info",children:[Object(T.jsx)("p",{className:f()(v.v,"profile-name"),onClick:ze,children:Ae||Re}),Object(T.jsx)("p",{className:f()(v.v,"profile-desc"),onClick:at,children:tt||J.bio}),Object(T.jsxs)("div",{className:"config-btn",onClick:je,children:[Object(T.jsx)("i",{className:"config-btn-icon icon-solid-spending-rule"}),Object(T.jsx)("p",{className:"config-btn-text",children:"Config"})]})]})]}),Object(T.jsxs)("div",{children:[Object(T.jsx)(b.b,{to:"/goLive",className:"profile-choice-container",children:Object(T.jsxs)("div",{style:{backgroundColor:"red",color:"white",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",padding:"0.2em 0.5em",borderRadius:"0.7em",fontSize:"16px",fontWeight:600},children:[Object(T.jsx)("i",{className:"fas fa-video"}),Object(T.jsx)("p",{children:"GO LIVE"})]})}),Object(T.jsxs)(b.b,{to:"/createPost",className:"profile-choice-container",children:[Object(T.jsx)("i",{className:"profile-choice-icon fas fa-pen-square"}),Object(T.jsx)("p",{className:"profile-choice-text",children:"Create Post"})]}),Object(T.jsxs)(b.b,{to:"/publishContent",className:"profile-choice-container",children:[Object(T.jsx)("i",{className:"profile-choice-icon fab fa-youtube"}),Object(T.jsx)("p",{className:"profile-choice-text",children:"Publish Content"})]}),Object(T.jsxs)("button",{className:"profile-choice-container",children:[Object(T.jsx)("i",{className:"profile-choice-icon fas fa-shopping-cart"}),Object(T.jsx)("p",{className:"profile-choice-text",children:"Offer a Product"})]}),Object(T.jsxs)(b.b,{to:"/offerService",className:"profile-choice-container",children:[Object(T.jsx)("i",{className:"profile-choice-icon fas fa-running"}),Object(T.jsx)("p",{className:"profile-choice-text",children:"Offer a Service"})]})]}),Object(T.jsx)(K.a,{onChange:de,selected:M}),Object(T.jsxs)("div",{className:"",children:["posts"===M&&Y.map((function(e,t){if("shared"===e.type){var c=R[e.sharerId]||p.d(e.sharerId),n=e.originalAuthor,a=R[n]||p.d(n);return Object(T.jsx)(s.Suspense,{fallback:Object(T.jsx)(C.a,{}),children:Object(T.jsx)($,{originalPost:e.originalPost,originalPostProfile:a,sharedTimestamp:e.shareDate,sharerProfile:c,postPublicKey:n,openTipModal:function(){},openUnlockModal:function(){},openDeleteModal:Ce})},e.sharerId+e.originalPost.id)}var o=R[e.authorId]||p.d(e.authorId);return Object(T.jsx)(s.Suspense,{fallback:Object(T.jsx)(C.a,{}),children:Object(T.jsx)(V,{id:e.id,timestamp:e.date,contentItems:e.contentItems,avatar:"data:image/jpeg;base64,".concat(null===o||void 0===o?void 0:o.avatar),username:Object(O.c)(null===o||void 0===o?void 0:o.publicKey,null===o||void 0===o?void 0:o.displayName),publicKey:e.authorId,openTipModal:function(){},openUnlockModal:function(){},tipCounter:0,tipValue:0,openDeleteModal:Ce})},e.id)})),"services"===M&&(console.log(D),Object.entries(D).filter((function(e){var t=Object(i.a)(e,2);return t[0],!!t[1]})).map((function(t){var c=Object(i.a)(t,2),n=c[0],a=c[1];return Object(T.jsxs)("div",{className:"post",children:[Object(T.jsx)("strong",{children:"Service ID"}),Object(T.jsx)("p",{children:n}),Object(T.jsx)("strong",{children:"Service Tpe"}),Object(T.jsx)("p",{children:a.serviceType||""}),Object(T.jsx)("strong",{children:"Service Title"}),Object(T.jsx)("p",{children:a.serviceTitle||""}),Object(T.jsx)("strong",{children:"Service Description"}),Object(T.jsx)("p",{children:a.serviceDescription||""}),Object(T.jsx)("strong",{children:"Service Condition"}),Object(T.jsx)("p",{children:a.serviceCondition||""}),Object(T.jsx)("strong",{children:"Service Price"}),Object(T.jsx)("p",{children:a.servicePrice||""}),Object(T.jsx)("button",{onClick:function(){console.log("delete wtf"),Object(m.d)(n)(e)},children:"DELETE SERVICE"})]},n)})))]}),Object(T.jsx)(B.a,{amt:200}),Object(T.jsxs)(k.a,{toggleModal:Q,modalOpen:n,contentStyle:{padding:"40px 30px"},children:[Object(T.jsx)(d.a,{bgColor:"#23282d",fgColor:"#4285b9",value:I,size:180,className:"profile-qrcode"}),Object(T.jsx)("p",{className:"profile-qrcode-desc",children:"Other users can scan this code to contact you"}),!navigator.clipboard&&Object(T.jsx)("input",{className:"hidden-input",id:"public-key-holder",readOnly:!0,type:"text",value:I}),Object(T.jsxs)("div",{className:"profile-clipboard-container",onClick:Se,children:[Object(T.jsx)("img",{src:z.a,className:"profile-clipboard-icon",alt:""}),Object(T.jsx)("p",{className:"profile-clipboard-text",children:"Tap to copy to clipboard"})]})]}),Object(T.jsxs)(k.a,{toggleModal:je,modalOpen:ee,contentStyle:{padding:"2em 2em"},children:[Object(T.jsx)("label",{htmlFor:"new-web-client-prefix",children:"Web Client"}),Object(T.jsxs)("div",{className:"web-client-prefix-picker",children:[Object(T.jsx)("i",{className:"far fa-copy",onClick:ue,style:{fontSize:24}}),Object(T.jsx)("select",{onChange:function(e){le(e.target.value)},name:"new-web-client-prefix",id:"new-web-client-prefix",value:re,children:G.map((function(e){return Object(T.jsx)("option",{value:e,children:e},e)}))}),Object(T.jsx)("span",{children:"/"}),Object(T.jsx)("span",{style:{fontSize:12},children:I})]}),!navigator.clipboard&&Object(T.jsx)("input",{className:"hidden-input",id:"web-client-url-holder",readOnly:!0,type:"text",value:re+"/"+I}),Object(T.jsx)("br",{}),Object(T.jsx)("label",{htmlFor:"content-host",children:"Content Host"}),Object(T.jsx)(A,{}),Object(T.jsx)("br",{}),be&&Object(T.jsxs)("div",{className:"flex-center",style:{marginTop:"auto"},children:[Object(T.jsx)("button",{onClick:fe,className:"shock-form-button m-1",children:"CANCEL"}),Object(T.jsx)("button",{onClick:pe,className:"shock-form-button-confirm m-1",children:"SUBMIT"})]})]}),Object(T.jsxs)(k.a,{toggleModal:Ce,modalOpen:N,contentStyle:{padding:"2em 2em"},children:[Object(T.jsx)("div",{children:"You sure delete"}),Object(T.jsxs)("div",{className:"flex-center",style:{marginTop:"auto"},children:[Object(T.jsx)("button",{onClick:ye,className:"shock-form-button m-1",children:"CANCEL"}),Object(T.jsx)("button",{onClick:Ne,className:"shock-form-button-confirm m-1",children:"DELETE"})]})]}),Object(T.jsx)(g.a,{onClick:Q,large:!0,iconURL:L.a,style:{backgroundColor:"var(--yellow)"},icon:null,label:null})]}),Object(T.jsx)(x.a,{})]}),Object(T.jsx)("input",{type:"file",id:"avatar-file",ref:Oe,hidden:!0,accept:"image/*",onChange:ge}),Object(T.jsxs)(k.a,{contentStyle:Fe,modalOpen:Ie,toggleModal:ze,children:[Object(T.jsx)("label",{htmlFor:"newDisplayName",children:"Display Name"}),Object(T.jsx)("input",{autoCapitalize:"none",autoCorrect:"off",type:"text",className:"input-field",placeholder:"New display name",name:"newDisplayName",onChange:function(e){var t=e.target.value;Ee(t)},value:Ue}),Ue!==Re&&""!==Ue?Object(T.jsx)("button",{onClick:Le,className:"shock-form-button-confirm m-1",children:"OK"}):Object(T.jsx)("button",{onClick:ze,className:"shock-form-button m-1",children:"GO BACK"})]}),Object(T.jsxs)(k.a,{contentStyle:it,modalOpen:$e,toggleModal:at,children:[Object(T.jsx)("label",{htmlFor:"newBio",children:"New Bio"}),Object(T.jsx)("input",{autoCapitalize:"none",autoCorrect:"off",type:"text",className:"input-field",placeholder:"New bio",name:"newBio",onChange:function(e){var t=e.target.value;Ze(t)},value:Qe}),Qe!==qe&&""!==Qe?Object(T.jsx)("button",{onClick:ot,className:"shock-form-button-confirm m-1",children:"OK"}):Object(T.jsx)("button",{onClick:at,className:"shock-form-button m-1",children:"GO BACK"})]})]})}}}]);
//# sourceMappingURL=16.7fa589c2.chunk.js.map