(this["webpackJsonpshocknet-pwa"]=this["webpackJsonpshocknet-pwa"]||[]).push([[17,36],{606:function(t,e,n){"use strict";var a=n(2),r=n(17),c=n(0),o=n(899),i=n(179),u=(n(623),n(607),n(4));e.a=function(t){var e=t.id,n=void 0===e?"":e,s=t.item,d=t.index,l=void 0===d?0:d,f=t.postId,v=void 0===f?"":f,m=t.tipValue,p=void 0===m?0:m,b=t.tipCounter,g=void 0===b?0:b,j=t.hideRibbon,h=void 0!==j&&j,O=t.width,w=void 0===O?null:O,y=t.disableZoom,x=void 0!==y&&y,k=t.style,I=void 0===k?{}:k,R=Object(c.useState)(!1),U=Object(r.a)(R,2),C=U[0],S=U[1],A=Object(c.useState)(!1),P=Object(r.a)(A,2),E=P[0],L=P[1],q=Object(c.useState)(!0),B=Object(r.a)(q,2),N=B[0],T=B[1],Z=Object(c.useState)(null),z=Object(r.a)(Z,2),F=z[0],J=z[1],M=Object(c.useCallback)((function(t){if(clearTimeout(F),S(t),!t&&E){L(!1);var e=setTimeout((function(){T(!0)}),200);J(e)}t&&T(!1)}),[F,E,S,L,T,J]),V=decodeURIComponent(s.magnetURI.replace(/.*(ws=)/gi,"")),W=Object(a.a)(Object(a.a)({},I),{},{opacity:N?1:0});w&&(W.width=w);var _=Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)("img",{className:"image torrent-img torrent-img-".concat(v,"-").concat(n),alt:"Post Media","data-torrent":s.magnetURI,"data-file-key":l,style:W,src:V,"data-v-02ab074d":""}),Object(u.jsx)("img",{className:"image enlarged-img enlarged-img-".concat(v,"-").concat(n),alt:"Post Media","data-file-key":l,onLoad:function(){L(!0)},style:{opacity:C?1:0,display:C?"block":"none"},src:V,"data-v-02ab074d":""}),!h&&Object(u.jsx)(i.a,{tipCounter:g,tipValue:p,zoomed:C,"data-v-02ab074d":""})]});return Object(u.jsx)("div",{className:"media-container","data-v-02ab074d":"",children:x?_:Object(u.jsx)(o.a,{isZoomed:C,onZoomChange:M,overlayBgColorStart:"#16191c00",overlayBgColorEnd:"#16191c","data-v-02ab074d":"",children:_})})}},607:function(t,e,n){},608:function(t,e,n){"use strict";n.d(e,"b",(function(){return O})),n.d(e,"a",(function(){return w}));var a=n(27),r=n(3),c=n.n(r),o=n(7),i=n(2),u=n(17),s=n(634),d=n.n(s),l=n(660),f=n.n(l),v=function(){var t=Object(o.a)(c.a.mark((function t(e){var n;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,f.a._init){t.next=4;break}return t.next=4,new Promise((function(t,e){f.a.init("ShockWalletStore").then((function(){return console.log("File cache initialized!"),f.a.persist()})).then((function(n){n.persistent?t(n):e(n)}))}));case 4:return t.next=6,f.a.load(e);case 6:return n=t.sent,t.abrupt("return",n.createURL());case 10:return t.prev=10,t.t0=t.catch(0),console.warn(t.t0),t.abrupt("return",!1);case 14:case"end":return t.stop()}}),t,null,[[0,10]])})));return function(e){return t.apply(this,arguments)}}(),m=function(t,e){var n=document.querySelectorAll(e);return n&&n.length&&n.forEach((function(e){e.src||(e.src=t,e.muted=!0,e.autoplay=!0)})),!!(null===n||void 0===n?void 0:n.length)},p=function(t,e){return f.a.save(t,e)},b=function(t){var e=Promise.resolve();return t.forEach((function(t){e=e.then((function(){return t()}))})),e},g={"video/embedded":{formats:["mp4","webm"],element:"video",options:{autoplay:!0,muted:!0}},"image/embedded":{formats:["jpg","png","webp","jpeg","gif"],element:"img",options:{}}},j=function(t){var e,n,a=null===(e=t.name)||void 0===e||null===(n=e.split("."))||void 0===n?void 0:n.slice(-1)[0],r=Object.entries(g).filter((function(t){var e=Object(u.a)(t,2);e[0];return e[1].formats.includes(a)}))[0];if(r){var c=Object(u.a)(r,2),o=c[0],s=c[1];return Object(i.a)({name:o},s)}return null},h=new d.a,O=function(t){var e=t.url,n=t.type,a=g[void 0===n?"video/embedded":n].formats.filter((function(t){return e.toLowerCase().endsWith(".".concat(t.toLowerCase()))}));return!!Object(u.a)(a,1)[0]},w=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=t.map((function(t){var a=t.contentItems,r=t.id;return Object.entries(null!==a&&void 0!==a?a:{}).filter((function(t){var e=Object(u.a)(t,2),n=(e[0],e[1]);return g[n.type]})).map((function(t){var a=Object(u.a)(t,2),i=a[0],s=a[1];return function(){return new Promise((function(t){!h.get(s.magnetURI)||n?h.add(s.magnetURI,function(){var n=Object(o.a)(c.a.mark((function n(a){var d;return c.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:t(!0),(d=a.files.filter((function(t){var e,n,a=null===(e=t.name)||void 0===e||null===(n=e.split("."))||void 0===n?void 0:n.slice(-1)[0],r=Object.entries(g).filter((function(t){var e=Object(u.a)(t,2);e[0];return e[1].formats.includes(a)}))[0];return!!r&&Object(u.a)(r,2)[1].formats.includes(a)}))).map(function(){var t=Object(o.a)(c.a.mark((function t(n){var a,o,u,d,l,f;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=j(n)){t.next=3;break}return t.abrupt("return");case 3:return o="".concat(r,"-").concat(i,"-").concat(n.name),u=a.element,d="".concat(u,'[data-torrent="').concat(s.magnetURI,'"]'),t.next=8,v(o);case 8:if(!(l=t.sent)){t.next=14;break}return(f=h.get(s.magnetURI))&&f.destroy(),m(l,d),t.abrupt("return");case 14:document.querySelectorAll(d).forEach((function(t){var r=O({url:s.magnetURI,type:a.name}),c=t.getAttribute("src");if(e&&!c||!r)n.renderTo(t,a.options);else{var o=decodeURIComponent(s.magnetURI.replace(/.*(ws=)/gi,""));t.setAttribute("src",o)}}));case 16:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),a.on("done",(function(){d.map((function(t){var e=j(t),n="".concat(r,"-").concat(i,"-").concat(t.name),a=e.element,u="".concat(a,'[data-torrent="').concat(s.magnetURI,'"]');return t.getBlob(function(){var t=Object(o.a)(c.a.mark((function t(e,a){var r,o;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e){t.next=3;break}return console.warn(e),t.abrupt("return");case 3:return t.next=5,p(n,a);case 5:if("false"!==(null===(r=document.querySelector(u))||void 0===r?void 0:r.dataset.played)||(null===r||void 0===r?void 0:r.getAttribute("src"))){t.next=11;break}return t.next=9,v(n);case 9:o=t.sent,m(o,u);case 11:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()),t}))}));case 4:case"end":return n.stop()}}),n)})));return function(t){return n.apply(this,arguments)}}()):t(!0)}))}}))})).reduce((function(t,e){return[].concat(Object(a.a)(t),Object(a.a)(e))}),[]);b(r)}},636:function(t,e){},637:function(t,e){},638:function(t,e){},639:function(t,e){},640:function(t,e){},641:function(t,e){},642:function(t,e){},643:function(t,e){},644:function(t,e){},646:function(t,e){},647:function(t,e){},648:function(t,e){},649:function(t,e){},650:function(t,e){},651:function(t,e){},652:function(t,e){},653:function(t,e){},654:function(t,e){},655:function(t,e){},656:function(t,e){},657:function(t,e){},659:function(t,e){}}]);
//# sourceMappingURL=17.9ee2d4e2.chunk.js.map