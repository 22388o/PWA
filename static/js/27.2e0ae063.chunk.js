(this["webpackJsonpshocknet-pwa"]=this["webpackJsonpshocknet-pwa"]||[]).push([[27],{462:function(e,t,a){"use strict";var r=a(3),c=a(4);t.a=function(e){var t=e.color,a=e.length,n=e.type,s=e.width,o=Object(r.useMemo)((function(){return"vertical"===n?{borderLeftStyle:"solid",borderLeftWidth:"".concat(s/2,"px"),borderLeftColor:t,borderRightStyle:"solid",borderRightWidth:"".concat(s/2,"px"),borderRightColor:t,height:a}:"horizontal"===n?{borderTopStyle:"solid",borderTopWidth:s/2,borderTopColor:t,borderBottomStyle:"solid",borderBottomWidth:s/2,borderBottomColor:t,width:a}:{}}),[t,a,n,s]);return Object(c.jsx)("div",{style:o})}},677:function(e,t,a){},678:function(e,t,a){e.exports={"stream-type-btn":"GoLive_stream-type-btn__3sNtJ","stream-type-btn-icon":"GoLive_stream-type-btn-icon__2p9-P","obs-logo":"GoLive_obs-logo__1p3Hh"}},722:function(e,t,a){"use strict";a.r(t);var r=a(2),c=a.n(r),n=a(6),s=a(12),o=a(3),i=a(41),l=a(74),d=a.n(l),b=(a(677),a(33)),u=a(146),j=a(16),f=a.p+"static/media/obs-2.7c61e78e.svg",v=a(556),p=a(438),m=a(13),h=a(471),O=a(439),x=a(462),g=a(440),k=a(678),y=a.n(k),w=a(4);t.default=function(){var e=Object(i.b)(),t=m.useSelector((function(e){return e.content.seedProviderPub})),a=m.useSelector((function(e){return e.content.seedInfo})),r=a.seedUrl,l=a.seedToken,k=m.useSelector((function(e){return e.content.streamLiveToken})),S=m.useSelector((function(e){return e.content.streamUserToken})),C=m.useSelector((function(e){return e.content.availableTokens})),N=(m.useSelector((function(e){return e.content.streamUrl})),m.useSelector((function(e){return e.userProfiles}))),P=Object(o.useState)("obs"),T=Object(s.a)(P,2),I=T[0],U=T[1],L=Object(o.useState)(!1),_=Object(s.a)(L,2),B=_[0],R=_[1],D=Object(o.useState)(k),W=Object(s.a)(D,2),F=W[0],G=W[1],J=Object(o.useState)(S),z=Object(s.a)(J,2)[1],A=Object(o.useState)("Look I'm streaming!"),M=Object(s.a)(A,2),H=M[0],E=M[1],K=Object(o.useState)(null),V=Object(s.a)(K,2),Y=V[0],q=V[1],Q=Object(o.useState)(""),X=Object(s.a)(Q,2),Z=X[0],$=X[1],ee=Object(o.useState)(null),te=Object(s.a)(ee,2),ae=te[0],re=te[1],ce=Object(o.useState)(!1),ne=Object(s.a)(ce,2),se=ne[0],oe=ne[1],ie=Object(o.useCallback)(function(){var a=Object(n.a)(c.a.mark((function a(n,o){var i,d,u,f,p,m,h,O,x,g,k,y,w,S,N,P,T,I,U,L,_,B;return c.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,R(!0),a.next=4,Object(v.a)({availableTokens:C,seedProviderPub:t,seedToken:l,seedUrl:r,serviceID:o,servicePrice:n});case 4:return i=a.sent,d=i.seedUrl,u=i.tokens,f=Object(s.a)(u,1),p=f[0],z(p),a.next=11,j.a.post("".concat(d,"/api/stream/auth"),{token:p});case 11:return m=a.sent,h=m.data,O=h.data.token,console.log(O),x="".concat(p,"?key=").concat(O),G("".concat(p,"?key=").concat(O)),g="".concat(d,"/rtmpapi/live/").concat(p,"/index.m3u8"),k=d.replace("https","rtmp"),$("".concat(k,"/live")),y="".concat(d,"/rtmpapi/api/streams/live/").concat(p),w=[],""!==H&&w.push({type:"text/paragraph",text:H}),w.push({type:"stream/embedded",width:0,height:0,magnetURI:g,isPreview:!1,isPrivate:!1,userToken:p,liveStatus:"waiting",statusUrl:y}),a.next=26,j.a.post("/api/gun/wall",{tags:[],title:"Post",contentItems:w});case 26:if(200!==(S=a.sent).status){a.next=39;break}return N=S.data,P=Object(s.a)(N,2),T=P[0],I=P[1],console.log(I.contentItems),U=Object.entries(I.contentItems).find((function(e){var t=Object(s.a)(e,2);t[0];return t[1].magnetURI===g})),L=Object(s.a)(U,1),_=L[0],Object(b.d)({seedToken:p,liveToken:x,streamUrl:g,streamPostId:T,streamContentId:_,streamStatusUrl:y})(e),a.next=35,j.a.post("/api/listenStream",{postId:T,contentId:_,statusUrl:"".concat(d,"/rtmpapi/api/streams/live/").concat(p)});case 35:console.log("post created successfully"),R(!1),a.next=41;break;case 39:q("invalid response status"),R(!1);case 41:a.next=48;break;case 43:a.prev=43,a.t0=a.catch(0),console.log(a.t0),q(null!==(B=null===a.t0||void 0===a.t0?void 0:a.t0.errorMessage)&&void 0!==B?B:null===a.t0||void 0===a.t0?void 0:a.t0.message),R(!1);case 48:case"end":return a.stop()}}),a,null,[[0,43]])})));return function(e,t){return a.apply(this,arguments)}}(),[C,t,l,r,e,H]),le=Object(o.useCallback)((function(){re(null)}),[re]),de=Object(o.useCallback)((function(){var e=ae.servicePrice,t=ae.serviceID;ie(e,t),re(null)}),[ae,ie,re]),be=Object(o.useCallback)(function(){var e=Object(n.a)(c.a.mark((function e(a){var n,s,o,i,d,b;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!se){e.next=3;break}return e.abrupt("return");case 3:oe(!0),a.preventDefault(),n=!1,e.t0=c.a.keys(C);case 7:if((e.t1=e.t0()).done){e.next=16;break}if(s=e.t1.value,!Object.prototype.hasOwnProperty.call(C,s)){e.next=14;break}if(!C[s][0]){e.next=14;break}return n=!0,e.abrupt("break",16);case 14:e.next=7;break;case 16:if(o="",N[t]&&(o=N[t].SeedServiceProvided),!(n||r&&l)){e.next=22;break}ie(),e.next=33;break;case 22:if(!o||!t){e.next=32;break}return e.next=25,j.a.get("/api/gun/otheruser/".concat(t,"/load/offeredServices>").concat(o));case 25:i=e.sent,d=i.data,b=d.data.servicePrice,console.log(d),re({servicePrice:b,serviceID:o}),e.next=33;break;case 32:q("No way found to publish content");case 33:e.next=38;break;case 35:e.prev=35,e.t2=e.catch(0),q(e.t2.message);case 38:return e.prev=38,oe(!1),e.finish(38);case 41:case"end":return e.stop()}}),e,null,[[0,35,38,41]])})));return function(t){return e.apply(this,arguments)}}(),[se,N,t,r,l,C,ie]),ue=Object(o.useCallback)((function(){navigator.clipboard.writeText(F)}),[F]),je=Object(o.useCallback)((function(){navigator.clipboard.writeText(Z)}),[Z]),fe=Object(o.useCallback)((function(e){var t=e.target,a=t.value;switch(t.name){case"paragraph":return void E(a);case"source":return void U(a);default:return}}),[E,U]),ve=Object(o.useCallback)((function(){Object(b.f)()(e)}),[e,b.f]),pe=d()(O.col,O.centerJustify,O.centerAlign,y.a["stream-type-btn"]);return Object(w.jsxs)(w.Fragment,{children:[Object(w.jsxs)(h.a,{pageTitle:"GO LIVE",scrolls:!0,"data-v-7e2f1bd4":"",children:[Object(w.jsxs)("div",{className:d()(O.rowCentered,O.width100),"data-v-7e2f1bd4":"",children:[Object(w.jsxs)("div",{className:pe,onClick:U.bind(null,"camera"),"data-v-7e2f1bd4":"",children:[Object(w.jsx)("i",{className:d()(y.a["stream-type-btn-icon"],"fas","fa-camera"),"data-v-7e2f1bd4":""}),Object(w.jsx)(g.a,{amt:16,"data-v-7e2f1bd4":""}),Object(w.jsx)(x.a,{color:"camera"===I?"#4285b9":"white",length:36,type:"horizontal",width:2,"data-v-7e2f1bd4":""})]}),Object(w.jsxs)("div",{className:pe,onClick:U.bind(null,"obs"),"data-v-7e2f1bd4":"",children:[Object(w.jsx)("img",{alt:"",className:y.a["obs-logo"],src:f,"data-v-7e2f1bd4":""}),Object(w.jsx)(g.a,{amt:16,"data-v-7e2f1bd4":""}),Object(w.jsx)(x.a,{color:"obs"===I?"#4285b9":"white",length:36,type:"horizontal",width:2,"data-v-7e2f1bd4":""})]})]}),Object(w.jsx)("div",{className:O.commonPaddingH,"data-v-7e2f1bd4":"",children:Y?Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)("p",{"data-v-7e2f1bd4":"",children:" An error ocurred: "}),Object(w.jsx)("br",{"data-v-7e2f1bd4":""}),Object(w.jsx)("p",{className:"error-container","data-v-7e2f1bd4":"",children:Y}),Object(w.jsx)("button",{className:"shock-form-button",onClick:q.bind(null,null),"data-v-7e2f1bd4":"",children:"Dismiss"})]}):F?Object(w.jsxs)(w.Fragment,{children:["obs"===I&&Object(w.jsx)("p",{className:"m-b-1","data-v-7e2f1bd4":"",children:"You are ready to go! setup the stream with OBS and watch it from your profile"}),Object(w.jsx)("p",{"data-v-7e2f1bd4":"",children:"Broadcaster:"}),Object(w.jsxs)("div",{style:{border:"1px solid var(--main-blue)",padding:"0.5rem",display:"flex",justifyContent:"space-between",marginBottom:"1rem"},"data-v-7e2f1bd4":"",children:[Object(w.jsx)("p",{"data-v-7e2f1bd4":"",children:Z.substring(0,20)+(Z.length>21?"...":"")}),Object(w.jsx)("i",{className:"far fa-copy",onClick:je,"data-v-7e2f1bd4":""})]}),Object(w.jsx)("p",{"data-v-7e2f1bd4":"",children:"Stream Key:"}),Object(w.jsxs)("div",{style:{border:"1px solid var(--main-blue)",padding:"0.5rem",display:"flex",justifyContent:"space-between",marginBottom:"1rem"},"data-v-7e2f1bd4":"",children:[Object(w.jsx)("p",{"data-v-7e2f1bd4":"",children:F.substring(0,20)+(F.length>21?"...":"")}),Object(w.jsx)("i",{className:"far fa-copy",onClick:ue,"data-v-7e2f1bd4":""})]}),Object(w.jsx)("div",{className:"flex-center","data-v-7e2f1bd4":"",children:Object(w.jsx)("button",{onClick:ve,className:"shock-form-button-confirm","data-v-7e2f1bd4":"",children:"STOP"})})]}):Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)("input",{className:"input-field",type:"text",name:"paragraph",id:"paragraph",value:H,onChange:fe,"data-v-7e2f1bd4":""}),Object(w.jsx)("button",{onClick:be,className:d()(O.width100,"shock-form-button-confirm"),disabled:"camera"===I||se,"data-v-7e2f1bd4":"",children:se?"...":"START NOW"})]})})]}),ae&&Object(w.jsxs)(p.a,{modalOpen:ae&&!B,toggleModal:le,contentStyle:{padding:"1rem"},"data-v-7e2f1bd4":"",children:[Object(w.jsxs)("p",{"data-v-7e2f1bd4":"",children:["The service from the default service provider will cost:"," ",Object(w.jsxs)("strong",{"data-v-7e2f1bd4":"",children:[ae.servicePrice," sats"]})]}),Object(w.jsxs)("div",{className:O.rowCentered,"data-v-7e2f1bd4":"",children:[Object(w.jsx)("button",{className:"shock-form-button m-1",onClick:le,"data-v-7e2f1bd4":"",children:"Cancel"}),Object(w.jsx)("button",{className:"shock-form-button-confirm m-1",onClick:de,"data-v-7e2f1bd4":"",children:"Confirm"})]})]}),B?Object(w.jsx)(u.a,{overlay:!0,fullScreen:!0,text:"Creating stream...","data-v-7e2f1bd4":""}):null]})}}}]);
//# sourceMappingURL=27.2e0ae063.chunk.js.map