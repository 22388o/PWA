(this["webpackJsonpshocknet-pwa"]=this["webpackJsonpshocknet-pwa"]||[]).push([[19],{565:function(e,t,a){"use strict";var n=a(3),c=a(81),o=a.n(c),i=(a(569),a(4)),s=function(e){var t=e.children,a=e.style;return Object(i.jsx)("div",{className:"content",style:a,"data-v-5fcb0a18":"",children:t})},r=(a(570),function(e){var t=e.title,a=e.toggleModal;return t?Object(i.jsxs)("div",{className:"head","data-v-d42f9d2f":"",children:[Object(i.jsx)("p",{className:"head-title","data-v-d42f9d2f":"",children:t}),Object(i.jsx)("div",{className:"head-close",onClick:a,"data-v-d42f9d2f":"",children:Object(i.jsx)("i",{className:"fas fa-times","data-v-d42f9d2f":""})})]}):null});a(571),t.a=function(e){var t=e.modalOpen,a=void 0!==t&&t,c=e.toggleModal,l=e.modalTitle,d=void 0===l?"":l,u=e.children,b=e.contentStyle,j=void 0===b?{}:b,f=Object(n.useCallback)((function(){c()}),[c]);return Object(i.jsxs)("div",{className:o()({modal:!0,open:a}),"data-v-d9432371":"",children:[Object(i.jsx)("div",{className:"backdrop",onClick:f,"data-v-d9432371":""}),Object(i.jsxs)("div",{className:"container","data-v-d9432371":"",children:[Object(i.jsx)(r,{title:d,toggleModal:f,"data-v-d9432371":""}),Object(i.jsx)(s,{style:j,"data-v-d9432371":"",children:u})]})]})}},569:function(e,t,a){},570:function(e,t,a){},571:function(e,t,a){},580:function(e,t,a){"use strict";var n=a(56),c=a(4);t.a=function(){return Object(c.jsxs)("div",{className:"bottom-nav-container",children:[Object(c.jsx)(n.c,{className:"bottom-nav-btn",to:"/overview",activeClassName:"active-nav-btn",children:Object(c.jsx)("i",{className:"bottom-nav-btn-icon icon-thin-wallet"})}),Object(c.jsx)(n.c,{className:"bottom-nav-btn",to:"/chat",activeClassName:"active-nav-btn",children:Object(c.jsx)("i",{className:"bottom-nav-btn-icon icon-thin-chat"})}),Object(c.jsx)(n.c,{className:"bottom-nav-btn",to:"/profile",activeClassName:"active-nav-btn",children:Object(c.jsx)("i",{className:"bottom-nav-btn-icon icon-thin-profile"})}),Object(c.jsx)(n.c,{className:"bottom-nav-btn",to:"/feed",activeClassName:"active-nav-btn",children:Object(c.jsx)("i",{className:"bottom-nav-btn-icon icon-thin-feed"})})]})}},588:function(e,t,a){"use strict";var n=a(12),c=a(3),o=a(81),i=a.n(o),s=(a(589),a(4));t.a=function(e){var t=e.label,a=void 0===t?null:t,o=e.icon,r=void 0===o?null:o,l=e.iconURL,d=void 0===l?null:l,u=e.onClick,b=void 0===u?void 0:u,j=e.nestedMode,f=void 0!==j&&j,p=e.large,v=void 0!==p&&p,O=e.small,h=void 0!==O&&O,m=e.relative,x=void 0!==m&&m,g=e.children,C=void 0===g?null:g,k=e.style,y=void 0===k?{}:k,N=Object(c.useState)(!1),S=Object(n.a)(N,2),w=S[0],_=S[1],I=Object(c.useCallback)((function(){f&&_(!w)}),[w,f]),P=Object(c.useMemo)((function(){return d?Object(s.jsx)("img",{src:d,className:"add-btn-icon",alt:"","data-v-aac4b87a":""}):Object(s.jsx)("i",{className:"fas fa-".concat(null!==r&&void 0!==r?r:"plus"),"data-v-aac4b87a":""})}),[r,d]),R=Object(c.useMemo)((function(){return a?Object(s.jsx)("p",{className:"add-btn-label","data-v-aac4b87a":"",children:a}):null}),[a]);return Object(s.jsxs)("div",{className:i()({"add-btn-container":!0,"add-btn-round-container":!a,"add-btn-large":v,"add-btn-small":h}),"data-v-aac4b87a":"",children:[Object(s.jsxs)("div",{className:i()({"add-btn":!0,"add-btn-round":!a,"add-btn-extended":!!a,"add-btn-relative":x,"add-btn-open":w,"add-btn-nested":f}),onClick:null!==b&&void 0!==b?b:I,style:y,"data-v-aac4b87a":"",children:[P,R]}),C?Object(s.jsx)("div",{className:i()({"add-btn-options":!0,"add-btn-options-open":w}),"data-v-aac4b87a":"",children:C}):null]})}},589:function(e,t,a){},598:function(e,t,a){"use strict";var n=a(3),c=a(4);t.a=function(e){var t=e.color,a=e.length,o=e.type,i=e.width,s=Object(n.useMemo)((function(){return"vertical"===o?{borderLeftStyle:"solid",borderLeftWidth:"".concat(i/2,"px"),borderLeftColor:t,borderRightStyle:"solid",borderRightWidth:"".concat(i/2,"px"),borderRightColor:t,height:a}:"horizontal"===o?{borderTopStyle:"solid",borderTopWidth:i/2,borderTopColor:t,borderBottomStyle:"solid",borderBottomWidth:i/2,borderBottomColor:t,width:a}:{}}),[t,a,o,i]);return Object(c.jsx)("div",{style:s})}},614:function(e,t,a){"use strict";var n=a(81),c=a.n(n),o=a(563),i=a(598),s=a(615),r=a.n(s),l=a(4);t.a=function(e){var t=e.onChange,a=e.selected,n=e.showContentBtn;return Object(l.jsxs)("div",{className:c()(o.D,o.z,o.A,o.w,r.a.container),children:[Object(l.jsx)("span",{className:c()(o.C,"posts"===a?r.a.selected:r.a.unselected),onClick:function(){t("posts")},children:"Posts"}),Object(l.jsx)("div",{className:c()(o.a,n&&r.a["left-line"]),children:Object(l.jsx)(i.a,{color:"white",length:16,type:"vertical",width:2})}),Object(l.jsx)("span",{className:c()(o.C,"services"===a?r.a.selected:r.a.unselected),onClick:function(){t("services")},children:"Services"}),n&&Object(l.jsxs)(l.Fragment,{children:[Object(l.jsx)("div",{className:c()(o.a,r.a["right-line"]),children:Object(l.jsx)(i.a,{color:"white",length:16,type:"vertical",width:2})}),Object(l.jsx)("span",{className:c()(o.C,"content"===a?r.a.selected:r.a.unselected),onClick:function(){t("content")},children:"Content"})]})]})}},615:function(e,t,a){e.exports={container:"ProfileDivider_container__3ob9k",selected:"ProfileDivider_selected__3U98y",unselected:"ProfileDivider_unselected__1Z_qd","left-line":"ProfileDivider_left-line__2xjlN","right-line":"ProfileDivider_right-line__1d2KH"}},616:function(e,t,a){"use strict";t.a=a.p+"static/media/clipboard.beb19e1e.svg"},617:function(e,t,a){"use strict";t.a=a.p+"static/media/qrcode.69103c6c.svg"},718:function(e,t,a){e.exports={container:"ContentHostInputView_container__1CVAn","uri-or-token-input":"ContentHostInputView_uri-or-token-input__3vg5h","plus-or-paste-btn":"ContentHostInputView_plus-or-paste-btn__3z_k0"}},719:function(e,t,a){e.exports={"container-base":"Host_container-base__r5EJP","remove-or-cancel":"Host_remove-or-cancel__2sHhe Host_container-base__r5EJP",container:"Host_container__2hPww Host_container-base__r5EJP",pill:"Host_pill__1WzlY","display-name-or-uri":"Host_display-name-or-uri__2eaUy","price-and-status":"Host_price-and-status__3Q4n3",price:"Host_price__2oEgL",red:"Host_red__1kS00",yellow:"Host_yellow__3DLEG",blue:"Host_blue__3m2Kb"}},720:function(e,t,a){},859:function(e,t,a){"use strict";a.r(t);var n=a(2),c=a.n(n),o=a(5),i=a(12),s=a(3),r=a.n(s),l=a(43),d=a(613),u=a.n(d),b=a(56),j=a(81),f=a.n(j),p=a(25),v=a(87),O=a(21),h=a(113),m=a(563),x=a(580),g=a(588),C=a(565),k=a(171),y=a(566),N=a(22),S=a(17),w=a(52),_=a(37),I=a(718),P=a.n(I),R=a(719),D=a.n(R),U=a(4),T=function(e){var t=e.error,a=e.isBeingAddedOrDeleted,n=e.isDefault,c=e.onClickRemove,o=e.onClickWarning,r=e.price,l=e.publicKey,d=e.URI,u=S.useSelector(S.selectUser(l)),b=Object(s.useState)(!1),j=Object(i.a)(b,2),v=j[0],O=j[1],h=Object(s.useCallback)((function(){O((function(e){return!e}))}),[]),x=Object(s.useCallback)((function(){o(l||d)}),[o,l,d]),g=Object(s.useCallback)((function(){c(l||d)}),[c,l,d]),C=t&&a||l&&d||!l&&!d,k=t;return C&&(k="Malformed host provided to <Host />, it must have either a public key or an URI (though not both), and it must not have both truthy error and isAdding props at the same time: ".concat(JSON.stringify(C))),v?Object(U.jsxs)("div",{className:f()(m.z,m.d,m.D),children:[Object(U.jsx)("button",{onClick:g,className:f()(m.o),children:"Remove"}),Object(U.jsx)("button",{onClick:h,className:f()(m.o),children:"Cancel"})]}):Object(U.jsxs)("div",{className:f()(m.z,m.B,m.f,D.a.container),children:[Object(U.jsxs)("div",{className:f()(m.z,m.B,m.h,D.a.pill),children:[l?Object(U.jsx)(y.a,{height:24,publicKey:l}):Object(U.jsx)("i",{className:f()("fas fa-globe")}),Object(U.jsx)("span",{className:D.a["display-name-or-uri"],children:d&&d.toLowerCase()||u.displayName||p.f(l)}),a||k?Object(U.jsx)("div",{}):Object(U.jsx)("span",{className:"fas fa-times",onClick:h,style:{fontSize:12}})]}),Object(U.jsxs)("div",{className:f()(m.p,m.f,D.a["price-and-status"]),children:[Object(U.jsxs)("span",{className:f()(m.p,D.a.price),children:[r," sats"]}),k?Object(U.jsx)("i",{className:f()("fas fa-exclamation-triangle",m.q,D.a.yellow),onClick:x}):a?Object(U.jsx)("i",{className:f()("fas fa-hourglass-half",m.q,D.a.yellow)}):n?Object(U.jsx)("i",{className:f()("fas fa-check",m.q,D.a.blue)}):Object(U.jsx)("i",{className:f()("fas fa-link",m.q,D.a.blue)})]})]})},E=f()(m.z,m.D,m.d,m.e,m.w),M=function(e){var t,a=e.hosts,n=e.onAddHost,c=e.onRemoveHost,o=e.onRetryHost,r=Object(s.useState)({publicKeyOrServerURI:"",URIHostAwaitingForToken:""}),l=Object(i.a)(r,2),d=l[0],u=d.publicKeyOrServerURI,b=d.URIHostAwaitingForToken,j=l[1],p=Object(s.useState)(""),v=Object(i.a)(p,2),h=v[0],x=v[1],g=Object(s.useState)(!1),k=Object(i.a)(g,2),y=k[0],S=k[1],w=Object(s.useRef)(null),I=Object(s.useState)(!1),R=Object(i.a)(I,2),D=R[0],M=R[1],A=Object(s.useState)(""),H=Object(i.a)(A,2),K=H[0],B=H[1],z=Object(s.useRef)(null),L=Object(s.useState)(!1),F=Object(i.a)(L,2),q=F[0],W=F[1],V=Object(s.useMemo)((function(){return a.slice().sort((function(e,t){return t.dateAdded-e.dateAdded}))}),[a]),G=Object(s.useMemo)((function(){return V.filter((function(e){return e.isDefault}))}),[V]),J=Object(s.useMemo)((function(){return V.filter((function(e){return!e.isDefault}))}),[V]),$=Object(s.useMemo)((function(){return[].concat(Object(N.a)(G),Object(N.a)(J))}),[G,J]),Y=Object(s.useCallback)((function(){S(!0)}),[]),Q=Object(s.useCallback)((function(){D||(navigator.clipboard?(M(!0),navigator.clipboard.readText().then((function(e){j(Object(_.a)((function(t){t.publicKeyOrServerURI=e})))})).catch((function(e){alert("Could not paste: ".concat(e.message))})).finally((function(){M(!1)}))):w.current&&(w.current.focus(),document.execCommand("paste"),w.current.blur()))}),[D,M]),Z=Object(s.useCallback)((function(){j(Object(_.a)((function(e){var t=O.f(e.publicKeyOrServerURI);t&&(e.publicKeyOrServerURI=t,e.URIHostAwaitingForToken=t)}))),O.f(u)||n(u)}),[j,u,n]),X=Object(s.useCallback)((function(){q||(navigator.clipboard?(W(!0),navigator.clipboard.readText().then((function(e){B(e)})).catch((function(e){alert("Could not paste: ".concat(e.message))})).finally((function(){W(!1)}))):z.current&&(z.current.focus(),document.execCommand("paste"),z.current.blur()))}),[q,W,B]),ee=Object(s.useCallback)((function(){j(Object(_.a)((function(e){e.publicKeyOrServerURI="",e.URIHostAwaitingForToken=""}))),n(u,K)}),[j,n,u,K]),te=Object(s.useCallback)((function(e){c(e)}),[c]),ae=Object(s.useCallback)((function(){x("")}),[x]),ne=Object(s.useCallback)((function(){c(h),ae()}),[c,h,ae]),ce=Object(s.useCallback)((function(){o(h),x("")}),[o,h,x]);return Object(U.jsxs)(U.Fragment,{children:[Object(U.jsxs)("div",{className:f()(m.i,m.D,P.a.container),children:[Object(U.jsxs)("div",{className:(m.y,m.d),children:[Object(U.jsx)("input",{className:f()("input-field",P.a["uri-or-token-input"]),onChange:function(e){j(Object(_.a)((function(t){t.publicKeyOrServerURI=e.target.value,t.URIHostAwaitingForToken=""}))),B("")},type:"text",value:u,onKeyUp:function(e){"Enter"!==e.key&&13!==e.keyCode||Z()},autoCapitalize:"off",autoCorrect:"none",placeholder:"Provider Pubkey or Server URI (include https or http)",ref:w,onFocus:Y}),0===u.length&&Object(U.jsx)("button",{className:f()(m.n,P.a["plus-or-paste-btn"]),disabled:D,onClick:Q,children:Object(U.jsx)("i",{className:"fas fa-paste"})}),u.length>0&&u!==b&&Object(U.jsx)("button",{className:f()(m.n,P.a["plus-or-paste-btn"]),disabled:0===u.length,onClick:Z,children:"+"})]}),u.length>0&&u===b&&Object(U.jsxs)("div",{className:(m.y,m.d),children:[Object(U.jsx)("input",{className:f()("input-field",P.a["uri-or-token-input"]),onChange:function(e){B(e.target.value)},type:"text",value:K,onKeyUp:function(e){"Enter"!==e.key&&13!==e.keyCode||ee()},autoCapitalize:"off",autoCorrect:"none",placeholder:"Token (required)",ref:z}),0===K.length&&Object(U.jsx)("button",{className:f()(m.n,P.a["plus-or-paste-btn"]),disabled:q,onClick:X,children:Object(U.jsx)("i",{className:"fas fa-paste"})}),K.length>0&&Object(U.jsx)("button",{className:f()(m.n,P.a["plus-or-paste-btn"]),disabled:0===K.length,onClick:ee,children:"+"})]}),Object(U.jsx)("div",{className:f()(m.i),children:(y?$:G).map((function(e){return Object(U.jsx)(T,{URI:e.URI,dateAdded:0,error:e.error,isBeingAddedOrDeleted:e.isBeingAddedOrDeleted,isDefault:e.isDefault,onClickRemove:te,onClickWarning:x,price:e.price,publicKey:e.publicKey,token:e.token},e.publicKey||e.URI)}))})]}),Object(U.jsx)(C.a,{modalOpen:!!h,modalTitle:null===(t=$.find((function(e){return e.publicKey===h||e.URI===h})))||void 0===t?void 0:t.error,toggleModal:ae,children:Object(U.jsxs)("div",{className:E,children:[Object(U.jsx)("button",{onClick:ne,className:"shock-form-button m-1",children:"REMOVE"}),Object(U.jsx)("button",{onClick:ce,className:"shock-form-button-confirm m-1",children:"RETRY"})]})})]})},A=a(28),H=function(){var e=Object(l.b)(),t=S.useSelector((function(e){return e.content.seedProviderPub})),a=S.useSelector((function(e){return e.userProfiles})),n=S.useSelector((function(e){return e.content.seedInfo})),c=n.seedUrl,o=n.seedToken,r=Object(s.useState)([]),d=Object(i.a)(r,2),u=d[0],b=d[1],j=Object(s.useState)(null),f=Object(i.a)(j,2),p=f[0],v=f[1],h=Object(s.useState)(""),m=Object(i.a)(h,2),x=m[0],g=m[1],C=Object(s.useState)(0),k=Object(i.a)(C,2),y=k[0],_=k[1],I=Object(s.useState)(""),P=Object(i.a)(I,2),R=P[0],D=P[1];Object(s.useEffect)((function(){var e=a[t];e?p&&e.avatar===p.avatar&&e.SeedServiceProvided===p.SeedServiceProvided||v(e):v(null)}),[a,t,p,v]),Object(s.useEffect)((function(){if(p){var e=p.SeedServiceProvided;e!==x&&g(e)}}),[p,x,g]),Object(s.useEffect)((function(){var e=[];c&&o&&e.push({URI:c,token:o,price:0,isBeingAddedOrDeleted:!1,dateAdded:Date.now(),isDefault:!0,error:null,publicKey:null}),t&&p&&e.push({dateAdded:Date.now(),isBeingAddedOrDeleted:!0,isDefault:!0,publicKey:t,price:0,URI:null,token:null,error:null}),b(e)}),[c,o,t,p,b]),Object(s.useEffect)((function(){x&&O.b.get("/api/gun/otheruser/".concat(t,"/load/offeredServices>").concat(x)).then((function(e){var t=e.data.data;_(t.servicePrice)})).catch((function(e){D(e)}))}),[x,t,_,D]),Object(s.useEffect)((function(){var e=Object(N.a)(u),t=e.findIndex((function(e){return!e.URI}));-1!==t&&e[t].price!==y&&(e[t].isBeingAddedOrDeleted=!1,e[t].price=y,b(e))}),[y,_,u,b]),Object(s.useEffect)((function(){var e=R.message||R,t=Object(N.a)(u),a=t.findIndex((function(e){return!e.URI}));-1!==a&&e!==t[a].error&&(t[a].isBeingAddedOrDeleted=!1,t[a].error=e,b(t))}),[R,D,u,b]);var T=Object(s.useCallback)((function(t,a){try{t.startsWith("http")?Object(A.k)(t,a)(e):Object(A.l)(t)(e)}catch(n){alert("Could not add host: ".concat(n.message)),O.e.error("Could not add host: ",n)}}),[e]),E=Object(s.useCallback)((function(t){try{t.startsWith("http")?Object(A.k)("","")(e):Object(A.l)("")(e)}catch(a){alert("Could not remove host: ".concat(a.message)),O.e.error("Could not remove host: ",a)}}),[e]);Object(s.useEffect)((function(){return e(Object(w.b)(t))}),[t,e]);var H=Object(s.useMemo)((function(){return u.filter((function(e){return e}))}),[u]);return Object(U.jsx)(M,{hosts:H,onAddHost:T,onRemoveHost:E,onRetryHost:function(){}})},K=a(614),B=a(564),z=a(616),L=a(617),F=a(14),q=(a(720),a(54)),W=a(44),V=a(36),G=r.a.lazy((function(){return Promise.all([a.e(2),a.e(1),a.e(8)]).then(a.bind(null,585))})),J=r.a.lazy((function(){return Promise.all([a.e(2),a.e(1),a.e(3),a.e(14)]).then(a.bind(null,657))})),$=["https://shock.pub","https://shock.page","https://lightning.page","https://satoshi.watch"];t.default=function(){var e=S.useDispatch(),t=Object(s.useState)(!1),a=Object(i.a)(t,2),n=a[0],r=a[1],d=Object(s.useState)(null),j=Object(i.a)(d,2),N=j[0],w=j[1],_=Object(s.useState)(!1),I=Object(i.a)(_,2),P=I[0],R=I[1],D=S.useSelector((function(e){return e.feed.posts})),T=S.useSelector((function(e){return e.node.publicKey})),E=S.useSelector((function(e){return e.node.hostIP})),M=S.useSelector((function(e){return e.userProfiles})),A=S.useSelector((function(e){return e.orders.myServices})),Y=Object(s.useState)("posts"),Q=Object(i.a)(Y,2),Z=Q[0],X=Q[1],ee=Object(l.c)(S.selectSelfUser),te=Object(s.useMemo)((function(){return D&&D[T]?D[T].sort((function(e,t){var a=Object(W.d)(e)?e.shareDate:e.date;return(Object(W.d)(t)?t.shareDate:t.date)-a})):[]}),[D,T]);Object(s.useEffect)((function(){var t=Object(h.e)()(e);return Object(F.f)(t)}),[e]),Object(s.useEffect)((function(){var t=e(Object(q.g)(T)),a=e(Object(q.f)(T));return Object(F.f)(t,a)}),[e,T]);var ae=Object(s.useCallback)((function(){r(!n)}),[n]),ne=Object(s.useState)(!1),ce=Object(i.a)(ne,2),oe=ce[0],ie=ce[1],se=S.useSelector((function(e){return e.node.webClientPrefix})),re=Object(s.useState)(se),le=Object(i.a)(re,2),de=le[0],ue=le[1],be=Object(s.useCallback)((function(){if(navigator.clipboard)navigator.clipboard.writeText(de+"/"+T);else{var e=document.querySelector("#web-client-url-holder");e.style.display="block",e.select(),document.execCommand("copy"),e.blur(),e.style.display="none"}}),[de,T]),je=Object(s.useCallback)((function(){console.debug("Subbing to webclient prefix on hostIP --| ".concat(E," |-- and public key --| ").concat(T," |--"));var t=Object(F.e)({query:"$user::Profile>webClientPrefix::on",onData:function(t){"string"===typeof t&&t!==se&&Object(V.f)(t)(e)},onError:function(e){console.error("There was an error fetching web client prefix: ".concat(e))}});return Object(F.f)(t)}),[E,T]);Object(s.useEffect)((function(){return je()}),[je]);var fe=Object(s.useCallback)((function(e){X(e)}),[]),pe=de!==se,ve=Object(s.useCallback)((function(){ie((function(e){return!e})),ue(se)}),[se]),Oe=Object(s.useCallback)((function(){ve()}),[ve]),he=Object(s.useCallback)((function(){de!==se&&(Object(V.f)(de)(e),O.b.post("/api/gun/put",{path:"$user>Profile>webClientPrefix",value:de}).catch((function(e){alert("There was an error setting your web client prefix: ".concat(e.message))}))),ve()}),[ve,de,se]),me=Object(s.useRef)(null),xe=Object(s.useState)(!1),ge=Object(i.a)(xe,2),Ce=ge[0],ke=ge[1],ye=function(){var e=Object(o.a)(c.a.mark((function e(t){var a,n,o,s,r,l;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,t.preventDefault(),!Ce){e.next=4;break}return e.abrupt("return");case 4:if(ke(!0),a=t.target,0!==(n=a.files).length){e.next=8;break}return e.abrupt("return");case 8:if(1===n.length){e.next=12;break}return O.e.error("Profile -> files.length !== 1"),alert("An error occurred while trying to set a header. This has been logged."),e.abrupt("return");case 12:return o=Object(i.a)(n,1),s=o[0],e.next=15,O.h(s,320,.7);case 15:return r=e.sent,"data:image/jpeg;base64,",l=r.slice("data:image/jpeg;base64,".length),e.next=20,O.b.post("/api/gun/put",{path:"$user>profileBinary>header",value:l});case 20:e.next=27;break;case 22:e.prev=22,e.t0=e.catch(0),O.e.error("Error while trying to load new header."),O.e.error(e.t0),alert("There was an error loading the new header, this has error has been logged.");case 27:return e.prev=27,ke(!1),e.finish(27);case 30:case"end":return e.stop()}}),e,null,[[0,22,27,30]])})));return function(t){return e.apply(this,arguments)}}(),Ne=Object(s.useCallback)((function(e){e.preventDefault();var t=me.current;t||(O.e.error("File input element for avatar is falsy."),alert("There was an error and it was logged.")),t.click()}),[]),Se=Object(s.useCallback)((function(e){console.log(e),!N&&e||w(null),w(e)}),[N]),we=Object(s.useCallback)((function(){w(null)}),[]),_e=Object(s.useCallback)(Object(o.a)(c.a.mark((function t(){var a;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,N&&N.id){t.next=3;break}return t.abrupt("return");case 3:return R(!0),console.log("deleting:"),console.log(N),a=N.shared?"sharedPosts":"posts",t.next=9,O.b.post("/api/gun/put",{path:"$user>".concat(a,">").concat(N.id),value:null});case 9:e(Object(q.b)({id:N.id,authorId:T})),Se(null),R(!0),t.next=20;break;case 14:t.prev=14,t.t0=t.catch(0),R(!0),console.log("Error when deleting post:"),console.log(t.t0),alert("Could not delete post: ".concat(t.t0.message));case 20:case"end":return t.stop()}}),t,null,[[0,14]])}))),[N,e,T,Se,R]),Ie=Object(s.useCallback)((function(){try{if(navigator.clipboard){var e="".concat(se,"/").concat(T);navigator.clipboard.writeText(e)}else{var t=document.querySelector("#public-key-holder");t.style.display="block",t.select(),document.execCommand("copy"),t.blur(),t.style.display="none",r(!1)}}catch(a){alert("Could not copy to clipboard: ".concat(a.message))}}),[T]),Pe=Object(s.useState)(!1),Re=Object(i.a)(Pe,2),De=Re[0],Ue=Re[1],Te=ee.displayName,Ee=Object(s.useState)(ee.displayName||"Anon"),Me=Object(i.a)(Ee,2),Ae=Me[0],He=Me[1],Ke=Object(s.useState)(null),Be=Object(i.a)(Ke,2),ze=Be[0],Le=Be[1],Fe=Object(s.useCallback)((function(e){""!==e&&(Le(e),O.b.put("/api/gun/me",{displayName:e}).catch((function(e){Le(null),alert("There was an error setting a new display name: ".concat(e.message))})))}),[]);Object(s.useEffect)((function(){ze===Te&&(console.debug("Got display name round trip from api."),Le(null))}),[ze,Te]);var qe=Object(s.useCallback)((function(){He(Te),Ue((function(e){return!e}))}),[Te]),We=Object(s.useCallback)((function(){Ae!==Te&&Fe(Ae),qe()}),[Te,Ae,Fe,qe]),Ve=Object(s.useMemo)((function(){return{padding:"12px 24px"}}),[]),Ge=ee.bio,Je=Object(s.useState)(!1),$e=Object(i.a)(Je,2),Ye=$e[0],Qe=$e[1],Ze=Object(s.useState)(Ge||"bio"),Xe=Object(i.a)(Ze,2),et=Xe[0],tt=Xe[1],at=Object(s.useState)(null),nt=Object(i.a)(at,2),ct=nt[0],ot=nt[1],it=Object(s.useCallback)((function(e){""!==e&&(ot(e),O.b.put("/api/gun/me",{bio:e}).catch((function(e){ot(null),alert("There was an error setting a new bio: ".concat(e.message))})))}),[]);Object(s.useEffect)((function(){ct===Ge&&(console.debug("Got bio round trip from api."),ot(null))}),[ct,Ge]);var st=Object(s.useCallback)((function(){tt(Ge),Qe((function(e){return!e}))}),[Ge]),rt=Object(s.useCallback)((function(){et!==Ge&&it(et),st()}),[Ge,et,it,st]),lt=Object(s.useMemo)((function(){return{padding:"12px 24px"}}),[]);return Object(U.jsxs)(U.Fragment,{children:[Object(U.jsxs)("div",{className:"page-container profile-page","data-v-81a54921":"",children:[Object(U.jsxs)("div",{className:"profile-container","data-v-81a54921":"",children:[Object(U.jsx)("div",{className:"profile-cover",onClick:Ne,"data-v-81a54921":"",children:ee.header&&Object(U.jsx)("img",{alt:"User set profile header.",src:"data:image/jpeg;base64,".concat(ee.header),"data-v-81a54921":""})}),Object(U.jsxs)("div",{className:"profile-info-container","data-v-81a54921":"",children:[Object(U.jsx)("div",{className:"profile-avatar",style:{height:"".concat(122,"px"),width:"".concat(122,"px")},"data-v-81a54921":"",children:Object(U.jsx)(y.a,{height:122,publicKey:T,setsAvatar:!0,greyBorder:!0,disableOnlineRing:!0,"data-v-81a54921":""})}),Object(U.jsxs)("div",{className:"profile-info","data-v-81a54921":"",children:[Object(U.jsx)("p",{className:f()(m.C,"profile-name"),onClick:qe,"data-v-81a54921":"",children:ze||Te}),Object(U.jsx)("p",{className:f()(m.C,"profile-desc"),onClick:st,"data-v-81a54921":"",children:ct||ee.bio}),Object(U.jsxs)("div",{className:"config-btn",onClick:ve,"data-v-81a54921":"",children:[Object(U.jsx)("i",{className:"config-btn-icon icon-solid-spending-rule","data-v-81a54921":""}),Object(U.jsx)("p",{className:"config-btn-text","data-v-81a54921":"",children:"Config"})]})]})]}),Object(U.jsxs)("div",{"data-v-81a54921":"",children:[Object(U.jsx)(b.b,{to:"/goLive",className:"profile-choice-container","data-v-81a54921":"",children:Object(U.jsxs)("div",{style:{backgroundColor:"red",color:"white",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",padding:"0.2em 0.5em",borderRadius:"0.7em",fontSize:"16px",fontWeight:600},"data-v-81a54921":"",children:[Object(U.jsx)("i",{className:"fas fa-video","data-v-81a54921":""}),Object(U.jsx)("p",{"data-v-81a54921":"",children:"GO LIVE"})]})}),Object(U.jsxs)(b.b,{to:"/createPost",className:"profile-choice-container","data-v-81a54921":"",children:[Object(U.jsx)("i",{className:"profile-choice-icon fas fa-pen-square","data-v-81a54921":""}),Object(U.jsx)("p",{className:"profile-choice-text","data-v-81a54921":"",children:"Create Post"})]}),Object(U.jsxs)(b.b,{to:"/publishContent",className:"profile-choice-container","data-v-81a54921":"",children:[Object(U.jsx)("i",{className:"profile-choice-icon fab fa-youtube","data-v-81a54921":""}),Object(U.jsx)("p",{className:"profile-choice-text","data-v-81a54921":"",children:"Publish Content"})]}),Object(U.jsxs)("button",{className:"profile-choice-container","data-v-81a54921":"",children:[Object(U.jsx)("i",{className:"profile-choice-icon fas fa-shopping-cart","data-v-81a54921":""}),Object(U.jsx)("p",{className:"profile-choice-text","data-v-81a54921":"",children:"Offer a Product"})]}),Object(U.jsxs)(b.b,{to:"/offerService",className:"profile-choice-container","data-v-81a54921":"",children:[Object(U.jsx)("i",{className:"profile-choice-icon fas fa-running","data-v-81a54921":""}),Object(U.jsx)("p",{className:"profile-choice-text","data-v-81a54921":"",children:"Offer a Service"})]})]}),Object(U.jsx)(K.a,{onChange:fe,selected:Z,"data-v-81a54921":""}),Object(U.jsxs)("div",{className:"","data-v-81a54921":"",children:["posts"===Z&&te.map((function(e,t){if("shared"===e.type){if(!e.originalPost)return null;var a,n,c=Object.entries(e.originalPost.contentItems).find((function(e){var t=Object(i.a)(e,2);return t[0],"stream/embedded"===t[1].type}));if(c){var o=Object(i.a)(c,2);a=o[0],n=o[1]}n&&"wasLive"===n.liveStatus&&n.playbackMagnet&&(e.originalPost.contentItems[a].type="video/embedded",e.originalPost.contentItems[a].magnetURI=n.playbackMagnet);var r=M[e.sharerId]||p.e(e.sharerId),l=e.originalAuthor,d=M[l]||p.e(l);return Object(U.jsx)(s.Suspense,{fallback:Object(U.jsx)(k.a,{"data-v-81a54921":""}),"data-v-81a54921":"",children:Object(U.jsx)(J,{originalPost:e.originalPost,originalPostProfile:d,sharedTimestamp:e.shareDate,sharerProfile:r,postPublicKey:l,openTipModal:function(){},openUnlockModal:function(){},openDeleteModal:Se,openShareModal:null,"data-v-81a54921":""})},e.sharerId+e.originalPost.id)}var u,b,j=Object.entries(e.contentItems).find((function(e){var t=Object(i.a)(e,2);return t[0],"stream/embedded"===t[1].type}));if(j){var f=Object(i.a)(j,2);u=f[0],b=f[1]}b&&"wasLive"===b.liveStatus&&b.playbackMagnet&&(e.contentItems[u].type="video/embedded",e.contentItems[u].magnetURI=b.playbackMagnet);var O=M[e.authorId]||p.e(e.authorId);return Object(U.jsx)(s.Suspense,{fallback:Object(U.jsx)(k.a,{"data-v-81a54921":""}),"data-v-81a54921":"",children:Object(U.jsx)(G,{id:e.id,timestamp:e.date,contentItems:e.contentItems,username:Object(v.c)(null===O||void 0===O?void 0:O.publicKey,null===O||void 0===O?void 0:O.displayName),publicKey:e.authorId,openTipModal:function(){},openUnlockModal:function(){},tipCounter:e.tipCounter||0,tipValue:e.tipValue||0,openDeleteModal:Se,openShareModal:null,"data-v-81a54921":""})},e.id)})),"services"===Z&&(console.log(A),Object.entries(A).filter((function(e){var t=Object(i.a)(e,2);return t[0],!!t[1]})).map((function(t){var a=Object(i.a)(t,2),n=a[0],c=a[1];return Object(U.jsxs)("div",{className:"post","data-v-81a54921":"",children:[Object(U.jsx)("strong",{"data-v-81a54921":"",children:"Service ID"}),Object(U.jsx)("p",{"data-v-81a54921":"",children:n}),Object(U.jsx)("strong",{"data-v-81a54921":"",children:"Service Tpe"}),Object(U.jsx)("p",{"data-v-81a54921":"",children:c.serviceType||""}),Object(U.jsx)("strong",{"data-v-81a54921":"",children:"Service Title"}),Object(U.jsx)("p",{"data-v-81a54921":"",children:c.serviceTitle||""}),Object(U.jsx)("strong",{"data-v-81a54921":"",children:"Service Description"}),Object(U.jsx)("p",{"data-v-81a54921":"",children:c.serviceDescription||""}),Object(U.jsx)("strong",{"data-v-81a54921":"",children:"Service Condition"}),Object(U.jsx)("p",{"data-v-81a54921":"",children:c.serviceCondition||""}),Object(U.jsx)("strong",{"data-v-81a54921":"",children:"Service Price"}),Object(U.jsx)("p",{"data-v-81a54921":"",children:c.servicePrice||""}),Object(U.jsx)("button",{onClick:function(){console.log("delete wtf"),Object(h.d)(n)(e)},"data-v-81a54921":"",children:"DELETE SERVICE"})]},n)})))]}),Object(U.jsx)(B.a,{amt:200,"data-v-81a54921":""}),Object(U.jsxs)(C.a,{toggleModal:ae,modalOpen:n,contentStyle:{padding:"40px 30px"},"data-v-81a54921":"",children:[Object(U.jsx)(u.a,{bgColor:"#23282d",fgColor:"#4285b9",value:"".concat(se,"/").concat(T),size:180,className:"profile-qrcode","data-v-81a54921":""}),Object(U.jsx)("p",{className:"profile-qrcode-desc","data-v-81a54921":"",children:"Other users can scan this code to contact you"}),!navigator.clipboard&&Object(U.jsx)("input",{className:"hidden-input",id:"public-key-holder",readOnly:!0,type:"text",value:"".concat(se,"/").concat(T),"data-v-81a54921":""}),Object(U.jsxs)("div",{className:"profile-clipboard-container",onClick:Ie,"data-v-81a54921":"",children:[Object(U.jsx)("img",{src:z.a,className:"profile-clipboard-icon",alt:"","data-v-81a54921":""}),Object(U.jsx)("p",{className:"profile-clipboard-text","data-v-81a54921":"",children:"Tap to copy to clipboard"})]})]}),Object(U.jsxs)(C.a,{toggleModal:ve,modalOpen:oe,contentStyle:{padding:"2em 2em"},"data-v-81a54921":"",children:[Object(U.jsx)("label",{htmlFor:"new-web-client-prefix","data-v-81a54921":"",children:"Web Client"}),Object(U.jsxs)("div",{className:"web-client-prefix-picker","data-v-81a54921":"",children:[Object(U.jsx)("i",{className:"far fa-copy",onClick:be,style:{fontSize:24},"data-v-81a54921":""}),Object(U.jsx)("select",{onChange:function(e){ue(e.target.value)},name:"new-web-client-prefix",id:"new-web-client-prefix",value:de,"data-v-81a54921":"",children:$.map((function(e){return Object(U.jsx)("option",{value:e,"data-v-81a54921":"",children:e},e)}))}),Object(U.jsx)("span",{"data-v-81a54921":"",children:"/"}),Object(U.jsx)("span",{style:{fontSize:12},"data-v-81a54921":"",children:T})]}),!navigator.clipboard&&Object(U.jsx)("input",{className:"hidden-input",id:"web-client-url-holder",readOnly:!0,type:"text",value:de+"/"+T,"data-v-81a54921":""}),Object(U.jsx)("br",{"data-v-81a54921":""}),Object(U.jsx)("label",{htmlFor:"content-host","data-v-81a54921":"",children:"Content Host"}),Object(U.jsx)(H,{"data-v-81a54921":""}),Object(U.jsx)("br",{"data-v-81a54921":""}),pe&&Object(U.jsxs)("div",{className:"flex-center",style:{marginTop:"auto"},"data-v-81a54921":"",children:[Object(U.jsx)("button",{onClick:Oe,className:"shock-form-button m-1","data-v-81a54921":"",children:"CANCEL"}),Object(U.jsx)("button",{onClick:he,className:"shock-form-button-confirm m-1","data-v-81a54921":"",children:"SUBMIT"})]})]}),Object(U.jsxs)(C.a,{toggleModal:Se,modalOpen:N,contentStyle:{padding:"2em 2em"},"data-v-81a54921":"",children:[Object(U.jsx)("div",{"data-v-81a54921":"",children:"You sure delete"}),P&&Object(U.jsx)(k.a,{"data-v-81a54921":""}),!P&&Object(U.jsxs)("div",{className:"flex-center",style:{marginTop:"auto"},"data-v-81a54921":"",children:[Object(U.jsx)("button",{onClick:we,className:"shock-form-button m-1","data-v-81a54921":"",children:"CANCEL"}),Object(U.jsx)("button",{onClick:_e,className:"shock-form-button-confirm m-1","data-v-81a54921":"",children:"DELETE"})]})]}),Object(U.jsx)(g.a,{onClick:ae,large:!0,iconURL:L.a,icon:null,label:null,"data-v-81a54921":""})]}),Object(U.jsx)(x.a,{"data-v-81a54921":""})]}),Object(U.jsx)("input",{type:"file",id:"avatar-file",ref:me,hidden:!0,accept:"image/*",onChange:ye,"data-v-81a54921":""}),Object(U.jsxs)(C.a,{contentStyle:Ve,modalOpen:De,toggleModal:qe,"data-v-81a54921":"",children:[Object(U.jsx)("label",{htmlFor:"newDisplayName","data-v-81a54921":"",children:"Display Name"}),Object(U.jsx)("input",{autoCapitalize:"none",autoCorrect:"off",type:"text",className:"input-field",placeholder:"New display name",name:"newDisplayName",onChange:function(e){var t=e.target.value;He(t)},value:Ae,"data-v-81a54921":""}),Ae!==Te&&""!==Ae?Object(U.jsx)("button",{onClick:We,className:"shock-form-button-confirm m-1","data-v-81a54921":"",children:"OK"}):Object(U.jsx)("button",{onClick:qe,className:"shock-form-button m-1","data-v-81a54921":"",children:"GO BACK"})]}),Object(U.jsxs)(C.a,{contentStyle:lt,modalOpen:Ye,toggleModal:st,"data-v-81a54921":"",children:[Object(U.jsx)("label",{htmlFor:"newBio","data-v-81a54921":"",children:"New Bio"}),Object(U.jsx)("input",{autoCapitalize:"none",autoCorrect:"off",type:"text",className:"input-field",placeholder:"New bio",name:"newBio",onChange:function(e){var t=e.target.value;tt(t)},value:et,"data-v-81a54921":""}),et!==Ge&&""!==et?Object(U.jsx)("button",{onClick:rt,className:"shock-form-button-confirm m-1","data-v-81a54921":"",children:"OK"}):Object(U.jsx)("button",{onClick:st,className:"shock-form-button m-1","data-v-81a54921":"",children:"GO BACK"})]})]})}}}]);
//# sourceMappingURL=19.145f3c9f.chunk.js.map