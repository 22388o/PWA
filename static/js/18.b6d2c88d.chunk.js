(this["webpackJsonpshocknet-pwa"]=this["webpackJsonpshocknet-pwa"]||[]).push([[18],{492:function(e,t,c){"use strict";var n=c(26),a=c(72),r=c.n(a),s=(c(494),c(7));t.a=function(e){var t=e.label,c=e.name,a=e.onChange,o=e.inputAction,i=e.actionIcon,l=e.value,u=e.inputMode,b=void 0===u?"text":u,p=e.type,j=void 0===p?"text":p,d=e.element,f=void 0===d?"input":d,O=e.small,h=void 0!==O&&O,v=e.disabled;return Object(s.jsxs)("div",{className:r()({group:!0,"group-disabled":v,"group-small":h}),children:[t?Object(s.jsx)("p",{className:"group-label",children:t}):null,Object(s.jsxs)("div",{className:r()({"group-input-container":!0,"group-input-textarea-container":"textarea"===f}),children:["textarea"===f?Object(s.jsx)("textarea",{className:"group-input group-input-textarea",name:c,onChange:a,inputMode:b,value:l,disabled:v}):Object(s.jsx)("input",{className:"group-input",type:j,name:c,onChange:a,inputMode:b,value:l,disabled:v}),o&&i?Object(s.jsx)("div",{className:"group-input-action",onClick:o,children:Object(s.jsx)("i",{className:r()(Object(n.a)({"group-input-action-icon":!0,fas:!0},i,!0)),onClick:o})}):null]})]})}},494:function(e,t,c){},507:function(e,t,c){"use strict";c(3),c(562);var n=c(7);t.a=function(e){var t=e.text,c=void 0===t?"Submit":t,a=e.onClick;return Object(n.jsx)("div",{className:"modal-submit-btn",onClick:a,children:Object(n.jsx)("p",{className:"modal-submit-btn-text",children:c})})}},561:function(e,t,c){"use strict";var n=c(2),a=c.n(n),r=c(6),s=c(16),o=c(3),i=c(40),l=c(483),u=c(507),b=c(492),p=c(49),j=c(150),d=(c(563),c(7));t.a=function(e){var t=e.tipData,c=e.toggleOpen,n=Object(i.b)(),f=Object(o.useState)(""),O=Object(s.a)(f,2),h=O[0],v=O[1],x=Object(o.useState)(!1),m=Object(s.a)(x,2),g=m[0],_=m[1],k=Object(o.useState)(0),N=Object(s.a)(k,2),S=N[0],C=N[1],y=Object(o.useState)(!1),w=Object(s.a)(y,2),U=w[0],P=w[1],D=Object(o.useCallback)((function(e){"amount"===e.target.name&&C(e.target.value)}),[]),T=Object(o.useCallback)(function(){var e=Object(r.a)(a.a.mark((function e(c){var r,s,o,i;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c.preventDefault(),e.prev=1,_(!0),e.next=5,n(Object(p.c)({amount:S,publicKey:t.publicKey,postId:t.postID}));case 5:P(!0),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(1),console.error(e.t0),t&&(o=e.t0.message,i=null===(r=e.t0.response)||void 0===r||null===(s=r.data)||void 0===s?void 0:s.errorMessage,v(null!==i&&void 0!==i?i:o));case 12:return e.prev=12,_(!1),e.finish(12);case 15:case"end":return e.stop()}}),e,null,[[1,8,12,15]])})));return function(t){return e.apply(this,arguments)}}(),[n,S,t]);return Object(o.useEffect)((function(){t||(_(!1),v(null),P(!1))}),[t]),Object(d.jsx)(l.a,{toggleModal:c,modalOpen:!!t,modalTitle:"Send Tip",children:U?Object(d.jsxs)("div",{className:"tip-modal-success",children:[Object(d.jsx)("i",{className:"tip-success-icon fas fa-check-circle"}),Object(d.jsx)("p",{className:"tip-success-title",children:"Post tipped successfully!"}),Object(d.jsx)("p",{className:"tip-success-desc"})]}):Object(d.jsxs)("form",{className:"modal-form tip-form",onSubmit:T,children:[h?Object(d.jsx)("div",{className:"form-error",children:h}):null,g?Object(d.jsx)(j.a,{overlay:!0,text:"Sending Tip..."}):null,Object(d.jsx)("p",{className:"tip-modal-desc",children:"Please specify the amount of sats you'd like to tip this user with below."}),Object(d.jsx)(b.a,{name:"amount",onChange:D,value:S,inputMode:"decimal",small:!0}),Object(d.jsx)(u.a,{text:"SEND TIP",onClick:T})]})})}},562:function(e,t,c){},563:function(e,t,c){},564:function(e,t,c){"use strict";var n=c(2),a=c.n(n),r=c(6),s=c(16),o=c(3),i=c(40),l=c(483),u=c(507),b=c(39),p=c(150),j=(c(565),c(7));t.a=function(e){var t=e.unlockData,c=e.toggleOpen,n=Object(i.b)(),d=Object(o.useState)(""),f=Object(s.a)(d,2),O=f[0],h=f[1],v=Object(o.useState)(!1),x=Object(s.a)(v,2),m=x[0],g=x[1],_=Object(o.useState)(!1),k=Object(s.a)(_,2),N=k[0],S=k[1],C=Object(o.useCallback)(function(){var e=Object(r.a)(a.a.mark((function e(c){var r,s,o,i;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c.preventDefault(),e.prev=1,g(!0),e.next=5,Object(b.j)(100,t.publicKey,t.postID)(n);case 5:S(!0),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(1),console.error(e.t0),t&&(o=e.t0.message,i=null===(r=e.t0.response)||void 0===r||null===(s=r.data)||void 0===s?void 0:s.errorMessage,h(null!==i&&void 0!==i?i:o));case 12:return e.prev=12,g(!1),e.finish(12);case 15:case"end":return e.stop()}}),e,null,[[1,8,12,15]])})));return function(t){return e.apply(this,arguments)}}(),[n,t]);return Object(o.useEffect)((function(){t||(g(!1),h(null),S(!1))}),[t]),Object(j.jsx)(l.a,{toggleModal:c,modalOpen:!!t,modalTitle:"Unlock content",children:N?Object(j.jsxs)("div",{className:"tip-modal-success",children:[Object(j.jsx)("i",{className:"tip-success-icon fas fa-check-circle"}),Object(j.jsx)("p",{className:"tip-success-title",children:"Content unlocked successfully!"})]}):Object(j.jsxs)("form",{className:"modal-form tip-form",onSubmit:C,children:[O?Object(j.jsx)("div",{className:"form-error",children:O}):null,m?Object(j.jsx)(p.a,{overlay:!0,text:"Sending Tip..."}):null,Object(j.jsx)("p",{className:"tip-modal-desc",children:"100 sats will be sent to the owner of the post to unlock the content"}),Object(j.jsx)(u.a,{text:"UNLOCK",onClick:C})]})})}},565:function(e,t,c){},725:function(e,t,c){},726:function(e,t,c){e.exports={"profile-page":"OtherUser_profile-page__OhC-_","profile-container":"OtherUser_profile-container__2oq7s","profile-cover":"OtherUser_profile-cover__3Fq6P","profile-info-container":"OtherUser_profile-info-container__3qnqN","profile-avatar":"OtherUser_profile-avatar__S6INq","profile-name":"OtherUser_profile-name__3chmC","profile-desc":"OtherUser_profile-desc__f9Dsj","config-btn":"OtherUser_config-btn__t33_B","config-btn-icon":"OtherUser_config-btn-icon__1p_6O","config-btn-text":"OtherUser_config-btn-text__1Wg_T","profile-choice-container":"OtherUser_profile-choice-container__3-xgF","profile-choice-icon":"OtherUser_profile-choice-icon__3iOE1","profile-choice-text":"OtherUser_profile-choice-text__deYLl","profile-qrcode":"OtherUser_profile-qrcode__2Ok54","profile-qrcode-desc":"OtherUser_profile-qrcode-desc__3cp0P","profile-clipboard-container":"OtherUser_profile-clipboard-container__1P_p8","profile-clipboard-icon":"OtherUser_profile-clipboard-icon__1nW2U","profile-clipboard-text":"OtherUser_profile-clipboard-text__2g4AC","publish-content-form":"OtherUser_publish-content-form__1YdVa","publish-content-title":"OtherUser_publish-content-title__3EsYE","publish-content-icon":"OtherUser_publish-content-icon__291ch","m-1":"OtherUser_m-1__1dpvP"}},727:function(e,t,c){e.exports={container:"FollowBtn_container__2c7Cj",icon:"FollowBtn_icon__3orep",text:"FollowBtn_text__1o7CS"}},762:function(e,t,c){"use strict";c.r(t);var n=c(21),a=c(2),r=c.n(a),s=c(0),o=c(6),i=c(16),l=c(3),u=c.n(l),b=c(40),p=c(524),j=c.n(p),d=c(22),f=c(72),O=c.n(f),h=c(88),v=c(14),x=c(91),m=c(48),g=c(20),_=c(496),k=c(504),N=c(483),S=c(150),C=c(497),y=c(576),w=c(485),U=c(577),P=c(578),D=c(561),T=c(564),M=c(507),I=c(104),E=c(39),q=(c(725),c(7)),K=function(e){var t=e.service,c=e.toggleOpen,n=Object(b.b)(),a=Object(l.useState)(""),s=Object(i.a)(a,2),u=s[0],p=s[1],j=Object(l.useState)(!1),d=Object(i.a)(j,2),f=d[0],O=d[1],h=Object(l.useState)(null),v=Object(i.a)(h,2),x=v[0],m=v[1],g=Object(l.useState)(!1),_=Object(i.a)(g,2),k=_[0],C=_[1],y=Object(l.useCallback)(function(){var e=Object(o.a)(r.a.mark((function e(c){var a,s,o,i,l,u,b,j,d;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c.preventDefault(),e.prev=1,a=t.servicePrice,s=t.owner,o=t.serviceID,i=t.serviceType,s&&o&&"number"===typeof Number(a)){e.next=7;break}return console.error("invalid service provided"),console.error(t),e.abrupt("return");case 7:return O(!0),e.next=10,Object(I.b)(s,o,a)(n);case 10:l=e.sent,console.log(l),m(l),"torrentSeed"===i&&Object(E.b)(l.seedUrl,l.tokens[0])(n),"streamSeed"===i&&Object(E.e)(l.seedUrl,l.tokens[0])(n),e.next=21;break;case 17:e.prev=17,e.t0=e.catch(1),console.error(e.t0),t&&(j=e.t0.message,d=null===(u=e.t0.response)||void 0===u||null===(b=u.data)||void 0===b?void 0:b.errorMessage,p(null!==d&&void 0!==d?d:j));case 21:return e.prev=21,O(!1),e.finish(21);case 24:case"end":return e.stop()}}),e,null,[[1,17,21,24]])})));return function(t){return e.apply(this,arguments)}}(),[n,t]);Object(l.useEffect)((function(){t||(O(!1),p(null),m(null))}),[x]);var w=Object(l.useCallback)((function(){navigator.clipboard.writeText(JSON.stringify(x)),C(!0)}),[x,C]);return Object(q.jsx)(N.a,{toggleModal:c,modalOpen:!!t,modalTitle:"Buy Service",children:x?Object(q.jsxs)("div",{className:"tip-modal-success",children:[Object(q.jsx)("i",{className:"tip-success-icon fas fa-check-circle"}),Object(q.jsx)("p",{className:"tip-success-title",children:"You successfully bought this service!"}),Object(q.jsx)("p",{children:JSON.stringify(x)}),Object(q.jsx)("button",{onClick:w,children:"COPY TO CLIPBOARD"}),k&&Object(q.jsx)("p",{children:"Copied!"})]}):Object(q.jsxs)("form",{className:"modal-form tip-form",onSubmit:y,children:[u?Object(q.jsx)("div",{className:"form-error",children:u}):null,f?Object(q.jsx)(S.a,{overlay:!0,text:"Sending Tip..."}):null,Object(q.jsxs)("p",{className:"tip-modal-desc",children:[t&&t.servicePrice," sats will be sent to the owner of the service provider"]}),Object(q.jsx)(M.a,{text:"BUY",onClick:y})]})})},B=c(18),A=c(726),F=c.n(A),Y=c(89),J=c(482),L=c(727),z=c.n(L),R=function(e){var t=e.publicKey,c=!!B.useSelector(B.selectFollows).find((function(e){return e.user===t})),n=Object(l.useState)(!1),a=Object(i.a)(n,2),s=a[0],u=a[1],b=Object(l.useCallback)(Object(o.a)(r.a.mark((function e(){var n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!s){e.next=3;break}return e.abrupt("return");case 3:if(u(!0),n={status:-1,data:{errorMessage:""}},!c){e.next=11;break}return e.next=8,Y.b.delete("/api/gun/follows/".concat(t));case 8:n=e.sent,e.next=14;break;case 11:return e.next=13,Y.b.put("/api/gun/follows/".concat(t),{});case 13:n=e.sent;case 14:if(200===n.status){e.next=16;break}throw new Error(n.data.errorMessage);case 16:e.next=21;break;case 18:e.prev=18,e.t0=e.catch(0),c?alert("Could not unfollow: ".concat(e.t0.message)):alert("Could not follow: ".concat(e.t0.message));case 21:return e.prev=21,u(!1),e.finish(21);case 24:case"end":return e.stop()}}),e,null,[[0,18,21,24]])}))),[s,u,c,t]);return Object(q.jsxs)("div",{className:z.a.container,onClick:b,children:[Object(q.jsx)("i",{className:O()(z.a.icon,"fas","fa-user-plus")}),Object(q.jsx)("p",{className:O()(J.x,z.a.text),children:s?"...":c?"Unfollow":"Follow"})]})},V=u.a.lazy((function(){return Promise.all([c.e(0),c.e(3)]).then(c.bind(null,522))})),W=u.a.lazy((function(){return Promise.all([c.e(2),c.e(0),c.e(5)]).then(c.bind(null,749))}));t.default=function(){var e=Object(b.b)(),t=Object(l.useState)(!1),c=Object(i.a)(t,2),a=c[0],u=c[1],p=Object(b.c)((function(e){return e.userProfiles})),f=Object(d.i)().publicKey,M=B.useSelector(B.selectUser(f)),I=Object(l.useState)([]),E=Object(i.a)(I,2),A=E[0],Y=E[1],J=Object(l.useState)([]),L=Object(i.a)(J,2),z=L[0],G=L[1],H=Object(l.useState)([]),Q=Object(i.a)(H,2),X=Q[0],Z=Q[1],$=Object(l.useState)({}),ee=Object(i.a)($,2),te=ee[0],ce=ee[1],ne=Object(l.useState)(null),ae=Object(i.a)(ne,2),re=ae[0],se=ae[1],oe=Object(l.useState)(null),ie=Object(i.a)(oe,2),le=ie[0],ue=ie[1],be=Object(l.useState)(null),pe=Object(i.a)(be,2),je=pe[0],de=pe[1],fe=Object(l.useState)("posts"),Oe=Object(i.a)(fe,2),he=Oe[0],ve=Oe[1],xe=Object(l.useCallback)((function(){var e="".concat(f,"::posts::on"),t=Object(g.e)({query:e,reconnect:!1,onData:function(){var e=Object(o.a)(r.a.mark((function e(t){var c,n,a,l,u;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=Object.entries(t),n=c.filter((function(e){var t=Object(i.a)(e,2),c=t[0];return null!==t[1]&&!h.a.includes(c)})).map((function(e){return Object(i.a)(e,1)[0]})),a=n.map(function(){var e=Object(o.a)(r.a.mark((function e(t){var c,n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.a.get("/api/gun/otheruser/".concat(f,"/load/posts>").concat(t));case 2:return c=e.sent,n=c.data,e.abrupt("return",Object(s.a)(Object(s.a)({},n.data),{},{id:t,authorId:f}));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.next=5,Promise.allSettled(a);case 5:l=e.sent,u=l.filter((function(e){return"fulfilled"===e.status})).map((function(e){return e.value})),Y(u);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()});return Object(g.f)(t)}),[f]),me=Object(l.useCallback)((function(){var e="".concat(f,"::sharedPosts::on"),t=Object(g.e)({query:e,reconnect:!1,onData:function(){var e=Object(o.a)(r.a.mark((function e(t){var c,n,a,l,u;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=Object.entries(t),n=c.filter((function(e){var t=Object(i.a)(e,2),c=t[0];return null!==t[1]&&!h.a.includes(c)})).map((function(e){return Object(i.a)(e,1)[0]})),a=n.map(function(){var e=Object(o.a)(r.a.mark((function e(t){var c,n,a,o;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.a.get("/api/gun/otheruser/".concat(f,"/load/sharedPosts>").concat(t));case 2:return c=e.sent,n=c.data,e.next=6,v.a.get("/api/gun/otheruser/".concat(n.data.originalAuthor,"/load/posts>").concat(t));case 6:return a=e.sent,o=a.data,e.abrupt("return",Object(s.a)(Object(s.a)({},n.data),{},{originalPost:Object(s.a)(Object(s.a)({},o.data),{},{id:t}),authorId:f,type:"shared"}));case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.next=5,Promise.allSettled(a);case 5:l=e.sent,u=l.filter((function(e){return"fulfilled"===e.status})).map((function(e){return e.value})),G(u);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()});return Object(g.f)(t)}),[f]);Object(l.useEffect)((function(){return e(Object(m.b)(f))}),[e,f]),Object(l.useEffect)((function(){return xe()}),[xe]),Object(l.useEffect)((function(){return me()}),[me]),Object(l.useEffect)((function(){var t=[].concat(Object(n.a)(A),Object(n.a)(z)).sort((function(e,t){return t.date-e.date}));Z(t);var c=z.filter((function(e){return!p[e.originalAuthor]})).map((function(t){var c=t.originalAuthor;return e(Object(m.b)(c)),function(){e(Object(m.c)(c))}}));return function(){c.forEach((function(e){return e()}))}}),[e,A,p,z]),Object(l.useEffect)((function(){v.a.get("/api/gun/otheruser/".concat(f,"/load/offeredServices")).then((function(e){var t=e.data;ce(t.data)}))}),[f]);var ge=Object(l.useCallback)((function(){u(!a)}),[a]),_e=Object(l.useCallback)((function(e){!re&&e||se(null),se(e)}),[re]),ke=Object(l.useCallback)((function(e){!je&&e||de(null),de(e)}),[je]),Ne=Object(l.useCallback)((function(e){!le&&e||ue(null),ue(e)}),[le]),Se=Object(l.useCallback)((function(){navigator.clipboard.writeText(f)}),[f]),Ce=Object(l.useCallback)((function(e){ve(e)}),[]);return Object(q.jsxs)("div",{className:O()("page-container",F.a["profile-page"]),children:[Object(q.jsxs)("div",{className:F.a["profile-container"],children:[Object(q.jsx)("div",{className:"profile-cover",children:M.header&&Object(q.jsx)("img",{alt:"User set profile header.",src:"data:image/jpeg;base64,".concat(M.header)})}),Object(q.jsxs)("div",{className:F.a["profile-info-container"],children:[Object(q.jsx)("div",{className:F.a["profile-avatar"],style:{height:"".concat(122,"px"),width:"".concat(122,"px")},children:Object(q.jsx)(C.a,{height:122,publicKey:f,greyBorder:!0})}),Object(q.jsxs)("div",{className:F.a["profile-info"],children:[Object(q.jsx)("p",{className:F.a["profile-name"],children:M.displayName}),Object(q.jsx)("p",{className:F.a["profile-desc"],children:M.bio||"Shockwallet user"}),Object(q.jsx)(R,{publicKey:f})]})]}),Object(q.jsx)(y.a,{onChange:Ce,selected:he}),Object(q.jsxs)("div",{children:["posts"===he&&X.map((function(e,t){var c=p[e.authorId];if("shared"===e.type){var n=e.originalAuthor,a=p[n];return Object(q.jsx)(l.Suspense,{fallback:Object(q.jsx)(S.a,{}),children:Object(q.jsx)(W,{originalPost:e.originalPost,originalPostProfile:a,sharedTimestamp:e.shareDate,sharerProfile:c,postPublicKey:n,openTipModal:_e,openUnlockModal:Ne,openDeleteModal:null})},t)}return Object(q.jsx)(l.Suspense,{fallback:Object(q.jsx)(S.a,{}),children:Object(q.jsx)(V,{id:e.id,timestamp:e.date,contentItems:e.contentItems,avatar:"data:image/jpeg;base64,".concat(null===c||void 0===c?void 0:c.avatar),username:Object(x.c)(null===c||void 0===c?void 0:c.user,null===c||void 0===c?void 0:c.displayName),publicKey:e.authorId,openTipModal:_e,openUnlockModal:Ne,tipCounter:0,tipValue:0,openDeleteModal:null})},t)})),"services"===he&&Object.entries(te).filter((function(e){var t=Object(i.a)(e,2);return t[0],!!t[1]})).map((function(e){var t=Object(i.a)(e,2),c=t[0],n=t[1];return Object(q.jsxs)("div",{className:F.a.post,children:[Object(q.jsx)("strong",{children:"Service ID"}),Object(q.jsx)("p",{children:c}),Object(q.jsx)("strong",{children:"Service Tpe"}),Object(q.jsx)("p",{children:n.serviceType}),Object(q.jsx)("strong",{children:"Service Title"}),Object(q.jsx)("p",{children:n.serviceTitle}),Object(q.jsx)("strong",{children:"Service Description"}),Object(q.jsx)("p",{children:n.serviceDescription}),Object(q.jsx)("strong",{children:"Service Condition"}),Object(q.jsx)("p",{children:n.serviceCondition}),Object(q.jsx)("strong",{children:"Service Price"}),Object(q.jsx)("p",{children:n.servicePrice}),Object(q.jsx)("button",{onClick:function(){de(Object(s.a)(Object(s.a)({},n),{},{serviceID:c,owner:f}))},children:"BUY SERVICE"})]})}))]}),Object(q.jsx)(w.a,{amt:200}),Object(q.jsxs)(N.a,{toggleModal:ge,modalOpen:a,contentStyle:{padding:"40px 30px"},children:[Object(q.jsx)(j.a,{bgColor:"#23282d",fgColor:"#4285b9",value:f,size:180,className:F.a["profile-qrcode"]}),Object(q.jsx)("p",{className:F.a["profile-qrcode-desc"],children:"Scan this code to contact this user"}),Object(q.jsxs)("div",{className:F.a["profile-clipboard-container"],onClick:Se,children:[Object(q.jsx)("img",{src:U.a,className:F.a["profile-clipboard-icon"],alt:""}),Object(q.jsx)("p",{className:F.a["profile-clipboard-text"],children:"Tap to copy to clipboard"})]})]}),Object(q.jsx)(D.a,{tipData:re,toggleOpen:_e}),Object(q.jsx)(T.a,{unlockData:le,toggleOpen:Ne}),Object(q.jsx)(K,{service:je,toggleOpen:ke}),Object(q.jsx)(k.a,{onClick:ge,large:!0,iconURL:P.a,style:{backgroundColor:"var(--yellow)"},icon:null,label:null})]}),Object(q.jsx)(_.a,{})]})}}}]);
//# sourceMappingURL=18.b6d2c88d.chunk.js.map