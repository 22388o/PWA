(this["webpackJsonpshocknet-pwa"]=this["webpackJsonpshocknet-pwa"]||[]).push([[14,8],{435:function(e,t,a){"use strict";var n=a(3),c=a(73),r=a.n(c),i=(a(441),a(7)),s=function(e){var t=e.children,a=e.style;return Object(i.jsx)("div",{className:"content",style:a,"data-v-a1b92a2f":"",children:t})},o=(a(442),function(e){var t=e.title,a=e.toggleModal;return t?Object(i.jsxs)("div",{className:"head","data-v-528e5a72":"",children:[Object(i.jsx)("p",{className:"head-title","data-v-528e5a72":"",children:t}),Object(i.jsx)("div",{className:"head-close",onClick:a,"data-v-528e5a72":"",children:Object(i.jsx)("i",{className:"fas fa-times","data-v-528e5a72":""})})]}):null});a(443),t.a=function(e){var t=e.modalOpen,a=void 0!==t&&t,c=e.toggleModal,l=e.modalTitle,u=void 0===l?"":l,d=e.children,b=e.contentStyle,v=void 0===b?{}:b,f=Object(n.useCallback)((function(){c()}),[c]);return Object(i.jsxs)("div",{className:r()({modal:!0,open:a}),"data-v-07341a5c":"",children:[Object(i.jsx)("div",{className:"backdrop",onClick:f,"data-v-07341a5c":""}),Object(i.jsxs)("div",{className:"container","data-v-07341a5c":"",children:[Object(i.jsx)(o,{title:u,toggleModal:f,"data-v-07341a5c":""}),Object(i.jsx)(s,{style:v,"data-v-07341a5c":"",children:d})]})]})}},441:function(e,t,a){},442:function(e,t,a){},443:function(e,t,a){},444:function(e,t,a){"use strict";var n=a(25),c=a(73),r=a.n(c),i=(a(450),a(7));t.a=function(e){var t=e.label,a=e.name,c=e.onChange,s=e.inputAction,o=e.actionIcon,l=e.value,u=e.inputMode,d=void 0===u?"text":u,b=e.type,v=void 0===b?"text":b,f=e.element,j=void 0===f?"input":f,p=e.small,m=void 0!==p&&p,O=e.disabled;return Object(i.jsxs)("div",{className:r()({group:!0,"group-disabled":O,"group-small":m}),"data-v-9f9c9acc":"",children:[t?Object(i.jsx)("p",{className:"group-label","data-v-9f9c9acc":"",children:t}):null,Object(i.jsxs)("div",{className:r()({"group-input-container":!0,"group-input-textarea-container":"textarea"===j}),"data-v-9f9c9acc":"",children:["textarea"===j?Object(i.jsx)("textarea",{className:"group-input group-input-textarea",name:a,onChange:c,inputMode:d,value:l,disabled:O,"data-v-9f9c9acc":""}):Object(i.jsx)("input",{className:"group-input",type:v,name:a,onChange:c,inputMode:d,value:l,disabled:O,"data-v-9f9c9acc":""}),s&&o?Object(i.jsx)("div",{className:"group-input-action",onClick:s,"data-v-9f9c9acc":"",children:Object(i.jsx)("i",{className:r()(Object(n.a)({"group-input-action-icon":!0,fas:!0},o,!0)),onClick:s,"data-v-9f9c9acc":""})}):null]})]})}},448:function(e,t,a){"use strict";var n=a(51),c=a(7);t.a=function(){return Object(c.jsxs)("div",{className:"bottom-nav-container",children:[Object(c.jsx)(n.c,{className:"bottom-nav-btn",to:"/overview",activeClassName:"active-nav-btn",children:Object(c.jsx)("i",{className:"bottom-nav-btn-icon icon-thin-wallet"})}),Object(c.jsx)(n.c,{className:"bottom-nav-btn",to:"/chat",activeClassName:"active-nav-btn",children:Object(c.jsx)("i",{className:"bottom-nav-btn-icon icon-thin-chat"})}),Object(c.jsx)(n.c,{className:"bottom-nav-btn",to:"/profile",activeClassName:"active-nav-btn",children:Object(c.jsx)("i",{className:"bottom-nav-btn-icon icon-thin-profile"})}),Object(c.jsx)(n.c,{className:"bottom-nav-btn",to:"/feed",activeClassName:"active-nav-btn",children:Object(c.jsx)("i",{className:"bottom-nav-btn-icon icon-thin-feed"})})]})}},450:function(e,t,a){},458:function(e,t,a){"use strict";a(3),a(488);var n=a(7);t.a=function(e){var t=e.text,a=void 0===t?"Submit":t,c=e.onClick;return Object(n.jsx)("div",{className:"submit-btn",onClick:c,"data-v-3cc0639b":"",children:Object(n.jsx)("p",{className:"submit-btn-text","data-v-3cc0639b":"",children:a})})}},487:function(e,t,a){"use strict";var n=a(2),c=a.n(n),r=a(6),i=a(14),s=a(3),o=a(41),l=a(435),u=a(458),d=a(444),b=a(50),v=a(145),f=(a(489),a(7));t.a=function(e){var t=e.tipData,a=e.toggleOpen,n=Object(o.b)(),j=Object(s.useState)(""),p=Object(i.a)(j,2),m=p[0],O=p[1],h=Object(s.useState)(!1),x=Object(i.a)(h,2),g=x[0],N=x[1],y=Object(s.useState)(0),k=Object(i.a)(y,2),w=k[0],S=k[1],C=Object(s.useState)(!1),I=Object(i.a)(C,2),M=I[0],P=I[1],U=Object(s.useCallback)((function(e){"amount"===e.target.name&&S(e.target.value)}),[]),D=Object(s.useCallback)(function(){var e=Object(r.a)(c.a.mark((function e(a){var r,i,s,o;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.preventDefault(),e.prev=1,N(!0),e.next=5,n(Object(b.c)({amount:w,publicKey:t.publicKey,postId:t.postID}));case 5:P(!0),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(1),console.error(e.t0),t&&(s=e.t0.message,o=null===(r=e.t0.response)||void 0===r||null===(i=r.data)||void 0===i?void 0:i.errorMessage,O(null!==o&&void 0!==o?o:s));case 12:return e.prev=12,N(!1),e.finish(12);case 15:case"end":return e.stop()}}),e,null,[[1,8,12,15]])})));return function(t){return e.apply(this,arguments)}}(),[n,w,t]);return Object(s.useEffect)((function(){t||(N(!1),O(null),P(!1))}),[t]),Object(f.jsx)(l.a,{toggleModal:a,modalOpen:!!t,modalTitle:"Send Tip","data-v-e95d3c21":"",children:M?Object(f.jsxs)("div",{className:"tip-modal-success","data-v-e95d3c21":"",children:[Object(f.jsx)("i",{className:"tip-success-icon fas fa-check-circle","data-v-e95d3c21":""}),Object(f.jsx)("p",{className:"tip-success-title","data-v-e95d3c21":"",children:"Post tipped successfully!"}),Object(f.jsx)("p",{className:"tip-success-desc","data-v-e95d3c21":""})]}):Object(f.jsxs)("form",{className:"modal-form tip-form",onSubmit:D,"data-v-e95d3c21":"",children:[m?Object(f.jsx)("div",{className:"form-error","data-v-e95d3c21":"",children:m}):null,g?Object(f.jsx)(v.a,{overlay:!0,text:"Sending Tip...","data-v-e95d3c21":""}):null,Object(f.jsx)("p",{className:"tip-modal-desc","data-v-e95d3c21":"",children:"Please specify the amount of sats you'd like to tip this user with below."}),Object(f.jsx)(d.a,{name:"amount",onChange:U,value:w,inputMode:"decimal",small:!0,"data-v-e95d3c21":""}),Object(f.jsx)(u.a,{text:"SEND TIP",onClick:D,"data-v-e95d3c21":""})]})})}},488:function(e,t,a){},489:function(e,t,a){},490:function(e,t,a){"use strict";var n=a(2),c=a.n(n),r=a(6),i=a(14),s=a(3),o=a(41),l=a(435),u=a(458),d=a(40),b=a(145),v=(a(491),a(7));t.a=function(e){var t=e.unlockData,a=e.toggleOpen,n=Object(o.b)(),f=Object(s.useState)(""),j=Object(i.a)(f,2),p=j[0],m=j[1],O=Object(s.useState)(!1),h=Object(i.a)(O,2),x=h[0],g=h[1],N=Object(s.useState)(!1),y=Object(i.a)(N,2),k=y[0],w=y[1],S=Object(s.useCallback)(function(){var e=Object(r.a)(c.a.mark((function e(a){var r,i,s,o;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.preventDefault(),e.prev=1,g(!0),e.next=5,Object(d.j)(100,t.publicKey,t.postID)(n);case 5:w(!0),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(1),console.error(e.t0),t&&(s=e.t0.message,o=null===(r=e.t0.response)||void 0===r||null===(i=r.data)||void 0===i?void 0:i.errorMessage,m(null!==o&&void 0!==o?o:s));case 12:return e.prev=12,g(!1),e.finish(12);case 15:case"end":return e.stop()}}),e,null,[[1,8,12,15]])})));return function(t){return e.apply(this,arguments)}}(),[n,t]);return Object(s.useEffect)((function(){t||(g(!1),m(null),w(!1))}),[t]),Object(v.jsx)(l.a,{toggleModal:a,modalOpen:!!t,modalTitle:"Unlock content","data-v-9ae7b48a":"",children:k?Object(v.jsxs)("div",{className:"tip-modal-success","data-v-9ae7b48a":"",children:[Object(v.jsx)("i",{className:"tip-success-icon fas fa-check-circle","data-v-9ae7b48a":""}),Object(v.jsx)("p",{className:"tip-success-title","data-v-9ae7b48a":"",children:"Content unlocked successfully!"})]}):Object(v.jsxs)("form",{className:"modal-form tip-form",onSubmit:S,"data-v-9ae7b48a":"",children:[p?Object(v.jsx)("div",{className:"form-error","data-v-9ae7b48a":"",children:p}):null,x?Object(v.jsx)(b.a,{overlay:!0,text:"Sending Tip...","data-v-9ae7b48a":""}):null,Object(v.jsx)("p",{className:"tip-modal-desc","data-v-9ae7b48a":"",children:"100 sats will be sent to the owner of the post to unlock the content"}),Object(v.jsx)(u.a,{text:"UNLOCK",onClick:S,"data-v-9ae7b48a":""})]})})}},491:function(e,t,a){},499:function(e,t,a){"use strict";a.d(t,"a",(function(){return x}));var n=a(21),c=a(2),r=a.n(c),i=a(6),s=a(0),o=a(14),l=a(505),u=a.n(l),d=a(553),b=a.n(d),v=function(){var e=Object(i.a)(r.a.mark((function e(t){var a;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,b.a._init){e.next=4;break}return e.next=4,new Promise((function(e,t){b.a.init("ShockWalletStore").then((function(){return console.log("File cache initialized!"),b.a.persist()})).then((function(a){a.persistent?e(a):t(a)}))}));case 4:return e.next=6,b.a.load(t);case 6:return a=e.sent,e.abrupt("return",a.createURL());case 10:return e.prev=10,e.t0=e.catch(0),console.warn(e.t0),e.abrupt("return",!1);case 14:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t){return e.apply(this,arguments)}}(),f=function(e,t){var a=document.querySelectorAll(t);return a&&a.length&&a.forEach((function(t){t.src||(t.src=e,t.muted=!0,t.autoplay=!0)})),!!(null===a||void 0===a?void 0:a.length)},j=function(e,t){return b.a.save(e,t)},p=function(e){var t=Promise.resolve();return e.forEach((function(e){t=t.then((function(){return e()}))})),t},m={"video/embedded":{formats:["mp4","webm"],element:"video",options:{autoplay:!0,muted:!0}},"image/embedded":{formats:["jpg","png","webp","jpeg"],element:"img",options:{}}},O=function(e){var t,a,n=null===(t=e.name)||void 0===t||null===(a=t.split("."))||void 0===a?void 0:a.slice(-1)[0],c=Object.entries(m).filter((function(e){var t=Object(o.a)(e,2);t[0];return t[1].formats.includes(n)}))[0];if(c){var r=Object(o.a)(c,2),i=r[0],l=r[1];return Object(s.a)({name:i},l)}return null},h=new u.a,x=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],a=arguments.length>2&&void 0!==arguments[2]&&arguments[2],c=e.map((function(e){var n=e.contentItems,c=e.id;return Object.entries(n).filter((function(e){var t=Object(o.a)(e,2),a=(t[0],t[1]);return m[a.type]})).map((function(e){var n=Object(o.a)(e,2),s=n[0],l=n[1];return function(){return new Promise((function(e){!h.get(l.magnetURI)||a?h.add(l.magnetURI,function(){var a=Object(i.a)(r.a.mark((function a(n){var u;return r.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:e(!0),(u=n.files.filter((function(e){var t,a,n=null===(t=e.name)||void 0===t||null===(a=t.split("."))||void 0===a?void 0:a.slice(-1)[0],c=Object.entries(m).filter((function(e){var t=Object(o.a)(e,2);t[0];return t[1].formats.includes(n)}))[0];return!!c&&Object(o.a)(c,2)[1].formats.includes(n)}))).map(function(){var e=Object(i.a)(r.a.mark((function e(a){var n,i,u,d,b,j;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=O(a)){e.next=3;break}return e.abrupt("return");case 3:return i="".concat(c,"-").concat(s,"-").concat(a.name),u=n.element,d="".concat(u,'[data-torrent="').concat(l.magnetURI,'"]'),e.next=8,v(i);case 8:if(!(b=e.sent)){e.next=14;break}return(j=h.get(l.magnetURI))&&j.destroy(),f(b,d),e.abrupt("return");case 14:document.querySelectorAll(d).forEach((function(e){var c=decodeURIComponent(l.magnetURI.replace(/.*(ws=)/gi,"")),r=n.formats.filter((function(e){return c.toLowerCase().endsWith(".".concat(e.toLowerCase()))})),i=Object(o.a)(r,1)[0],s=e.getAttribute("src");!t&&i||s?e.setAttribute("src",c):a.renderTo(e,n.options)}));case 16:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),n.on("done",(function(){u.map((function(e){var t=O(e),a="".concat(c,"-").concat(s,"-").concat(e.name),n=t.element,o="".concat(n,'[data-torrent="').concat(l.magnetURI,'"]');return e.getBlob(function(){var e=Object(i.a)(r.a.mark((function e(t,n){var c,i;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=3;break}return console.warn(t),e.abrupt("return");case 3:return e.next=5,j(a,n);case 5:if("false"!==(null===(c=document.querySelector(o))||void 0===c?void 0:c.dataset.played)||(null===c||void 0===c?void 0:c.getAttribute("src"))){e.next=11;break}return e.next=9,v(a);case 9:i=e.sent,f(i,o);case 11:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}()),e}))}));case 4:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()):e(!0)}))}}))})).reduce((function(e,t){return[].concat(Object(n.a)(e),Object(n.a)(t))}),[]);p(c)}},508:function(e,t){},511:function(e,t){},512:function(e,t){},513:function(e,t){},515:function(e,t){},516:function(e,t){},523:function(e,t){},524:function(e,t){},530:function(e,t){},531:function(e,t){},533:function(e,t){},534:function(e,t){},535:function(e,t){},536:function(e,t){},537:function(e,t){},538:function(e,t){},539:function(e,t){},540:function(e,t){},543:function(e,t){},544:function(e,t){},545:function(e,t){},552:function(e,t){},666:function(e,t,a){},667:function(e,t,a){},719:function(e,t,a){"use strict";a.r(t);var n=a(21),c=a(14),r=a(3),i=a.n(r),s=a(26),o=a(90),l=a(499),u=a(18),d=a(448),b=a(73),v=a.n(b),f=a(22),j=(a(666),a(7)),p=function(e){var t=e.username,a=e.avatar,n=e.addButton,c=void 0!==n&&n,r=e.large,s=void 0!==r&&r,o=e.main,l=void 0!==o&&o,d=e.publicKey,b=Object(f.g)(),p=u.useSelector(u.selectSelfPublicKey),m=d===p,O=i.a.useCallback((function(){m||b.push("/otherUser/".concat(d))}),[b,m,d]);return Object(j.jsxs)("div",{className:v()({"followed-user":!0,"followed-user-large":s,"followed-user-main":l}),onClick:O,"data-v-f5dfa3c9":"",children:[Object(j.jsx)("div",{className:"followed-user-avatar",style:{backgroundImage:"url(".concat(a,")")},"data-v-f5dfa3c9":"",children:c?Object(j.jsx)("div",{className:"user-add-btn","data-v-f5dfa3c9":"",children:Object(j.jsx)("i",{className:"fas fa-plus","data-v-f5dfa3c9":""})}):null}),t?Object(j.jsx)("p",{className:"followed-user-name","data-v-f5dfa3c9":"",children:t}):null]})},m=a(487),O=a(145),h=a(55),x=(a(667),a(490)),g=a(41),N=a(50),y=a(48),k=a(20),w=i.a.lazy((function(){return Promise.all([a.e(1),a.e(4)]).then(a.bind(null,561))})),S=i.a.lazy((function(){return Promise.all([a.e(1),a.e(3)]).then(a.bind(null,723))}));t.default=function(){var e=Object(g.b)(),t=u.useSelector(u.selectFollows),a=u.useSelector((function(e){return e.feed.posts})),i=u.useSelector((function(e){return e.userProfiles})),b=Object(r.useState)(null),v=Object(c.a)(b,2),f=v[0],C=v[1],I=Object(r.useState)(null),M=Object(c.a)(I,2),P=M[0],U=M[1],D=u.useSelector(u.selectSelfUser),K=D.avatar,T=D.publicKey;Object(r.useEffect)((function(){return Object(N.d)()(e),function(){Object(N.g)()}}),[]);var R=Object(r.useMemo)((function(){return a?Object.values(a).reduce((function(e,t){return[].concat(Object(n.a)(e),Object(n.a)(t))}),[]).filter((function(e){return Object(h.b)(e)?!!t.find((function(t){return t.user===e.sharerId})):!!t.find((function(t){return t.user===e.authorId}))})).sort((function(e,t){var a=Object(h.b)(e)?e.shareDate:e.date;return(Object(h.b)(t)?t.shareDate:t.date)-a})):[]}),[t,a]),E=Object(r.useCallback)((function(e){console.log(e),!f&&e||C(null),C(e)}),[f]),A=Object(r.useCallback)((function(e){console.log(e),!P&&e||U(null),U(e)}),[P]);return Object(r.useLayoutEffect)((function(){Object(l.a)(R.filter((function(e){return"post"===e.type})),!1)}),[R]),Object(r.useEffect)((function(){var a=t.map((function(t){var a=e(Object(y.b)(t.user)),n=e(Object(N.f)(t.user)),c=e(Object(N.e)(t.user));return function(){a(),Object(k.f)(n,c)()}}));return function(){a.map((function(e){return e()}))}}),[t,e]),Object(j.jsxs)("div",{className:"page-container feed-page","data-v-de4c8428":"",children:[Object(j.jsxs)("div",{className:"following-bar-container","data-v-de4c8428":"",children:[Object(j.jsx)(p,{addButton:!0,large:!0,main:!0,avatar:K?"data:image/jpeg;base64,".concat(K):null,username:null,publicKey:T,"data-v-de4c8428":""}),Object(j.jsx)("div",{className:"following-bar-list","data-v-de4c8428":"",children:null===t||void 0===t?void 0:t.map((function(e){var t,a=e.user,n=null!==(t=i[a])&&void 0!==t?t:s.e(a);return Object(j.jsx)(p,{username:Object(o.c)(a,n.displayName),avatar:"data:image/jpeg;base64,".concat(n.avatar),publicKey:a,"data-v-de4c8428":""},a)}))})]}),Object(j.jsxs)("div",{className:"tabs-holder","data-v-de4c8428":"",children:[Object(j.jsx)("p",{className:"tab active","data-v-de4c8428":"",children:"Feed"}),Object(j.jsx)("p",{className:"tab","data-v-de4c8428":"",children:"Saved"}),Object(j.jsx)("p",{className:"tab","data-v-de4c8428":"",children:"Videos"})]}),Object(j.jsxs)("div",{className:"posts-holder","data-v-de4c8428":"",children:[0===R.length&&Object(j.jsx)(O.a,{text:"loading posts...","data-v-de4c8428":""}),R.map((function(e,t){if("shared"===e.type){if(!e.originalPost)return null;var a,n,l=Object.entries(e.originalPost.contentItems).find((function(e){var t=Object(c.a)(e,2);t[0];return"stream/embedded"===t[1].type}));if(l){var u=Object(c.a)(l,2);a=u[0],n=u[1]}if(n){if(!n.liveStatus)return;if("waiting"===n.liveStatus)return;if("wasLive"===n.liveStatus){if(!n.playbackMagnet)return;e.originalPost.contentItems[a].type="video/embedded",e.originalPost.contentItems[a].magnetURI=n.playbackMagnet}}var d=i[e.sharerId]||s.e(e.sharerId),b=e.originalAuthor,v=i[b]||s.e(b);return Object(j.jsx)(r.Suspense,{fallback:Object(j.jsx)(O.a,{"data-v-de4c8428":""}),"data-v-de4c8428":"",children:Object(j.jsx)(S,{originalPost:e.originalPost,originalPostProfile:v,sharedTimestamp:e.shareDate,sharerProfile:d,postPublicKey:b,openTipModal:E,openUnlockModal:A,"data-v-de4c8428":""})},t)}var f,p,m=Object.entries(e.contentItems).find((function(e){var t=Object(c.a)(e,2);t[0];return"stream/embedded"===t[1].type}));if(m){var h=Object(c.a)(m,2);f=h[0],p=h[1]}if(p){if(!p.liveStatus)return;if("waiting"===p.liveStatus)return;if("wasLive"===p.liveStatus){if(!p.playbackMagnet)return;e.contentItems[f].type="video/embedded",e.contentItems[f].magnetURI=p.playbackMagnet}}var x=i[e.authorId]||s.e(e.authorId);return Object(j.jsx)(r.Suspense,{fallback:Object(j.jsx)(O.a,{"data-v-de4c8428":""}),"data-v-de4c8428":"",children:Object(j.jsx)(w,{id:e.id,timestamp:e.date,contentItems:e.contentItems,avatar:"data:image/jpeg;base64,".concat(null===x||void 0===x?void 0:x.avatar),username:Object(o.c)(null===x||void 0===x?void 0:x.publicKey,null===x||void 0===x?void 0:x.displayName),publicKey:e.authorId,openTipModal:E,openUnlockModal:A,tipCounter:e.tipCounter||0,tipValue:e.tipValue||0,"data-v-de4c8428":""})},t)}))]}),Object(j.jsx)(m.a,{tipData:f,toggleOpen:E,"data-v-de4c8428":""}),Object(j.jsx)(x.a,{unlockData:P,toggleOpen:A,"data-v-de4c8428":""}),Object(j.jsx)(d.a,{"data-v-de4c8428":""})]})}}}]);
//# sourceMappingURL=14.1c506227.chunk.js.map