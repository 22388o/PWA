(this["webpackJsonpshocknet-pwa"]=this["webpackJsonpshocknet-pwa"]||[]).push([[9],{109:function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"c",(function(){return l})),n.d(t,"d",(function(){return p})),n.d(t,"e",(function(){return d})),n.d(t,"b",(function(){return f}));var r=n(2),a=n.n(r),c=n(21),o=n(6),u=n(18),s=n(29),i={ADD_MY_SERVICE:"service/add",REMOVE_MY_SERVICE:"service/remove",ADD_BOUGHT_SERVICE:"service/add/bought"},l=function(e,t){return function(){var n=Object(o.a)(a.a.mark((function n(r){var o,s,i,l,p,d;return a.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,u.a.post("/api/gun/set",{path:"$user>offeredServices",value:e});case 2:if(o=n.sent,s=o.data,i=s.ok,l=s.id,i){n.next=7;break}return n.abrupt("return","");case 7:return p=Object.entries(t).map((function(e){var t=Object(c.a)(e,2),n=t[0],r=t[1];if(r)return console.log("setting: ".concat(n," to ").concat(r)),u.a.post("/api/gun/put",{path:"$user>offeredServices>".concat(l,">").concat(n),value:{$$__ENCRYPT__FOR:"me",value:r}})})),n.next=10,Promise.all(p);case 10:if("torrentSeed"!==(d=e.serviceType)&&"streamSeed"!==d){n.next=15;break}return console.log("updating profile with service"),n.next=15,u.a.post("/api/gun/put",{path:"$user>Profile>SeedServiceProvided",value:l});case 15:return n.abrupt("return",l);case 16:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()},p=function(e){return function(){var t=Object(o.a)(a.a.mark((function t(n){return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,u.a.post("/api/gun/put",{path:"$user>offeredServices>".concat(e),value:null});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},d=function(e){return function(){var t=Object(o.a)(a.a.mark((function t(n){var r;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r="$user::offeredServices::on",Object(s.g)(r),t.next=4,Object(s.f)({host:e,query:r,publicKey:"",reconnect:!1});case 4:return t.sent.on("$shock",function(){var e=Object(o.a)(a.a.mark((function e(t){var r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=Object.entries(t),console.log(r),r.forEach(function(){var e=Object(o.a)(a.a.mark((function e(t){var r,o,s,l;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=Object(c.a)(t,1),"_"!==(o=r[0])){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,u.a.get("/api/gun/user/load/offeredServices>".concat(o));case 5:if(s=e.sent,l=s.data,console.log(l.data),null!==l.data){e.next=11;break}return n({type:i.REMOVE_MY_SERVICE,data:o}),e.abrupt("return");case 11:n({type:i.ADD_MY_SERVICE,data:{id:o,serviceInfo:l.data}});case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),t.abrupt("return",(function(){Object(s.b)(r)}));case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},f=function(e,t,n){return function(){var r=Object(o.a)(a.a.mark((function r(c){var o,s,l;return a.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,u.a.post("/api/lnd/unifiedTrx",{type:"service",amt:Number(n),to:e,memo:"",feeLimit:500,ackInfo:t});case 2:return o=r.sent,s=o.data,console.log(s),l=JSON.parse(s.orderAck.response),c({type:i.ADD_BOUGHT_SERVICE,data:{orderAck:l,owner:e,serviceID:t}}),r.abrupt("return",l);case 8:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}()}},156:function(e,t,n){"use strict";var r=n(0),a=n(78),c=n.n(a),o=n(114),u=(n(477),n(8));t.a=function(e){var t,n=e.text,a=void 0===n?"Loading...":n,s=e.fullScreen,i=void 0!==s&&s,l=e.small,p=void 0!==l&&l,d=e.overlay,f=void 0!==d&&d,b=e.overlayBackground,v=void 0===b?"rgba(44, 51, 58, 0.95)":b,O=e.style,h=void 0===O?{}:O,E=null!==(t=Object(o.b)())&&void 0!==t?t:"100vh",j=window.matchMedia("(display-mode: standalone)").matches,m=i?{height:j?"100%":E,marginBottom:0}:{},y=f?{backgroundColor:v}:{};return Object(u.jsxs)("div",{className:c()({"loading-wall":!0,"loading-small":p,"loading-overlay":f}),style:Object(r.a)(Object(r.a)(Object(r.a)({},m),y),h),children:[Object(u.jsxs)("div",{className:"loading-wall-icon",children:[Object(u.jsx)("span",{className:"loading-circle loading-circle-1"}),Object(u.jsx)("span",{className:"loading-circle loading-circle-2"}),Object(u.jsx)("span",{className:"loading-circle loading-circle-3"}),p?null:Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)("span",{className:"loading-circle loading-circle-4"}),Object(u.jsx)("span",{className:"loading-circle loading-circle-5"})]})]}),a?Object(u.jsx)("div",{className:"loading-wall-text",children:a}):null]})}},16:function(e,t,n){"use strict";n.d(t,"f",(function(){return i})),n.d(t,"a",(function(){return l.a})),n.d(t,"c",(function(){return p})),n.d(t,"e",(function(){return f})),n.d(t,"d",(function(){return b})),n.d(t,"b",(function(){return v}));var r=n(2),a=n.n(r),c=n(6),o=n(24),u=n(21),s=n(3);function i(){var e=s.useState(0),t=Object(u.a)(e,2)[1];return s.useCallback((function(){t((function(e){return e+1}))}),[])}var l=n(18),p=(n(74),{log:function(){var e;return(e=console).log.apply(e,arguments)},warn:function(){var e;return(e=console).warn.apply(e,arguments)},error:function(){var e;return(e=console).error.apply(e,arguments)}}),d=function(e,t,n){var r=document.createElement("canvas"),a=e.width,c=e.height;return a>c?a>t&&(c=Math.round(c*=t/a),a=t):c>t&&(a=Math.round(a*=t/c),c=t),r.width=a,r.height=c,r.getContext("2d").drawImage(e,0,0,a,c),r.toDataURL("image/jpeg",n)},f=function(){var e=Object(c.a)(a.a.mark((function e(t,n,r){var c,u,s,i,l;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.type.startsWith("image/")){e.next=2;break}throw new TypeError("Got a file of type ".concat(t.type," with size: ").concat(t.size,', expected type to start with "image"'));case 2:return e.next=4,o.g((function(e,n){var r=new FileReader;r.onload=function(t){t.target.result instanceof ArrayBuffer?e(t.target.result):n(new TypeError("Non ArrayBuffer file reader result when trying to load image file."))};var a=function(e){n(new Error("Error inside processImageFile()->imageBuffer->".concat(JSON.stringify(e))))};r.onerror=a,r.onabort=a,r.readAsArrayBuffer(t)}));case 4:return u=e.sent,s=(null!==(c=window.URL)&&void 0!==c?c:window.webkitURL).createObjectURL(new Blob([u],{type:"image/jpeg"})),e.next=8,o.g((function(e,t){var n=new Image;n.src=s,n.onload=function(){e(n)},n.onerror=function(e){t("string"===typeof e?new Error(e):new Error(JSON.stringify(e)))}}));case 8:return i=e.sent,l=d(i,n,r),e.abrupt("return",l);case 11:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),b=function(e){var t=e;return t.startsWith("www.")&&(t="https://"+t),function(){var e;try{e=new URL(t)}catch(n){return!1}return"http:"===e.protocol||"https:"===e.protocol}()?new URL(t).href:""},v=function(e,t){return e.filter((function(e){return e.pk===t}))[0]}},18:function(e,t,n){"use strict";var r=n(2),a=n.n(r),c=n(0),o=n(6),u=n(17),s=n.n(u),i=n(34),l={GET:["/healthz","/ping","/favicon.ico","/api/lnd/wallet/status"],POST:["/api/security/exchangeKeys","/api/encryption/exchange"],PUT:[],DELETE:[]},p=function(){var e=Object(o.a)(a.a.mark((function e(t){var r,o,u,s,l,p,d;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.resolve().then(n.bind(null,25));case 2:if(r=e.sent,o=r.store,u=o.getState().encryption.hostKeys,s=o.getState().node.hostId,l=t.data,p=u[s]){e.next=11;break}return console.warn("[ENCRYPTION] Unable to retrieve key for specified Host ID:",s,u),e.abrupt("return",t);case 11:return e.next=13,i.b({publicKey:p,message:JSON.stringify(l)});case 13:return d=e.sent,e.abrupt("return",Object(c.a)(Object(c.a)({},t),{},{data:d}));case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),d=function(){var e=Object(o.a)(a.a.mark((function e(t){var r,o,u,s,l,p,d,f;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return",t);case 2:return e.next=4,Promise.resolve().then(n.bind(null,25));case 4:if(o=e.sent,u=o.store,s=u.getState().encryption.userKeys,l=u.getState().node.hostId,p=t.data,i.d(p)){e.next=11;break}return e.abrupt("return",t);case 11:if(d=null===(r=s[l])||void 0===r?void 0:r.privateKey){e.next=15;break}return console.warn("[ENCRYPTION] Unable to retrieve key for specified Host ID:",l,s),e.abrupt("return",t);case 15:return e.next=17,i.a({privateKey:d,encryptedMessage:p});case 17:return f=e.sent,e.abrupt("return",Object(c.a)(Object(c.a)({},t),{},{data:f}));case 19:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();s.a.interceptors.request.use(function(){var e=Object(o.a)(a.a.mark((function e(t){var r,c,o,u,s;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Promise.resolve().then(n.bind(null,25));case 3:if(r=e.sent,c=r.store,o=c.getState().node.authToken,u=c.getState().encryption.deviceId,(s=0===t.url.indexOf("/"))&&(t.headers.common.Authorization="Bearer ".concat(o),t.headers.common["encryption-device-id"]=u),!s||l[t.method.toUpperCase()].includes(t.url)){e.next=13;break}return e.next=12,p(t);case 12:return e.abrupt("return",e.sent);case 13:return e.abrupt("return",t);case 16:e.prev=16,e.t0=e.catch(0),console.error(e.t0);case 19:case"end":return e.stop()}}),e,null,[[0,16]])})));return function(t){return e.apply(this,arguments)}}()),s.a.interceptors.response.use(function(){var e=Object(o.a)(a.a.mark((function e(t){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",d(t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),function(){var e=Object(o.a)(a.a.mark((function e(t){var n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,d(t.response);case 3:return n=e.sent,t.response=n,e.abrupt("return",Promise.reject(t));case 8:throw e.prev=8,e.t0=e.catch(0),console.error(e.t0),t;case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}()),t.a=s.a},23:function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"e",(function(){return a})),n.d(t,"d",(function(){return c})),n.d(t,"c",(function(){return o})),n.d(t,"b",(function(){return u}));var r={RESET_AUTH_INFO:"auth/reset",SET_AUTH_STEP:"auth/step/set",SET_AUTHENTICATED:"auth/authenticated/set",SET_AUTH_METHOD:"auth/method/set",LOGOUT:"auth/logout"},a=function(e){return function(t){t({type:r.SET_AUTHENTICATED,data:e})}},c=function(e){return function(t){t({type:r.SET_AUTH_STEP,data:e})}},o=function(e){return function(t){t({type:r.SET_AUTH_METHOD,data:e})}},u=function(){return{type:r.LOGOUT}}},25:function(e,t,n){"use strict";n.r(t),n.d(t,"store",(function(){return ze})),n.d(t,"persistor",(function(){return Ye})),n.d(t,"useSelector",(function(){return Qe})),n.d(t,"selectSelfPublicKey",(function(){return Ke})),n.d(t,"isAuth",(function(){return Me})),n.d(t,"selectHost",(function(){return He})),n.d(t,"selectSelfUser",(function(){return Be})),n.d(t,"selectUser",(function(){return Fe})),n.d(t,"selectAllPublicKeys",(function(){return Ve})),n.d(t,"selectAllOtherPublicKeys",(function(){return qe}));var r=n(35),a=n(249),c=n(0),o=n(17),u=n.n(o),s=n(52),i=n(23),l={hostId:null,hostIP:null,alias:null,authToken:null,publicKey:null,authTokenExpirationDate:null,authMethod:null,hostingAttemptsDone:!1},p=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:l,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case s.a.RESET_NODE_INFO:return l;case s.a.SET_HOST_IP:var n=t.data;return Object(c.a)(Object(c.a)({},e),{},{hostIP:n});case s.a.SET_HOST_ID:var r=t.data;return Object(c.a)(Object(c.a)({},e),{},{hostId:r});case s.a.SET_AUTHENTICATED_USER:var a=t.data,o=a.authToken,p=a.alias,d=a.publicKey,f=a.authTokenExpirationDate,b=a.authMethod;return u.a.defaults.headers.common.Authorization="Bearer ".concat(o),Object(c.a)(Object(c.a)({},e),{},{authToken:o,authTokenExpirationDate:f,alias:p,publicKey:d,authMethod:b});case s.a.SET_ATTEMPTS_DONE:return Object(c.a)(Object(c.a)({},e),{},{hostingAttemptsDone:!0});case i.a.LOGOUT:return Object(c.a)(Object(c.a)({},e),{},{authToken:null,publicKey:null,authTokenExpirationDate:null,authMethod:null,hostingAttemptsDone:!1});default:return e}},d={authenticated:!1,authStep:"host",authMethod:null,userSessionKey:null,APISessionKey:null},f={manual:"host",shockWizard:"scan",shockCloud:"inviteCode"},b=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case i.a.SET_AUTHENTICATED:return Object(c.a)(Object(c.a)({},e),{},{authenticated:t.data});case i.a.SET_AUTH_STEP:return Object(c.a)(Object(c.a)({},e),{},{authStep:t.data});case i.a.SET_AUTH_METHOD:var n=t.data;return Object(c.a)(Object(c.a)({},e),{},{authMethod:n,authStep:f[n]});case i.a.LOGOUT:return d;default:return e}},v=n(19),O=n(162),h=n.n(O),E=n(36),j={totalBalance:"0",channelBalance:"0",confirmedBalance:"0",pendingChannelBalance:"0",USDRate:null,transactions:{content:[],page:-1,totalPages:0,totalItems:0},payments:{content:[],page:-1,totalPages:0,totalItems:0},channels:[],invoices:{content:[],page:-1,totalPages:0,totalItems:0},peers:[],recentTransactions:[]},m=function(e){return parseInt(e.creation_date||e.settle_date||e.time_stamp,10)},y=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:j,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case E.a.LOAD_BALANCE:var n=t.data,r=n.channelBalance,a=n.confirmedBalance,o=n.pendingChannelBalance,u=new h.a(a).add(r).add(o).toString();return Object(c.a)(Object(c.a)({},e),{},{totalBalance:u,channelBalance:r,confirmedBalance:a,pendingChannelBalance:o});case E.a.LOAD_USD_RATE:var s=t.data;return Object(c.a)(Object(c.a)({},e),{},{USDRate:s});case E.a.LOAD_PEERS:var i=t.data;return Object(c.a)(Object(c.a)({},e),{},{peers:i});case E.a.ADD_PEER:var l=t.data;return Object(c.a)(Object(c.a)({},e),{},{peers:[l].concat(Object(v.a)(e.peers))});case E.a.REMOVE_PEER:var p=t.data;return Object(c.a)(Object(c.a)({},e),{},{peers:e.peers.filter((function(e){return e.pub_key!==p.publicKey}))});case E.a.LOAD_CHANNELS:var d=t.data;return Object(c.a)(Object(c.a)({},e),{},{channels:d});case E.a.LOAD_TRANSACTIONS:var f=t.data;return Object(c.a)(Object(c.a)({},e),{},{transactions:f});case E.a.LOAD_MORE_TRANSACTIONS:var b=t.data;return Object(c.a)(Object(c.a)({},e),{},{transactions:Object(c.a)(Object(c.a)({},b),{},{content:[].concat(Object(v.a)(e.transactions.content),Object(v.a)(b.content))})});case E.a.LOAD_INVOICES:var O=t.data;return Object(c.a)(Object(c.a)({},e),{},{invoices:O});case E.a.LOAD_MORE_INVOICES:var y=t.data;return Object(c.a)(Object(c.a)({},e),{},{invoices:Object(c.a)(Object(c.a)({},y),{},{content:[].concat(Object(v.a)(e.invoices.content),Object(v.a)(y.content))})});case E.a.LOAD_PAYMENTS:var _=t.data;return Object(c.a)(Object(c.a)({},e),{},{payments:_});case E.a.LOAD_MORE_PAYMENTS:var S=t.data;return Object(c.a)(Object(c.a)({},e),{},{payments:Object(c.a)(Object(c.a)({},S),{},{content:[].concat(Object(v.a)(e.payments.content),Object(v.a)(S.content))})});case E.a.LOAD_RECENT_TRANSACTIONS:var T=t.data,g=T.transactions,w=T.payments,k=T.invoices,A=[].concat(Object(v.a)(g.content),Object(v.a)(w.content),Object(v.a)(k.content)).sort((function(e,t){var n=m(e),r=m(t);return n<r?1:n>r?-1:0})).map((function(e){var t=m(e);return e.payment_hash?{type:"payment",hash:e.payment_hash,value:e.value,date:t}:e.payment_request?{type:"invoice",hash:e.payment_request,value:e.value,date:t,message:e.memo}:e.tx_hash?{type:"chain",hash:e.tx_hash,value:e.amount,date:t,message:e.label}:(console.warn("Invalid transaction detected",e),null)})).filter((function(e){return null!==e}));return Object(c.a)(Object(c.a)({},e),{},{transactions:g,payments:w,invoices:k,recentTransactions:A});case E.a.RESET_RECENT_TRANSACTIONS:return Object(c.a)(Object(c.a)({},e),{},{recentTransactions:[]});default:return e}},_=n(30),S=n(21),T=n(65),g=n(28),w={contacts:[],messages:{},sentRequests:[],receivedRequests:[],requestBlacklist:[]},k=function(e,t){return e.id&&t.id?e.id===t.id:e.localId===t.localId},A=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return e.sort((function(e,t){return t.timestamp-e.timestamp}))},x=function(e){var t,n=e.data,r=e.status,a=e.state,o=e.outgoing,u=void 0!==o&&o,s=null!==(t=a.messages[n.recipientPublicKey])&&void 0!==t?t:[],i=s.filter((function(e){return k(e,n)})),l=Object(S.a)(i,1)[0];if(l&&console.warn("Duplicate Message:",null===l||void 0===l?void 0:l.body),l){var p=s.map((function(e){return k(e,l)?Object(c.a)(Object(c.a)(Object(c.a)({},l),n),{},{status:r,outgoing:u}):e})),d=A(p);return Object(c.a)(Object(c.a)({},a),{},{messages:Object(c.a)(Object(c.a)({},a.messages),{},Object(_.a)({},n.recipientPublicKey,d))})}var f=[Object(c.a)(Object(c.a)({},n),{},{status:r,outgoing:u})].concat(Object(v.a)(s)),b=A(f);return Object(c.a)(Object(c.a)({},a),{},{messages:Object(c.a)(Object(c.a)({},a.messages),{},Object(_.a)({},n.recipientPublicKey,b))})},D=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:w,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case g.a.LOAD_CHAT_DATA:var n=t.data,r=n.contacts,a=n.messages;return Object(c.a)(Object(c.a)({},e),{},{contacts:r,messages:a});case g.a.LOAD_SENT_REQUESTS:var o=t.data,u=e.sentRequests.map((function(e){return e.pk})),s=e.sentRequests.filter((function(e){return e.loading&&!u.includes(e.pk)}));return Object(c.a)(Object(c.a)({},e),{},{sentRequests:[].concat(Object(v.a)(s),Object(v.a)(o))});case g.a.LOAD_RECEIVED_REQUESTS:var i=t.data;return Object(c.a)(Object(c.a)({},e),{},{receivedRequests:i});case g.a.SENT_REQUEST:var l=t.data;return Object(c.a)(Object(c.a)({},e),{},{sentRequests:[].concat(Object(v.a)(e.sentRequests),[{avatar:null,changedAddress:!1,displayName:null,id:"loading/"+l,pk:l,timestamp:Date.now(),loading:!0}])});case g.a.ACCEPT_HANDSHAKE_REQUEST:var p=t.data;return Object(c.a)(Object(c.a)({},e),{},{receivedRequests:e.receivedRequests.filter((function(e){return e.id!==p}))});case g.a.DECLINE_HANDSHAKE_REQUEST:var d=t.data;return d&&d.trim()?Object(c.a)(Object(c.a)({},e),{},{requestBlacklist:[].concat(Object(v.a)(e.requestBlacklist),[d])}):e;case g.a.SENDING_MESSAGE:var f=t.data;return x({data:f,status:T.a.SENDING,state:e,outgoing:!0});case g.a.SENT_MESSAGE:var b=t.data;return x({data:b,status:T.a.SENT,state:e,outgoing:!0});case g.a.FAILED_MESSAGE:var O=t.data;return x({data:O,status:T.a.FAILED,state:e,outgoing:!0});case g.a.RECEIVED_MESSAGE:var h=t.data;return x({data:h,status:T.a.RECEIVED,state:e});default:return e}},P=n(88),R={open:!1},N=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:R,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case P.a.SET_DRAWER_OPEN:return Object(c.a)(Object(c.a)({},e),{},{open:t.data});default:return e}},I=n(45),U={seedProviderPub:"test",streamUserToken:"",streamLiveToken:"",publishedContent:{},unlockedContent:{},seedInfo:{},availableTokens:{},availableStreamTokens:{}},L=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:U,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case I.a.SET_SEED_PROVIDER_PUB:return Object(c.a)(Object(c.a)({},e),{},{seedProviderPub:t.data});case I.a.ADD_PUBLISHED_CONTENT:var n=t.data,r=n.content,a=n.res,o=Object(c.a)({},e.publishedContent);return a.ok&&(o[a.id]=r),Object(c.a)(Object(c.a)({},e),{},{publishedContent:o});case I.a.ADD_UNLOCKED_CONTENT:var u=t.data,s=Object(c.a)({},e.unlockedContent);return s[u.contentPath]=u.content,Object(c.a)(Object(c.a)({},e),{},{unlockedContent:s});case I.a.ADD_STREAM:var i=t.data;return Object(c.a)(Object(c.a)({},e),{},{streamLiveToken:i.liveToken,streamUserToken:i.seedToken});case I.a.REMOVE_STREAM:return Object(c.a)(Object(c.a)({},e),{},{streamLiveToken:"",streamUserToken:""});case I.a.SET_SEED_INFO:var l=t.data;return Object(c.a)(Object(c.a)({},e),{},{seedInfo:l});case I.a.ADD_AVAILABLE_TOKEN:var p=t.data,d=p.seedUrl,f=p.userToken,b=Object(c.a)({},e.availableTokens);return b[d]||(b[d]=[]),b[d].push(f),Object(c.a)(Object(c.a)({},e),{},{availableTokens:b});case I.a.REMOVE_USED_TOKEN:var v=t.data,O=v.seedUrl,h=v.userToken,E=Object(c.a)({},e.availableTokens);if(!E[O])return e;var j=E[O].indexOf(h);return j>-1?(E[O].splice(j,1),Object(c.a)(Object(c.a)({},e),{},{availableTokens:E})):e;case I.a.ADD_STREAM_TOKEN:var m=t.data,y=m.seedUrl,_=m.userToken,S=Object(c.a)({},e.availableStreamTokens);return S[y]||(S[y]=[]),S[y].push(_),Object(c.a)(Object(c.a)({},e),{},{availableStreamTokens:S});case I.a.REMOVE_STREAM_TOKEN:var T=t.data,g=T.seedUrl,w=T.userToken,k=Object(c.a)({},e.availableStreamTokens);if(!k[g])return e;var A=k[g].indexOf(w);return A>-1?(k[g].splice(A,1),Object(c.a)(Object(c.a)({},e),{},{availableStreamTokens:k})):e;default:return e}},C=n(92),K={source:"https://mempool.space/api/v1/fees/recommended",rate:"halfHourFee",feeRates:{fastestFee:0,halfHourFee:0,hourFee:0}},M=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:K,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case C.a.RESET_FEES:return K;case C.a.LOAD_FEE_RATES:var n=t.data;return Object(c.a)(Object(c.a)({},e),{},{feeRates:n});case C.a.SET_SOURCE:var r=t.data;return Object(c.a)(Object(c.a)({},e),{},{source:r});case C.a.SET_RATE:var a=t.data;return Object(c.a)(Object(c.a)({},e),{},{rate:a});default:return e}},H=n(55),B={follows:[],posts:{}},F=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:B,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case H.a.RESET_FOLLOWS:return B;case H.a.ADD_FOLLOW:var n=t.data,r=e.follows.find((function(e){return n.user===e.user}));return r?Object(c.a)(Object(c.a)({},e),{},{follows:e.follows.map((function(e){return e.user===n.user?n:e}))}):Object(c.a)(Object(c.a)({},e),{},{follows:[].concat(Object(v.a)(e.follows),[n])});case H.a.REMOVE_FOLLOW:var a=t.data;return Object(c.a)(Object(c.a)({},e),{},{follows:e.follows.filter((function(e){return e.user!==a}))});case H.a.UPDATE_FOLLOW:var o=t.data,u=e.follows.map((function(e){return e.user===o.key?Object(c.a)(Object(c.a)({},e),{},{profile:o}):e}));return Object(c.a)(Object(c.a)({},e),{},{follows:u});case H.a.ADD_USER_POST:var s,i=t.data,l=i.authorId,p=null!==(s=e.posts[l])&&void 0!==s?s:[],d=p.find((function(e){return i.id===e.id}));return d?e:Object(c.a)(Object(c.a)({},e),{},{posts:Object(c.a)(Object(c.a)({},e.posts),{},Object(_.a)({},l,[].concat(Object(v.a)(p),[i])))});case H.a.DELETE_USER_POST:var f,b=t.data,O=b.id,h=b.authorId,E=(null!==(f=e.posts[h])&&void 0!==f?f:[]).filter((function(e){return e.id!==O}));return Object(c.a)(Object(c.a)({},e),{},{posts:Object(c.a)(Object(c.a)({},e.posts),{},Object(_.a)({},h,E))});case H.a.LOAD_POSTS:var j=t.data;return Object(c.a)(Object(c.a)({},e),{},{posts:j});case H.a.LOAD_SHARED_POST:var m,y=t.data,S=y.id,T=y.sharerId,g=null!==(m=e.posts[T])&&void 0!==m?m:[],w=g.map((function(e){return e.id===S&&"shared"===e.type?Object(c.a)(Object(c.a)({},e),{},{originalPost:y}):e}));return Object(c.a)(Object(c.a)({},e),{},{posts:Object(c.a)(Object(c.a)({},e.posts),{},Object(_.a)({},T,w))});default:return e}},V=n(258),q=n(76),$={deviceId:Object(V.a)(),userKeys:{},hostKeys:{}},W=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case q.a.SET_DEVICE_ID:var n=t.data;return Object(c.a)(Object(c.a)({},e),{},{deviceId:n});case q.a.ADD_USER_KEY_PAIR:var r=t.data,a=r.hostId,o=r.keyPair;return Object(c.a)(Object(c.a)({},e),{},{userKeys:Object(c.a)(Object(c.a)({},e.userKeys),{},Object(_.a)({},a,o))});case q.a.ADD_HOST_KEY:var u=t.data,s=u.hostId,i=u.publicKey;return Object(c.a)(Object(c.a)({},e),{},{hostKeys:Object(c.a)(Object(c.a)({},e.hostKeys),{},Object(_.a)({},s,i))});default:return e}},G=n(118),z=n(257),Y=n(24),Q=n(94),J=n(38),X={},Z=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:X,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case s.a.SET_AUTHENTICATED_USER:var n=t.data.publicKey;return Object(c.a)(Object(c.a)({},e),{},Object(_.a)({},n,Object(c.a)(Object(c.a)({},Y.e(n)),e[n])));case J.a.RESET_USER_PROFILES:return X;case J.a.LOAD_USER_PROFILE:var r=t.data,a=r.publicKey,o=r.profile;return a&&o?Object(c.a)(Object(c.a)({},e),{},Object(_.a)({},a,Object(c.a)(Object(c.a)(Object(c.a)({},Y.e(a)),e[a]),o))):e;case J.a.REMOVE_USER_PROFILE:var u=t.data.publicKey,i=(e[u],Object(G.a)(e,[u].map(z.a)));return i;case J.a.UPDATE_USER_PROFILE:var l=t.data,p=l.publicKey,d=l.profile,f=e[p];return console.log("Updating User Profile:",p,d),f&&d?Object(c.a)(Object(c.a)({},e),{},Object(_.a)({},p,Object(c.a)(Object(c.a)(Object(c.a)({},Y.e(p)),f),d))):e;case g.a.LOAD_CHAT_DATA:return Object(Q.a)(e,(function(e){t.data.contacts.forEach((function(t){e[t.pk]=Object(c.a)(Object(c.a)(Object(c.a)({},Y.e(t.pk)),e[t.pk]),{},{avatar:t.avatar,displayName:t.displayName})}))}));case g.a.LOAD_RECEIVED_REQUESTS:case g.a.LOAD_SENT_REQUESTS:return Object(Q.a)(e,(function(e){t.data.forEach((function(t){e[t.pk]=Object(c.a)(Object(c.a)(Object(c.a)({},Y.e(t.pk)),e[t.pk]),{},{avatar:t.avatar,displayName:t.displayName})}))}));case g.a.SENT_REQUEST:return Object(Q.a)(e,(function(e){var n=t.data;e[n]||(e[n]=Y.e(n))}));default:return e}},ee=n(109),te={myServices:{},services:{},boughtServices:{}},ne=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:te,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case ee.a.ADD_MY_SERVICE:var n=t.data,r=n.id,a=n.serviceInfo,o=Object(c.a)({},e.myServices);return o[r]=a,Object(c.a)(Object(c.a)({},e),{},{myServices:o});case ee.a.REMOVE_MY_SERVICE:var u=t.data,s=Object(c.a)({},e.myServices);return delete s[u],Object(c.a)(Object(c.a)({},e),{},{myServices:s});case ee.a.ADD_BOUGHT_SERVICE:var i=t.data,l=i.orderAck,p=i.owner,d=i.serviceID,f=Object(c.a)({},e.boughtServices);f[p]||(f[p]={});var b=f[p];return b[d]||(b[d]=[]),b[d].push(l),Object(c.a)(Object(c.a)({},e),{},{boughtServices:f});default:return e}},re=Object(r.c)({node:p,auth:b,encryption:W,wallet:y,chat:D,drawer:N,content:L,fees:M,feed:F,userProfiles:Z,orders:ne,users:function(){return{}}}),ae=n(41),ce=n(155),oe=n(252),ue=n.n(oe),se={1:function(e){console.log("--- PeerMigration Started ---");var t=Object(c.a)(Object(c.a)({},e),{},{wallet:Object(c.a)(Object(c.a)({},e.wallet),{},{peers:[]})});return console.log("--- PeerMigration Ended ---",t),t}},ie=n(110),le=n(117),pe=n(254),de=n(2),fe=n.n(de),be=n(56),ve=n(16),Oe=fe.a.mark(je),he=fe.a.mark(me),Ee=fe.a.mark(ye);function je(){return fe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case 1:case"end":return e.stop()}}),Oe)}function me(){return fe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,void(e.next=3);case 3:e.next=9;break;case 5:e.prev=5,e.t0=e.catch(0),ve.c.error("Error inside auth* ()"),ve.c.error(e.t0);case 9:case"end":return e.stop()}}),he,null,[[0,5]])}function ye(){return fe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(be.a)([me,Object(be.d)("node/tokenDidInvalidate",je)]);case 2:case"end":return e.stop()}}),Ee)}var _e=ye,Se=n(64),Te=n.n(Se),ge=n(116),we=n.n(ge),ke={},Ae=function(){return ke},xe=fe.a.mark(Re),De=fe.a.mark(Ne),Pe=null;function Re(){var e,t,n,r;return fe.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,Object(be.c)();case 3:if(e=a.sent,t=e.node,n=t.authToken,r=t.hostIP,n&&r||!Pe){a.next=14;break}return ve.c.log("Will kill ping socket because of token invalidation or host was unset"),Pe.off("*"),Pe.close(),Pe=null,a.next=14,Object(be.b)({type:"shock::keepAlive"});case 14:n&&r&&!Pe&&(ve.c.log("Will try to connect ping socket"),(Pe=Te()("http://".concat(r,"/shockping"),{withCredentials:!0,parser:we.a,transports:["websocket","polling"],auth:{token:n}})).on("shockping",(function(){Ae().dispatch({type:"node/ping",payload:{timestamp:Object(Y.h)(Date.now())}})})),Pe.on(Y.a.ErrorCode.NOT_AUTH,(function(){Ae().dispatch({type:"node/tokenDidInvalidate"})})),Pe.on("$error",(function(e){ve.c.error("Error received by ping socket: ".concat(e))})),Pe.on("connect_error",(function(e){ve.c.error("ping socket connect_error"),ve.c.error(e)})),Pe.on("connect_timeout",(function(e){ve.c.log("ping socket connect_timeout"),ve.c.log(e)})),Pe.on("connect",(function(){ve.c.log("ping socket connect")})),Pe.on("disconnect",(function(e){ve.c.log("ping socket disconnected due to -> ".concat(e)),"io server disconnect"===e&&Pe&&Pe.connect()})),Pe.on("error",(function(e){ve.c.error("Error inside ping socket"),ve.c.error(e)})),Pe.on("reconnect",(function(e){ve.c.log("ping socket reconnect attempt -> ".concat(e))})),Pe.on("reconnecting",(function(e){ve.c.log("ping socket reconnecting attempt -> ".concat(e))})),Pe.on("reconnect_error",(function(e){ve.c.log("ping socket reconnect_error"),ve.c.error(e)})),Pe.on("reconnect_failed",(function(){ve.c.error("ping socket reconnect_failed")})),Pe.on("ping",(function(){ve.c.log("ping socket pinging api (socket.io internal)")})),Pe.on("pong",(function(){ve.c.log("ping socket ponged by api (socket.io internal)"),Ae().dispatch({type:"ping",payload:{timestamp:Object(Y.h)(Date.now())}})}))),a.next=21;break;case 17:a.prev=17,a.t0=a.catch(0),ve.c.error("Error inside ping* ()"),ve.c.error(a.t0.message);case 21:case"end":return a.stop()}}),xe,null,[[0,17]])}function Ne(){return fe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(be.d)("*",Re);case 2:case"end":return e.stop()}}),De)}var Ie=Ne,Ue=fe.a.mark(Le);function Le(){return fe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(be.a)([_e,Ie]);case 2:case"end":return e.stop()}}),Ue)}var Ce=Le,Ke=function(e){return e.node.publicKey},Me=function(e){return!!e.node.publicKey},He=function(e){return e.node.hostIP},Be=function(e){var t=Ke(e),n=e.userProfiles[t];return n||(console.error("No self user created at auth?"),Y.d.createEmptyUser(t))},Fe=function(e){return function(t){var n=t.userProfiles[e];return n||Y.d.createEmptyUser(e)}},Ve=function(e){return Object.keys(e.userProfiles)},qe=function(e){var t=Ke(e);return Ve(e).filter((function(e){return e!==t}))},$e={key:"root",storage:ue.a,blacklist:["auth"],version:1,stateReconciler:le.a,migrate:Object(ie.a)(se,{debug:!1})},We=Object(ce.a)($e,re),Ge=function(){var e=Object(pe.a)(),t=Object(r.a)(a.a,e),n=window.__REDUX_DEVTOOLS_EXTENSION__?Object(r.e)(We,Object(r.d)(t,window.__REDUX_DEVTOOLS_EXTENSION__())):Object(r.e)(We,t),c=Object(ce.b)(n);return function(e){ke=e}(n),e.run(Ce),setInterval((function(){n.dispatch({type:"shock::keepAlive"})}),2e4),{store:n,persistor:c}}(),ze=Ge.store,Ye=Ge.persistor,Qe=function(e){return Object(ae.d)(e)}},28:function(e,t,n){"use strict";n.d(t,"a",(function(){return b})),n.d(t,"c",(function(){return v})),n.d(t,"e",(function(){return O})),n.d(t,"d",(function(){return h})),n.d(t,"h",(function(){return E})),n.d(t,"b",(function(){return j})),n.d(t,"f",(function(){return m})),n.d(t,"g",(function(){return y}));var r=n(0),a=n(21),c=n(2),o=n.n(c),u=n(6),s=n(18),i=n(119),l=n(258),p=n(29),d=n(96),f=n(65),b={LOAD_CHAT_DATA:"chat/loadData",LOAD_SENT_REQUESTS:"chat/loadSentRequests",LOAD_RECEIVED_REQUESTS:"chat/loadReceivedRequests",SET_CHAT_CONTACTS:"chat/contacts",SET_CHAT_MESSAGES:"chat/messages",SENT_REQUEST:"chat/request/sent",ACCEPT_HANDSHAKE_REQUEST:"chat/request/accept",DECLINE_HANDSHAKE_REQUEST:"chat/request/decline",SENDING_MESSAGE:"chat/message/sending",SENT_MESSAGE:"chat/message/sent",FAILED_MESSAGE:"chat/message/failed",RECEIVED_MESSAGE:"chat/message/received"},v=function(){return function(){var e=Object(u.a)(o.a.mark((function e(t,n){var r,a,c,u;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n().node,a=r.hostIP,c=r.authToken,e.next=3,Object(p.c)({hostIP:a,authToken:c});case 3:u=e.sent,console.log("LOAD_CHAT_DATA:",u),t({type:b.LOAD_CHAT_DATA,data:u});case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},O=function(){return function(e,t){var n=t().node,r=n.hostIP,a=n.authToken;Object(p.e)({hostIP:r,authToken:a},(function(t,n){if(t)console.error(t);else{console.log("sentRequests:",n);var r={type:b.LOAD_SENT_REQUESTS,data:n.map((function(e){return{id:e.id,pk:e.recipientPublicKey,avatar:e.recipientAvatar,displayName:e.recipientDisplayName,changedAddress:e.recipientChangedRequestAddress,timestamp:e.timestamp,loading:!1}}))};e(r)}}))}},h=function(){return function(e,t){var n=t().node,r=n.hostIP,a=n.authToken;Object(p.d)({hostIP:r,authToken:a},(function(t,n){if(t)console.error(t);else{console.log("receivedRequests:",n);var r={type:b.LOAD_RECEIVED_REQUESTS,data:n.map((function(e){return{id:e.id,pk:e.requestorPK,avatar:e.requestorAvatar,displayName:e.requestorDisplayName,timestamp:e.timestamp}}))};e(r)}}))}},E=function(e,t){return function(){var n=Object(u.a)(o.a.mark((function n(r,a){var c,u,i,l;return o.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return c=a().node.hostIP,n.next=3,s.a.get("/api/gun/user/once/userToIncoming>".concat(t),{headers:{"public-key-for-decryption":e}});case 3:if(u=n.sent,(i=u.data).data){n.next=8;break}return console.warn("Unable to retrieve incoming ID for selected contact"),n.abrupt("return",null);case 8:return n.next=10,Object(p.f)({host:c,query:"".concat(t,"::outgoings>").concat(i.data,">messages::map.on"),publicKey:t});case 10:return(l=n.sent).on("$shock",(function(e,n){if(e.body&&e.body!==d.b){var a=e,c={body:a.body,id:n,localId:n,outgoing:!1,recipientPublicKey:t,status:f.a.SENT,timestamp:a.timestamp},o={type:b.RECEIVED_MESSAGE,data:c};r(o)}})),n.abrupt("return",l);case 13:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}()},j=function(e){return function(){var t=Object(u.a)(o.a.mark((function t(n){var r,a;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,s.a.put("/api/gun/requests/".concat(e),{accept:!0});case 2:return r=t.sent,a=r.data,n({type:b.ACCEPT_HANDSHAKE_REQUEST,data:e}),t.abrupt("return",a);case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},m=function(e){return function(){var t=Object(u.a)(o.a.mark((function t(n,r){var c,u,i,l,p,d;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,s.a.post("/api/gun/requests",{publicKey:e});case 2:return c=t.sent,u=c.data,i=r().chat.sentRequests,l=i.filter((function(t){return t.pk===e})),p=Object(a.a)(l,1),p[0]||(d={type:b.SENT_REQUEST,data:e},n(d)),t.abrupt("return",u);case 8:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()},y=function(e){var t=e.publicKey,n=e.message,a=e.localId;return function(){var e=Object(u.a)(o.a.mark((function e(c){var u,p,d;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u=null!==a&&void 0!==a?a:Object(l.a)(),e.prev=1,c({type:b.SENDING_MESSAGE,data:{body:n,localId:u,timestamp:i.DateTime.utc().toMillis(),recipientPublicKey:t}}),e.next=5,s.a.post("/api/gun/chats/".concat(t),{body:n});case 5:p=e.sent,d=p.data,console.log(d),c({type:b.SENT_MESSAGE,data:Object(r.a)(Object(r.a)({},d),{},{localId:u,recipientPublicKey:t})}),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),c({type:b.FAILED_MESSAGE,data:{body:n,localId:u,timestamp:i.DateTime.utc().toMillis(),recipientPublicKey:t}});case 14:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(t){return e.apply(this,arguments)}}()}},285:function(e,t,n){},29:function(e,t,n){"use strict";n.d(t,"a",(function(){return m})),n.d(t,"b",(function(){return w})),n.d(t,"g",(function(){return k})),n.d(t,"f",(function(){return A})),n.d(t,"c",(function(){return x})),n.d(t,"e",(function(){return D})),n.d(t,"d",(function(){return P}));var r=n(30),a=n(0),c=n(19),o=n(2),u=n.n(o),s=n(6),i=n(64),l=n.n(i),p=n(116),d=n.n(p),f=n(34),b=n(96),v=n(54),O={reconnection:!0,rejectUnauthorized:!1,parser:d.a,withCredentials:!0},h=new Map,E=null,j=null,m=function(e){return E=l.a.connect("".concat(e,"/gun"),O),j=l.a.connect("".concat(e,"/lndstreaming"),O),{GunSocket:E,LNDSocket:j}},y=function(e){e.off("*"),e.close()},_=function(){var e=Object(s.a)(u.a.mark((function e(t){var n,r,a,c,o,s;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.err,r=t.data,a=t.callback,c=t.privateKey,!(n&&!f.d(n)||r&&!f.d(r))){e.next=4;break}return a(n,r),e.abrupt("return");case 4:if(!n){e.next=10;break}return e.next=7,f.a({privateKey:c,encryptedMessage:n});case 7:return o=e.sent,a(o,r),e.abrupt("return");case 10:if(!r){e.next=16;break}return e.next=13,f.a({privateKey:c,encryptedMessage:r});case 13:return s=e.sent,a(n,s),e.abrupt("return");case 16:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),S=function(e){return function(){var t=Object(s.a)(u.a.mark((function t(r,a,c){var o,s,i,l,p,d,b,v,O,h;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Promise.resolve().then(n.bind(null,25));case 2:if(s=t.sent,i=s.store,l=i.getState().encryption,p=l.hostKeys,d=l.userKeys,b=i.getState().node.hostId,f.e(r)){t.next=9;break}return e.on(r,c),t.abrupt("return");case 9:if(v=p[b],O=null===(o=d[b])||void 0===o?void 0:o.privateKey,v&&O){t.next=14;break}return console.error("[WS] Unable to retrieve key for specified Host ID:",b),t.abrupt("return");case 14:return t.next=16,a?f.b({publicKey:v,message:a}):null;case 16:h=t.sent,e.emit(r,h,(function(e,t){_({err:e,data:t,callback:c,privateKey:O})}));case 18:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}()},T=function(e){return function(){var t=Object(s.a)(u.a.mark((function t(r,a){var o,i,l,p,d,b;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Promise.resolve().then(n.bind(null,25));case 2:if(i=t.sent,l=i.store,p=l.getState().encryption.userKeys,d=l.getState().node.hostId,!f.e(r)){t.next=9;break}return e.on(r,a),t.abrupt("return");case 9:if(b=null===(o=p[d])||void 0===o?void 0:o.privateKey){t.next=13;break}return console.error("[WS] Unable to retrieve key for specified Host ID:",d),t.abrupt("return");case 13:e.on(r,Object(s.a)(u.a.mark((function e(){var t,n,r,o,i=arguments;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(t=i.length,n=new Array(t),r=0;r<t;r++)n[r]=i[r];return e.next=3,Promise.all(n.map(function(){var e=Object(s.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return",t);case 2:if(!t||f.d(t)){e.next=5;break}return console.warn("Non-encrypted socket message",t),e.abrupt("return",t);case 5:return e.abrupt("return",f.a({privateKey:b,encryptedMessage:t}));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 3:o=e.sent,a.apply(void 0,Object(c.a)(o));case 5:case"end":return e.stop()}}),e)}))));case 14:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()},g=function(e){var t=e.hostIP,r=e.authToken,c=e.namespace,o=e.callback;return new Promise((function(e,i){try{Promise.resolve().then(n.bind(null,25)).then((function(n){var p=n.store.getState().encryption,d=l.a.connect("".concat(t,"/").concat(c),Object(a.a)(Object(a.a)({},O),{},{auth:{token:r,encryptionId:p.deviceId}})),f=T(d);f("$shock",function(){var t=Object(s.a)(u.a.mark((function t(n){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!o){t.next=3;break}return o(null,n),t.abrupt("return");case 3:e(n);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),f("$error",function(){var e=Object(s.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!o){e.next=3;break}return o(t),e.abrupt("return");case 3:y(d),i(new v.a({field:"socket",message:t}));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),f("error",(function(e){console.error(e),o?o(e):(y(d),i(new v.a({field:"socket",message:e})))}))}))}catch(p){console.error(p)}}))},w=function(e){var t=h.get(e);t&&(t.off("*"),t.close(),h.delete(e))},k=function(e){return!!h.get(e)},A=function(){var e=Object(s.a)(u.a.mark((function e(t){var r,c,o,s,i,p,d,f,b,v,E;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.host,c=t.query,o=t.publicKey,s=t.reconnect,e.next=3,Promise.resolve().then(n.bind(null,25));case 3:if(i=e.sent,p=i.store,d=Object(a.a)(Object(a.a)({},O),{},{auth:{encryptionId:p.getState().encryption.deviceId,$shock:c,publicKeyForDecryption:null!==o&&void 0!==o?o:""}}),f=h.get(c),s&&f&&w(c),f&&!s){e.next=15;break}return b=l()("".concat(r,"/gun"),d),h.set(c,b),v=T(b),E=S(b),v("$error",(function(e){console.error("Gun rifle error (".concat(c,")")),console.error(e)})),e.abrupt("return",{on:v,emit:E,off:function(){return b.off()},close:function(){return b.close()}});case 15:return e.abrupt("return",f);case 16:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),x=function(){var e=Object(s.a)(u.a.mark((function e(t){var n,c,o,s,i;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.hostIP,c=t.authToken,e.prev=1,e.next=4,g({hostIP:n,authToken:c,namespace:"chats"});case 4:return o=e.sent,s=o.map((function(e){return{pk:e.recipientPublicKey,avatar:e.recipientAvatar,displayName:e.recipientDisplayName}})),i=o.reduce((function(e,t){var n;return Object(a.a)(Object(a.a)({},e),{},Object(r.a)({},t.recipientPublicKey,null===(n=t.messages)||void 0===n?void 0:n.filter((function(e){return e.body&&e.body.trim()&&e.body!==b.b})).sort((function(e,t){return t.timestamp-e.timestamp}))))}),{}),e.abrupt("return",{contacts:s,messages:i});case 10:throw e.prev=10,e.t0=e.catch(1),console.error(e.t0),e.t0;case 14:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t){return e.apply(this,arguments)}}(),D=function(){var e=Object(s.a)(u.a.mark((function e(t,n){var r,a,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.hostIP,a=t.authToken,e.prev=1,e.next=4,g({hostIP:r,authToken:a,namespace:"sentReqs",callback:n});case 4:return c=e.sent,e.abrupt("return",c);case 8:e.prev=8,e.t0=e.catch(1),console.error(e.t0);case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t,n){return e.apply(this,arguments)}}(),P=function(){var e=Object(s.a)(u.a.mark((function e(t,n){var r,a,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.hostIP,a=t.authToken,e.prev=1,e.next=4,g({hostIP:r,authToken:a,namespace:"receivedReqs",callback:n});case 4:return c=e.sent,e.abrupt("return",c.map((function(e){return{id:e.id,pk:e.recipientPublicKey,avatar:e.recipientAvatar,displayName:e.recipientDisplayName,changedAddress:e.recipientChangedRequestAddress,timestamp:e.timestamp}})));case 8:e.prev=8,e.t0=e.catch(1),console.error(e.t0);case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t,n){return e.apply(this,arguments)}}()},292:function(e,t){},299:function(e,t){},34:function(e,t,n){"use strict";n.d(t,"d",(function(){return h})),n.d(t,"e",(function(){return E})),n.d(t,"c",(function(){return j})),n.d(t,"b",(function(){return m})),n.d(t,"a",(function(){return y}));var r=n(2),a=n.n(r),c=n(6),o=n(22),u=n(77),s=n.n(u),i=n(54),l=function(e){try{return JSON.parse(e)}catch(t){return e}},p=["ping","disconnect","IS_GUN_AUTH","SET_LAST_SEEN_APP","NOT_AUTH"],d=function(e){return o.Buffer.from(e,"base64")},f=function(e){return o.Buffer.from(e).toString("base64")},b=function(e){return e instanceof Uint8Array?e:d(e)},v=function(e){if("string"===typeof e.ciphertext&&"string"===typeof e.iv&&"string"===typeof e.mac&&"string"===typeof e.ephemPublicKey)return e;if(e.ciphertext instanceof Uint8Array&&e.iv instanceof Uint8Array&&e.mac instanceof Uint8Array&&e.ephemPublicKey instanceof Uint8Array)return{ciphertext:f(e.ciphertext),iv:f(e.iv),mac:f(e.mac),ephemPublicKey:f(e.ephemPublicKey)};throw new i.a({field:"encryptedMessage",message:"Unknown encrypted message format"})},O=function(e){if(e.ciphertext instanceof Uint8Array&&e.iv instanceof Uint8Array&&e.mac instanceof Uint8Array&&e.ephemPublicKey instanceof Uint8Array)return e;if("string"===typeof e.ciphertext&&"string"===typeof e.iv&&"string"===typeof e.mac&&"string"===typeof e.ephemPublicKey)return{ciphertext:d(e.ciphertext),iv:d(e.iv),mac:d(e.mac),ephemPublicKey:d(e.ephemPublicKey)};throw new i.a({field:"encryptedMessage",message:"Unknown encrypted message format"})},h=function(e){return(null===e||void 0===e?void 0:e.ciphertext)&&(null===e||void 0===e?void 0:e.iv)&&(null===e||void 0===e?void 0:e.mac)&&(null===e||void 0===e?void 0:e.ephemPublicKey)},E=function(e){return p.includes(e)},j=function(){var e=s.a.generatePrivate(),t=s.a.getPublic(e);return{privateKey:e,publicKey:t,privateKeyBase64:f(e),publicKeyBase64:f(t)}},m=function(){var e=Object(c.a)(a.a.mark((function e(t){var n,r,c,u,i,l,p;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.publicKey,r=t.message,c=void 0===r?"":r,u=b(n),a=c,i=o.Buffer.from(a,"utf-8"),e.next=5,s.a.encrypt(u,i);case 5:return l=e.sent,p={ciphertext:l.ciphertext,iv:l.iv,mac:l.mac,ephemPublicKey:l.ephemPublicKey},e.abrupt("return",v(p));case 8:case"end":return e.stop()}var a}),e)})));return function(t){return e.apply(this,arguments)}}(),y=function(){var e=Object(c.a)(a.a.mark((function e(t){var n,r,c,u,i,p;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.privateKey,r=t.encryptedMessage,c=b(n),e.next=4,s.a.decrypt(c,O(r));case 4:return u=e.sent,i=o.Buffer.from(u).toString(),p=l(i),e.abrupt("return",p);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},36:function(e,t,n){"use strict";n.d(t,"a",(function(){return s})),n.d(t,"i",(function(){return i})),n.d(t,"g",(function(){return l})),n.d(t,"f",(function(){return p})),n.d(t,"c",(function(){return d})),n.d(t,"e",(function(){return f})),n.d(t,"d",(function(){return b})),n.d(t,"h",(function(){return v})),n.d(t,"b",(function(){return O})),n.d(t,"j",(function(){return h}));var r=n(2),a=n.n(r),c=n(6),o=n(17),u=n.n(o),s={LOAD_BALANCE:"wallet/balance/load",LOAD_USD_RATE:"wallet/usdRate/load",LOAD_TRANSACTIONS:"wallet/transactions/load",LOAD_MORE_TRANSACTIONS:"wallet/transactions/loadMore",LOAD_CHANNELS:"wallet/channels/load",LOAD_INVOICES:"wallet/invoices/load",LOAD_MORE_INVOICES:"wallet/invoices/loadMore",LOAD_PAYMENTS:"wallet/payments/load",LOAD_MORE_PAYMENTS:"wallet/payments/loadMore",LOAD_PEERS:"wallet/peers/load",ADD_PEER:"wallet/peers/add",REMOVE_PEER:"wallet/peers/remove",LOAD_RECENT_TRANSACTIONS:"wallet/recentTransactions/load",RESET_RECENT_TRANSACTIONS:"wallet/recentTransactions/reset"},i=function(){return function(){var e=Object(c.a)(a.a.mark((function e(t){var n,r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.a.get("/api/lnd/balance");case 2:return n=e.sent,r=n.data,t({type:s.LOAD_BALANCE,data:{channelBalance:r.channel_balance,confirmedBalance:r.confirmed_balance,pendingChannelBalance:r.pending_channel_balance}}),e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},l=function(){return function(){var e=Object(c.a)(a.a.mark((function e(t){var n,r,c;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.a.get("https://api.coinbase.com/v2/prices/spot?currency=USD");case 2:return n=e.sent,r=n.data,c=r.data.amount.replace(/,/g,""),t({type:s.LOAD_USD_RATE,data:c}),e.abrupt("return",c);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},p=function(e){var t=e.page,n=e.itemsPerPage,r=void 0===n?10:n,o=e.reset,i=void 0!==o&&o;return function(){var e=Object(c.a)(a.a.mark((function e(n,c){var o,l,p;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!((o=c().wallet.transactions).page>=t&&!i||o.totalPages<t)){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,u.a.get("/api/lnd/transactions",{params:{page:t,itemsPerPage:r}});case 5:return l=e.sent,p=l.data,n({type:i?s.LOAD_TRANSACTIONS:s.LOAD_MORE_TRANSACTIONS,data:p}),e.abrupt("return",p);case 9:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},d=function(){return function(){var e=Object(c.a)(a.a.mark((function e(t){var n,r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.a.get("/api/lnd/listchannels");case 2:return n=e.sent,r=n.data,t({type:s.LOAD_CHANNELS,data:r.channels}),e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},f=function(){return function(){var e=Object(c.a)(a.a.mark((function e(t){var n,r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.a.get("/api/lnd/listpeers");case 2:return n=e.sent,r=n.data,t({type:s.LOAD_PEERS,data:r.peers}),e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},b=function(e){var t=e.page,n=e.itemsPerPage,r=void 0===n?10:n,o=e.reset,i=void 0!==o&&o;return function(){var e=Object(c.a)(a.a.mark((function e(n,c){var o,l,p;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!((o=c().wallet.invoices).page>=t&&!i||o.totalPages<t)){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,u.a.get("/api/lnd/invoices",{params:{page:t,itemsPerPage:r}});case 5:return l=e.sent,p=l.data,n({type:i?s.LOAD_INVOICES:s.LOAD_MORE_INVOICES,data:p}),e.abrupt("return",p);case 9:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},v=function(){return function(){var e=Object(c.a)(a.a.mark((function e(t){var n,r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.a.get("/api/lnd/unifiedTrx");case 2:return n=e.sent,r=n.data,t({type:s.LOAD_RECENT_TRANSACTIONS,data:r}),e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},O=function(e){var t=e.publicKey,n=e.host;return function(){var e=Object(c.a)(a.a.mark((function e(r){var c,o,i;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,u.a.post("/api/lnd/connectpeer",{pubkey:t,host:n});case 3:return c={pub_key:t,address:n,bytes_sent:0,bytes_recv:0,sat_sent:0,sat_recv:0,inbound:!1},r({type:s.ADD_PEER,data:c}),e.abrupt("return",c);case 8:throw e.prev=8,e.t0=e.catch(0),console.error(e.t0),null!==(o=null===e.t0||void 0===e.t0||null===(i=e.t0.response)||void 0===i?void 0:i.data)&&void 0!==o?o:e.t0;case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}()},h=function(e){var t=e.publicKey,n=void 0===t?"":t,r=e.channelCapacity,o=void 0===r?0:r,s=e.pushAmount,i=void 0===s?0:s;return function(){var e=Object(c.a)(a.a.mark((function e(t,r){var c,s,l,p,f,b;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,c=r().fees,s=c.feeRates,l=c.rate,e.next=4,u.a.post("/api/lnd/openchannel",{pubkey:n,channelCapacity:o.toString(),channelPushAmount:i.toString(),satPerByte:s[l]});case 4:return e.next=6,d()(t);case 6:return p=e.sent,e.abrupt("return",p.channels);case 10:throw e.prev=10,e.t0=e.catch(0),console.error(e.t0),null!==(f=null===e.t0||void 0===e.t0||null===(b=e.t0.response)||void 0===b?void 0:b.data)&&void 0!==f?f:e.t0;case 14:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t,n){return e.apply(this,arguments)}}()}},362:function(e,t){},363:function(e,t){},38:function(e,t,n){"use strict";n.d(t,"a",(function(){return p})),n.d(t,"b",(function(){return f})),n.d(t,"c",(function(){return b}));var r=n(2),a=n.n(r),c=n(21),o=n(6),u=n(24),s=n(16),i=n(29),l=n(23),p={RESET_USER_PROFILES:"userProfiles/profiles/reset",LOAD_USER_PROFILE:"userProfiles/profiles/load",REMOVE_USER_PROFILE:"userProfiles/profiles/remove",UPDATE_USER_PROFILE:"userProfiles/profiles/update"},d=function(e,t){return{type:p.UPDATE_USER_PROFILE,data:{publicKey:e,profile:t}}},f=function(e){return function(){var t=Object(o.a)(a.a.mark((function t(n,r){var o,f,b,v,O,h,E;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o=r().node.hostIP,t.next=3,Promise.all([Object(i.f)({host:o,query:"".concat(e,"::Profile::on"),reconnect:!0}),Object(i.f)({host:o,query:"".concat(e,"::profileBinary::map.on"),reconnect:!0})]);case 3:return f=t.sent,b=Object(c.a)(f,2),v=b[0],(O=b[1]).on("$shock",(function(t,r){if("avatar"===r){if("string"!==typeof t&&null!==t)return void s.c.error("Expected avatar data to be string or null, instead got: ".concat(typeof t,". Public key: ").concat(e));n(d(e,{avatar:t}))}else if("header"===r){if("string"!==typeof t&&null!==t)return void s.c.error("Expected header data to be string or null, instead got: ".concat(typeof t,". Public key: ").concat(e));n(d(e,{header:t}))}else s.c.error("Unknown key: ".concat(r," for user binary profile data gun RPC socket"))})),v.on("$shock",(function(t){if(r().userProfiles[e])return n({type:p.UPDATE_USER_PROFILE,data:{publicKey:e,profile:t}}),t;n({type:p.LOAD_USER_PROFILE,data:{publicKey:e,profile:t}})})),h=function(t){t!==u.b?(s.c.error("Error inside user profile subscription ( ".concat(e," )")),s.c.error(t)):n(Object(l.e)(!1))},E=function(){n(Object(l.e)(!1))},O.on("$error",h),v.on("$error",h),O.on(u.b,E),v.on(u.b,E),t.abrupt("return",(function(){O.off("*"),O.close(),v.off("*"),v.close()}));case 16:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()},b=function(e){return Object(o.a)(a.a.mark((function t(){return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:Object(i.b)("".concat(e,"::Profile::on")),Object(i.b)("".concat(e,"::profileBinary::map.on"));case 2:case"end":return t.stop()}}),t)})))}},383:function(e,t){},385:function(e,t){},397:function(e,t){},399:function(e,t){},425:function(e,t){},427:function(e,t){},432:function(e,t){},434:function(e,t){},446:function(e,t){},449:function(e,t){},45:function(e,t,n){"use strict";n.d(t,"a",(function(){return u})),n.d(t,"i",(function(){return s})),n.d(t,"h",(function(){return i})),n.d(t,"c",(function(){return l})),n.d(t,"j",(function(){return p})),n.d(t,"d",(function(){return d})),n.d(t,"f",(function(){return f})),n.d(t,"b",(function(){return b})),n.d(t,"g",(function(){return v})),n.d(t,"e",(function(){return O}));var r=n(2),a=n.n(r),c=n(6),o=n(18),u={SET_SEED_PROVIDER_PUB:"content/setSeedProviderPub",SET_SEED_INFO:"content/setSeedInfo",ADD_PUBLISHED_CONTENT:"content/addPublishedContent",ADD_UNLOCKED_CONTENT:"content/addUnlocked",ADD_STREAM:"content/addStream",REMOVE_STREAM:"content/removeStream",ADD_AVAILABLE_TOKEN:"content/addToken",REMOVE_USED_TOKEN:"content/removeToken",ADD_STREAM_TOKEN:"content/addStreamToken",REMOVE_STREAM_TOKEN:"content/removeStreamToken"},s=function(e){return function(){var t=Object(c.a)(a.a.mark((function t(n){var r;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r={$$__ENCRYPT__FOR:"me",value:e},e||(r=""),t.next=4,o.a.post("/api/gun/put",{path:"$user>seedServiceProviderPubKey",value:r});case 4:n({type:u.SET_SEED_PROVIDER_PUB,data:e});case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},i=function(e,t){return function(){var n=Object(c.a)(a.a.mark((function n(r){var c;return a.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return c=JSON.stringify({seedUrl:e,seedToken:t}),n.next=3,o.a.post("/api/gun/put",{path:"$user>seedServiceSeedData",value:{$$__ENCRYPT__FOR:"me",value:c}});case 3:r({type:u.SET_SEED_INFO,data:{seedUrl:e,seedToken:t}});case 4:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()},l=function(e){return function(){var t=Object(c.a)(a.a.mark((function t(n){var r,c,s;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e,"string"!==typeof e&&(r=JSON.stringify(e)),t.next=4,o.a.post("/api/gun/set",{path:"$user>publishedContent",value:{$$__ENCRYPT__FOR:"me",value:r}});case 4:return c=t.sent,s=c.data,n({type:u.ADD_PUBLISHED_CONTENT,data:{content:e,res:s}}),t.abrupt("return",s);case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},p=function(e,t,n){return function(){var r=Object(c.a)(a.a.mark((function r(c){var s,i,l,p,d;return a.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,o.a.post("/api/lnd/unifiedTrx",{type:"contentReveal",amt:e,to:t,memo:"",feeLimit:500,ackInfo:n});case 2:if(s=r.sent,i=s.data,(l=JSON.parse(i.orderAck.response))&&l.unlockedContents)for(p in l.unlockedContents)Object.hasOwnProperty.call(l.unlockedContents,p)&&(d=l.unlockedContents[p],c({type:u.ADD_UNLOCKED_CONTENT,data:{contentPath:"".concat(t,">posts>").concat(n),content:d}}));case 6:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}()},d=function(e,t){return function(n){n({type:u.ADD_STREAM,data:{seedToken:e,liveToken:t}})}},f=function(){return function(e){e({type:u.REMOVE_STREAM})}},b=function(e,t){return function(n){n({type:u.ADD_AVAILABLE_TOKEN,data:{seedUrl:e,userToken:t}})}},v=function(e,t){return function(n){n({type:u.REMOVE_USED_TOKEN,data:{seedUrl:e,userToken:t}})}},O=function(e,t){return function(n){n({type:u.ADD_STREAM_TOKEN,data:{seedUrl:e,userToken:t}})}}},477:function(e,t,n){},479:function(e,t,n){},486:function(e,t,n){},487:function(e,t,n){"use strict";n.r(t);var r=n(3),a=n.n(r),c=n(98),o=n.n(c),u=n(17),s=n.n(u),i=(n(285),n(19)),l=n(0),p=n(118),d=n(26),f=n(41),b=n(75),v=n(158),O=n(114),h=n(246),E=n.n(h),j=n(23),m=n(28),y=n(156),_=n(78),S=n.n(_),T=(n(479),n(58)),g=n(88),w=n(25),k=n(8),A=function(){var e=Object(f.c)(),t=w.useSelector((function(e){return e.drawer.open})),n=Object(r.useCallback)((function(){e(Object(g.b)())}),[e]),a=Object(r.useCallback)((function(){window.confirm("Are you sure you wish to log out?")&&(e(Object(j.b)()),e(Object(g.b)()))}),[e]),c=Object(r.useCallback)((function(){}),[]);return Object(k.jsxs)(k.Fragment,{children:[Object(k.jsx)("div",{className:S()({"drawer-overlay":!0,"drawer-overlay-open":t}),onClick:n}),Object(k.jsxs)("div",{className:S()({"drawer-container":!0,"drawer-container-open":t}),children:[Object(k.jsxs)("div",{className:"drawer-top-section",children:[Object(k.jsxs)(T.c,{className:"drawer-item",to:"/advanced",onClick:n,children:[Object(k.jsx)("div",{className:"drawer-item-icon",children:Object(k.jsx)("i",{className:"icon-solid-spending-rule"})}),Object(k.jsx)("p",{className:"drawer-item-title unselectable",children:"Advanced Lightning"})]}),Object(k.jsxs)("div",{className:"drawer-item",children:[Object(k.jsx)("div",{className:"drawer-item-icon",children:Object(k.jsx)("i",{className:"icon-solid-key"})}),Object(k.jsx)("p",{className:"drawer-item-title unselectable",children:"Seed Backup"})]})]}),Object(k.jsxs)("div",{className:"drawer-bottom-section",children:[Object(k.jsxs)(T.c,{className:"drawer-item",to:"/moonpay",onClick:n,children:[Object(k.jsx)("div",{className:"drawer-item-icon",children:Object(k.jsx)("i",{className:"icon-solid-help"})}),Object(k.jsx)("p",{className:"drawer-item-title unselectable",children:"Buy Bitcoins"})]}),Object(k.jsxs)("div",{className:"drawer-item",children:[Object(k.jsx)("div",{className:"drawer-item-icon",children:Object(k.jsx)("i",{className:"icon-solid-help"})}),Object(k.jsx)("p",{className:"drawer-item-title unselectable",children:"Help"})]})]}),Object(k.jsxs)("div",{className:"drawer-logout-and-scan",children:[Object(k.jsx)(T.c,{to:"/QRScanner",onClick:n,children:Object(k.jsx)("i",{onClick:c,className:"icon-solid-scan",style:{color:"var(--main-blue)"}})}),Object(k.jsx)("i",{onClick:a,className:"fas fa-power-off",style:{color:"var(--main-blue)"}})]})]})]})},x=(n(486),n(38)),D=a.a.lazy((function(){return Promise.all([n.e(1),n.e(23)]).then(n.bind(null,753))})),P=a.a.lazy((function(){return Promise.all([n.e(1),n.e(15)]).then(n.bind(null,749))})),R=a.a.lazy((function(){return Promise.all([n.e(1),n.e(18)]).then(n.bind(null,751))})),N=a.a.lazy((function(){return Promise.all([n.e(4),n.e(16)]).then(n.bind(null,750))})),I=a.a.lazy((function(){return Promise.all([n.e(1),n.e(26)]).then(n.bind(null,752))})),U=a.a.lazy((function(){return Promise.all([n.e(6),n.e(31)]).then(n.bind(null,743))})),L=a.a.lazy((function(){return Promise.all([n.e(4),n.e(6),n.e(28)]).then(n.bind(null,754))})),C=a.a.lazy((function(){return Promise.all([n.e(8),n.e(19)]).then(n.bind(null,748))})),K=a.a.lazy((function(){return Promise.all([n.e(2),n.e(12)]).then(n.bind(null,756))})),M=a.a.lazy((function(){return Promise.all([n.e(1),n.e(30)]).then(n.bind(null,744))})),H=a.a.lazy((function(){return n.e(21).then(n.bind(null,745))})),B=a.a.lazy((function(){return n.e(24).then(n.bind(null,746))})),F=a.a.lazy((function(){return Promise.all([n.e(2),n.e(13)]).then(n.bind(null,755))})),V=a.a.lazy((function(){return n.e(17).then(n.bind(null,757))})),q=a.a.lazy((function(){return Promise.all([n.e(4),n.e(14)]).then(n.bind(null,758))})),$=a.a.lazy((function(){return Promise.all([n.e(7),n.e(29)]).then(n.bind(null,608))})),W=a.a.lazy((function(){return Promise.all([n.e(7),n.e(27)]).then(n.bind(null,759))})),G=a.a.lazy((function(){return Promise.all([n.e(8),n.e(20),n.e(25)]).then(n.bind(null,760))})),z=function(e){var t=e.component,n=Object(p.a)(e,["component"]),r=w.useSelector((function(e){return e.auth.authenticated}))?t:C;return Object(k.jsx)(d.b,Object(l.a)(Object(l.a)({},n),{},{component:r}))},Y=function(){var e=Object(f.c)(),t=w.useSelector((function(e){return e.node.authToken})),n=w.useSelector((function(e){return e.auth.authenticated})),a=w.useSelector(w.selectSelfPublicKey),c=w.useSelector((function(e){return e.chat.contacts})),o=w.useSelector((function(e){return e.chat.sentRequests})),u=w.useSelector((function(e){return e.chat.receivedRequests}));Object(r.useEffect)((function(){v.a.addLanguage("en",{"The media could not be loaded, either because the server or network failed or because the format is not supported.":"Stream Not Available"})}),[]),Object(r.useEffect)((function(){if(t){var n=1e3*Object(b.a)(t).exp<Date.now();Object(j.e)(n)}else e(Object(j.e)(!1))}),[t,e]);var s=Object(r.useRef)([]);return Object(r.useEffect)((function(){n&&e&&(e(Object(m.e)()),e(Object(m.d)()),e(Object(x.b)(a)))}),[n,e,a]),Object(r.useEffect)((function(){if(n&&e){var t=c.map((function(e){return e.pk})),r=o.map((function(e){return e.pk})),a=u.map((function(e){return e.pk})),l=E()([].concat(Object(i.a)(t),Object(i.a)(r),Object(i.a)(a))).filter((function(e){return!s.current.includes(e)}));l.forEach((function(e){s.current.push(e)})),Object(f.b)((function(){l.forEach((function(t){e(Object(x.b)(t))}))}))}return function(){var t=s.current;Object(f.b)((function(){t.forEach((function(t){e(Object(x.c)(t))}))})),t.splice(0,t.length)}}),[n,e,a,c,o,u]),Object(k.jsxs)(O.a,{className:"ShockWallet",children:[Object(k.jsx)(A,{}),Object(k.jsx)(r.Suspense,{fallback:Object(k.jsx)(y.a,{fullScreen:!0,text:null}),children:Object(k.jsxs)(d.d,{children:[Object(k.jsx)(d.b,{path:"/auth",exact:!0,component:C}),Object(k.jsx)(z,{path:"/overview",exact:!0,component:D}),Object(k.jsx)(z,{path:"/advanced",exact:!0,component:P}),Object(k.jsx)(z,{path:"/chat",exact:!0,component:R}),Object(k.jsx)(z,{path:"/chat/:publicKey",component:I}),Object(k.jsx)(z,{path:"/send",exact:!0,component:U}),Object(k.jsx)(z,{path:"/request",exact:!0,component:L}),Object(k.jsx)(z,{path:"/profile",exact:!0,component:N}),Object(k.jsx)(z,{path:"/publishContent",exact:!0,component:H}),Object(k.jsx)(z,{path:"/feed",exact:!0,component:K}),Object(k.jsx)(z,{path:"/moonpay",exact:!0,component:M}),Object(k.jsx)(z,{path:"/createPost",exact:!0,component:F}),Object(k.jsx)(z,{path:"/goLive",exact:!0,component:V}),Object(k.jsx)(z,{path:"/offerService",exact:!0,component:B}),Object(k.jsx)(z,{path:"/QRScanner",exact:!0,component:G}),Object(k.jsx)(z,{path:"/otherUser/:publicKey",exact:!0,component:q}),Object(k.jsx)(d.b,{path:"/story",exact:!0,component:$}),Object(k.jsx)(d.b,{path:"/stories",exact:!0,component:W}),Object(k.jsx)(d.a,{to:"/overview"})]})})]})},Q=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function J(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://cra.link/PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}var X=function(e){e&&e instanceof Function&&n.e(32).then(n.bind(null,747)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,c=t.getLCP,o=t.getTTFB;n(e),r(e),a(e),c(e),o(e)}))},Z=n(253);s.a.defaults.timeout=1e4,o.a.render(Object(k.jsx)(f.a,{store:w.store,children:Object(k.jsx)(Z.a,{loading:null,persistor:w.persistor,children:Object(k.jsx)(a.a.StrictMode,{children:Object(k.jsx)(T.a,{children:Object(k.jsx)(Y,{})})})})}),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("","/service-worker.js");Q?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(n){var r=n.headers.get("content-type");404===n.status||null!=r&&-1===r.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):J(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://cra.link/PWA")}))):J(t,e)}))}}(),X(console.log)},52:function(e,t,n){"use strict";n.d(t,"a",(function(){return d})),n.d(t,"e",(function(){return f})),n.d(t,"c",(function(){return h})),n.d(t,"f",(function(){return E})),n.d(t,"d",(function(){return j})),n.d(t,"b",(function(){return m}));var r=n(2),a=n.n(r),c=n(6),o=n(75),u=n(17),s=n.n(u),i=n(23),l=n(74),p=n(76),d={RESET_NODE_INFO:"node/reset",SET_HOST_IP:"node/hostIP",SET_HOST_ID:"node/hostId",SET_AUTHENTICATED_USER:"node/authenticatedUser",SET_CONNECTION_STATUS:"node/connectionStatus",SET_NODE_HEALTH:"node/health",SET_ATTEMPTS_DONE:"node/attemptsDone"},f=function(e){return function(t){t({type:d.SET_HOST_ID,data:e})}},b=function e(t,n,r){return new Promise((function(a,c){return t().then(a).catch((function(o){return r>0?(u=n,new Promise((function(e){return setTimeout(e,u)}))).then(e.bind(null,t,n,r-1)).then(a).catch(c):c(o);var u}))}))},v=function(e,t){return function(){var n=Object(c.a)(a.a.mark((function n(r){var o,u,i;return a.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,b(Object(c.a)(a.a.mark((function t(){var n,r;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,s.a.get("".concat(e,"/healthz"));case 2:if(n=t.sent,r=n.data){t.next=6;break}throw new Error("NodeActions->fetchNodeHealth()->No data obtained from healthz endpoint");case 6:return t.abrupt("return",{data:r});case 7:case"end":return t.stop()}}),t)}))),1e3,t);case 3:return u=n.sent,i=u.data,(null===(o=i.APIStatus)||void 0===o?void 0:o.message)&&r({type:d.SET_CONNECTION_STATUS,data:!0}),n.abrupt("return",i);case 9:n.prev=9,n.t0=n.catch(0),console.log("NodeActions->fetchNodeHealth()->Error encountered:"),console.log(n.t0),r({type:d.SET_CONNECTION_STATUS,data:!1});case 14:case"end":return n.stop()}}),n,null,[[0,9]])})));return function(e){return n.apply(this,arguments)}}()},O=function(){return function(){var e=Object(c.a)(a.a.mark((function e(t){var n,r,c,o;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.a.get("/api/lnd/wallet/status");case 2:if(n=e.sent,r=n.data,c=r.walletExists,o=r.walletStatus,!c){e.next=8;break}return t({type:i.a.SET_AUTH_STEP,data:"locked"===o?"unlockWallet":"gunAuth"}),e.abrupt("return",o);case 8:return t({type:i.a.SET_AUTH_STEP,data:"createWallet"}),e.abrupt("return","createWallet");case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},h=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return function(){var r=Object(c.a)(a.a.mark((function r(o){var u,l,f,b;return a.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return t&&(o({type:d.RESET_NODE_INFO}),o({type:i.a.RESET_AUTH_INFO})),u=function(){var e=Object(c.a)(a.a.mark((function e(t,n){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s.a.defaults.baseURL="".concat(t),o({type:d.SET_HOST_IP,data:t}),e.next=4,Promise.all([o(O()),o(Object(p.b)())]);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),f=e.replace(/^http(s)?:\/\//,""),r.prev=3,r.next=6,v("https://".concat(f),n)(o);case 6:if(!(l=r.sent)){r.next=12;break}return l.withProtocolHostIP="https://".concat(f),r.next=11,u("https://".concat(f),l);case 11:return r.abrupt("return",l);case 12:r.next=17;break;case 14:r.prev=14,r.t0=r.catch(3),console.log(r.t0);case 17:return console.error("cannot establish https connection, will try http"),r.next=20,v("http://".concat(f),n)(o);case 20:return(b=r.sent).withProtocolHostIP="http://".concat(f),r.next=24,u("http://".concat(f),b);case 24:return r.abrupt("return",l||b);case 25:case"end":return r.stop()}}),r,null,[[3,14]])})));return function(e){return r.apply(this,arguments)}}()},E=function(e){var t=e.alias,n=e.password;return function(){var e=Object(c.a)(a.a.mark((function e(r){var c,u,p;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,s.a.post("/api/lnd/auth",{alias:t,password:n},{timeout:3e4});case 3:return c=e.sent,u=c.data,r(Object(i.e)(!0)),p=Object(o.a)(u.authorization),r({type:d.SET_AUTHENTICATED_USER,data:{alias:u.user.alias,authToken:u.authorization,publicKey:u.user.publicKey,authTokenExpirationDate:p.exp}}),e.abrupt("return",u);case 11:throw e.prev=11,e.t0=e.catch(0),r(Object(i.e)(!1)),Object(l.a)(e.t0);case 15:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t){return e.apply(this,arguments)}}()},j=function(e){var t=e.alias,n=e.password;return function(){var e=Object(c.a)(a.a.mark((function e(r){var c,u,p;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,s.a.post("/api/lnd/wallet",{alias:t,password:n},{timeout:3e4});case 3:return c=e.sent,u=c.data,r(Object(i.e)(!0)),p=Object(o.a)(u.authorization),r({type:d.SET_AUTHENTICATED_USER,data:{alias:u.user.alias,authToken:u.authorization,publicKey:u.user.publicKey,authTokenExpirationDate:p.exp}}),e.abrupt("return",u);case 11:throw e.prev=11,e.t0=e.catch(0),r(Object(i.e)(!1)),Object(l.a)(e.t0);case 15:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t){return e.apply(this,arguments)}}()},m=function(){return function(e){e({type:d.SET_ATTEMPTS_DONE})}}},54:function(e,t,n){"use strict";var r=n(247),a=n(248),c=n(255),o=n(256),u=function(e){Object(a.a)(n,e);var t=Object(c.a)(n);function n(e){var a,c,o;return Object(r.a)(this,n),(o=t.call(this)).field=void 0,o.message=null!==(a=null===e||void 0===e?void 0:e.message)&&void 0!==a?a:"An unknown error has occurred",o.field=null!==(c=null===e||void 0===e?void 0:e.field)&&void 0!==c?c:"unknown",o.name=null===e||void 0===e?void 0:e.name,o.stack=null===e||void 0===e?void 0:e.stack,o}return n}(Object(o.a)(Error));t.a=u},55:function(e,t,n){"use strict";n.d(t,"a",(function(){return d})),n.d(t,"c",(function(){return E})),n.d(t,"b",(function(){return j}));var r=n(21),a=n(2),c=n.n(a),o=n(0),u=n(6),s=n(93),i=n(18),l=n(29),p=n(38),d={RESET_FEED:"feed/reset",ADD_FOLLOW:"feed/follows/add",REMOVE_FOLLOW:"feed/follows/remove",UPDATE_FOLLOW:"feed/follows/update",LOAD_POSTS:"feed/posts/load",ADD_USER_POST:"feed/posts/add",DELETE_USER_POST:"feed/posts/delete",LOAD_SHARED_POST:"feed/sharedPosts/load",POST_TIPPED:"feed/posts/tipped"},f=function(e){return function(t){return t({type:d.REMOVE_FOLLOW,data:e})}},b=function(e){return function(t){return t({type:d.ADD_FOLLOW,data:e})}},v=function(e,t,n){return function(){var r=Object(u.a)(c.a.mark((function r(a){var u,s;return c.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,i.a.get("/api/gun/otheruser/".concat(t,"/load/posts>").concat(e));case 2:u=r.sent,s=u.data,a(Object(p.b)(t)),a({type:d.LOAD_SHARED_POST,data:Object(o.a)(Object(o.a)({},s.data),{},{authorId:t,sharerId:n,id:e})});case 6:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}()},O=function(e){return function(){var t=Object(u.a)(c.a.mark((function t(n,a){var p,f;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return p=a().node.hostIP,t.next=3,Object(l.f)({host:p,query:"".concat(e,"::posts::on")});case 3:return(f=t.sent).on("$shock",(function(t){var a=Object.entries(t),l=a.filter((function(e){var t=Object(r.a)(e,2),n=t[0];return null!==t[1]&&!s.a.includes(n)})).map((function(e){return Object(r.a)(e,1)[0]})),p=a.filter((function(e){var t=Object(r.a)(e,2),n=t[0];return null===t[1]&&!s.a.includes(n)})).map((function(e){return Object(r.a)(e,1)[0]}));l.map(function(){var t=Object(u.a)(c.a.mark((function t(r){var a,u;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,i.a.get("/api/gun/otheruser/".concat(e,"/load/posts>").concat(r));case 2:a=t.sent,u=a.data,n({type:d.ADD_USER_POST,data:Object(o.a)(Object(o.a)({},u.data),{},{id:r,authorId:e,type:"post"})});case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),p.map((function(t){return n({type:d.DELETE_USER_POST,data:{id:t,authorId:e,type:"post"}})}))})),t.abrupt("return",f);case 6:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()},h=function(e){return function(){var t=Object(u.a)(c.a.mark((function t(n,a){var p,f;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return p=a().node.hostIP,t.next=3,Object(l.f)({host:p,query:"".concat(e,"::sharedPosts::on")});case 3:return(f=t.sent).on("$shock",(function(t){var a=Object.entries(t),l=a.filter((function(e){var t=Object(r.a)(e,2),n=t[0];return null!==t[1]&&!s.a.includes(n)})).map((function(e){return Object(r.a)(e,1)[0]})),p=a.filter((function(e){var t=Object(r.a)(e,2),n=t[0];return null===t[1]&&!s.a.includes(n)})).map((function(e){return Object(r.a)(e,1)[0]}));l.map(function(){var t=Object(u.a)(c.a.mark((function t(r){var a,u;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,i.a.get("/api/gun/otheruser/".concat(e,"/load/sharedPosts>").concat(r));case 2:return a=t.sent,u=a.data,n({type:d.ADD_USER_POST,data:Object(o.a)(Object(o.a)({},u.data),{},{id:r,authorId:e,type:"shared"})}),t.next=7,v(r,u.data.originalAuthor,e)(n);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),p.map((function(t){return n({type:d.DELETE_USER_POST,data:{id:t,authorId:e}})}))})),t.abrupt("return",f);case 6:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()},E=function(){return function(){var e=Object(u.a)(c.a.mark((function e(t,n){var r,a,o,s;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n().node,a=r.hostIP,o=r.publicKey,e.next=3,Object(l.f)({host:a,query:"$user::follows::map.on",reconnect:!0});case 3:return s=e.sent,console.log("subbing follows"),t(O(o)),t(h(o)),s.on("$shock",function(){var e=Object(u.a)(c.a.mark((function e(n,r){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("string"===typeof r){e.next=3;break}return console.warn("Invalid follow key received: ".concat(r)),e.abrupt("return");case 3:if(n){e.next=7;break}return Object(p.c)(r),t(f(r)),e.abrupt("return");case 7:if("string"===typeof n.user){e.next=10;break}return console.warn("Invalid follow user received (".concat(n.user,")")),e.abrupt("return");case 10:t(b(n)),t(Object(p.b)(n.user)),t(O(n.user)),t(h(n.user));case 14:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),e.abrupt("return",s);case 9:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},j=function(e){var t=e.publicKey,n=e.postId,r=e.amount;return function(){var e=Object(u.a)(c.a.mark((function e(a){var o,u;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.a.post("/api/lnd/unifiedTrx",{type:"tip",amt:r,to:t,memo:"Post Tipped!",feeLimit:.006*r+10,ackInfo:n});case 2:o=e.sent,u=o.data,console.log(u),a({type:d.POST_TIPPED,data:{publicKey:t,postId:n,amount:r}});case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}},65:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var r={SENT:"SENT",SENDING:"SENDING",FAILED:"FAILED",RECEIVED:"RECEIVED"}},74:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(54),a=function(e){var t,n;if("response"in e){var a,c,o,u=null===(a=e.response)||void 0===a?void 0:a.data;return new r.a({field:null!==(c=null===u||void 0===u?void 0:u.field)&&void 0!==c?c:"unknown",message:null!==(o=null===u||void 0===u?void 0:u.errorMessage)&&void 0!==o?o:"An unknown error has occurred"})}return new r.a({field:null!==(t="field"in e&&e.field)&&void 0!==t?t:"unknown",message:null!==(n=e.message)&&void 0!==n?n:"An unknown error has occurred"})}},76:function(e,t,n){"use strict";n.d(t,"a",(function(){return p})),n.d(t,"b",(function(){return O}));var r=n(2),a=n.n(r),c=n(6),o=n(258),u=n(17),s=n.n(u),i=n(52),l=n(34),p={ADD_USER_KEY_PAIR:"encryption/userKeyPair",ADD_HOST_KEY:"encryption/hostKey",SET_DEVICE_ID:"encryption/deviceId"},d=null,f=function(e){var t=e.hostId,n=e.keyPair;return function(e){e({type:p.ADD_USER_KEY_PAIR,data:{hostId:t,keyPair:n}})}},b=function(e){var t=e.hostId,n=e.publicKey;return function(e){e({type:p.ADD_HOST_KEY,data:{hostId:t,publicKey:n}})}},v=function(){return function(e,t){var n=t().node.deviceId;return n||e((function(e){var t=Object(o.a)();return e({type:p.SET_DEVICE_ID,data:t}),t}))}},O=function(){return function(){var e=Object(c.a)(a.a.mark((function e(t){var n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,d||(d=t(function(){var e=Object(c.a)(a.a.mark((function e(t){var n,r,c,o;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=t(v()),r=Object(l.c)(),e.next=5,s.a.post("/api/encryption/exchange",{publicKey:r.publicKeyBase64,deviceId:n});case 5:return c=e.sent,o=c.data,t(f({hostId:o.hostId,keyPair:r})),t(b({hostId:o.hostId,publicKey:o.APIPublicKey})),t(Object(i.e)(o.hostId)),e.abrupt("return",{user:r,host:o});case 13:throw e.prev=13,e.t0=e.catch(0),console.error("[ENCRYPTION] Key Exchange Error:",e.t0),e.t0;case 17:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t){return e.apply(this,arguments)}}())),e.next=4,d;case 4:return n=e.sent,d=null,e.abrupt("return",n);case 9:throw e.prev=9,e.t0=e.catch(0),console.error(e.t0),d=null,e.t0;case 14:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}()}},88:function(e,t,n){"use strict";n.d(t,"a",(function(){return o})),n.d(t,"c",(function(){return u})),n.d(t,"b",(function(){return s}));var r=n(2),a=n.n(r),c=n(6),o={SET_DRAWER_OPEN:"drawer/open"},u=function(){return function(){var e=Object(c.a)(a.a.mark((function e(t){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t({type:o.SET_DRAWER_OPEN,data:!0});case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},s=function(){return function(){var e=Object(c.a)(a.a.mark((function e(t){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t({type:o.SET_DRAWER_OPEN,data:!1});case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}},92:function(e,t,n){"use strict";n.d(t,"a",(function(){return u})),n.d(t,"b",(function(){return s}));var r=n(2),a=n.n(r),c=n(6),o=n(18),u={RESET_FEES:"fees/reset",LOAD_FEE_RATES:"fees/feeRates/load",SET_SOURCE:"fees/source/set",SET_RATE:"fees/rate/set"},s=function(){return function(){var e=Object(c.a)(a.a.mark((function e(t,n){var r,c,s;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n().fees.source,e.next=3,o.a.get(r);case 3:return c=e.sent,s=c.data,t({type:u.LOAD_FEE_RATES,data:s}),e.abrupt("return",s);case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}},93:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var r=["_","#"]},96:function(e,t,n){"use strict";n.d(t,"b",(function(){return r})),n.d(t,"a",(function(){return a})),n.d(t,"c",(function(){return c}));var r="$$__SHOCKWALLET__INITIAL__MESSAGE",a=function(e){return e.split(" ").map((function(e){return"".concat(e.slice(0,1).toUpperCase()).concat(e.slice(1).toLowerCase())})).join(" ")},c=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";if(t)return t;var n=e.slice(-8);return"Anon".concat(n)}}},[[487,10,11]]]);
//# sourceMappingURL=main.4a693bbe.chunk.js.map