{"version":3,"sources":["pages/MoonPay/index.jsx"],"names":["MoonPay","useState","src","setSrc","useEffect","Http","post","type","then","res","data","originalUrl","address","fetch","method","headers","body","JSON","stringify","json","urlWithSignature","console","log","catch","e","className","pageTitle","enableBackButton","title","width","height"],"mappings":"sMAkDeA,UA3CC,WAAO,IAAD,EACEC,mBAAS,IADX,mBACbC,EADa,KACRC,EADQ,KA8BpB,OA3BAC,qBAAU,WACRC,IAAKC,KAAK,sBAAuB,CAC/BC,KAAM,UAELC,MAAK,SAAAC,GAAQ,IACJC,EAASD,EAATC,KACFC,EAAW,iDAXP,2CAWO,2CAAyFD,EAAKE,SAC/G,OAAOC,MAbW,uCAac,CAC9BC,OAAQ,OACRC,QAAS,CACP,eAAgB,oBAElBC,KAAMC,KAAKC,UAAU,CAAEP,qBAG1BH,MAAK,SAAAC,GAAG,OAAIA,EAAIU,UAChBX,MAAK,SAAAW,GACAA,EAAKC,mBACPjB,EAAOgB,EAAKC,kBACZC,QAAQC,IAAI,yBAA2BH,EAAKC,sBAG/CG,OAAM,SAAAC,GACLH,QAAQC,IAAI,sCACZD,QAAQC,IAAIE,QAEf,IAED,sBAAKC,UAAU,mBAAf,UACE,cAAC,IAAD,CAASC,UAAU,UAAUC,kBAAkB,IAC/C,wBACEC,MAAM,iBACNC,MAAM,OACNC,OAAO,OACP5B,IAAKA","file":"static/js/31.f3de3a2b.chunk.js","sourcesContent":["import { useEffect, useState } from \"react\";\nimport MainNav from \"../../common/MainNav\";\nimport \"./css/index.css\";\nimport Http from \"../../utils/Http\";\nconst signingServiceUrl = \"https://moon-sign.shock.network/sign\";\nconst apiPubKey = \"pk_test_C8jSPDtsKQqXwP7nkScpqZI5tsaOiQPH\";\n\nconst MoonPay = () => {\n  const [src, setSrc] = useState(\"\");\n\n  useEffect(() => {\n    Http.post(\"/api/lnd/newaddress\", {\n      type: \"p2wkh\"\n    })\n      .then(res => {\n        const { data } = res;\n        const originalUrl = `https://buy-staging.moonpay.io/?apiKey=${apiPubKey}&currencyCode=btc&walletAddress=${data.address}`;\n        return fetch(signingServiceUrl, {\n          method: \"post\",\n          headers: {\n            \"Content-type\": \"application/json\"\n          },\n          body: JSON.stringify({ originalUrl })\n        });\n      })\n      .then(res => res.json())\n      .then(json => {\n        if (json.urlWithSignature) {\n          setSrc(json.urlWithSignature);\n          console.log(\"MOONPAY SIGNATURE DONE\" + json.urlWithSignature);\n        }\n      })\n      .catch(e => {\n        console.log(\"Error generating MoonPay signature\");\n        console.log(e);\n      });\n  }, []);\n  return (\n    <div className=\"moonPayContainer\">\n      <MainNav pageTitle=\"MOONPAY\" enableBackButton={true} />\n      <iframe\n        title=\"moonpay-iframe\"\n        width=\"100%\"\n        height=\"100%\"\n        src={src}\n      ></iframe>\n    </div>\n  );\n};\n\nexport default MoonPay;\n"],"sourceRoot":""}