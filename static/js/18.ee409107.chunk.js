(this["webpackJsonpshocknet-pwa"]=this["webpackJsonpshocknet-pwa"]||[]).push([[18],{434:function(e,t,a){"use strict";var c=a(3),n=a(72),i=a.n(n),o=(a(436),a(7)),s=function(e){var t=e.children,a=e.style;return Object(o.jsx)("div",{className:"content",style:a,"data-v-ecebadd7":"",children:t})},r=(a(437),function(e){var t=e.title,a=e.toggleModal;return t?Object(o.jsxs)("div",{className:"head","data-v-89c96401":"",children:[Object(o.jsx)("p",{className:"head-title","data-v-89c96401":"",children:t}),Object(o.jsx)("div",{className:"head-close",onClick:a,"data-v-89c96401":"",children:Object(o.jsx)("i",{className:"fas fa-times","data-v-89c96401":""})})]}):null});a(438),t.a=function(e){var t=e.modalOpen,a=void 0!==t&&t,n=e.toggleModal,l=e.modalTitle,d=void 0===l?"":l,u=e.children,b=e.contentStyle,f=void 0===b?{}:b,j=Object(c.useCallback)((function(){n()}),[n]);return Object(o.jsxs)("div",{className:i()({modal:!0,open:a}),"data-v-7e395622":"",children:[Object(o.jsx)("div",{className:"backdrop",onClick:j,"data-v-7e395622":""}),Object(o.jsxs)("div",{className:"container","data-v-7e395622":"",children:[Object(o.jsx)(r,{title:d,toggleModal:j,"data-v-7e395622":""}),Object(o.jsx)(s,{style:f,"data-v-7e395622":"",children:u})]})]})}},436:function(e,t,a){},437:function(e,t,a){},438:function(e,t,a){},446:function(e,t,a){"use strict";var c=a(52),n=a(7);t.a=function(){return Object(n.jsxs)("div",{className:"bottom-nav-container",children:[Object(n.jsx)(c.c,{className:"bottom-nav-btn",to:"/overview",activeClassName:"active-nav-btn",children:Object(n.jsx)("i",{className:"bottom-nav-btn-icon icon-thin-wallet"})}),Object(n.jsx)(c.c,{className:"bottom-nav-btn",to:"/chat",activeClassName:"active-nav-btn",children:Object(n.jsx)("i",{className:"bottom-nav-btn-icon icon-thin-chat"})}),Object(n.jsx)(c.c,{className:"bottom-nav-btn",to:"/profile",activeClassName:"active-nav-btn",children:Object(n.jsx)("i",{className:"bottom-nav-btn-icon icon-thin-profile"})}),Object(n.jsx)(c.c,{className:"bottom-nav-btn",to:"/feed",activeClassName:"active-nav-btn",children:Object(n.jsx)("i",{className:"bottom-nav-btn-icon icon-thin-feed"})})]})}},452:function(e,t,a){"use strict";var c=a(16),n=a(3),i=a(72),o=a.n(i),s=(a(453),a(7));t.a=function(e){var t=e.label,a=void 0===t?null:t,i=e.icon,r=void 0===i?null:i,l=e.iconURL,d=void 0===l?null:l,u=e.onClick,b=void 0===u?void 0:u,f=e.nestedMode,j=void 0!==f&&f,p=e.large,v=void 0!==p&&p,O=e.small,h=void 0!==O&&O,m=e.relative,x=void 0!==m&&m,g=e.children,C=void 0===g?null:g,k=e.style,y=void 0===k?{}:k,N=Object(n.useState)(!1),S=Object(c.a)(N,2),w=S[0],_=S[1],I=Object(n.useCallback)((function(){j&&_(!w)}),[w,j]),P=Object(n.useMemo)((function(){return d?Object(s.jsx)("img",{src:d,className:"add-btn-icon",alt:"","data-v-d5ea2a8d":""}):Object(s.jsx)("i",{className:"fas fa-".concat(null!==r&&void 0!==r?r:"plus"),"data-v-d5ea2a8d":""})}),[r,d]),R=Object(n.useMemo)((function(){return a?Object(s.jsx)("p",{className:"add-btn-label","data-v-d5ea2a8d":"",children:a}):null}),[a]);return Object(s.jsxs)("div",{className:o()({"add-btn-container":!0,"add-btn-round-container":!a,"add-btn-large":v,"add-btn-small":h}),"data-v-d5ea2a8d":"",children:[Object(s.jsxs)("div",{className:o()({"add-btn":!0,"add-btn-round":!a,"add-btn-extended":!!a,"add-btn-relative":x,"add-btn-open":w,"add-btn-nested":j}),onClick:null!==b&&void 0!==b?b:I,style:y,"data-v-d5ea2a8d":"",children:[P,R]}),C?Object(s.jsx)("div",{className:o()({"add-btn-options":!0,"add-btn-options-open":w}),"data-v-d5ea2a8d":"",children:C}):null]})}},453:function(e,t,a){},459:function(e,t,a){"use strict";var c=a(3),n=a(7);t.a=function(e){var t=e.color,a=e.length,i=e.type,o=e.width,s=Object(c.useMemo)((function(){return"vertical"===i?{borderLeftStyle:"solid",borderLeftWidth:"".concat(o/2,"px"),borderLeftColor:t,borderRightStyle:"solid",borderRightWidth:"".concat(o/2,"px"),borderRightColor:t,height:a}:"horizontal"===i?{borderTopStyle:"solid",borderTopWidth:o/2,borderTopColor:t,borderBottomStyle:"solid",borderBottomWidth:o/2,borderBottomColor:t,width:a}:{}}),[t,a,i,o]);return Object(n.jsx)("div",{style:s})}},472:function(e,t,a){"use strict";var c=a(72),n=a.n(c),i=a(435),o=a(459),s=a(473),r=a.n(s),l=a(7);t.a=function(e){var t=e.onChange,a=e.selected;return Object(l.jsxs)("div",{className:n()(i.width100,i.rowCentered,i.spaceAround,i.padding12,r.a.container),children:[Object(l.jsx)("span",{className:n()(i.unselectable,"posts"===a&&r.a.selected,"services"===a&&r.a.unselected),onClick:function(){t("posts")},children:"Posts"}),Object(l.jsx)("div",{className:i.absolute,children:Object(l.jsx)(o.a,{color:"white",length:16,type:"vertical",width:2})}),Object(l.jsx)("span",{className:n()(i.unselectable,"services"===a&&r.a.selected,"posts"===a&&r.a.unselected),onClick:function(){t("services")},children:"Services"})]})}},473:function(e,t,a){e.exports={container:"ProfileDivider_container__3ob9k",selected:"ProfileDivider_selected__3U98y",unselected:"ProfileDivider_unselected__1Z_qd",divider:"ProfileDivider_divider__1IzYV"}},474:function(e,t,a){"use strict";t.a=a.p+"static/media/clipboard.beb19e1e.svg"},475:function(e,t,a){"use strict";t.a=a.p+"static/media/qrcode.69103c6c.svg"},578:function(e,t,a){e.exports={container:"ContentHostInputView_container__1CVAn","uri-or-token-input":"ContentHostInputView_uri-or-token-input__3vg5h","plus-or-paste-btn":"ContentHostInputView_plus-or-paste-btn__3z_k0"}},579:function(e,t,a){e.exports={"container-base":"Host_container-base__r5EJP","remove-or-cancel":"Host_remove-or-cancel__2sHhe Host_container-base__r5EJP",container:"Host_container__2hPww Host_container-base__r5EJP",pill:"Host_pill__1WzlY","display-name-or-uri":"Host_display-name-or-uri__2eaUy","price-and-status":"Host_price-and-status__3Q4n3",price:"Host_price__2oEgL",red:"Host_red__1kS00",yellow:"Host_yellow__3DLEG",blue:"Host_blue__3m2Kb"}},580:function(e,t,a){},709:function(e,t,a){"use strict";a.r(t);var c=a(2),n=a.n(c),i=a(6),o=a(16),s=a(3),r=a.n(s),l=a(40),d=a(471),u=a.n(d),b=a(52),f=a(72),j=a.n(f),p=a(25),v=a(90),O=a(88),h=a(100),m=a(435),x=a(446),g=a(452),C=a(434),k=a(145),y=a(445),N=a(21),S=a(18),w=a(48),_=a(82),I=a(578),P=a.n(I),R=a(579),D=a.n(R),E=a(7),T=function(e){var t=e.error,a=e.isBeingAddedOrDeleted,c=e.isDefault,n=e.onClickRemove,i=e.onClickWarning,r=e.price,l=e.publicKey,d=e.URI,u=S.useSelector(S.selectUser(l)),b=Object(s.useState)(!1),f=Object(o.a)(b,2),v=f[0],O=f[1],h=Object(s.useCallback)((function(){O((function(e){return!e}))}),[]),x=Object(s.useCallback)((function(){i(l||d)}),[i,l,d]),g=Object(s.useCallback)((function(){n(l||d)}),[n,l,d]),C=t&&a||l&&d||!l&&!d,k=t;return C&&(k="Malformed host provided to <Host />, it must have either a public key or an URI (though not both), and it must not have both truthy error and isAdding props at the same time: ".concat(JSON.stringify(C))),v?Object(E.jsxs)("div",{className:j()(m.rowCentered,m.centerJustify,m.width100),children:[Object(E.jsx)("button",{onClick:g,className:j()(m.flatBtnFullWidth),children:"Remove"}),Object(E.jsx)("button",{onClick:h,className:j()(m.flatBtnFullWidth),children:"Cancel"})]}):Object(E.jsxs)("div",{className:j()(m.rowCentered,m.spaceBetween,m.childrenSpaced24,D.a.container),children:[Object(E.jsxs)("div",{className:j()(m.rowCentered,m.spaceBetween,m.childrenSpaced8,D.a.pill),children:[l?Object(E.jsx)(y.a,{height:24,publicKey:l}):Object(E.jsx)("i",{className:j()("fas fa-globe")}),Object(E.jsx)("span",{className:D.a["display-name-or-uri"],children:d&&d.toLowerCase()||u.displayName||p.f(l)}),a||k?Object(E.jsx)("div",{}):Object(E.jsx)("span",{className:"fas fa-times",onClick:h,style:{fontSize:12}})]}),Object(E.jsxs)("div",{className:j()(m.flex,m.childrenSpaced24,D.a["price-and-status"]),children:[Object(E.jsxs)("span",{className:j()(m.flex,D.a.price),children:[r," sats"]}),k?Object(E.jsx)("i",{className:j()("fas fa-exclamation-triangle",m.fontSize12,D.a.yellow),onClick:x}):a?Object(E.jsx)("i",{className:j()("fas fa-hourglass-half",m.fontSize12,D.a.yellow)}):c?Object(E.jsx)("i",{className:j()("fas fa-check",m.fontSize12,D.a.blue)}):Object(E.jsx)("i",{className:j()("fas fa-link",m.fontSize12,D.a.blue)})]})]})},U=j()(m.rowCentered,m.width100,m.centerJustify,m.childrenSpaced16,m.padding12),A=function(e){var t,a=e.hosts,c=e.onAddHost,n=e.onRemoveHost,i=e.onRetryHost,r=Object(s.useState)({publicKeyOrServerURI:"",URIHostAwaitingForToken:""}),l=Object(o.a)(r,2),d=l[0],u=d.publicKeyOrServerURI,b=d.URIHostAwaitingForToken,f=l[1],p=Object(s.useState)(""),v=Object(o.a)(p,2),h=v[0],x=v[1],g=Object(s.useState)(!1),k=Object(o.a)(g,2),y=k[0],S=k[1],w=Object(s.useRef)(null),I=Object(s.useState)(!1),R=Object(o.a)(I,2),D=R[0],A=R[1],M=Object(s.useState)(""),H=Object(o.a)(M,2),K=H[0],B=H[1],z=Object(s.useRef)(null),F=Object(s.useState)(!1),L=Object(o.a)(F,2),W=L[0],J=L[1],V=Object(s.useMemo)((function(){return a.slice().sort((function(e,t){return t.dateAdded-e.dateAdded}))}),[a]),q=Object(s.useMemo)((function(){return V.filter((function(e){return e.isDefault}))}),[V]),G=Object(s.useMemo)((function(){return V.filter((function(e){return!e.isDefault}))}),[V]),$=Object(s.useMemo)((function(){return[].concat(Object(N.a)(q),Object(N.a)(G))}),[q,G]),Y=Object(s.useCallback)((function(){S(!0)}),[]),Q=Object(s.useCallback)((function(){D||(navigator.clipboard?(A(!0),navigator.clipboard.readText().then((function(e){f(Object(_.a)((function(t){t.publicKeyOrServerURI=e})))})).catch((function(e){alert("Could not paste: ".concat(e.message))})).finally((function(){A(!1)}))):w.current&&(w.current.focus(),document.execCommand("paste"),w.current.blur()))}),[D,A]),Z=Object(s.useCallback)((function(){f(Object(_.a)((function(e){var t=O.e(e.publicKeyOrServerURI);t&&(e.publicKeyOrServerURI=t,e.URIHostAwaitingForToken=t)}))),O.e(u)||c(u)}),[f,u,c]),X=Object(s.useCallback)((function(){W||(navigator.clipboard?(J(!0),navigator.clipboard.readText().then((function(e){B(e)})).catch((function(e){alert("Could not paste: ".concat(e.message))})).finally((function(){J(!1)}))):z.current&&(z.current.focus(),document.execCommand("paste"),z.current.blur()))}),[W,J,B]),ee=Object(s.useCallback)((function(){f(Object(_.a)((function(e){e.publicKeyOrServerURI="",e.URIHostAwaitingForToken=""}))),c(u,K)}),[f,c,u,K]),te=Object(s.useCallback)((function(e){n(e)}),[n]),ae=Object(s.useCallback)((function(){x("")}),[x]),ce=Object(s.useCallback)((function(){n(h),ae()}),[n,h,ae]),ne=Object(s.useCallback)((function(){i(h),x("")}),[i,h,x]);return Object(E.jsxs)(E.Fragment,{children:[Object(E.jsxs)("div",{className:j()(m.col,m.width100,P.a.container),children:[Object(E.jsxs)("div",{className:(m.row,m.centerJustify),children:[Object(E.jsx)("input",{className:j()("input-field",P.a["uri-or-token-input"]),onChange:function(e){f(Object(_.a)((function(t){t.publicKeyOrServerURI=e.target.value,t.URIHostAwaitingForToken=""}))),B("")},type:"text",value:u,onKeyUp:function(e){"Enter"!==e.key&&13!==e.keyCode||Z()},autoCapitalize:"off",autoCorrect:"none",placeholder:"Provider Pubkey or Server URI (include https or http)",ref:w,onFocus:Y}),0===u.length&&Object(E.jsx)("button",{className:j()(m.flatBtn,P.a["plus-or-paste-btn"]),disabled:D,onClick:Q,children:Object(E.jsx)("i",{className:"fas fa-paste"})}),u.length>0&&u!==b&&Object(E.jsx)("button",{className:j()(m.flatBtn,P.a["plus-or-paste-btn"]),disabled:0===u.length,onClick:Z,children:"+"})]}),u.length>0&&u===b&&Object(E.jsxs)("div",{className:(m.row,m.centerJustify),children:[Object(E.jsx)("input",{className:j()("input-field",P.a["uri-or-token-input"]),onChange:function(e){B(e.target.value)},type:"text",value:K,onKeyUp:function(e){"Enter"!==e.key&&13!==e.keyCode||ee()},autoCapitalize:"off",autoCorrect:"none",placeholder:"Token (required)",ref:z}),0===K.length&&Object(E.jsx)("button",{className:j()(m.flatBtn,P.a["plus-or-paste-btn"]),disabled:W,onClick:X,children:Object(E.jsx)("i",{className:"fas fa-paste"})}),K.length>0&&Object(E.jsx)("button",{className:j()(m.flatBtn,P.a["plus-or-paste-btn"]),disabled:0===K.length,onClick:ee,children:"+"})]}),Object(E.jsx)("div",{className:j()(m.col),children:(y?$:q).map((function(e){return Object(E.jsx)(T,{URI:e.URI,dateAdded:0,error:e.error,isBeingAddedOrDeleted:e.isBeingAddedOrDeleted,isDefault:e.isDefault,onClickRemove:te,onClickWarning:x,price:e.price,publicKey:e.publicKey,token:e.token},e.publicKey||e.URI)}))})]}),Object(E.jsx)(C.a,{modalOpen:!!h,modalTitle:null===(t=$.find((function(e){return e.publicKey===h||e.URI===h})))||void 0===t?void 0:t.error,toggleModal:ae,children:Object(E.jsxs)("div",{className:U,children:[Object(E.jsx)("button",{onClick:ce,className:"shock-form-button m-1",children:"REMOVE"}),Object(E.jsx)("button",{onClick:ne,className:"shock-form-button-confirm m-1",children:"RETRY"})]})})]})},M=a(39),H=function(){var e=Object(l.b)(),t=S.useSelector((function(e){return e.content.seedProviderPub})),a=S.useSelector((function(e){return e.userProfiles})),c=S.useSelector((function(e){return e.content.seedInfo})),n=c.seedUrl,i=c.seedToken,r=Object(s.useState)([]),d=Object(o.a)(r,2),u=d[0],b=d[1],f=Object(s.useState)(null),j=Object(o.a)(f,2),p=j[0],v=j[1],h=Object(s.useState)(""),m=Object(o.a)(h,2),x=m[0],g=m[1],C=Object(s.useState)(0),k=Object(o.a)(C,2),y=k[0],_=k[1],I=Object(s.useState)(""),P=Object(o.a)(I,2),R=P[0],D=P[1];Object(s.useEffect)((function(){var e=a[t];e?p&&e.avatar===p.avatar&&e.SeedServiceProvided===p.SeedServiceProvided||v(e):v(null)}),[a,t,p,v]),Object(s.useEffect)((function(){if(p){var e=p.SeedServiceProvided;e!==x&&g(e)}}),[p,x,g]),Object(s.useEffect)((function(){var e=[];n&&i&&e.push({URI:n,token:i,price:0,isBeingAddedOrDeleted:!1,dateAdded:Date.now(),isDefault:!0,error:null,publicKey:null}),t&&p&&e.push({dateAdded:Date.now(),isBeingAddedOrDeleted:!0,isDefault:!0,publicKey:t,price:0,URI:null,token:null,error:null}),b(e)}),[n,i,t,p,b]),Object(s.useEffect)((function(){x&&O.b.get("/api/gun/otheruser/".concat(t,"/load/offeredServices>").concat(x)).then((function(e){var t=e.data.data;_(t.servicePrice)})).catch((function(e){D(e)}))}),[x,t,_,D]),Object(s.useEffect)((function(){var e=Object(N.a)(u),t=e.findIndex((function(e){return!e.URI}));-1!==t&&e[t].price!==y&&(e[t].isBeingAddedOrDeleted=!1,e[t].price=y,b(e))}),[y,_,u,b]),Object(s.useEffect)((function(){var e=R.message||R,t=Object(N.a)(u),a=t.findIndex((function(e){return!e.URI}));-1!==a&&e!==t[a].error&&(t[a].isBeingAddedOrDeleted=!1,t[a].error=e,b(t))}),[R,D,u,b]);var T=Object(s.useCallback)((function(t,a){t.startsWith("http")?Object(M.h)(t,a)(e):Object(M.i)(t)(e)}),[e]),U=Object(s.useCallback)((function(t){t.startsWith("http")?Object(M.h)("","")(e):Object(M.i)("")(e)}),[e]);Object(s.useEffect)((function(){return e(Object(w.b)(t))}),[t,e]);var H=Object(s.useMemo)((function(){return u.filter((function(e){return e}))}),[u]);return Object(E.jsx)(A,{hosts:H,onAddHost:T,onRemoveHost:U,onRetryHost:function(){}})},K=a(472),B=a(443),z=a(474),F=a(475),L=a(20),W=(a(580),a(50)),J=a(55),V=r.a.lazy((function(){return Promise.all([a.e(1),a.e(4)]).then(a.bind(null,560))})),q=r.a.lazy((function(){return Promise.all([a.e(2),a.e(1),a.e(3),a.e(7)]).then(a.bind(null,719))})),G=["https://shock.pub","https://shock.page","https://lightning.page","https://satoshi.watch"];t.default=function(){var e=Object(l.b)(),t=Object(s.useState)(!1),a=Object(o.a)(t,2),c=a[0],r=a[1],d=Object(s.useState)(null),f=Object(o.a)(d,2),N=f[0],w=f[1],_=S.useSelector((function(e){return e.feed.posts})),I=S.useSelector((function(e){return e.node.publicKey})),P=S.useSelector((function(e){return e.node.hostIP})),R=S.useSelector((function(e){return e.userProfiles})),D=S.useSelector((function(e){return e.orders.myServices})),T=Object(s.useState)("posts"),U=Object(o.a)(T,2),A=U[0],M=U[1],$=Object(l.c)(S.selectSelfUser),Y=Object(s.useMemo)((function(){return _&&_[I]?_[I].sort((function(e,t){var a=Object(J.b)(e)?e.shareDate:e.date;return(Object(J.b)(t)?t.shareDate:t.date)-a})):[]}),[_,I]);Object(s.useEffect)((function(){var t=Object(h.e)()(e);return Object(L.f)(t)}),[e]),Object(s.useEffect)((function(){var t=e(Object(W.f)(I)),a=e(Object(W.e)(I));return Object(L.f)(t,a)}),[I]);var Q=Object(s.useCallback)((function(){r(!c)}),[c]),Z=Object(s.useState)(!1),X=Object(o.a)(Z,2),ee=X[0],te=X[1],ae=Object(s.useState)(G[0]),ce=Object(o.a)(ae,2),ne=ce[0],ie=ce[1],oe=Object(s.useState)(G[0]),se=Object(o.a)(oe,2),re=se[0],le=se[1],de=Object(s.useCallback)((function(){if(navigator.clipboard)navigator.clipboard.writeText(re+"/"+I);else{var e=document.querySelector("#web-client-url-holder");e.style.display="block",e.select(),document.execCommand("copy"),e.blur(),e.style.display="none"}}),[re,I]),ue=Object(s.useCallback)((function(){console.debug("Subbing to webclient prefix on hostIP --| ".concat(P," |-- and public key --| ").concat(I," |--"));var e=Object(L.e)({query:"$user::Profile>webClientPrefix::on",onData:function(e){"string"===typeof e?ie(e):O.b.post("/api/gun/put",{path:"$user>Profile>webClientPrefix",value:G[0]}).catch((function(e){alert("Error setting default web client prefix: ".concat(e.message))}))},onError:function(e){alert("There was an error fetching web client prefix: ".concat(e))}});return Object(L.f)(e)}),[P,I]);Object(s.useEffect)((function(){return ue()}),[ue]);var be=Object(s.useCallback)((function(e){M(e)}),[]),fe=re!==ne,je=Object(s.useCallback)((function(){te((function(e){return!e})),le(ne)}),[ne]),pe=Object(s.useCallback)((function(){je()}),[je]),ve=Object(s.useCallback)((function(){re!==ne&&O.b.post("/api/gun/put",{path:"$user>Profile>webClientPrefix",value:re}).catch((function(e){alert("There was an error setting your web client prefix: ".concat(e.message))})),je()}),[je,re,ne]),Oe=Object(s.useRef)(null),he=Object(s.useState)(!1),me=Object(o.a)(he,2),xe=me[0],ge=me[1],Ce=function(){var e=Object(i.a)(n.a.mark((function e(t){var a,c,i,s,r,l;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,t.preventDefault(),!xe){e.next=4;break}return e.abrupt("return");case 4:if(ge(!0),a=t.target,0!==(c=a.files).length){e.next=8;break}return e.abrupt("return");case 8:if(1===c.length){e.next=12;break}return O.d.error("Profile -> files.length !== 1"),alert("An error occurred while trying to set a header. This has been logged."),e.abrupt("return");case 12:return i=Object(o.a)(c,1),s=i[0],e.next=15,O.f(s,320,.7);case 15:return r=e.sent,"data:image/jpeg;base64,",l=r.slice("data:image/jpeg;base64,".length),e.next=20,O.b.post("/api/gun/put",{path:"$user>profileBinary>header",value:l});case 20:e.next=27;break;case 22:e.prev=22,e.t0=e.catch(0),O.d.error("Error while trying to load new header."),O.d.error(e.t0),alert("There was an error loading the new header, this has error has been logged.");case 27:return e.prev=27,ge(!1),e.finish(27);case 30:case"end":return e.stop()}}),e,null,[[0,22,27,30]])})));return function(t){return e.apply(this,arguments)}}(),ke=Object(s.useCallback)((function(e){e.preventDefault();var t=Oe.current;t||(O.d.error("File input element for avatar is falsy."),alert("There was an error and it was logged.")),t.click()}),[]),ye=Object(s.useCallback)((function(e){console.log(e),!N&&e||w(null),w(e)}),[N]),Ne=Object(s.useCallback)((function(){w(null)}),[]),Se=Object(s.useCallback)(Object(i.a)(n.a.mark((function t(){var a;return n.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,N&&N.id){t.next=3;break}return t.abrupt("return");case 3:return console.log("deleting:"),console.log(N),a=N.shared?"sharedPosts":"posts",t.next=8,O.b.post("/api/gun/put",{path:"$user>".concat(a,">").concat(N.id),value:null});case 8:e(Object(W.b)({id:N.id,authorId:I})),ye(null),t.next=17;break;case 12:t.prev=12,t.t0=t.catch(0),console.log("Error when deleting post:"),console.log(t.t0),alert("Could not delete post: ".concat(t.t0.message));case 17:case"end":return t.stop()}}),t,null,[[0,12]])}))),[N,e,I,ye]),we=Object(s.useCallback)((function(){try{if(navigator.clipboard)navigator.clipboard.writeText(I);else{var e=document.querySelector("#public-key-holder");e.style.display="block",e.select(),document.execCommand("copy"),e.blur(),e.style.display="none",r(!1)}}catch(t){alert("Could not copy to clipboard: ".concat(t.message))}}),[I]),_e=Object(s.useState)(!1),Ie=Object(o.a)(_e,2),Pe=Ie[0],Re=Ie[1],De=$.displayName,Ee=Object(s.useState)($.displayName||"Anon"),Te=Object(o.a)(Ee,2),Ue=Te[0],Ae=Te[1],Me=Object(s.useState)(null),He=Object(o.a)(Me,2),Ke=He[0],Be=He[1],ze=Object(s.useCallback)((function(e){""!==e&&(Be(e),O.b.put("/api/gun/me",{displayName:e}).catch((function(e){Be(null),alert("There was an error setting a new display name: ".concat(e.message))})))}),[]);Object(s.useEffect)((function(){Ke===De&&(console.debug("Got display name round trip from api."),Be(null))}),[Ke,De]);var Fe=Object(s.useCallback)((function(){Ae(De),Re((function(e){return!e}))}),[De]),Le=Object(s.useCallback)((function(){Ue!==De&&ze(Ue),Fe()}),[De,Ue,ze,Fe]),We=Object(s.useMemo)((function(){return{padding:"12px 24px"}}),[]),Je=$.bio,Ve=Object(s.useState)(!1),qe=Object(o.a)(Ve,2),Ge=qe[0],$e=qe[1],Ye=Object(s.useState)(Je||"bio"),Qe=Object(o.a)(Ye,2),Ze=Qe[0],Xe=Qe[1],et=Object(s.useState)(null),tt=Object(o.a)(et,2),at=tt[0],ct=tt[1],nt=Object(s.useCallback)((function(e){""!==e&&(ct(e),O.b.put("/api/gun/me",{bio:e}).catch((function(e){ct(null),alert("There was an error setting a new bio: ".concat(e.message))})))}),[]);Object(s.useEffect)((function(){at===Je&&(console.debug("Got bio round trip from api."),ct(null))}),[at,Je]);var it=Object(s.useCallback)((function(){Xe(Je),$e((function(e){return!e}))}),[Je]),ot=Object(s.useCallback)((function(){Ze!==Je&&nt(Ze),it()}),[Je,Ze,nt,it]),st=Object(s.useMemo)((function(){return{padding:"12px 24px"}}),[]);return Object(E.jsxs)(E.Fragment,{children:[Object(E.jsxs)("div",{className:"page-container profile-page","data-v-2ac612fc":"",children:[Object(E.jsxs)("div",{className:"profile-container","data-v-2ac612fc":"",children:[Object(E.jsx)("div",{className:"profile-cover",onClick:ke,"data-v-2ac612fc":"",children:$.header&&Object(E.jsx)("img",{alt:"User set profile header.",src:"data:image/jpeg;base64,".concat($.header),"data-v-2ac612fc":""})}),Object(E.jsxs)("div",{className:"profile-info-container","data-v-2ac612fc":"",children:[Object(E.jsx)("div",{className:"profile-avatar",style:{height:"".concat(122,"px"),width:"".concat(122,"px")},"data-v-2ac612fc":"",children:Object(E.jsx)(y.a,{height:122,publicKey:I,setsAvatar:!0,greyBorder:!0,disableOnlineRing:!0,"data-v-2ac612fc":""})}),Object(E.jsxs)("div",{className:"profile-info","data-v-2ac612fc":"",children:[Object(E.jsx)("p",{className:j()(m.unselectable,"profile-name"),onClick:Fe,"data-v-2ac612fc":"",children:Ke||De}),Object(E.jsx)("p",{className:j()(m.unselectable,"profile-desc"),onClick:it,"data-v-2ac612fc":"",children:at||$.bio}),Object(E.jsxs)("div",{className:"config-btn",onClick:je,"data-v-2ac612fc":"",children:[Object(E.jsx)("i",{className:"config-btn-icon icon-solid-spending-rule","data-v-2ac612fc":""}),Object(E.jsx)("p",{className:"config-btn-text","data-v-2ac612fc":"",children:"Config"})]})]})]}),Object(E.jsxs)("div",{"data-v-2ac612fc":"",children:[Object(E.jsx)(b.b,{to:"/goLive",className:"profile-choice-container","data-v-2ac612fc":"",children:Object(E.jsxs)("div",{style:{backgroundColor:"red",color:"white",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",padding:"0.2em 0.5em",borderRadius:"0.7em",fontSize:"16px",fontWeight:600},"data-v-2ac612fc":"",children:[Object(E.jsx)("i",{className:"fas fa-video","data-v-2ac612fc":""}),Object(E.jsx)("p",{"data-v-2ac612fc":"",children:"GO LIVE"})]})}),Object(E.jsxs)(b.b,{to:"/createPost",className:"profile-choice-container","data-v-2ac612fc":"",children:[Object(E.jsx)("i",{className:"profile-choice-icon fas fa-pen-square","data-v-2ac612fc":""}),Object(E.jsx)("p",{className:"profile-choice-text","data-v-2ac612fc":"",children:"Create Post"})]}),Object(E.jsxs)(b.b,{to:"/publishContent",className:"profile-choice-container","data-v-2ac612fc":"",children:[Object(E.jsx)("i",{className:"profile-choice-icon fab fa-youtube","data-v-2ac612fc":""}),Object(E.jsx)("p",{className:"profile-choice-text","data-v-2ac612fc":"",children:"Publish Content"})]}),Object(E.jsxs)("button",{className:"profile-choice-container","data-v-2ac612fc":"",children:[Object(E.jsx)("i",{className:"profile-choice-icon fas fa-shopping-cart","data-v-2ac612fc":""}),Object(E.jsx)("p",{className:"profile-choice-text","data-v-2ac612fc":"",children:"Offer a Product"})]}),Object(E.jsxs)(b.b,{to:"/offerService",className:"profile-choice-container","data-v-2ac612fc":"",children:[Object(E.jsx)("i",{className:"profile-choice-icon fas fa-running","data-v-2ac612fc":""}),Object(E.jsx)("p",{className:"profile-choice-text","data-v-2ac612fc":"",children:"Offer a Service"})]})]}),Object(E.jsx)(K.a,{onChange:be,selected:A,"data-v-2ac612fc":""}),Object(E.jsxs)("div",{className:"","data-v-2ac612fc":"",children:["posts"===A&&Y.map((function(e,t){if("shared"===e.type){if(!e.originalPost)return null;var a=R[e.sharerId]||p.e(e.sharerId),c=e.originalAuthor,n=R[c]||p.e(c);return Object(E.jsx)(s.Suspense,{fallback:Object(E.jsx)(k.a,{"data-v-2ac612fc":""}),"data-v-2ac612fc":"",children:Object(E.jsx)(q,{originalPost:e.originalPost,originalPostProfile:n,sharedTimestamp:e.shareDate,sharerProfile:a,postPublicKey:c,openTipModal:function(){},openUnlockModal:function(){},openDeleteModal:ye,"data-v-2ac612fc":""})},e.sharerId+e.originalPost.id)}var i=R[e.authorId]||p.e(e.authorId);return Object(E.jsx)(s.Suspense,{fallback:Object(E.jsx)(k.a,{"data-v-2ac612fc":""}),"data-v-2ac612fc":"",children:Object(E.jsx)(V,{id:e.id,timestamp:e.date,contentItems:e.contentItems,avatar:"data:image/jpeg;base64,".concat(null===i||void 0===i?void 0:i.avatar),username:Object(v.c)(null===i||void 0===i?void 0:i.publicKey,null===i||void 0===i?void 0:i.displayName),publicKey:e.authorId,openTipModal:function(){},openUnlockModal:function(){},tipCounter:e.tipCounter||0,tipValue:e.tipValue||0,openDeleteModal:ye,"data-v-2ac612fc":""})},e.id)})),"services"===A&&(console.log(D),Object.entries(D).filter((function(e){var t=Object(o.a)(e,2);return t[0],!!t[1]})).map((function(t){var a=Object(o.a)(t,2),c=a[0],n=a[1];return Object(E.jsxs)("div",{className:"post","data-v-2ac612fc":"",children:[Object(E.jsx)("strong",{"data-v-2ac612fc":"",children:"Service ID"}),Object(E.jsx)("p",{"data-v-2ac612fc":"",children:c}),Object(E.jsx)("strong",{"data-v-2ac612fc":"",children:"Service Tpe"}),Object(E.jsx)("p",{"data-v-2ac612fc":"",children:n.serviceType||""}),Object(E.jsx)("strong",{"data-v-2ac612fc":"",children:"Service Title"}),Object(E.jsx)("p",{"data-v-2ac612fc":"",children:n.serviceTitle||""}),Object(E.jsx)("strong",{"data-v-2ac612fc":"",children:"Service Description"}),Object(E.jsx)("p",{"data-v-2ac612fc":"",children:n.serviceDescription||""}),Object(E.jsx)("strong",{"data-v-2ac612fc":"",children:"Service Condition"}),Object(E.jsx)("p",{"data-v-2ac612fc":"",children:n.serviceCondition||""}),Object(E.jsx)("strong",{"data-v-2ac612fc":"",children:"Service Price"}),Object(E.jsx)("p",{"data-v-2ac612fc":"",children:n.servicePrice||""}),Object(E.jsx)("button",{onClick:function(){console.log("delete wtf"),Object(h.d)(c)(e)},"data-v-2ac612fc":"",children:"DELETE SERVICE"})]},c)})))]}),Object(E.jsx)(B.a,{amt:200,"data-v-2ac612fc":""}),Object(E.jsxs)(C.a,{toggleModal:Q,modalOpen:c,contentStyle:{padding:"40px 30px"},"data-v-2ac612fc":"",children:[Object(E.jsx)(u.a,{bgColor:"#23282d",fgColor:"#4285b9",value:I,size:180,className:"profile-qrcode","data-v-2ac612fc":""}),Object(E.jsx)("p",{className:"profile-qrcode-desc","data-v-2ac612fc":"",children:"Other users can scan this code to contact you"}),!navigator.clipboard&&Object(E.jsx)("input",{className:"hidden-input",id:"public-key-holder",readOnly:!0,type:"text",value:I,"data-v-2ac612fc":""}),Object(E.jsxs)("div",{className:"profile-clipboard-container",onClick:we,"data-v-2ac612fc":"",children:[Object(E.jsx)("img",{src:z.a,className:"profile-clipboard-icon",alt:"","data-v-2ac612fc":""}),Object(E.jsx)("p",{className:"profile-clipboard-text","data-v-2ac612fc":"",children:"Tap to copy to clipboard"})]})]}),Object(E.jsxs)(C.a,{toggleModal:je,modalOpen:ee,contentStyle:{padding:"2em 2em"},"data-v-2ac612fc":"",children:[Object(E.jsx)("label",{htmlFor:"new-web-client-prefix","data-v-2ac612fc":"",children:"Web Client"}),Object(E.jsxs)("div",{className:"web-client-prefix-picker","data-v-2ac612fc":"",children:[Object(E.jsx)("i",{className:"far fa-copy",onClick:de,style:{fontSize:24},"data-v-2ac612fc":""}),Object(E.jsx)("select",{onChange:function(e){le(e.target.value)},name:"new-web-client-prefix",id:"new-web-client-prefix",value:re,"data-v-2ac612fc":"",children:G.map((function(e){return Object(E.jsx)("option",{value:e,"data-v-2ac612fc":"",children:e},e)}))}),Object(E.jsx)("span",{"data-v-2ac612fc":"",children:"/"}),Object(E.jsx)("span",{style:{fontSize:12},"data-v-2ac612fc":"",children:I})]}),!navigator.clipboard&&Object(E.jsx)("input",{className:"hidden-input",id:"web-client-url-holder",readOnly:!0,type:"text",value:re+"/"+I,"data-v-2ac612fc":""}),Object(E.jsx)("br",{"data-v-2ac612fc":""}),Object(E.jsx)("label",{htmlFor:"content-host","data-v-2ac612fc":"",children:"Content Host"}),Object(E.jsx)(H,{"data-v-2ac612fc":""}),Object(E.jsx)("br",{"data-v-2ac612fc":""}),fe&&Object(E.jsxs)("div",{className:"flex-center",style:{marginTop:"auto"},"data-v-2ac612fc":"",children:[Object(E.jsx)("button",{onClick:pe,className:"shock-form-button m-1","data-v-2ac612fc":"",children:"CANCEL"}),Object(E.jsx)("button",{onClick:ve,className:"shock-form-button-confirm m-1","data-v-2ac612fc":"",children:"SUBMIT"})]})]}),Object(E.jsxs)(C.a,{toggleModal:ye,modalOpen:N,contentStyle:{padding:"2em 2em"},"data-v-2ac612fc":"",children:[Object(E.jsx)("div",{"data-v-2ac612fc":"",children:"You sure delete"}),Object(E.jsxs)("div",{className:"flex-center",style:{marginTop:"auto"},"data-v-2ac612fc":"",children:[Object(E.jsx)("button",{onClick:Ne,className:"shock-form-button m-1","data-v-2ac612fc":"",children:"CANCEL"}),Object(E.jsx)("button",{onClick:Se,className:"shock-form-button-confirm m-1","data-v-2ac612fc":"",children:"DELETE"})]})]}),Object(E.jsx)(g.a,{onClick:Q,large:!0,iconURL:F.a,style:{backgroundColor:"var(--yellow)"},icon:null,label:null,"data-v-2ac612fc":""})]}),Object(E.jsx)(x.a,{"data-v-2ac612fc":""})]}),Object(E.jsx)("input",{type:"file",id:"avatar-file",ref:Oe,hidden:!0,accept:"image/*",onChange:Ce,"data-v-2ac612fc":""}),Object(E.jsxs)(C.a,{contentStyle:We,modalOpen:Pe,toggleModal:Fe,"data-v-2ac612fc":"",children:[Object(E.jsx)("label",{htmlFor:"newDisplayName","data-v-2ac612fc":"",children:"Display Name"}),Object(E.jsx)("input",{autoCapitalize:"none",autoCorrect:"off",type:"text",className:"input-field",placeholder:"New display name",name:"newDisplayName",onChange:function(e){var t=e.target.value;Ae(t)},value:Ue,"data-v-2ac612fc":""}),Ue!==De&&""!==Ue?Object(E.jsx)("button",{onClick:Le,className:"shock-form-button-confirm m-1","data-v-2ac612fc":"",children:"OK"}):Object(E.jsx)("button",{onClick:Fe,className:"shock-form-button m-1","data-v-2ac612fc":"",children:"GO BACK"})]}),Object(E.jsxs)(C.a,{contentStyle:st,modalOpen:Ge,toggleModal:it,"data-v-2ac612fc":"",children:[Object(E.jsx)("label",{htmlFor:"newBio","data-v-2ac612fc":"",children:"New Bio"}),Object(E.jsx)("input",{autoCapitalize:"none",autoCorrect:"off",type:"text",className:"input-field",placeholder:"New bio",name:"newBio",onChange:function(e){var t=e.target.value;Xe(t)},value:Ze,"data-v-2ac612fc":""}),Ze!==Je&&""!==Ze?Object(E.jsx)("button",{onClick:ot,className:"shock-form-button-confirm m-1","data-v-2ac612fc":"",children:"OK"}):Object(E.jsx)("button",{onClick:it,className:"shock-form-button m-1","data-v-2ac612fc":"",children:"GO BACK"})]})]})}}}]);
//# sourceMappingURL=18.ee409107.chunk.js.map