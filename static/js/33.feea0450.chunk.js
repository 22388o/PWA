(this["webpackJsonpshocknet-pwa"]=this["webpackJsonpshocknet-pwa"]||[]).push([[33],{593:function(e,t,a){},706:function(e,t,a){"use strict";a.r(t);var n=a(2),s=a.n(n),c=a(6),r=a(14),o=a(3),i=a(22),b=a(51),d=a(15),u=a(564),l=a(444),p=a(563),v=a(467),j=a(479),m=a(145),O=(a(593),a(7));t.default=function(){var e=Object(i.h)(),t=Object(i.g)(),a=Object(o.useState)(0),n=Object(r.a)(a,2),x=n[0],f=n[1],k=Object(o.useState)(""),y=Object(r.a)(k,2),h=y[0],g=y[1],w=Object(o.useState)("sats"),C=Object(r.a)(w,2),q=C[0],S=C[1],N=Object(o.useState)(),R=Object(r.a)(N,2),P=R[0],E=R[1],D=Object(o.useState)(""),J=Object(r.a)(D,2),L=J[0],M=J[1],Q=Object(o.useState)(!1),A=Object(r.a)(Q,2),B=(A[0],A[1]),I=Object(o.useState)(!1),T=Object(r.a)(I,2),_=T[0],z=T[1],F=Object(o.useCallback)((function(e){"amount"===e.target.name&&f(e.target.value),"description"===e.target.name&&g(e.target.value),"unit"===e.target.name&&S(e.target.value)}),[]),G=Object(o.useCallback)(function(){var e=Object(c.a)(s.a.mark((function e(t){var a,n,c;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("selectContact:",t),B(!0),E(t),!t||"invoice"!==t.type){e.next=12;break}return e.next=6,d.a.post("/api/lnd/decodePayReq",{payReq:t.paymentRequest});case 6:a=e.sent,n=a.data,c=n.decodedRequest,f(c.num_satoshis),S("sats"),g(c.description);case 12:B(!1);case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[]);Object(o.useEffect)((function(){var t=e.state;if(t&&t.data&&t.data.type){var a=t.data;switch(a.type){case"btc":G({type:"btc",address:a.address}),a.amount&&f(a.amount);break;case"ln":G({type:"invoice",paymentRequest:a.request});break;case"keysend":G({type:"keysend",dest:a.address})}e.state={}}}),[e,G,f]);var H=Object(o.useCallback)(Object(c.a)(s.a.mark((function e(){var t,a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!P){e.next=6;break}return e.next=3,d.a.post("/api/lnd/sendcoins",{addr:P.address,amount:x});case 3:t=e.sent,a=t.data,console.log(a);case 6:case"end":return e.stop()}}),e)}))),[x,P]),K=Object(o.useCallback)(Object(c.a)(s.a.mark((function e(){var t,a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!P){e.next=6;break}return e.next=3,d.a.post("/api/lnd/sendpayment",{dest:P.dest,payreq:P.paymentRequest,amt:P.paymentRequest?"0":x,feeLimit:.006*x+10,keysend:"keysend"===P.type});case 3:t=e.sent,a=t.data,console.log(a);case 6:case"end":return e.stop()}}),e)}))),[x,P]),U=Object(o.useCallback)(Object(c.a)(s.a.mark((function e(){var t;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!P){e.next=5;break}return e.next=3,d.a.post("/api/gun/sendpayment",{recipientPub:P.pk,amount:parseInt(x),feeLimit:.006*x+10,memo:h});case 3:t=e.sent,t.data;case 5:case"end":return e.stop()}}),e)}))),[x,P,h]),V=Object(o.useCallback)(Object(c.a)(s.a.mark((function e(){var a,n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,M(""),z(!0),"btc"!==(null===P||void 0===P?void 0:P.type)){e.next=6;break}return e.next=6,H();case 6:if(!["invoice","keysend"].includes(null===P||void 0===P?void 0:P.type)){e.next=9;break}return e.next=9,K();case 9:if("contact"!==(null===P||void 0===P?void 0:P.type)){e.next=12;break}return e.next=12,U();case 12:t.push("/overview"),z(!1),e.next=22;break;case 16:throw e.prev=16,e.t0=e.catch(0),console.error(e.t0),M(null!==(a=null===(n=e.t0.response)||void 0===n?void 0:n.data.errorMessage)&&void 0!==a?a:e.t0.message),z(!1),e.t0;case 22:case"end":return e.stop()}}),e,null,[[0,16]])}))),[P,t,H,U,K]);return Object(O.jsxs)(v.a,{containerClassName:"send-page",title:"SEND","data-v-7392b8b2":"",children:[Object(O.jsxs)("div",{className:"send-form-container","data-v-7392b8b2":"",children:[_?Object(O.jsx)(m.a,{fullScreen:!0,overlay:!0,text:"Processing Payment...","data-v-7392b8b2":""}):null,L?Object(O.jsx)("p",{className:"form-error","data-v-7392b8b2":"",children:L}):null,P?null:Object(O.jsxs)(b.b,{className:"scan-qr-btn",to:"/QRScanner","data-v-7392b8b2":"",children:[Object(O.jsx)("i",{className:"scan-qr-icon icon icon-solid-scan","data-v-7392b8b2":""}),Object(O.jsx)("p",{className:"scan-qr-text","data-v-7392b8b2":"",children:"Scan QR"})]}),P?Object(O.jsx)(j.a,{selected:!0,contact:P,selectContact:G,"data-v-7392b8b2":""}):Object(O.jsx)(p.a,{selectContact:G,features:["btc","keysend","contact","invoice"],"data-v-7392b8b2":""}),Object(O.jsxs)("div",{className:"inputs-group","data-v-7392b8b2":"",children:[Object(O.jsx)(l.a,{name:"amount",label:"Enter Amount",onChange:F,value:x,disabled:"invoice"===(null===P||void 0===P?void 0:P.type),inputMode:"decimal","data-v-7392b8b2":""}),Object(O.jsxs)("select",{name:"unit",className:"unit-dropdown",onChange:F,value:q,disabled:"invoice"===(null===P||void 0===P?void 0:P.type),"data-v-7392b8b2":"",children:[Object(O.jsx)("option",{value:"sats","data-v-7392b8b2":"",children:"sats"}),Object(O.jsx)("option",{value:"btc","data-v-7392b8b2":"",children:"BTC"})]})]}),Object(O.jsx)(l.a,{name:"description",label:"Description",element:"textarea",onChange:F,type:"textarea",value:h,disabled:"invoice"===(null===P||void 0===P?void 0:P.type),"data-v-7392b8b2":""})]}),Object(O.jsx)(u.a,{disabled:!P,onSuccess:V,"data-v-7392b8b2":""})]})}}}]);
//# sourceMappingURL=33.feea0450.chunk.js.map