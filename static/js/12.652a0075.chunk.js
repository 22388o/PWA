(this["webpackJsonpshocknet-pwa"]=this["webpackJsonpshocknet-pwa"]||[]).push([[12],{580:function(e,t,a){"use strict";var n=a(2),c=a(83),s=a.n(c),o=(a(585),a(4)),r=function(e){var t=e.children,a=e.style;return Object(o.jsx)("div",{className:"content",style:a,"data-v-9dfd4ce3":"",children:t})},i=(a(586),function(e){var t=e.title,a=e.toggleModal;return t?Object(o.jsxs)("div",{className:"head","data-v-15dacb63":"",children:[Object(o.jsx)("p",{className:"head-title","data-v-15dacb63":"",children:t}),Object(o.jsx)("div",{className:"head-close",onClick:a,"data-v-15dacb63":"",children:Object(o.jsx)("i",{className:"fas fa-times","data-v-15dacb63":""})})]}):null});a(587),t.a=function(e){var t=e.modalOpen,a=void 0!==t&&t,c=e.toggleModal,l=e.modalTitle,u=void 0===l?"":l,d=e.children,b=e.contentStyle,f=void 0===b?{}:b,j=e.disableBackdropClose,v=void 0!==j&&j,p=Object(n.useCallback)((function(){c()}),[c]),m=Object(n.useCallback)((function(){v||c()}),[v,c]);return Object(o.jsxs)("div",{className:s()({modal:!0,open:a}),"data-v-6c508060":"",children:[Object(o.jsx)("div",{className:"backdrop",onClick:m,"data-v-6c508060":""}),Object(o.jsxs)("div",{className:"container","data-v-6c508060":"",children:[Object(o.jsx)(i,{title:u,toggleModal:p,"data-v-6c508060":""}),Object(o.jsx)(r,{style:f,"data-v-6c508060":"",children:d})]})]})}},582:function(e,t,a){"use strict";var n=a(35),c=a(83),s=a.n(c),o=(a(588),a(4));t.a=function(e){var t=e.label,a=e.name,c=e.onChange,r=e.inputAction,i=e.actionIcon,l=e.value,u=e.inputMode,d=void 0===u?"text":u,b=e.type,f=void 0===b?"text":b,j=e.element,v=void 0===j?"input":j,p=e.small,m=void 0!==p&&p,O=e.disabled;return Object(o.jsxs)("div",{className:s()({group:!0,"group-disabled":O,"group-small":m}),"data-v-e0923d96":"",children:[t?Object(o.jsx)("p",{className:"group-label","data-v-e0923d96":"",children:t}):null,Object(o.jsxs)("div",{className:s()({"group-input-container":!0,"group-input-textarea-container":"textarea"===v}),"data-v-e0923d96":"",children:["textarea"===v?Object(o.jsx)("textarea",{className:"group-input group-input-textarea",name:a,onChange:c,inputMode:d,value:l,disabled:O,"data-v-e0923d96":""}):Object(o.jsx)("input",{className:"group-input",type:f,name:a,onChange:c,inputMode:d,value:l,disabled:O,"data-v-e0923d96":""}),r&&i?Object(o.jsx)("div",{className:"group-input-action",onClick:r,"data-v-e0923d96":"",children:Object(o.jsx)("i",{className:s()(Object(n.a)({"group-input-action-icon":!0,fas:!0},i,!0)),onClick:r,"data-v-e0923d96":""})}):null]})]})}},585:function(e,t,a){},586:function(e,t,a){},587:function(e,t,a){},588:function(e,t,a){},594:function(e,t,a){"use strict";a(2),a(616),a(617);var n=a(4);t.a=function(e){var t=e.text,a=void 0===t?"Submit":t,c=e.onClick;return Object(n.jsx)("div",{className:"submit-btn",onClick:c,"data-v-314f7011":"",children:Object(n.jsx)("p",{className:"submit-btn-text","data-v-314f7011":"",children:a})})}},595:function(e,t,a){"use strict";var n=a(60),c=a(4);t.a=function(){return Object(c.jsxs)("div",{className:"bottom-nav-container",children:[Object(c.jsx)(n.c,{className:"bottom-nav-btn",to:"/overview",activeClassName:"active-nav-btn",children:Object(c.jsx)("i",{className:"bottom-nav-btn-icon icon-thin-wallet"})}),Object(c.jsx)(n.c,{className:"bottom-nav-btn",to:"/chat",activeClassName:"active-nav-btn",children:Object(c.jsx)("i",{className:"bottom-nav-btn-icon icon-thin-chat"})}),Object(c.jsx)(n.c,{className:"bottom-nav-btn",to:"/profile",activeClassName:"active-nav-btn",children:Object(c.jsx)("i",{className:"bottom-nav-btn-icon icon-thin-profile"})}),Object(c.jsx)(n.c,{className:"bottom-nav-btn",to:"/feed",activeClassName:"active-nav-btn",children:Object(c.jsx)("i",{className:"bottom-nav-btn-icon icon-thin-feed"})})]})}},610:function(e,t,a){"use strict";a.d(t,"a",(function(){return x}));var n=a(22),c=a(3),s=a.n(c),o=a(5),r=a(0),i=a(17),l=a(637),u=a.n(l),d=a(666),b=a.n(d),f=function(){var e=Object(o.a)(s.a.mark((function e(t){var a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,b.a._init){e.next=4;break}return e.next=4,new Promise((function(e,t){b.a.init("ShockWalletStore").then((function(){return console.log("File cache initialized!"),b.a.persist()})).then((function(a){a.persistent?e(a):t(a)}))}));case 4:return e.next=6,b.a.load(t);case 6:return a=e.sent,e.abrupt("return",a.createURL());case 10:return e.prev=10,e.t0=e.catch(0),console.warn(e.t0),e.abrupt("return",!1);case 14:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t){return e.apply(this,arguments)}}(),j=function(e,t){var a=document.querySelectorAll(t);return a&&a.length&&a.forEach((function(t){t.src||(t.src=e,t.muted=!0,t.autoplay=!0)})),!!(null===a||void 0===a?void 0:a.length)},v=function(e,t){return b.a.save(e,t)},p=function(e){var t=Promise.resolve();return e.forEach((function(e){t=t.then((function(){return e()}))})),t},m={"video/embedded":{formats:["mp4","webm"],element:"video",options:{autoplay:!0,muted:!0}},"image/embedded":{formats:["jpg","png","webp","jpeg"],element:"img",options:{}}},O=function(e){var t,a,n=null===(t=e.name)||void 0===t||null===(a=t.split("."))||void 0===a?void 0:a.slice(-1)[0],c=Object.entries(m).filter((function(e){var t=Object(i.a)(e,2);t[0];return t[1].formats.includes(n)}))[0];if(c){var s=Object(i.a)(c,2),o=s[0],l=s[1];return Object(r.a)({name:o},l)}return null},h=new u.a,x=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],a=arguments.length>2&&void 0!==arguments[2]&&arguments[2],c=e.map((function(e){var n=e.contentItems,c=e.id;return Object.entries(n).filter((function(e){var t=Object(i.a)(e,2),a=(t[0],t[1]);return m[a.type]})).map((function(e){var n=Object(i.a)(e,2),r=n[0],l=n[1];return function(){return new Promise((function(e){!h.get(l.magnetURI)||a?h.add(l.magnetURI,function(){var a=Object(o.a)(s.a.mark((function a(n){var u;return s.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:e(!0),(u=n.files.filter((function(e){var t,a,n=null===(t=e.name)||void 0===t||null===(a=t.split("."))||void 0===a?void 0:a.slice(-1)[0],c=Object.entries(m).filter((function(e){var t=Object(i.a)(e,2);t[0];return t[1].formats.includes(n)}))[0];return!!c&&Object(i.a)(c,2)[1].formats.includes(n)}))).map(function(){var e=Object(o.a)(s.a.mark((function e(a){var n,o,u,d,b,v;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=O(a)){e.next=3;break}return e.abrupt("return");case 3:return o="".concat(c,"-").concat(r,"-").concat(a.name),u=n.element,d="".concat(u,'[data-torrent="').concat(l.magnetURI,'"]'),e.next=8,f(o);case 8:if(!(b=e.sent)){e.next=14;break}return(v=h.get(l.magnetURI))&&v.destroy(),j(b,d),e.abrupt("return");case 14:document.querySelectorAll(d).forEach((function(e){var c=decodeURIComponent(l.magnetURI.replace(/.*(ws=)/gi,"")),s=n.formats.filter((function(e){return c.toLowerCase().endsWith(".".concat(e.toLowerCase()))})),o=Object(i.a)(s,1)[0],r=e.getAttribute("src");!t&&o||r?e.setAttribute("src",c):a.renderTo(e,n.options)}));case 16:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),n.on("done",(function(){u.map((function(e){var t=O(e),a="".concat(c,"-").concat(r,"-").concat(e.name),n=t.element,i="".concat(n,'[data-torrent="').concat(l.magnetURI,'"]');return e.getBlob(function(){var e=Object(o.a)(s.a.mark((function e(t,n){var c,o;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=3;break}return console.warn(t),e.abrupt("return");case 3:return e.next=5,v(a,n);case 5:if("false"!==(null===(c=document.querySelector(i))||void 0===c?void 0:c.dataset.played)||(null===c||void 0===c?void 0:c.getAttribute("src"))){e.next=11;break}return e.next=9,f(a);case 9:o=e.sent,j(o,i);case 11:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}()),e}))}));case 4:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()):e(!0)}))}}))})).reduce((function(e,t){return[].concat(Object(n.a)(e),Object(n.a)(t))}),[]);p(c)}},616:function(e,t,a){},617:function(e,t,a){},638:function(e,t){},640:function(e,t){},641:function(e,t){},642:function(e,t){},643:function(e,t){},645:function(e,t){},646:function(e,t){},647:function(e,t){},651:function(e,t){},652:function(e,t){},653:function(e,t){},654:function(e,t){},655:function(e,t){},656:function(e,t){},657:function(e,t){},658:function(e,t){},659:function(e,t){},660:function(e,t){},661:function(e,t){},662:function(e,t){},663:function(e,t){},664:function(e,t){},667:function(e,t,a){"use strict";var n=a(3),c=a.n(n),s=a(5),o=a(17),r=a(2),i=a(47),l=a(580),u=a(594),d=a(582),b=a(39),f=a(176),j=(a(668),a(4));t.a=function(e){var t=e.tipData,a=e.toggleOpen,n=Object(i.b)(),v=Object(r.useState)(""),p=Object(o.a)(v,2),m=p[0],O=p[1],h=Object(r.useState)(!1),x=Object(o.a)(h,2),g=x[0],N=x[1],k=Object(r.useState)(0),y=Object(o.a)(k,2),w=y[0],S=y[1],C=Object(r.useState)(!1),D=Object(o.a)(C,2),I=D[0],M=D[1],P=Object(r.useCallback)((function(e){"amount"===e.target.name&&S(e.target.value)}),[]),T=Object(r.useCallback)(function(){var e=Object(s.a)(c.a.mark((function e(a){var s,o,r,i;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.preventDefault(),e.prev=1,N(!0),e.next=5,n(Object(b.h)({amount:w,publicKey:t.publicKey,postId:t.postID}));case 5:M(!0),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(1),console.error(e.t0),t&&(r=e.t0.message,i=null===(s=e.t0.response)||void 0===s||null===(o=s.data)||void 0===o?void 0:o.errorMessage,O(null!==i&&void 0!==i?i:r));case 12:return e.prev=12,N(!1),e.finish(12);case 15:case"end":return e.stop()}}),e,null,[[1,8,12,15]])})));return function(t){return e.apply(this,arguments)}}(),[n,w,t]);return Object(r.useEffect)((function(){t||(N(!1),O(null),M(!1))}),[t]),Object(j.jsx)(l.a,{toggleModal:a,modalOpen:!!t,modalTitle:"Send Tip","data-v-3b163c1e":"",children:I?Object(j.jsxs)("div",{className:"tip-modal-success m-1","data-v-3b163c1e":"",children:[Object(j.jsx)("i",{className:"tip-success-icon fas fa-check-circle","data-v-3b163c1e":""}),Object(j.jsx)("p",{className:"tip-success-title","data-v-3b163c1e":"",children:"Post tipped successfully!"}),Object(j.jsx)("p",{className:"tip-success-desc","data-v-3b163c1e":""})]}):Object(j.jsxs)("form",{className:"modal-form tip-form m-1",onSubmit:T,"data-v-3b163c1e":"",children:[m?Object(j.jsx)("div",{className:"form-error","data-v-3b163c1e":"",children:m}):null,g?Object(j.jsx)(f.a,{overlay:!0,text:"Sending Tip...","data-v-3b163c1e":""}):null,Object(j.jsx)("p",{className:"tip-modal-desc m-1","data-v-3b163c1e":"",children:"Please specify the amount of sats you'd like to tip this user with below."}),Object(j.jsx)(d.a,{name:"amount",onChange:P,value:w,inputMode:"decimal",small:!0,"data-v-3b163c1e":""}),Object(j.jsx)(u.a,{text:"SEND TIP",onClick:T,"data-v-3b163c1e":""})]})})}},668:function(e,t,a){},669:function(e,t,a){"use strict";var n=a(3),c=a.n(n),s=a(5),o=a(17),r=a(2),i=a(47),l=a(580),u=a(594),d=a(176),b=(a(670),a(9)),f=a(4);t.a=function(e){var t=e.shareData,a=e.toggleOpen,n=Object(i.b)(),j=Object(r.useState)(""),v=Object(o.a)(j,2),p=v[0],m=v[1],O=Object(r.useState)(!1),h=Object(o.a)(O,2),x=h[0],g=h[1],N=Object(r.useState)(!1),k=Object(o.a)(N,2),y=k[0],w=k[1],S=Object(r.useCallback)(function(){var e=Object(s.a)(c.a.mark((function e(a){var n,s,o,r;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.preventDefault(),e.prev=1,g(!0),n=t.postID,s=t.publicKey,o={originalAuthor:s,shareDate:Date.now()},e.next=7,b.b.post("/api/gun/put",{path:"$user>sharedPosts>".concat(n),value:o});case 7:r=e.sent,r.data.ok?w(!0):m("Share operation failed"),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(1),console.error(e.t0);case 15:return e.prev=15,g(!1),e.finish(15);case 18:case"end":return e.stop()}}),e,null,[[1,12,15,18]])})));return function(t){return e.apply(this,arguments)}}(),[n,t]);return Object(r.useEffect)((function(){t||(g(!1),m(null),w(!1))}),[t]),Object(f.jsx)(l.a,{toggleModal:a,modalOpen:!!t,modalTitle:"Share post","data-v-f1492ce4":"",children:y?Object(f.jsxs)("div",{className:"tip-modal-success m-1","data-v-f1492ce4":"",children:[Object(f.jsx)("i",{className:"tip-success-icon fas fa-check-circle","data-v-f1492ce4":""}),Object(f.jsx)("p",{className:"tip-success-title","data-v-f1492ce4":"",children:"Post shared successfully!"})]}):Object(f.jsxs)("form",{className:"modal-form tip-form m-1",onSubmit:S,"data-v-f1492ce4":"",children:[p?Object(f.jsx)("div",{className:"form-error","data-v-f1492ce4":"",children:p}):null,x?Object(f.jsx)(d.a,{overlay:!0,text:"Sharing...","data-v-f1492ce4":""}):null,Object(f.jsx)("p",{className:"tip-modal-desc m-1","data-v-f1492ce4":"",children:"This post will be shared on your profile"}),Object(f.jsx)(u.a,{text:"SHARE",onClick:S,"data-v-f1492ce4":""})]})})}},670:function(e,t,a){},671:function(e,t,a){"use strict";var n=a(3),c=a.n(n),s=a(5),o=a(17),r=a(2),i=a(47),l=a(580),u=a(594),d=a(28),b=a(176),f=(a(672),a(4));t.a=function(e){var t=e.unlockData,a=e.toggleOpen,n=Object(i.b)(),j=Object(r.useState)(""),v=Object(o.a)(j,2),p=v[0],m=v[1],O=Object(r.useState)(!1),h=Object(o.a)(O,2),x=h[0],g=h[1],N=Object(r.useState)(!1),k=Object(o.a)(N,2),y=k[0],w=k[1],S=Object(r.useCallback)(function(){var e=Object(s.a)(c.a.mark((function e(a){var s,o,r,i;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.preventDefault(),e.prev=1,g(!0),e.next=5,Object(d.o)(100,t.publicKey,t.postID)(n);case 5:w(!0),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(1),console.error(e.t0),t&&(r=e.t0.message,i=null===(s=e.t0.response)||void 0===s||null===(o=s.data)||void 0===o?void 0:o.errorMessage,m(null!==i&&void 0!==i?i:r));case 12:return e.prev=12,g(!1),e.finish(12);case 15:case"end":return e.stop()}}),e,null,[[1,8,12,15]])})));return function(t){return e.apply(this,arguments)}}(),[n,t]);return Object(r.useEffect)((function(){t||(g(!1),m(null),w(!1))}),[t]),Object(f.jsx)(l.a,{toggleModal:a,modalOpen:!!t,modalTitle:"Unlock content","data-v-dfa7d99b":"",children:y?Object(f.jsxs)("div",{className:"tip-modal-success","data-v-dfa7d99b":"",children:[Object(f.jsx)("i",{className:"tip-success-icon fas fa-check-circle","data-v-dfa7d99b":""}),Object(f.jsx)("p",{className:"tip-success-title","data-v-dfa7d99b":"",children:"Content unlocked successfully!"})]}):Object(f.jsxs)("form",{className:"modal-form tip-form",onSubmit:S,"data-v-dfa7d99b":"",children:[p?Object(f.jsx)("div",{className:"form-error","data-v-dfa7d99b":"",children:p}):null,x?Object(f.jsx)(b.a,{overlay:!0,text:"Sending Tip...","data-v-dfa7d99b":""}):null,Object(f.jsx)("p",{className:"tip-modal-desc","data-v-dfa7d99b":"",children:"100 sats will be sent to the owner of the post to unlock the content"}),Object(f.jsx)(u.a,{text:"UNLOCK",onClick:S,"data-v-dfa7d99b":""})]})})}},672:function(e,t,a){},824:function(e,t,a){},825:function(e,t,a){e.exports={followed:"Feed_followed__1ZWr5"}},868:function(e,t,a){"use strict";a.r(t);var n=a(17),c=a(2),s=a.n(c),o=a(13),r=a(26),i=a(610),l=a(20),u=a(595),d=a(667),b=a(669),f=a(176),j=a(581),v=(a(824),a(671)),p=a(39),m=a(57),O=a(825),h=a.n(O),x=a(4),g=s.a.lazy((function(){return Promise.all([a.e(2),a.e(1),a.e(8)]).then(a.bind(null,600))})),N=s.a.lazy((function(){return Promise.all([a.e(2),a.e(1),a.e(27)]).then(a.bind(null,673))}));t.default=function(){var e=l.useDispatch(),t=Object(r.g)(),a=l.useSelector(l.selectFollows),s=l.useSelector(l.selectAllPostsFromFollowedNewestToOldest),O=Object(c.useState)(null),k=Object(n.a)(O,2),y=k[0],w=k[1],S=Object(c.useState)(null),C=Object(n.a)(S,2),D=C[0],I=C[1],M=Object(c.useState)(null),P=Object(n.a)(M,2),T=P[0],U=P[1],E=l.useSelector(l.selectSelfUser).publicKey,A=l.useSelector((function(e){return e.feed.reloadDone}));Object(c.useEffect)((function(){return e(Object(p.o)()),function(){e(Object(p.q)())}}),[e]);var K=Object(c.useCallback)((function(e){console.log(e),!y&&e||w(null),w(e)}),[y]),R=Object(c.useCallback)((function(e){console.log(e),!D&&e||I(null),I(e)}),[D]),F=Object(c.useCallback)((function(e){console.log(e),!T&&e||U(null),U(e)}),[T]);return Object(c.useLayoutEffect)((function(){Object(i.a)(s.filter((function(e){return!o.n(e)})),!1)}),[s]),Object(c.useEffect)((function(){var t=a.map((function(t){var a=e(Object(m.b)(t.user)),n=e(Object(p.p)(t.user)),c=e(Object(p.m)(t.user));return function(){a(),n(),c()}}));return function(){t.map((function(e){return e()}))}}),[a,e]),Object(c.useEffect)((function(){s.length>0&&!A&&(e(Object(p.g)()),setTimeout((function(){t.go(0)}),3e3))}),[A,t,e,s.length]),Object(x.jsxs)("div",{className:"page-container feed-page","data-v-bb08dda6":"",children:[Object(x.jsxs)("div",{className:h.a.followed,"data-v-bb08dda6":"",children:[Object(x.jsx)(j.a,{forceAddBtn:!0,height:60,publicKey:E,onPress:Object(c.useCallback)((function(){t.push("/createPost")}),[t]),"data-v-bb08dda6":""}),null===a||void 0===a?void 0:a.map((function(e){return Object(x.jsx)(j.a,{height:60,nameAtBottom:!0,publicKey:e.user,"data-v-bb08dda6":""},e.user)}))]}),Object(x.jsxs)("div",{className:"tabs-holder","data-v-bb08dda6":"",children:[Object(x.jsx)("p",{className:"tab active","data-v-bb08dda6":"",children:"Feed"}),Object(x.jsx)("p",{className:"tab","data-v-bb08dda6":"",children:"Saved"}),Object(x.jsx)("p",{className:"tab","data-v-bb08dda6":"",children:"Videos"})]}),Object(x.jsxs)("div",{className:"posts-holder","data-v-bb08dda6":"",children:[0===s.length&&Object(x.jsx)(f.a,{text:"loading posts...","data-v-bb08dda6":""}),s.map((function(e){return o.n(e)?Object(x.jsx)(c.Suspense,{fallback:Object(x.jsx)(f.a,{"data-v-bb08dda6":""}),"data-v-bb08dda6":"",children:Object(x.jsx)(N,{openTipModal:K,openUnlockModal:R,openShareModal:F,postID:e.originalPostID,sharerPublicKey:e.sharedBy,"data-v-bb08dda6":""})},e.shareID):Object(x.jsx)(c.Suspense,{fallback:Object(x.jsx)(f.a,{"data-v-bb08dda6":""}),"data-v-bb08dda6":"",children:Object(x.jsx)(g,{id:e.id,publicKey:e.authorId,openTipModal:K,openUnlockModal:R,openShareModal:F,"data-v-bb08dda6":""})},e.id)}))]}),Object(x.jsx)(d.a,{tipData:y,toggleOpen:K,"data-v-bb08dda6":""}),Object(x.jsx)(v.a,{unlockData:D,toggleOpen:R,"data-v-bb08dda6":""}),Object(x.jsx)(b.a,{shareData:T,toggleOpen:F,"data-v-bb08dda6":""}),Object(x.jsx)(u.a,{"data-v-bb08dda6":""})]})}}}]);
//# sourceMappingURL=12.652a0075.chunk.js.map