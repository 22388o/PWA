(this["webpackJsonpshocknet-pwa"]=this["webpackJsonpshocknet-pwa"]||[]).push([[19],{566:function(e,t,a){"use strict";var c=a(3),n=a(81),s=a.n(n),i=(a(574),a(4)),r=function(e){var t=e.children,a=e.style;return Object(i.jsx)("div",{className:"content",style:a,"data-v-e8c2a3a4":"",children:t})},d=(a(575),function(e){var t=e.title,a=e.toggleModal;return t?Object(i.jsxs)("div",{className:"head","data-v-23abbd18":"",children:[Object(i.jsx)("p",{className:"head-title","data-v-23abbd18":"",children:t}),Object(i.jsx)("div",{className:"head-close",onClick:a,"data-v-23abbd18":"",children:Object(i.jsx)("i",{className:"fas fa-times","data-v-23abbd18":""})})]}):null});a(576),t.a=function(e){var t=e.modalOpen,a=void 0!==t&&t,n=e.toggleModal,l=e.modalTitle,o=void 0===l?"":l,b=e.children,u=e.contentStyle,j=void 0===u?{}:u,v=Object(c.useCallback)((function(){n()}),[n]);return Object(i.jsxs)("div",{className:s()({modal:!0,open:a}),"data-v-60ba06fc":"",children:[Object(i.jsx)("div",{className:"backdrop",onClick:v,"data-v-60ba06fc":""}),Object(i.jsxs)("div",{className:"container","data-v-60ba06fc":"",children:[Object(i.jsx)(d,{title:o,toggleModal:v,"data-v-60ba06fc":""}),Object(i.jsx)(r,{style:j,"data-v-60ba06fc":"",children:b})]})]})}},571:function(e,t,a){"use strict";var c=a(3),n=a(81),s=a.n(n),i=(a(572),a(44)),r=a(19),d=a(85),l=a(565),o=a(18),b=a(4);t.a=function(e){var t=e.pageTitle,a=e.absolute,n=void 0!==a&&a,u=e.solid,j=void 0!==u&&u,v=e.enableBackButton,f=void 0!==v&&v,m=e.onHeight,O=void 0===m?r.a:m,h=Object(i.b)(),p=Object(c.useCallback)((function(){window.history.back()}),[]),x=Object(c.useCallback)((function(){h(Object(d.c)())}),[h]),N=Object(o.useSelector)((function(e){return e.node.publicKey})),g=Object(c.useCallback)((function(e){if(e)try{O(e.getBoundingClientRect().height)}catch(t){console.log("Error inside onHeight mechanism in MainNav:"),console.log(t)}}),[O]);return Object(b.jsxs)("div",{className:s()({"main-nav-container":!0,"main-nav-absolute":n,"main-nav-solid":j}),ref:g,"data-v-ffea586f":"",children:[f?Object(b.jsx)("div",{className:"main-nav-back",onClick:p,"data-v-ffea586f":"",children:Object(b.jsx)("i",{className:"icon icon-thin-back","data-v-ffea586f":""})}):Object(b.jsx)(l.a,{height:40,publicKey:N,"data-v-ffea586f":""}),Object(b.jsx)("p",{className:"main-nav-title unselectable","data-v-ffea586f":"",children:t}),Object(b.jsxs)("div",{className:"main-nav-menu-btn",onClick:x,"data-v-ffea586f":"",children:[Object(b.jsx)("div",{className:"main-nav-menu-dash","data-v-ffea586f":""}),Object(b.jsx)("div",{className:"main-nav-menu-dash","data-v-ffea586f":""}),Object(b.jsx)("div",{className:"main-nav-menu-dash","data-v-ffea586f":""})]})]})}},572:function(e,t,a){},574:function(e,t,a){},575:function(e,t,a){},576:function(e,t,a){},580:function(e,t,a){"use strict";var c=a(58),n=a(4);t.a=function(){return Object(n.jsxs)("div",{className:"bottom-nav-container",children:[Object(n.jsx)(c.c,{className:"bottom-nav-btn",to:"/overview",activeClassName:"active-nav-btn",children:Object(n.jsx)("i",{className:"bottom-nav-btn-icon icon-thin-wallet"})}),Object(n.jsx)(c.c,{className:"bottom-nav-btn",to:"/chat",activeClassName:"active-nav-btn",children:Object(n.jsx)("i",{className:"bottom-nav-btn-icon icon-thin-chat"})}),Object(n.jsx)(c.c,{className:"bottom-nav-btn",to:"/profile",activeClassName:"active-nav-btn",children:Object(n.jsx)("i",{className:"bottom-nav-btn-icon icon-thin-profile"})}),Object(n.jsx)(c.c,{className:"bottom-nav-btn",to:"/feed",activeClassName:"active-nav-btn",children:Object(n.jsx)("i",{className:"bottom-nav-btn-icon icon-thin-feed"})})]})}},588:function(e,t,a){"use strict";var c=a(12),n=a(3),s=a(81),i=a.n(s),r=(a(589),a(4));t.a=function(e){var t=e.label,a=void 0===t?null:t,s=e.icon,d=void 0===s?null:s,l=e.iconURL,o=void 0===l?null:l,b=e.onClick,u=void 0===b?void 0:b,j=e.nestedMode,v=void 0!==j&&j,f=e.large,m=void 0!==f&&f,O=e.small,h=void 0!==O&&O,p=e.relative,x=void 0!==p&&p,N=e.children,g=void 0===N?null:N,k=e.style,C=void 0===k?{}:k,y=Object(n.useState)(!1),q=Object(c.a)(y,2),S=q[0],w=q[1],R=Object(n.useCallback)((function(){v&&w(!S)}),[S,v]),E=Object(n.useMemo)((function(){return o?Object(r.jsx)("img",{src:o,className:"add-btn-icon",alt:"","data-v-34ee7299":""}):Object(r.jsx)("i",{className:"fas fa-".concat(null!==d&&void 0!==d?d:"plus"),"data-v-34ee7299":""})}),[d,o]),M=Object(n.useMemo)((function(){return a?Object(r.jsx)("p",{className:"add-btn-label","data-v-34ee7299":"",children:a}):null}),[a]);return Object(r.jsxs)("div",{className:i()({"add-btn-container":!0,"add-btn-round-container":!a,"add-btn-large":m,"add-btn-small":h}),"data-v-34ee7299":"",children:[Object(r.jsxs)("div",{className:i()({"add-btn":!0,"add-btn-round":!a,"add-btn-extended":!!a,"add-btn-relative":x,"add-btn-open":S,"add-btn-nested":v}),onClick:null!==u&&void 0!==u?u:R,style:C,"data-v-34ee7299":"",children:[E,M]}),g?Object(r.jsx)("div",{className:i()({"add-btn-options":!0,"add-btn-options-open":S}),"data-v-34ee7299":"",children:g}):null]})}},589:function(e,t,a){},591:function(e,t,a){"use strict";a.d(t,"a",(function(){return c}));var c=function(){return!navigator.userAgent.match(/(iPad)|(iPhone)|(iPod)|(android)|(webOS)/i)}},596:function(e,t,a){"use strict";var c=a(612),n=a(591),s=(a(597),a(4)),i={wizard:{title:"SCAN A",target:"QR CODE",description:"Point your camera at a ShockWizard QR Code"},invoice:{title:"SCAN AN",target:"INVOICE",description:"Point your camera at an LND Invoice"}};t.a=function(e){var t=e.mode,a=void 0===t?"wizard":t,r=e.onScan,d=e.onError,l=e.onClose,o=i[a],b={};return Object(n.a)()||(b.facingMode={exact:"environment"}),Object(s.jsxs)("div",{className:"qr-code-scanner-container","data-v-8b9f42fc":"",children:[Object(s.jsx)("div",{className:"qr-scanner-top-section","data-v-8b9f42fc":"",children:Object(s.jsx)("i",{className:"fas fa-times",onClick:l,"data-v-8b9f42fc":""})}),Object(s.jsx)(c.a,{constraints:{video:b},onScan:r,onError:d,"data-v-8b9f42fc":""}),Object(s.jsx)("div",{className:"qr-scanner-target","data-v-8b9f42fc":""}),Object(s.jsxs)("div",{className:"qr-scanner-bottom-section","data-v-8b9f42fc":"",children:[Object(s.jsxs)("p",{className:"qr-scanner-bottom-title","data-v-8b9f42fc":"",children:[o.title," ",Object(s.jsx)("span",{className:"qr-scanner-bottom-title-highlight","data-v-8b9f42fc":"",children:o.target})]}),Object(s.jsx)("p",{className:"qr-scanner-bottom-description","data-v-8b9f42fc":"",children:o.description}),Object(s.jsx)("div",{className:"qr-scanner-btn",onClick:l,"data-v-8b9f42fc":"",children:"Cancel Scan"})]})]})}},597:function(e,t,a){},713:function(e,t,a){},714:function(e,t,a){},715:function(e,t,a){},865:function(e,t,a){"use strict";a.r(t);var c=a(23),n=a(2),s=a.n(n),i=a(5),r=a(12),d=a(3),l=a(29),o=a(53),b=a(580),u=a(58),j=a(82),v=a(565),f={height:"55px",width:"55px"},m=a(18),O=(a(713),a(13)),h=a(4),p=function(e){var t=e.subtitle,a=void 0===t?"":t,c=e.lastMessageTimestamp,n=e.publicKey,s=e.chatLoaded,i=void 0!==s&&s,r=m.useDispatch(),o=m.useSelector((function(e){return e.node.publicKey})),b=m.useSelector(m.selectUser(n)),p=Object(d.useMemo)((function(){if(-1===c)return"";var e=j.DateTime.fromMillis(c).toRelative();return"in 0 seconds"===e?"Just now":e}),[c]),x=Object(d.useCallback)((function(){var e=r(Object(l.l)(o,n));return Object(O.f)(e)}),[r,o,n]);return Object(d.useEffect)((function(){if(i)return x()}),[x,n,i]),Object(h.jsxs)(u.b,{to:"/chat/".concat(n),className:"container","data-v-6a4c6809":"",children:[Object(h.jsxs)("div",{className:"author-container","data-v-6a4c6809":"",children:[Object(h.jsx)("div",{className:"author-avatar",style:f,"data-v-6a4c6809":"",children:Object(h.jsx)(v.a,{publicKey:n,height:55,"data-v-6a4c6809":""})}),Object(h.jsxs)("div",{className:"author-details","data-v-6a4c6809":"",children:[Object(h.jsx)("p",{className:"author-username","data-v-6a4c6809":"",children:b.displayName}),Object(h.jsx)("p",{className:"author-text","data-v-6a4c6809":"",children:a})]})]}),Object(h.jsx)("p",{className:"timestamp","data-v-6a4c6809":"",children:p})]})},x=(a(714),function(e){var t=e.publicKey,a=void 0===t?"":t,c=e.time,n=e.sent,s=m.useSelector(m.selectUser(a));return Object(h.jsxs)(u.b,{to:"/chat/".concat(a),className:"request-container","data-v-9848806b":"",children:[Object(h.jsxs)("div",{className:"request-author-container","data-v-9848806b":"",children:[Object(h.jsx)("div",{className:"request-author-avatar",style:f,"data-v-9848806b":"",children:Object(h.jsx)(v.a,{publicKey:a,height:55,"data-v-9848806b":""})}),Object(h.jsxs)("div",{className:"request-author-details","data-v-9848806b":"",children:[Object(h.jsxs)("p",{className:"request-author-username","data-v-9848806b":"",children:[n?"Sent Request":"Received Request"," - ",s.displayName]}),Object(h.jsx)("p",{className:"request-author-text","data-v-9848806b":"",children:"Request pending acceptance..."})]})]}),Object(h.jsx)("p",{className:"request-timestamp","data-v-9848806b":"",children:c})]})}),N=a(571),g=a(588),k=a(172),C=a(77),y=(a(715),a(566)),q=a(596);t.default=function(){var e=m.useDispatch(),t=Object(d.useState)(!1),a=Object(r.a)(t,2),n=a[0],u=a[1],j=Object(d.useState)(""),v=Object(r.a)(j,2),f=v[0],O=v[1],S=Object(d.useState)(!1),w=Object(r.a)(S,2),R=w[0],E=w[1],M=Object(d.useState)(!1),K=Object(r.a)(M,2),A=K[0],P=K[1],T=m.useSelector((function(e){return e.chat.contacts})),D=m.useSelector((function(e){return e.chat.messages})),Q=Object(d.useMemo)((function(){return T.slice().sort((function(e,t){var a=D[e.pk][0]||{timestamp:-1};return(D[t.pk][0]||{timestamp:-1}).timestamp-a.timestamp}))}),[T,D]),U=m.useSelector((function(e){return e.chat.sentRequests})),I=m.useSelector((function(e){return e.chat.receivedRequests})),L=Object(d.useState)(!1),z=Object(r.a)(L,2),B=z[0],J=z[1],W=Object(d.useCallback)(Object(i.a)(s.a.mark((function t(){return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e(Object(l.d)());case 2:P(!0);case 3:case"end":return t.stop()}}),t)}))),[e]);Object(d.useEffect)((function(){W()}),[W]),Object(d.useEffect)((function(){e(Object(l.e)()),e(Object(l.f)())}),[e]),Object(d.useEffect)((function(){var t=[e(Object(l.i)()),e(Object(l.k)()),e(Object(l.j)())];return function(){Promise.all(t).then((function(e){return e.forEach((function(e){return e.off()}))}))}}),[e]),Object(d.useEffect)((function(){var t=[].concat(Object(c.a)(T),Object(c.a)(U),Object(c.a)(I)).map((function(t){return e(Object(o.b)(t.pk))}));return function(){t.map((function(e){return e()}))}}),[T,U,I,e]);var H=Object(d.useCallback)((function(){u(!n)}),[n]),G=Object(d.useCallback)(function(){var t=Object(i.a)(s.a.mark((function t(a){var c,n,i,r;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a){t.next=2;break}return t.abrupt("return");case 2:if(t.prev=2,c=a,a.startsWith("https://")&&(n=a.split("/"),c=n[n.length-1]),O(null),E(!0),null===(i=(s=c).startsWith("http")?s.split("/").slice(-1)[0]:s)||void 0===i?void 0:i.length){t.next=10;break}throw new C.a({field:"publicKey",message:"Please specify a public key"});case 10:if(/^[0-9A-Za-z\-_.+/]+[=]{0,3}/.test(i)){t.next=12;break}throw new C.a({field:"publicKey",message:"Invalid public key format specified"});case 12:return t.next=14,e(Object(l.g)(c));case 14:u(!1),t.next=22;break;case 17:t.prev=17,t.t0=t.catch(2),r=t.t0 instanceof C.a?t.t0.message:"An unknown error has occurred",console.error(t.t0),O(r);case 22:return t.prev=22,E(!1),t.finish(22);case 25:case"end":return t.stop()}var s}),t,null,[[2,17,22,25]])})));return function(e){return t.apply(this,arguments)}}(),[e]),V=Object(d.useCallback)(Object(i.a)(s.a.mark((function e(){var t;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,navigator.clipboard.readText();case 3:return t=e.sent,e.abrupt("return",G(t));case 7:e.prev=7,e.t0=e.catch(0),alert(e.t0.message);case 10:case"end":return e.stop()}}),e,null,[[0,7]])}))),[G]),Z=Object(d.useCallback)((function(){J(!0)}),[J]),_=Object(d.useCallback)((function(){J(!1)}),[J]),F=Object(d.useCallback)((function(e){console.log(e),O(e.message)}),[O]),X=Object(d.useCallback)((function(e){e&&e.text&&(G(e.text),J(!1),console.log(e.text))}),[G,J]),Y=Object(d.useMemo)((function(){return Q.map((function(e){var t,a=null!==(t=D[e.pk])&&void 0!==t?t:[],c=function(){var t;return e.didDisconnect?{body:"User disconnected from you.",timestamp:-1}:null!==(t=a[0])&&void 0!==t?t:{body:"",timestamp:-1}}();return Object(h.jsx)(p,{publicKey:e.pk,subtitle:c.body,lastMessageTimestamp:c.timestamp,chatLoaded:A,"data-v-b965f3d7":""},e.pk)}))}),[A,D,Q]);return B?Object(h.jsx)("div",{"data-v-b965f3d7":"",children:Object(h.jsx)(q.a,{mode:"invoice",onClose:_,onError:F,onScan:X,"data-v-b965f3d7":""})}):(console.log(f),Object(h.jsxs)("div",{className:"page-container messages-page","data-v-b965f3d7":"",children:[Object(h.jsx)(N.a,{solid:!0,pageTitle:"MESSAGES","data-v-b965f3d7":""}),Object(h.jsxs)("div",{className:"messages-container","data-v-b965f3d7":"",children:[Object(h.jsxs)("div",{className:"message-list-container","data-v-b965f3d7":"",children:[U.length>0?Object(h.jsx)("p",{className:"messages-section-title","data-v-b965f3d7":"",children:"Sent Requests"}):null,U.map((function(e){return Object(h.jsx)(x,{publicKey:e.pk,sent:!0,time:void 0,"data-v-b965f3d7":""},e.id)})),I.length>0?Object(h.jsx)("p",{className:"messages-section-title","data-v-b965f3d7":"",children:"Received Requests"}):null,I.map((function(e){return Object(h.jsx)(x,{publicKey:e.pk,sent:!1,time:void 0,"data-v-b965f3d7":""},e.id)})),T.length>0?Object(h.jsx)("p",{className:"messages-section-title","data-v-b965f3d7":"",children:"Messages"}):null,Y]}),Object(h.jsx)(g.a,{onClick:H,label:"REQUEST","data-v-b965f3d7":""}),Object(h.jsxs)(y.a,{modalTitle:"SEND REQUEST",toggleModal:H,modalOpen:n,"data-v-b965f3d7":"",children:[R?Object(h.jsx)(k.a,{text:"Sending Request...",overlay:!0,style:{borderRadius:"0 0 15px 15px"},"data-v-b965f3d7":""}):null,f?Object(h.jsx)("div",{className:"send-request-error","data-v-b965f3d7":"",children:f}):null,Object(h.jsxs)("div",{className:"send-request-cards","data-v-b965f3d7":"",children:[Object(h.jsxs)("div",{className:"send-request-card",onClick:Z,"data-v-b965f3d7":"",children:[Object(h.jsx)("i",{className:"send-request-card-icon fas fa-qrcode","data-v-b965f3d7":""}),Object(h.jsx)("p",{className:"send-request-card-title","data-v-b965f3d7":"",children:"SCAN QR"}),Object(h.jsx)("p",{className:"send-request-card-desc","data-v-b965f3d7":"",children:"Scan another users QR to send a message request."})]}),Object(h.jsxs)("div",{className:"send-request-card",onClick:V,"data-v-b965f3d7":"",children:[Object(h.jsx)("i",{className:"send-request-card-icon fas fa-clipboard","data-v-b965f3d7":""}),Object(h.jsx)("p",{className:"send-request-card-title","data-v-b965f3d7":"",children:"PASTE CLIPBOARD"}),Object(h.jsx)("p",{className:"send-request-card-desc","data-v-b965f3d7":"",children:"Paste another users Public Key to send a message request."})]})]})]})]}),Object(h.jsx)(b.a,{"data-v-b965f3d7":""})]}))}}}]);
//# sourceMappingURL=19.1507a224.chunk.js.map