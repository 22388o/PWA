{"version":3,"sources":["common/MainNav/index.js","pages/Backups/index.tsx"],"names":["MainNav","pageTitle","absolute","solid","enableBackButton","onHeight","Utils","dispatch","useDispatch","goBack","useCallback","window","history","back","open","openDrawer","gunPublicKey","useSelector","node","publicKey","divRefCb","el","getBoundingClientRect","height","e","console","log","className","classNames","ref","onClick","Backups","useState","seedBackup","setSeedBackup","channelsBackup","setChannelsBackup","copied","setCopied","lndPub","Store","wallet","lightningInfo","identity_pubkey","gunPub","useEffect","Http","get","headers","then","data","copyChannelsBackup","navigator","clipboard","writeText","JSON","stringify"],"mappings":"qHAAA,oFAyEeA,IA3DC,SAAC,GAMV,IALLC,EAKI,EALJA,UAKI,IAJJC,gBAII,aAHJC,aAGI,aAFJC,wBAEI,aADJC,gBACI,MADOC,IACP,EACEC,EAAWC,cACXC,EAASC,uBAAY,WACzBC,OAAOC,QAAQC,SACd,IAEGC,EAAOJ,uBAAY,WACvBH,EAASQ,iBACR,CAACR,IAEES,EAAeC,uBAAY,qBAAGC,KAAgBC,aAG9CC,EAAWV,uBACf,SAAAW,GAEE,GAAKA,EACL,IACEhB,EAASgB,EAAGC,wBAAwBC,QACpC,MAAOC,GACPC,QAAQC,IAAR,+CACAD,QAAQC,IAAIF,MAGhB,CAACnB,IAGH,OACE,sBACEsB,UAAWC,IAAW,CACpB,sBAAsB,EACtB,oBAAqB1B,EACrB,iBAAkBC,IAEpB0B,IAAKT,EANP,+BAQGhB,EACC,qBAAKuB,UAAU,gBAAgBG,QAASrB,EAAxC,8BACE,mBAAGkB,UAAU,sBAAb,yBAGF,cAAC,IAAD,CAAaJ,OAAQ,GAAIJ,UAAWH,EAApC,uBAEF,mBAAGW,UAAU,8BAAb,8BAA4C1B,IAC5C,sBAAK0B,UAAU,oBAAoBG,QAAShB,EAA5C,+BACE,qBAAKa,UAAU,qBAAf,uBACA,qBAAKA,UAAU,qBAAf,uBACA,qBAAKA,UAAU,qBAAf,+B,gJCFOI,UA3DC,WAAO,IAAD,EACeC,mBAAS,IADxB,mBACbC,EADa,KACFC,EADE,OAEuBF,mBAAS,MAFhC,mBAEbG,EAFa,KAEEC,EAFF,OAGOJ,oBAAS,GAHhB,mBAGbK,EAHa,KAGNC,EAHM,KAIGC,EAAUC,eAC/B,qBAAGC,OAAoBC,iBADlBC,gBAEDC,EAASJ,eACb,qBAAGtB,KAAgBC,aAEnB0B,qBAAU,WACRC,IAAKC,IAAL,gCAA0C,CACxCC,QAAS,CACP,4BAA6BJ,KAE9BK,MAAK,YAAqC,IAApBhB,EAAmB,EAAjCiB,KAAQA,KACjBhB,EAAcD,QAEhB,IAEFY,qBAAU,WACRC,IAAKC,IAAL,oCAA8C,CAC5CC,QAAS,CACP,4BAA6BJ,KAE9BK,MAAK,YAAyC,IAAxBd,EAAuB,EAArCe,KAAQA,KACjBd,EAAkBD,QAEpB,IACF,IAAMgB,EAAqBzC,uBAAY,WACrC0C,UAAUC,UAAUC,UAAUC,KAAKC,UAAUrB,IAC7CG,GAAU,KACT,CAACH,IACN,OACE,sBAAKR,UAAU,mBAAf,+BACE,cAAC,IAAD,CAAS1B,UAAU,UAAUG,kBAAkB,EAA/C,uBACA,sBAAKuB,UAAU,mBAAf,+BACE,sBAAKA,UAAU,iBAAf,+BACE,2EACA,kDAAKY,OAEP,sBAAKZ,UAAU,iBAAf,+BACE,kEACCM,GAAc,kDAAKA,KAClBA,GAAc,2FAElB,sBAAKN,UAAU,iBAAf,+BACE,uEACCQ,GAAkB,sBAAKR,UAAU,gBAAf,+BACjB,4EACCU,GAAU,mBAAGV,UAAU,eAAeG,QAASqB,EAArC,wBACTd,GAAU,mBAAGV,UAAU,cAAcG,QAASqB,EAApC,2BAEZhB,GAAkB","file":"static/js/32.c1721cf2.chunk.js","sourcesContent":["// @ts-check\nimport { useCallback } from \"react\";\n/**\n * @typedef {import('react').RefCallback<HTMLElement>} DivRefCallback\n */\nimport classNames from \"classnames\";\nimport \"./css/index.scoped.css\";\nimport { useDispatch } from \"react-redux\";\n\nimport * as Utils from \"../../utils\";\nimport { openDrawer } from \"../../actions/DrawerActions\";\nimport ShockAvatar from \"../ShockAvatar\";\nimport { useSelector } from \"../../store\";\n\nconst MainNav = ({\n  pageTitle,\n  absolute = false,\n  solid = false,\n  enableBackButton = false,\n  onHeight = Utils.EMPTY_FN\n}) => {\n  const dispatch = useDispatch();\n  const goBack = useCallback(() => {\n    window.history.back();\n  }, []);\n\n  const open = useCallback(() => {\n    dispatch(openDrawer());\n  }, [dispatch]);\n\n  const gunPublicKey = useSelector(({ node }) => node.publicKey);\n\n  /** @type {DivRefCallback} */\n  const divRefCb = useCallback(\n    el => {\n      // https://www.pluralsight.com/tech-blog/getting-size-and-position-of-an-element-in-react/\n      if (!el) return;\n      try {\n        onHeight(el.getBoundingClientRect().height);\n      } catch (e) {\n        console.log(`Error inside onHeight mechanism in MainNav:`);\n        console.log(e);\n      }\n    },\n    [onHeight]\n  );\n\n  return (\n    <div\n      className={classNames({\n        \"main-nav-container\": true,\n        \"main-nav-absolute\": absolute,\n        \"main-nav-solid\": solid\n      })}\n      ref={divRefCb}\n    >\n      {enableBackButton ? (\n        <div className=\"main-nav-back\" onClick={goBack}>\n          <i className=\"icon icon-thin-back\"></i>\n        </div>\n      ) : (\n        <ShockAvatar height={40} publicKey={gunPublicKey} />\n      )}\n      <p className=\"main-nav-title unselectable\">{pageTitle}</p>\n      <div className=\"main-nav-menu-btn\" onClick={open}>\n        <div className=\"main-nav-menu-dash\" />\n        <div className=\"main-nav-menu-dash\" />\n        <div className=\"main-nav-menu-dash\" />\n      </div>\n    </div>\n  );\n};\n\nexport default MainNav;\n","import { useCallback, useEffect, useState } from \"react\";\nimport MainNav from \"../../common/MainNav\";\nimport \"./css/index.scoped.css\";\nimport Http from \"../../utils/Http\";\nimport * as Store from \"../../store\";\n\nconst Backups = () => {\n  const [seedBackup,setSeedBackup] = useState('')\n  const [channelsBackup,setChannelsBackup] = useState(null)\n  const [copied,setCopied] = useState(false)\n  const {identity_pubkey:lndPub} = Store.useSelector(\n    ({ wallet }) => wallet.lightningInfo)\n  const gunPub = Store.useSelector(\n    ({ node }) => node.publicKey)\n    //effect for seed backup\n    useEffect(()=>{\n      Http.get(`/api/gun/user/once/seedBackup`, {\n        headers: {\n          'public-key-for-decryption': gunPub,\n        },\n      }).then(({ data: { data: seedBackup } }) => {\n        setSeedBackup(seedBackup)\n      })\n    },[])\n    //effect for channels backup\n    useEffect(()=>{\n      Http.get(`/api/gun/user/once/channelsBackup`, {\n        headers: {\n          'public-key-for-decryption': gunPub,\n        },\n      }).then(({ data: { data: channelsBackup } }) => {\n        setChannelsBackup(channelsBackup)\n      })\n    },[])\n    const copyChannelsBackup = useCallback(() => {\n      navigator.clipboard.writeText(JSON.stringify(channelsBackup));\n      setCopied(true);\n    }, [channelsBackup]);\n  return (\n    <div className=\"moonPayContainer\">\n      <MainNav pageTitle=\"BACKUPS\" enableBackButton={true} />\n      <div className=\"backupsContainer\">\n        <div className=\"innerContainer\">\n          <h1>Lightning Public Key</h1>\n          <h3>{lndPub}</h3>\n        </div>\n        <div className=\"innerContainer\">\n          <h1>Seed Backup</h1>\n          {seedBackup && <h3>{seedBackup}</h3>}\n          {!seedBackup && <h3>backup not available on this node</h3>}\n        </div>\n        <div className=\"innerContainer\">\n          <h2>Channels Backups</h2>\n          {channelsBackup && <div className=\"copyContainer\">\n            <p>copy channel backups: </p>\n            {copied && <i className=\"fas fa-check\" onClick={copyChannelsBackup}></i>}\n            {!copied && <i className=\"fas fa-copy\" onClick={copyChannelsBackup}></i>}\n          </div>}\n          {!channelsBackup && <h3>backup not available on this node</h3>}\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default Backups;\n"],"sourceRoot":""}