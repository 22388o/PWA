(this["webpackJsonpshocknet-pwa"]=this["webpackJsonpshocknet-pwa"]||[]).push([[18],{593:function(e,a,t){"use strict";var c=t(0),n=t(84),s=t.n(n),i=(t(598),t(4)),d=function(e){var a=e.children,t=e.style;return Object(i.jsx)("div",{className:"content",style:t,"data-v-7ac98d1b":"",children:a})},r=(t(599),function(e){var a=e.title,t=e.toggleModal;return a?Object(i.jsxs)("div",{className:"head","data-v-a440211e":"",children:[Object(i.jsx)("p",{className:"head-title","data-v-a440211e":"",children:a}),Object(i.jsx)("div",{className:"head-close",onClick:t,"data-v-a440211e":"",children:Object(i.jsx)("i",{className:"fas fa-times","data-v-a440211e":""})})]}):null});t(600),a.a=function(e){var a=e.modalOpen,t=void 0!==a&&a,n=e.toggleModal,l=e.modalTitle,o=void 0===l?"":l,b=e.children,u=e.contentStyle,v=void 0===u?{}:u,j=e.disableBackdropClose,m=void 0!==j&&j,f=Object(c.useCallback)((function(){n()}),[n]),h=Object(c.useCallback)((function(){m||n()}),[m,n]);return Object(i.jsxs)("div",{className:s()({modal:!0,open:t}),"data-v-f18f7976":"",children:[Object(i.jsx)("div",{className:"backdrop",onClick:h,"data-v-f18f7976":""}),Object(i.jsxs)("div",{className:"container","data-v-f18f7976":"",children:[Object(i.jsx)(r,{title:o,toggleModal:f,"data-v-f18f7976":""}),Object(i.jsx)(d,{style:v,"data-v-f18f7976":"",children:b})]})]})}},598:function(e,a,t){},599:function(e,a,t){},600:function(e,a,t){},603:function(e,a,t){"use strict";var c=t(0),n=t(84),s=t.n(n),i=(t(604),t(37)),d=t(8),r=t(87),l=t(594),o=t(20),b=t(4);a.a=function(e){var a=e.pageTitle,t=e.absolute,n=void 0!==t&&t,u=e.solid,v=void 0!==u&&u,j=e.enableBackButton,m=void 0!==j&&j,f=e.onHeight,h=void 0===f?d.b:f,O=Object(i.b)(),p=Object(c.useCallback)((function(){window.history.back()}),[]),x=Object(c.useCallback)((function(){O(Object(r.c)())}),[O]),N=Object(o.useSelector)((function(e){return e.node.publicKey})),g=Object(c.useCallback)((function(e){if(e)try{h(e.getBoundingClientRect().height)}catch(a){console.log("Error inside onHeight mechanism in MainNav:"),console.log(a)}}),[h]);return Object(b.jsxs)("div",{className:s()({"main-nav-container":!0,"main-nav-absolute":n,"main-nav-solid":v}),ref:g,"data-v-4c73feca":"",children:[m?Object(b.jsx)("div",{className:"main-nav-back",onClick:p,"data-v-4c73feca":"",children:Object(b.jsx)("i",{className:"icon icon-thin-back","data-v-4c73feca":""})}):Object(b.jsx)(l.a,{height:40,publicKey:N,"data-v-4c73feca":""}),Object(b.jsx)("p",{className:"main-nav-title unselectable","data-v-4c73feca":"",children:a}),Object(b.jsxs)("div",{className:"main-nav-menu-btn",onClick:x,"data-v-4c73feca":"",children:[Object(b.jsx)("div",{className:"main-nav-menu-dash","data-v-4c73feca":""}),Object(b.jsx)("div",{className:"main-nav-menu-dash","data-v-4c73feca":""}),Object(b.jsx)("div",{className:"main-nav-menu-dash","data-v-4c73feca":""})]})]})}},604:function(e,a,t){},607:function(e,a,t){"use strict";var c=t(60),n=t(4);a.a=function(){return Object(n.jsxs)("div",{className:"bottom-nav-container",children:[Object(n.jsx)(c.c,{className:"bottom-nav-btn",to:"/overview",activeClassName:"active-nav-btn",children:Object(n.jsx)("i",{className:"bottom-nav-btn-icon icon-thin-wallet"})}),Object(n.jsx)(c.c,{className:"bottom-nav-btn",to:"/chat",activeClassName:"active-nav-btn",children:Object(n.jsx)("i",{className:"bottom-nav-btn-icon icon-thin-chat"})}),Object(n.jsx)(c.c,{className:"bottom-nav-btn",to:"/profile",activeClassName:"active-nav-btn",children:Object(n.jsx)("i",{className:"bottom-nav-btn-icon icon-thin-profile"})}),Object(n.jsx)(c.c,{className:"bottom-nav-btn",to:"/feed",activeClassName:"active-nav-btn",children:Object(n.jsx)("i",{className:"bottom-nav-btn-icon icon-thin-feed"})})]})}},613:function(e,a,t){"use strict";var c=t(17),n=t(0),s=t(84),i=t.n(s),d=(t(614),t(4));a.a=function(e){var a=e.label,t=void 0===a?null:a,s=e.icon,r=void 0===s?null:s,l=e.iconURL,o=void 0===l?null:l,b=e.onClick,u=void 0===b?void 0:b,v=e.nestedMode,j=void 0!==v&&v,m=e.large,f=void 0!==m&&m,h=e.small,O=void 0!==h&&h,p=e.relative,x=void 0!==p&&p,N=e.children,g=void 0===N?null:N,k=e.style,C=void 0===k?{}:k,q=Object(n.useState)(!1),y=Object(c.a)(q,2),S=y[0],w=y[1],R=Object(n.useCallback)((function(){j&&w(!S)}),[S,j]),E=Object(n.useMemo)((function(){return o?Object(d.jsx)("img",{src:o,className:"add-btn-icon",alt:"","data-v-7baa91b1":""}):Object(d.jsx)("i",{className:"fas fa-".concat(null!==r&&void 0!==r?r:"plus"),"data-v-7baa91b1":""})}),[r,o]),A=Object(n.useMemo)((function(){return t?Object(d.jsx)("p",{className:"add-btn-label","data-v-7baa91b1":"",children:t}):null}),[t]);return Object(d.jsxs)("div",{className:i()({"add-btn-container":!0,"add-btn-round-container":!t,"add-btn-large":f,"add-btn-small":O}),"data-v-7baa91b1":"",children:[Object(d.jsxs)("div",{className:i()({"add-btn":!0,"add-btn-round":!t,"add-btn-extended":!!t,"add-btn-relative":x,"add-btn-open":S,"add-btn-nested":j}),onClick:null!==u&&void 0!==u?u:R,style:C,"data-v-7baa91b1":"",children:[E,A]}),g?Object(d.jsx)("div",{className:i()({"add-btn-options":!0,"add-btn-options-open":S}),"data-v-7baa91b1":"",children:g}):null]})}},614:function(e,a,t){},616:function(e,a,t){"use strict";t.d(a,"a",(function(){return c}));var c=function(){return!navigator.userAgent.match(/(iPad)|(iPhone)|(iPod)|(android)|(webOS)/i)}},620:function(e,a,t){"use strict";var c=t(638),n=t(616),s=(t(621),t(4)),i={wizard:{title:"SCAN A",target:"QR CODE",description:"Point your camera at a ShockWizard QR Code"},invoice:{title:"SCAN AN",target:"INVOICE",description:"Point your camera at an LND Invoice"}};a.a=function(e){var a=e.mode,t=void 0===a?"wizard":a,d=e.onScan,r=e.onError,l=e.onClose,o=i[t],b={};return Object(n.a)()||(b.facingMode={exact:"environment"}),Object(s.jsxs)("div",{className:"qr-code-scanner-container","data-v-f571b36f":"",children:[Object(s.jsx)("div",{className:"qr-scanner-top-section","data-v-f571b36f":"",children:Object(s.jsx)("i",{className:"fas fa-times",onClick:l,"data-v-f571b36f":""})}),Object(s.jsx)(c.a,{constraints:{video:b},onScan:d,onError:r,"data-v-f571b36f":""}),Object(s.jsx)("div",{className:"qr-scanner-target","data-v-f571b36f":""}),Object(s.jsxs)("div",{className:"qr-scanner-bottom-section","data-v-f571b36f":"",children:[Object(s.jsxs)("p",{className:"qr-scanner-bottom-title","data-v-f571b36f":"",children:[o.title," ",Object(s.jsx)("span",{className:"qr-scanner-bottom-title-highlight","data-v-f571b36f":"",children:o.target})]}),Object(s.jsx)("p",{className:"qr-scanner-bottom-description","data-v-f571b36f":"",children:o.description}),Object(s.jsx)("div",{className:"qr-scanner-btn",onClick:l,"data-v-f571b36f":"",children:"Cancel Scan"})]})]})}},621:function(e,a,t){},739:function(e,a,t){},740:function(e,a,t){},741:function(e,a,t){},894:function(e,a,t){"use strict";t.r(a);var c=t(3),n=t.n(c),s=t(6),i=t(27),d=t(17),r=t(0),l=t.n(r),o=t(47),b=t(58),u=t(607),v=t(9),j=t(60),m=t(20),f=t(8),h=t(594),O={height:"55px",width:"55px"},p=t(187),x=(t(739),t(4)),N=function(e){var a=e.id,t=m.useDispatch(),c=m.useSelector(m.selectSingleConvo(a)),n=m.useSelector(m.selectConvoMessages(a)),s=n.slice().sort((function(e,a){return e.timestamp-a.timestamp}))[n.length-1],i=m.useSelector(m.selectUser(c.with)),d=0===n.length||(null===s||void 0===s?void 0:s.body)===v.a?"No messages yet":"received"===(null===s||void 0===s?void 0:s.state)?"> "+s.body:s.body;return l.a.useEffect((function(){return t(Object(o.n)(a))}),[t,a]),Object(x.jsxs)(j.b,{to:"/chat/".concat(a),className:"container","data-v-ea46b187":"",children:[Object(x.jsxs)("div",{className:"author-container","data-v-ea46b187":"",children:[Object(x.jsx)("div",{className:"author-avatar",style:O,"data-v-ea46b187":"",children:Object(x.jsx)(h.a,{publicKey:c.with,height:55,"data-v-ea46b187":""})}),Object(x.jsxs)("div",{className:"author-details","data-v-ea46b187":"",children:[Object(x.jsx)("p",{className:"author-username","data-v-ea46b187":"",children:Object(p.b)(i.publicKey,i.displayName)}),Object(x.jsx)("p",{className:"author-text","data-v-ea46b187":"",children:d})]})]}),Object(x.jsx)("p",{className:"timestamp","data-v-ea46b187":"",children:f.d((null===s||void 0===s?void 0:s.timestamp)||Date.now())})]})},g=(t(740),function(e){var a=e.publicKey,t=void 0===a?"":a,c=e.time,n=e.sent,s=e.id,i=m.useSelector(m.selectUser(t));return Object(x.jsxs)(j.b,{to:"/chat/".concat(s),className:"request-container","data-v-4b6b7d7c":"",children:[Object(x.jsxs)("div",{className:"request-author-container","data-v-4b6b7d7c":"",children:[Object(x.jsx)("div",{className:"request-author-avatar",style:O,"data-v-4b6b7d7c":"",children:Object(x.jsx)(h.a,{publicKey:t,height:55,"data-v-4b6b7d7c":""})}),Object(x.jsxs)("div",{className:"request-author-details","data-v-4b6b7d7c":"",children:[Object(x.jsxs)("p",{className:"request-author-username","data-v-4b6b7d7c":"",children:[n?"Sent Request":"Received Request"," - ",i.displayName]}),Object(x.jsx)("p",{className:"request-author-text","data-v-4b6b7d7c":"",children:"Request pending acceptance..."})]})]}),Object(x.jsx)("p",{className:"request-timestamp","data-v-4b6b7d7c":"",children:c})]})}),k=t(603),C=t(613),q=t(177),y=t(80),S=(t(741),t(593)),w=t(620);a.default=function(){var e=f.l(),a=Object(r.useState)(!1),t=Object(d.a)(a,2),c=t[0],l=t[1],v=Object(r.useState)(""),j=Object(d.a)(v,2),h=j[0],O=j[1],p=Object(r.useState)(!1),R=Object(d.a)(p,2),E=R[0],A=R[1],M=m.useSelector(m.selectConvos),K=f.a,P=m.useSelector(m.selectReceivedRequests),T=Object(r.useState)(!1),D=Object(d.a)(T,2),Q=D[0],B=D[1],I=m.useSelector(m.selectCurrentHandshakeAddress);Object(r.useEffect)((function(){var a=e(Object(o.p)());return function(){a.then((function(e){return e.off()}))}}),[e]),Object(r.useEffect)((function(){var a=e(Object(o.q)(I));return function(){a.then((function(e){return e.off()}))}}),[I,e]),Object(r.useEffect)((function(){var a=e(Object(o.o)());return function(){a.then((function(e){return e.off()}))}})),Object(r.useEffect)((function(){var a=M.map((function(a){return e(Object(b.b)(a.with))}));return a.push.apply(a,Object(i.a)(P.map((function(a){return e(Object(b.b)(a.from))})))),function(){a.map((function(e){return e()}))}}),[M,e,P]);var U=Object(r.useCallback)((function(){l(!c)}),[c]),z=Object(r.useCallback)(function(){var a=Object(s.a)(n.a.mark((function a(t){var c,s,i,d;return n.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(t){a.next=2;break}return a.abrupt("return");case 2:if(a.prev=2,c=t,t.startsWith("https://")&&(s=t.split("/"),c=s[s.length-1]),O(null),A(!0),null===(i=(n=c).startsWith("http")?n.split("/").slice(-1)[0]:n)||void 0===i?void 0:i.length){a.next=10;break}throw new y.a({field:"publicKey",message:"Please specify a public key"});case 10:if(/^[0-9A-Za-z\-_.+/]+[=]{0,3}/.test(i)){a.next=12;break}throw new y.a({field:"publicKey",message:"Invalid public key format specified"});case 12:return a.next=14,e(Object(o.l)(c));case 14:l(!1),a.next=22;break;case 17:a.prev=17,a.t0=a.catch(2),d=a.t0 instanceof y.a?a.t0.message:"An unknown error has occurred",console.error(a.t0),O(d);case 22:return a.prev=22,A(!1),a.finish(22);case 25:case"end":return a.stop()}var n}),a,null,[[2,17,22,25]])})));return function(e){return a.apply(this,arguments)}}(),[e]),H=Object(r.useCallback)(Object(s.a)(n.a.mark((function e(){var a;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,navigator.clipboard.readText();case 3:return a=e.sent,e.abrupt("return",z(a));case 7:e.prev=7,e.t0=e.catch(0),alert(e.t0.message);case 10:case"end":return e.stop()}}),e,null,[[0,7]])}))),[z]),L=Object(r.useCallback)((function(){B(!0)}),[B]),W=Object(r.useCallback)((function(){B(!1)}),[B]),J=Object(r.useCallback)((function(e){console.log(e),O(e.message)}),[O]),G=Object(r.useCallback)((function(e){e&&e.text&&(z(e.text),B(!1),console.log(e.text))}),[z,B]);return Q?Object(x.jsx)("div",{"data-v-2cdb5363":"",children:Object(x.jsx)(w.a,{mode:"invoice",onClose:W,onError:J,onScan:G,"data-v-2cdb5363":""})}):(console.log(h),Object(x.jsxs)("div",{className:"page-container messages-page","data-v-2cdb5363":"",children:[Object(x.jsx)(k.a,{solid:!0,pageTitle:"MESSAGES","data-v-2cdb5363":""}),Object(x.jsxs)("div",{className:"messages-container","data-v-2cdb5363":"",children:[Object(x.jsxs)("div",{className:"message-list-container no-scrollbar","data-v-2cdb5363":"",children:[K.length>0?Object(x.jsx)("p",{className:"messages-section-title","data-v-2cdb5363":"",children:"Sent Requests"}):null,K.map((function(e){return Object(x.jsx)(g,{publicKey:e.pk,sent:!0,time:void 0,id:e.id,"data-v-2cdb5363":""},e.id)})),P.length>0?Object(x.jsx)("p",{className:"messages-section-title","data-v-2cdb5363":"",children:"Received Requests"}):null,P.map((function(e){return Object(x.jsx)(g,{publicKey:e.from,sent:!1,time:void 0,id:e.id,"data-v-2cdb5363":""},e.id)})),M.length>0?Object(x.jsx)("p",{className:"messages-section-title","data-v-2cdb5363":"",children:"Messages"}):null,M.map((function(e){return Object(x.jsx)(N,{id:e.id,"data-v-2cdb5363":""},e.id)}))]}),Object(x.jsx)(C.a,{onClick:U,label:"REQUEST","data-v-2cdb5363":""}),Object(x.jsxs)(S.a,{modalTitle:"SEND REQUEST",toggleModal:U,modalOpen:c,"data-v-2cdb5363":"",children:[E?Object(x.jsx)(q.a,{text:"Sending Request...",overlay:!0,style:{borderRadius:"0 0 15px 15px"},"data-v-2cdb5363":""}):null,h?Object(x.jsx)("div",{className:"send-request-error","data-v-2cdb5363":"",children:h}):null,Object(x.jsxs)("div",{className:"send-request-cards","data-v-2cdb5363":"",children:[Object(x.jsxs)("div",{className:"send-request-card",onClick:L,"data-v-2cdb5363":"",children:[Object(x.jsx)("i",{className:"send-request-card-icon fas fa-qrcode","data-v-2cdb5363":""}),Object(x.jsx)("p",{className:"send-request-card-title","data-v-2cdb5363":"",children:"SCAN QR"}),Object(x.jsx)("p",{className:"send-request-card-desc","data-v-2cdb5363":"",children:"Scan another users QR to send a message request."})]}),Object(x.jsxs)("div",{className:"send-request-card",onClick:H,"data-v-2cdb5363":"",children:[Object(x.jsx)("i",{className:"send-request-card-icon fas fa-clipboard","data-v-2cdb5363":""}),Object(x.jsx)("p",{className:"send-request-card-title","data-v-2cdb5363":"",children:"PASTE CLIPBOARD"}),Object(x.jsx)("p",{className:"send-request-card-desc","data-v-2cdb5363":"",children:"Paste another users Public Key to send a message request."})]})]})]})]}),Object(x.jsx)(u.a,{"data-v-2cdb5363":""})]}))}}}]);
//# sourceMappingURL=18.7f5f2024.chunk.js.map