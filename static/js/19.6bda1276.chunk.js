(this["webpackJsonpshocknet-pwa"]=this["webpackJsonpshocknet-pwa"]||[]).push([[19],{593:function(e,t,c){"use strict";var a=c(0),n=c(84),o=c.n(n),s=(c(598),c(4)),i=function(e){var t=e.children,c=e.style;return Object(s.jsx)("div",{className:"content",style:c,"data-v-f159d3b1":"",children:t})},r=(c(599),function(e){var t=e.title,c=e.toggleModal;return t?Object(s.jsxs)("div",{className:"head","data-v-9bd08299":"",children:[Object(s.jsx)("p",{className:"head-title","data-v-9bd08299":"",children:t}),Object(s.jsx)("div",{className:"head-close",onClick:c,"data-v-9bd08299":"",children:Object(s.jsx)("i",{className:"fas fa-times","data-v-9bd08299":""})})]}):null});c(600),t.a=function(e){var t=e.modalOpen,c=void 0!==t&&t,n=e.toggleModal,l=e.modalTitle,d=void 0===l?"":l,u=e.children,b=e.contentStyle,f=void 0===b?{}:b,j=e.disableBackdropClose,p=void 0!==j&&j,O=Object(a.useCallback)((function(){n()}),[n]),v=Object(a.useCallback)((function(){p||n()}),[p,n]);return Object(s.jsxs)("div",{className:o()({modal:!0,open:c}),"data-v-efc40327":"",children:[Object(s.jsx)("div",{className:"backdrop",onClick:v,"data-v-efc40327":""}),Object(s.jsxs)("div",{className:"container","data-v-efc40327":"",children:[Object(s.jsx)(r,{title:d,toggleModal:O,"data-v-efc40327":""}),Object(s.jsx)(i,{style:f,"data-v-efc40327":"",children:u})]})]})}},598:function(e,t,c){},599:function(e,t,c){},600:function(e,t,c){},607:function(e,t,c){"use strict";var a=c(60),n=c(4);t.a=function(){return Object(n.jsxs)("div",{className:"bottom-nav-container",children:[Object(n.jsx)(a.c,{className:"bottom-nav-btn",to:"/overview",activeClassName:"active-nav-btn",children:Object(n.jsx)("i",{className:"bottom-nav-btn-icon icon-thin-wallet"})}),Object(n.jsx)(a.c,{className:"bottom-nav-btn",to:"/chat",activeClassName:"active-nav-btn",children:Object(n.jsx)("i",{className:"bottom-nav-btn-icon icon-thin-chat"})}),Object(n.jsx)(a.c,{className:"bottom-nav-btn",to:"/profile",activeClassName:"active-nav-btn",children:Object(n.jsx)("i",{className:"bottom-nav-btn-icon icon-thin-profile"})}),Object(n.jsx)(a.c,{className:"bottom-nav-btn",to:"/feed",activeClassName:"active-nav-btn",children:Object(n.jsx)("i",{className:"bottom-nav-btn-icon icon-thin-feed"})})]})}},610:function(e,t,c){"use strict";var a=c(0),n=c(4);t.a=function(e){var t=e.color,c=e.length,o=e.type,s=e.width,i=Object(a.useMemo)((function(){return"vertical"===o?{borderLeftStyle:"solid",borderLeftWidth:"".concat(s/2,"px"),borderLeftColor:t,borderRightStyle:"solid",borderRightWidth:"".concat(s/2,"px"),borderRightColor:t,height:c}:"horizontal"===o?{borderTopStyle:"solid",borderTopWidth:s/2,borderTopColor:t,borderBottomStyle:"solid",borderBottomWidth:s/2,borderBottomColor:t,width:c}:{}}),[t,c,o,s]);return Object(n.jsx)("div",{style:i})}},613:function(e,t,c){"use strict";var a=c(17),n=c(0),o=c(84),s=c.n(o),i=(c(614),c(4));t.a=function(e){var t=e.label,c=void 0===t?null:t,o=e.icon,r=void 0===o?null:o,l=e.iconURL,d=void 0===l?null:l,u=e.onClick,b=void 0===u?void 0:u,f=e.nestedMode,j=void 0!==f&&f,p=e.large,O=void 0!==p&&p,v=e.small,h=void 0!==v&&v,m=e.relative,x=void 0!==m&&m,g=e.children,C=void 0===g?null:g,k=e.style,y=void 0===k?{}:k,N=Object(n.useState)(!1),S=Object(a.a)(N,2),w=S[0],_=S[1],D=Object(n.useCallback)((function(){j&&_(!w)}),[w,j]),R=Object(n.useMemo)((function(){return d?Object(i.jsx)("img",{src:d,className:"add-btn-icon",alt:"","data-v-08bc9e96":""}):Object(i.jsx)("i",{className:"fas fa-".concat(null!==r&&void 0!==r?r:"plus"),"data-v-08bc9e96":""})}),[r,d]),I=Object(n.useMemo)((function(){return c?Object(i.jsx)("p",{className:"add-btn-label","data-v-08bc9e96":"",children:c}):null}),[c]);return Object(i.jsxs)("div",{className:s()({"add-btn-container":!0,"add-btn-round-container":!c,"add-btn-large":O,"add-btn-small":h}),"data-v-08bc9e96":"",children:[Object(i.jsxs)("div",{className:s()({"add-btn":!0,"add-btn-round":!c,"add-btn-extended":!!c,"add-btn-relative":x,"add-btn-open":w,"add-btn-nested":j}),onClick:null!==b&&void 0!==b?b:D,style:y,"data-v-08bc9e96":"",children:[R,I]}),C?Object(i.jsx)("div",{className:s()({"add-btn-options":!0,"add-btn-options-open":w}),"data-v-08bc9e96":"",children:C}):null]})}},614:function(e,t,c){},640:function(e,t,c){"use strict";var a=c(84),n=c.n(a),o=c(591),s=c(610),i=c(641),r=c.n(i),l=c(4);t.a=function(e){var t=e.onChange,c=e.selected,a=e.showContentBtn;return Object(l.jsxs)("div",{className:n()(o.D,o.z,o.A,o.w,r.a.container),children:[Object(l.jsx)("span",{className:n()(o.C,"posts"===c?r.a.selected:r.a.unselected),onClick:function(){t("posts")},children:"Posts"}),Object(l.jsx)("div",{className:n()(o.a,a&&r.a["left-line"]),children:Object(l.jsx)(s.a,{color:"white",length:16,type:"vertical",width:2})}),Object(l.jsx)("span",{className:n()(o.C,"services"===c?r.a.selected:r.a.unselected),onClick:function(){t("services")},children:"Services"}),a&&Object(l.jsxs)(l.Fragment,{children:[Object(l.jsx)("div",{className:n()(o.a,r.a["right-line"]),children:Object(l.jsx)(s.a,{color:"white",length:16,type:"vertical",width:2})}),Object(l.jsx)("span",{className:n()(o.C,"content"===c?r.a.selected:r.a.unselected),onClick:function(){t("content")},children:"Content"})]})]})}},641:function(e,t,c){e.exports={container:"ProfileDivider_container__3ob9k",selected:"ProfileDivider_selected__3U98y",unselected:"ProfileDivider_unselected__1Z_qd","left-line":"ProfileDivider_left-line__2xjlN","right-line":"ProfileDivider_right-line__1d2KH"}},642:function(e,t,c){"use strict";t.a=c.p+"static/media/clipboard.beb19e1e.svg"},643:function(e,t,c){"use strict";t.a=c.p+"static/media/qrcode.69103c6c.svg"},747:function(e,t,c){e.exports={container:"ContentHostInputView_container__1CVAn","uri-or-token-input":"ContentHostInputView_uri-or-token-input__3vg5h","plus-or-paste-btn":"ContentHostInputView_plus-or-paste-btn__3z_k0"}},748:function(e,t,c){e.exports={"container-base":"Host_container-base__r5EJP","remove-or-cancel":"Host_remove-or-cancel__2sHhe Host_container-base__r5EJP",container:"Host_container__2hPww Host_container-base__r5EJP",pill:"Host_pill__1WzlY","display-name-or-uri":"Host_display-name-or-uri__2eaUy","price-and-status":"Host_price-and-status__3Q4n3",price:"Host_price__2oEgL",red:"Host_red__1kS00",yellow:"Host_yellow__3DLEG",blue:"Host_blue__3m2Kb"}},749:function(e,t,c){},892:function(e,t,c){"use strict";c.r(t);var a=c(3),n=c.n(a),o=c(6),s=c(17),i=c(0),r=c.n(i),l=c(37),d=c(639),u=c.n(d),b=c(60),f=c(84),j=c.n(f),p=c(9),O=c(8),v=c(113),h=c(591),m=c(607),x=c(613),g=c(593),C=c(177),k=c(594),y=c(27),N=c(20),S=c(58),w=c(29),_=c(747),D=c.n(_),R=c(748),I=c.n(R),E=c(4),P=function(e){var t=e.error,c=e.isBeingAddedOrDeleted,a=e.isDefault,n=e.onClickRemove,o=e.onClickWarning,r=e.price,l=e.publicKey,d=e.URI,u=N.useSelector(N.selectUser(l)),b=Object(i.useState)(!1),f=Object(s.a)(b,2),O=f[0],v=f[1],m=Object(i.useCallback)((function(){v((function(e){return!e}))}),[]),x=Object(i.useCallback)((function(){o(l||d)}),[o,l,d]),g=Object(i.useCallback)((function(){n(l||d)}),[n,l,d]),C=t&&c||l&&d||!l&&!d,y=t;return C&&(y="Malformed host provided to <Host />, it must have either a public key or an URI (though not both), and it must not have both truthy error and isAdding props at the same time: ".concat(JSON.stringify(C))),O?Object(E.jsxs)("div",{className:j()(h.z,h.d,h.D),children:[Object(E.jsx)("button",{onClick:g,className:j()(h.o),children:"Remove"}),Object(E.jsx)("button",{onClick:m,className:j()(h.o),children:"Cancel"})]}):Object(E.jsxs)("div",{className:j()(h.z,h.B,h.f,I.a.container),children:[Object(E.jsxs)("div",{className:j()(h.z,h.B,h.h,I.a.pill),children:[l?Object(E.jsx)(k.a,{height:24,publicKey:l}):Object(E.jsx)("i",{className:j()("fas fa-globe")}),Object(E.jsx)("span",{className:I.a["display-name-or-uri"],children:d&&d.toLowerCase()||u.displayName||p.g(l)}),c||y?Object(E.jsx)("div",{}):Object(E.jsx)("span",{className:"fas fa-times",onClick:m,style:{fontSize:12}})]}),Object(E.jsxs)("div",{className:j()(h.p,h.f,I.a["price-and-status"]),children:[Object(E.jsxs)("span",{className:j()(h.p,I.a.price),children:[r," sats"]}),y?Object(E.jsx)("i",{className:j()("fas fa-exclamation-triangle",h.q,I.a.yellow),onClick:x}):c?Object(E.jsx)("i",{className:j()("fas fa-hourglass-half",h.q,I.a.yellow)}):a?Object(E.jsx)("i",{className:j()("fas fa-check",h.q,I.a.blue)}):Object(E.jsx)("i",{className:j()("fas fa-link",h.q,I.a.blue)})]})]})},T=j()(h.z,h.D,h.d,h.e,h.w),U=function(e){var t,c=e.hosts,a=e.onAddHost,n=e.onRemoveHost,o=e.onRetryHost,r=Object(i.useState)({publicKeyOrServerURI:"",URIHostAwaitingForToken:""}),l=Object(s.a)(r,2),d=l[0],u=d.publicKeyOrServerURI,b=d.URIHostAwaitingForToken,f=l[1],p=Object(i.useState)(""),v=Object(s.a)(p,2),m=v[0],x=v[1],C=Object(i.useState)(!1),k=Object(s.a)(C,2),N=k[0],S=k[1],_=Object(i.useRef)(null),R=Object(i.useState)(!1),I=Object(s.a)(R,2),U=I[0],M=I[1],A=Object(i.useState)(""),H=Object(s.a)(A,2),K=H[0],B=H[1],z=Object(i.useRef)(null),q=Object(i.useState)(!1),F=Object(s.a)(q,2),L=F[0],W=F[1],V=Object(i.useMemo)((function(){return c.slice().sort((function(e,t){return t.dateAdded-e.dateAdded}))}),[c]),G=Object(i.useMemo)((function(){return V.filter((function(e){return e.isDefault}))}),[V]),J=Object(i.useMemo)((function(){return V.filter((function(e){return!e.isDefault}))}),[V]),$=Object(i.useMemo)((function(){return[].concat(Object(y.a)(G),Object(y.a)(J))}),[G,J]),Y=Object(i.useCallback)((function(){S(!0)}),[]),Q=Object(i.useCallback)((function(){U||(navigator.clipboard?(M(!0),navigator.clipboard.readText().then((function(e){f(Object(w.a)((function(t){t.publicKeyOrServerURI=e})))})).catch((function(e){alert("Could not paste: ".concat(e.message))})).finally((function(){M(!1)}))):_.current&&(_.current.focus(),document.execCommand("paste"),_.current.blur()))}),[U,M]),Z=Object(i.useCallback)((function(){f(Object(w.a)((function(e){var t=O.f(e.publicKeyOrServerURI);t&&(e.publicKeyOrServerURI=t,e.URIHostAwaitingForToken=t)}))),O.f(u)||a(u)}),[f,u,a]),X=Object(i.useCallback)((function(){L||(navigator.clipboard?(W(!0),navigator.clipboard.readText().then((function(e){B(e)})).catch((function(e){alert("Could not paste: ".concat(e.message))})).finally((function(){W(!1)}))):z.current&&(z.current.focus(),document.execCommand("paste"),z.current.blur()))}),[L,W,B]),ee=Object(i.useCallback)((function(){f(Object(w.a)((function(e){e.publicKeyOrServerURI="",e.URIHostAwaitingForToken=""}))),a(u,K)}),[f,a,u,K]),te=Object(i.useCallback)((function(e){n(e)}),[n]),ce=Object(i.useCallback)((function(){x("")}),[x]),ae=Object(i.useCallback)((function(){n(m),ce()}),[n,m,ce]),ne=Object(i.useCallback)((function(){o(m),x("")}),[o,m,x]);return Object(E.jsxs)(E.Fragment,{children:[Object(E.jsxs)("div",{className:j()(h.i,h.D,D.a.container),children:[Object(E.jsxs)("div",{className:(h.y,h.d),children:[Object(E.jsx)("input",{className:j()("input-field",D.a["uri-or-token-input"]),onChange:function(e){f(Object(w.a)((function(t){t.publicKeyOrServerURI=e.target.value,t.URIHostAwaitingForToken=""}))),B("")},type:"text",value:u,onKeyUp:function(e){"Enter"!==e.key&&13!==e.keyCode||Z()},autoCapitalize:"off",autoCorrect:"none",placeholder:"Provider Pubkey or Server URI (include https or http)",ref:_,onFocus:Y}),0===u.length&&Object(E.jsx)("button",{className:j()(h.n,D.a["plus-or-paste-btn"]),disabled:U,onClick:Q,children:Object(E.jsx)("i",{className:"fas fa-paste"})}),u.length>0&&u!==b&&Object(E.jsx)("button",{className:j()(h.n,D.a["plus-or-paste-btn"]),disabled:0===u.length,onClick:Z,children:"+"})]}),u.length>0&&u===b&&Object(E.jsxs)("div",{className:(h.y,h.d),children:[Object(E.jsx)("input",{className:j()("input-field",D.a["uri-or-token-input"]),onChange:function(e){B(e.target.value)},type:"text",value:K,onKeyUp:function(e){"Enter"!==e.key&&13!==e.keyCode||ee()},autoCapitalize:"off",autoCorrect:"none",placeholder:"Token (required)",ref:z}),0===K.length&&Object(E.jsx)("button",{className:j()(h.n,D.a["plus-or-paste-btn"]),disabled:L,onClick:X,children:Object(E.jsx)("i",{className:"fas fa-paste"})}),K.length>0&&Object(E.jsx)("button",{className:j()(h.n,D.a["plus-or-paste-btn"]),disabled:0===K.length,onClick:ee,children:"+"})]}),Object(E.jsx)("div",{className:j()(h.i),children:(N?$:G).map((function(e){return Object(E.jsx)(P,{URI:e.URI,dateAdded:0,error:e.error,isBeingAddedOrDeleted:e.isBeingAddedOrDeleted,isDefault:e.isDefault,onClickRemove:te,onClickWarning:x,price:e.price,publicKey:e.publicKey,token:e.token},e.publicKey||e.URI)}))})]}),Object(E.jsx)(g.a,{modalOpen:!!m,modalTitle:null===(t=$.find((function(e){return e.publicKey===m||e.URI===m})))||void 0===t?void 0:t.error,toggleModal:ce,children:Object(E.jsxs)("div",{className:T,children:[Object(E.jsx)("button",{onClick:ae,className:"shock-form-button m-1",children:"REMOVE"}),Object(E.jsx)("button",{onClick:ne,className:"shock-form-button-confirm m-1",children:"RETRY"})]})})]})},M=c(30),A=function(){var e=Object(l.b)(),t=N.useSelector((function(e){return e.content.seedProviderPub})),c=N.useSelector((function(e){return e.userProfiles})),a=N.useSelector((function(e){return e.content.seedInfo})),n=a.seedUrl,o=a.seedToken,r=Object(i.useState)([]),d=Object(s.a)(r,2),u=d[0],b=d[1],f=Object(i.useState)(null),j=Object(s.a)(f,2),p=j[0],v=j[1],h=Object(i.useState)(""),m=Object(s.a)(h,2),x=m[0],g=m[1],C=Object(i.useState)(0),k=Object(s.a)(C,2),w=k[0],_=k[1],D=Object(i.useState)(""),R=Object(s.a)(D,2),I=R[0],P=R[1];Object(i.useEffect)((function(){var e=c[t];e?p&&e.avatar===p.avatar&&e.offerSeedService===p.offerSeedService||v(e):v(null)}),[c,t,p,v]),Object(i.useEffect)((function(){if(p){var e=p.offerSeedService;e!==x&&g(e)}}),[p,x,g]),Object(i.useEffect)((function(){var e=[];n&&o&&e.push({URI:n,token:o,price:0,isBeingAddedOrDeleted:!1,dateAdded:Date.now(),isDefault:!0,error:null,publicKey:null}),t&&p&&e.push({dateAdded:Date.now(),isBeingAddedOrDeleted:!0,isDefault:!0,publicKey:t,price:0,URI:null,token:null,error:null}),b(e)}),[n,o,t,p,b]),Object(i.useEffect)((function(){x&&O.c.get("/api/gun/otheruser/".concat(t,"/load/offeredServices>").concat(x)).then((function(e){var t=e.data.data;_(t.servicePrice)})).catch((function(e){P(e)}))}),[x,t,_,P]),Object(i.useEffect)((function(){var e=Object(y.a)(u),t=e.findIndex((function(e){return!e.URI}));-1!==t&&e[t].price!==w&&(e[t].isBeingAddedOrDeleted=!1,e[t].price=w,b(e))}),[w,_,u,b]),Object(i.useEffect)((function(){var e=I.message||I,t=Object(y.a)(u),c=t.findIndex((function(e){return!e.URI}));-1!==c&&e!==t[c].error&&(t[c].isBeingAddedOrDeleted=!1,t[c].error=e,b(t))}),[I,P,u,b]);var T=Object(i.useCallback)((function(t,c){try{t.startsWith("http")?Object(M.k)(t,c)(e):Object(M.l)(t)(e)}catch(a){alert("Could not add host: ".concat(a.message)),O.e.error("Could not add host: ",a)}}),[e]),A=Object(i.useCallback)((function(t){try{t.startsWith("http")?Object(M.k)("","")(e):Object(M.l)("")(e)}catch(c){alert("Could not remove host: ".concat(c.message)),O.e.error("Could not remove host: ",c)}}),[e]);Object(i.useEffect)((function(){return e(Object(S.b)(t))}),[t,e]);var H=Object(i.useMemo)((function(){return u.filter((function(e){return e}))}),[u]);return Object(E.jsx)(U,{hosts:H,onAddHost:T,onRemoveHost:A,onRetryHost:function(){}})},H=c(640),K=c(592),B=c(642),z=c(643),q=c(14),F=(c(749),c(35)),L=c(43),W=r.a.lazy((function(){return Promise.all([c.e(2),c.e(1),c.e(9)]).then(c.bind(null,637))})),V=r.a.lazy((function(){return Promise.all([c.e(2),c.e(1),c.e(3),c.e(5),c.e(17)]).then(c.bind(null,877))})),G=["https://shock.pub","https://shock.page","https://lightning.page","https://satoshi.watch"];t.default=function(){var e=N.useDispatch(),t=Object(i.useState)(!1),c=Object(s.a)(t,2),a=c[0],r=c[1],d=Object(i.useState)(null),f=Object(s.a)(d,2),y=f[0],S=f[1],w=Object(i.useState)(!1),_=Object(s.a)(w,2),D=_[0],R=_[1],I=N.useSelector((function(e){return e.node.publicKey})),P=N.useSelector(N.selectPostsNewestToOldest(I)),T=N.useSelector((function(e){return e.node.hostIP})),U=(N.useSelector(N.selectAllPosts),N.useSelector((function(e){return e.orders.myServices}))),M=Object(i.useState)("posts"),J=Object(s.a)(M,2),$=J[0],Y=J[1],Q=Object(l.c)(N.selectSelfUser);Object(i.useEffect)((function(){if(console.log(Q),Q.offerSeedService){var t=Object(v.e)(Q.offerSeedService)(e);return Object(q.c)(t)}}),[e]),Object(i.useEffect)((function(){return e(Object(F.q)(I))}),[e,I]),Object(i.useEffect)((function(){return e(Object(F.n)(I))}),[e,I]);var Z=Object(i.useCallback)((function(){r(!a)}),[a]),X=Object(i.useState)(!1),ee=Object(s.a)(X,2),te=ee[0],ce=ee[1],ae=N.useSelector((function(e){return e.node.webClientPrefix})),ne=Object(i.useState)(ae),oe=Object(s.a)(ne,2),se=oe[0],ie=oe[1],re=Object(i.useCallback)((function(){if(navigator.clipboard)navigator.clipboard.writeText(se+"/"+I);else{var e=document.querySelector("#web-client-url-holder");e.style.display="block",e.select(),document.execCommand("copy"),e.blur(),e.style.display="none"}}),[se,I]),le=Object(i.useCallback)((function(){console.debug("Subbing to webclient prefix on hostIP --| ".concat(T," |-- and public key --| ").concat(I," |--"));var t=Object(q.b)({query:"$user::Profile>webClientPrefix::on",onData:function(t){"string"===typeof t&&t!==ae&&Object(L.f)(t)(e)},onError:function(e){console.error("There was an error fetching web client prefix: ".concat(e))}});return Object(q.c)(t)}),[ae,e,T,I]);Object(i.useEffect)((function(){return le()}),[le]);var de=Object(i.useCallback)((function(e){Y(e)}),[]),ue=se!==ae,be=Object(i.useCallback)((function(){ce((function(e){return!e})),ie(ae)}),[ae]),fe=Object(i.useCallback)((function(){be()}),[be]),je=Object(i.useCallback)((function(){se!==ae&&(Object(L.f)(se)(e),O.c.post("/api/gun/put",{path:"$user>Profile>webClientPrefix",value:se}).catch((function(e){alert("There was an error setting your web client prefix: ".concat(e.message))}))),be()}),[se,ae,be,e]),pe=Object(i.useRef)(null),Oe=Object(i.useState)(!1),ve=Object(s.a)(Oe,2),he=ve[0],me=ve[1],xe=function(){var e=Object(o.a)(n.a.mark((function e(t){var c,a,o,i,r,l;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,t.preventDefault(),!he){e.next=4;break}return e.abrupt("return");case 4:if(me(!0),c=t.target,0!==(a=c.files).length){e.next=8;break}return e.abrupt("return");case 8:if(1===a.length){e.next=12;break}return O.e.error("Profile -> files.length !== 1"),alert("An error occurred while trying to set a header. This has been logged."),e.abrupt("return");case 12:return o=Object(s.a)(a,1),i=o[0],e.next=15,O.h(i,800,.9);case 15:return r=e.sent,"data:image/jpeg;base64,",l=r.slice("data:image/jpeg;base64,".length),e.next=20,O.c.post("/api/gun/put",{path:"$user>profileBinary>header",value:l});case 20:e.next=27;break;case 22:e.prev=22,e.t0=e.catch(0),O.e.error("Error while trying to load new header."),O.e.error(e.t0),alert("There was an error loading the new header: ".concat(e.t0.message));case 27:return e.prev=27,me(!1),e.finish(27);case 30:case"end":return e.stop()}}),e,null,[[0,22,27,30]])})));return function(t){return e.apply(this,arguments)}}(),ge=Object(i.useCallback)((function(e){e.preventDefault();var t=pe.current;t||(O.e.error("File input element for avatar is falsy."),alert("There was an error and it was logged.")),t.click()}),[]),Ce=Object(i.useCallback)((function(e){console.log(e),!y&&e||S(null),S(e)}),[y]),ke=Object(i.useCallback)((function(){S(null)}),[]),ye=Object(i.useCallback)(Object(o.a)(n.a.mark((function t(){var c;return n.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,y&&y.id){t.next=3;break}return t.abrupt("return");case 3:return R(!0),console.log("deleting:"),console.log(y),c=y.shared?"sharedPosts":"posts",t.next=9,O.c.post("/api/gun/put",{path:"$user>".concat(c,">").concat(y.id),value:null});case 9:e(Object(F.c)({id:y.id,authorId:I})),Ce(null),R(!0),t.next=20;break;case 14:t.prev=14,t.t0=t.catch(0),R(!0),console.log("Error when deleting post:"),console.log(t.t0),alert("Could not delete post: ".concat(t.t0.message));case 20:case"end":return t.stop()}}),t,null,[[0,14]])}))),[y,e,I,Ce,R]),Ne=Object(i.useCallback)((function(){try{if(navigator.clipboard){var e="".concat(ae,"/").concat(I);navigator.clipboard.writeText(e)}else{var t=document.querySelector("#public-key-holder");t.style.display="block",t.select(),document.execCommand("copy"),t.blur(),t.style.display="none",r(!1)}}catch(c){alert("Could not copy to clipboard: ".concat(c.message))}}),[ae,I]),Se=Object(i.useState)(!1),we=Object(s.a)(Se,2),_e=we[0],De=we[1],Re=Q.displayName,Ie=Object(i.useState)(Q.displayName||"Anon"),Ee=Object(s.a)(Ie,2),Pe=Ee[0],Te=Ee[1],Ue=Object(i.useState)(null),Me=Object(s.a)(Ue,2),Ae=Me[0],He=Me[1],Ke=Object(i.useCallback)((function(e){""!==e&&(He(e),O.c.put("/api/gun/me",{displayName:e}).catch((function(e){He(null),alert("There was an error setting a new display name: ".concat(e.message))})))}),[]);Object(i.useEffect)((function(){Ae===Re&&(console.debug("Got display name round trip from api."),He(null))}),[Ae,Re]);var Be=Object(i.useCallback)((function(){Te(Re),De((function(e){return!e}))}),[Re]),ze=Object(i.useCallback)((function(){Pe!==Re&&Ke(Pe),Be()}),[Re,Pe,Ke,Be]),qe=Object(i.useMemo)((function(){return{padding:"12px 24px"}}),[]),Fe=Q.bio,Le=Object(i.useState)(!1),We=Object(s.a)(Le,2),Ve=We[0],Ge=We[1],Je=Object(i.useState)(Fe||"bio"),$e=Object(s.a)(Je,2),Ye=$e[0],Qe=$e[1],Ze=Object(i.useState)(null),Xe=Object(s.a)(Ze,2),et=Xe[0],tt=Xe[1],ct=Object(i.useCallback)((function(e){""!==e&&(tt(e),O.c.put("/api/gun/me",{bio:e}).catch((function(e){tt(null),alert("There was an error setting a new bio: ".concat(e.message))})))}),[]);Object(i.useEffect)((function(){et===Fe&&(console.debug("Got bio round trip from api."),tt(null))}),[et,Fe]);var at=Object(i.useCallback)((function(){Qe(Fe),Ge((function(e){return!e}))}),[Fe]),nt=Object(i.useCallback)((function(){Ye!==Fe&&ct(Ye),at()}),[Fe,Ye,ct,at]),ot=Object(i.useMemo)((function(){return{padding:"12px 24px"}}),[]);return Object(E.jsxs)(E.Fragment,{children:[Object(E.jsxs)("div",{className:"page-container profile-page","data-v-9fc9c3da":"",children:[Object(E.jsxs)("div",{className:"profile-container","data-v-9fc9c3da":"",children:[Object(E.jsx)("div",{className:"profile-cover",onClick:ge,"data-v-9fc9c3da":"",children:Q.header&&Object(E.jsx)("img",{alt:"User set profile header.",src:"data:image/jpeg;base64,".concat(Q.header),"data-v-9fc9c3da":""})}),Object(E.jsxs)("div",{className:"profile-info-container","data-v-9fc9c3da":"",children:[Object(E.jsx)("div",{className:"profile-avatar",style:{height:"".concat(122,"px"),width:"".concat(122,"px")},"data-v-9fc9c3da":"",children:Object(E.jsx)(k.a,{height:122,publicKey:I,setsAvatar:!0,greyBorder:!0,disableOnlineRing:!0,"data-v-9fc9c3da":""})}),Object(E.jsxs)("div",{className:"profile-info","data-v-9fc9c3da":"",children:[Object(E.jsx)("p",{className:j()(h.C,"profile-name"),onClick:Be,"data-v-9fc9c3da":"",children:Ae||Re}),Object(E.jsx)("p",{className:j()(h.C,"profile-desc"),onClick:at,"data-v-9fc9c3da":"",children:et||Q.bio}),Object(E.jsxs)("div",{className:"config-btn",onClick:be,"data-v-9fc9c3da":"",children:[Object(E.jsx)("i",{className:"config-btn-icon icon-solid-spending-rule","data-v-9fc9c3da":""}),Object(E.jsx)("p",{className:"config-btn-text","data-v-9fc9c3da":"",children:"Config"})]})]})]}),Object(E.jsxs)("div",{"data-v-9fc9c3da":"",children:[Object(E.jsx)(b.b,{to:"/goLive",className:"profile-choice-container","data-v-9fc9c3da":"",children:Object(E.jsxs)("div",{style:{backgroundColor:"red",color:"white",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",padding:"0.2em 0.5em",borderRadius:"0.7em",fontSize:"16px",fontWeight:600},"data-v-9fc9c3da":"",children:[Object(E.jsx)("i",{className:"fas fa-video","data-v-9fc9c3da":""}),Object(E.jsx)("p",{"data-v-9fc9c3da":"",children:"GO LIVE"})]})}),Object(E.jsxs)(b.b,{to:"/createPost",className:"profile-choice-container","data-v-9fc9c3da":"",children:[Object(E.jsx)("i",{className:"profile-choice-icon fas fa-pen-square","data-v-9fc9c3da":""}),Object(E.jsx)("p",{className:"profile-choice-text","data-v-9fc9c3da":"",children:"Create Post"})]}),Object(E.jsxs)(b.b,{to:"/publishContent",className:"profile-choice-container","data-v-9fc9c3da":"",children:[Object(E.jsx)("i",{className:"profile-choice-icon fab fa-youtube","data-v-9fc9c3da":""}),Object(E.jsx)("p",{className:"profile-choice-text","data-v-9fc9c3da":"",children:"Publish Content"})]}),Object(E.jsxs)("button",{className:"profile-choice-container","data-v-9fc9c3da":"",children:[Object(E.jsx)("i",{className:"profile-choice-icon fas fa-shopping-cart","data-v-9fc9c3da":""}),Object(E.jsx)("p",{className:"profile-choice-text","data-v-9fc9c3da":"",children:"Offer a Product"})]}),Object(E.jsxs)(b.b,{to:"/offerService",className:"profile-choice-container","data-v-9fc9c3da":"",children:[Object(E.jsx)("i",{className:"profile-choice-icon fas fa-running","data-v-9fc9c3da":""}),Object(E.jsx)("p",{className:"profile-choice-text","data-v-9fc9c3da":"",children:"Offer a Service"})]})]}),Object(E.jsx)(H.a,{onChange:de,selected:$,"data-v-9fc9c3da":""}),Object(E.jsxs)("div",{className:"","data-v-9fc9c3da":"",children:["posts"===$&&P.map((function(e){return p.o(e)?Object(E.jsx)(i.Suspense,{fallback:Object(E.jsx)(C.a,{"data-v-9fc9c3da":""}),"data-v-9fc9c3da":"",children:Object(E.jsx)(V,{postID:e.originalPostID,sharerPublicKey:e.sharedBy,openTipModal:O.b,openUnlockModal:O.b,openDeleteModal:Ce,openShareModal:null,"data-v-9fc9c3da":""})},e.shareID):Object(E.jsx)(i.Suspense,{fallback:Object(E.jsx)(C.a,{"data-v-9fc9c3da":""}),"data-v-9fc9c3da":"",children:Object(E.jsx)(W,{id:e.id,publicKey:e.authorId,openTipModal:O.b,openUnlockModal:O.b,openDeleteModal:Ce,openShareModal:null,"data-v-9fc9c3da":""})},e.id)})),"services"===$&&function(){if(Q.offerSeedService)return Object.entries(U).filter((function(e){var t=Object(s.a)(e,2),c=t[0];return!!t[1]&&Q.offerSeedService===c})).map((function(t){var c=Object(s.a)(t,2),a=c[0],n=c[1];return Object(E.jsxs)("div",{className:"post","data-v-9fc9c3da":"",children:[Object(E.jsx)("strong",{"data-v-9fc9c3da":"",children:"Service ID"}),Object(E.jsx)("p",{"data-v-9fc9c3da":"",children:a}),Object(E.jsx)("strong",{"data-v-9fc9c3da":"",children:"Service Tpe"}),Object(E.jsx)("p",{"data-v-9fc9c3da":"",children:n.serviceType||""}),Object(E.jsx)("strong",{"data-v-9fc9c3da":"",children:"Service Title"}),Object(E.jsx)("p",{"data-v-9fc9c3da":"",children:n.serviceTitle||""}),Object(E.jsx)("strong",{"data-v-9fc9c3da":"",children:"Service Description"}),Object(E.jsx)("p",{"data-v-9fc9c3da":"",children:n.serviceDescription||""}),Object(E.jsx)("strong",{"data-v-9fc9c3da":"",children:"Service Condition"}),Object(E.jsx)("p",{"data-v-9fc9c3da":"",children:n.serviceCondition||""}),Object(E.jsx)("strong",{"data-v-9fc9c3da":"",children:"Service Price"}),Object(E.jsx)("p",{"data-v-9fc9c3da":"",children:n.servicePrice||""}),Object(E.jsx)("button",{onClick:function(){console.log("delete wtf"),Object(v.d)(a)(e)},"data-v-9fc9c3da":"",children:"DELETE SERVICE"})]},a)}))}()]}),Object(E.jsx)(K.a,{amt:200,"data-v-9fc9c3da":""}),Object(E.jsxs)(g.a,{toggleModal:Z,modalOpen:a,contentStyle:{padding:"40px 30px"},"data-v-9fc9c3da":"",children:[Object(E.jsx)(u.a,{bgColor:"#23282d",fgColor:"#4285b9",value:"".concat(ae,"/").concat(I),size:180,className:"profile-qrcode","data-v-9fc9c3da":""}),Object(E.jsx)("p",{className:"profile-qrcode-desc","data-v-9fc9c3da":"",children:"Other users can scan this code to contact you"}),!navigator.clipboard&&Object(E.jsx)("input",{className:"hidden-input",id:"public-key-holder",readOnly:!0,type:"text",value:"".concat(ae,"/").concat(I),"data-v-9fc9c3da":""}),Object(E.jsxs)("div",{className:"profile-clipboard-container",onClick:Ne,"data-v-9fc9c3da":"",children:[Object(E.jsx)("img",{src:B.a,className:"profile-clipboard-icon",alt:"","data-v-9fc9c3da":""}),Object(E.jsx)("p",{className:"profile-clipboard-text","data-v-9fc9c3da":"",children:"Tap to copy to clipboard"})]})]}),Object(E.jsxs)(g.a,{toggleModal:be,modalOpen:te,contentStyle:{padding:"2em 2em"},"data-v-9fc9c3da":"",children:[Object(E.jsx)("label",{htmlFor:"new-web-client-prefix","data-v-9fc9c3da":"",children:"Web Client"}),Object(E.jsxs)("div",{className:"web-client-prefix-picker","data-v-9fc9c3da":"",children:[Object(E.jsx)("i",{className:"far fa-copy",onClick:re,style:{fontSize:24},"data-v-9fc9c3da":""}),Object(E.jsx)("select",{onChange:function(e){ie(e.target.value)},name:"new-web-client-prefix",id:"new-web-client-prefix",value:se,"data-v-9fc9c3da":"",children:G.map((function(e){return Object(E.jsx)("option",{value:e,"data-v-9fc9c3da":"",children:e},e)}))}),Object(E.jsx)("span",{"data-v-9fc9c3da":"",children:"/"}),Object(E.jsx)("span",{style:{fontSize:12},"data-v-9fc9c3da":"",children:I})]}),!navigator.clipboard&&Object(E.jsx)("input",{className:"hidden-input",id:"web-client-url-holder",readOnly:!0,type:"text",value:se+"/"+I,"data-v-9fc9c3da":""}),Object(E.jsx)("br",{"data-v-9fc9c3da":""}),Object(E.jsx)("label",{htmlFor:"content-host","data-v-9fc9c3da":"",children:"Content Host"}),Object(E.jsx)(A,{"data-v-9fc9c3da":""}),Object(E.jsx)("br",{"data-v-9fc9c3da":""}),ue&&Object(E.jsxs)("div",{className:"flex-center",style:{marginTop:"auto"},"data-v-9fc9c3da":"",children:[Object(E.jsx)("button",{onClick:fe,className:"shock-form-button m-1","data-v-9fc9c3da":"",children:"CANCEL"}),Object(E.jsx)("button",{onClick:je,className:"shock-form-button-confirm m-1","data-v-9fc9c3da":"",children:"SUBMIT"})]})]}),Object(E.jsxs)(g.a,{toggleModal:Ce,modalOpen:y,contentStyle:{padding:"2em 2em"},"data-v-9fc9c3da":"",children:[Object(E.jsx)("div",{"data-v-9fc9c3da":"",children:"You sure delete"}),D&&Object(E.jsx)(C.a,{"data-v-9fc9c3da":""}),!D&&Object(E.jsxs)("div",{className:"flex-center",style:{marginTop:"auto"},"data-v-9fc9c3da":"",children:[Object(E.jsx)("button",{onClick:ke,className:"shock-form-button m-1","data-v-9fc9c3da":"",children:"CANCEL"}),Object(E.jsx)("button",{onClick:ye,className:"shock-form-button-confirm m-1","data-v-9fc9c3da":"",children:"DELETE"})]})]}),Object(E.jsx)(x.a,{onClick:Z,large:!0,iconURL:z.a,icon:null,label:null,"data-v-9fc9c3da":""})]}),Object(E.jsx)(m.a,{"data-v-9fc9c3da":""})]}),Object(E.jsx)("input",{type:"file",id:"avatar-file",ref:pe,hidden:!0,accept:"image/*",onChange:xe,"data-v-9fc9c3da":""}),Object(E.jsxs)(g.a,{contentStyle:qe,modalOpen:_e,toggleModal:Be,"data-v-9fc9c3da":"",children:[Object(E.jsx)("label",{htmlFor:"newDisplayName","data-v-9fc9c3da":"",children:"Display Name"}),Object(E.jsx)("input",{autoCapitalize:"none",autoCorrect:"off",type:"text",className:"input-field",placeholder:"New display name",name:"newDisplayName",onChange:function(e){var t=e.target.value;Te(t)},value:Pe,"data-v-9fc9c3da":""}),Pe!==Re&&""!==Pe?Object(E.jsx)("button",{onClick:ze,className:"shock-form-button-confirm m-1","data-v-9fc9c3da":"",children:"OK"}):Object(E.jsx)("button",{onClick:Be,className:"shock-form-button m-1","data-v-9fc9c3da":"",children:"GO BACK"})]}),Object(E.jsxs)(g.a,{contentStyle:ot,modalOpen:Ve,toggleModal:at,"data-v-9fc9c3da":"",children:[Object(E.jsx)("label",{htmlFor:"newBio","data-v-9fc9c3da":"",children:"New Bio"}),Object(E.jsx)("input",{autoCapitalize:"none",autoCorrect:"off",type:"text",className:"input-field",placeholder:"New bio",name:"newBio",onChange:function(e){var t=e.target.value;Qe(t)},value:Ye,"data-v-9fc9c3da":""}),Ye!==Fe&&""!==Ye?Object(E.jsx)("button",{onClick:nt,className:"shock-form-button-confirm m-1","data-v-9fc9c3da":"",children:"OK"}):Object(E.jsx)("button",{onClick:at,className:"shock-form-button m-1","data-v-9fc9c3da":"",children:"GO BACK"})]})]})}}}]);
//# sourceMappingURL=19.6bda1276.chunk.js.map