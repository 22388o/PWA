(this["webpackJsonpshocknet-pwa"]=this["webpackJsonpshocknet-pwa"]||[]).push([[28],{590:function(e,t,a){},591:function(e,t,a){},704:function(e,t,a){"use strict";a.r(t);var c=a(20),n=a(3),s=a(77),r=a.n(s),i=a(472),l=(a(590),a(443)),o=a(8),u=function(e){var t=e.onInputChange,a=e.amount,c=e.description;return Object(o.jsxs)("div",{className:"request-form-container",children:[Object(o.jsxs)("div",{className:"inputs-group",children:[Object(o.jsx)(l.a,{name:"amount",label:"Enter Amount",onChange:t,value:a,inputMode:"decimal"}),Object(o.jsxs)("select",{name:"unit",className:"unit-dropdown",onChange:t,children:[Object(o.jsx)("option",{value:"sats",children:"Sats"}),Object(o.jsx)("option",{value:"msats",children:"mSats"}),Object(o.jsx)("option",{value:"btc",children:"BTC"})]})]}),Object(o.jsx)(l.a,{name:"description",label:"Description",element:"textarea",onChange:t,value:c})]})},d=a(2),j=a.n(d),b=a(6),p=a(480),v=a.n(p),O=a(45),h=a(149),m=a(562),x=a(18),g=(a(591),a(484)),f=a(561),C=a(30),N=a(24),k=function(e){var t=e.amount,a=void 0===t?0:t,s=e.description,i=void 0===s?"N/A":s,l=e.unit,u=void 0===l?"":l,d=e.prevStep,p=Object(O.b)(),k=Object(N.g)(),w=Object(n.useState)(""),S=Object(c.a)(w,2),q=S[0],y=S[1],A=Object(n.useState)(""),E=Object(c.a)(A,2),T=E[0],_=E[1],I=Object(n.useState)(!1),D=Object(c.a)(I,2),L=D[0],M=D[1],J=Object(n.useState)(!1),K=Object(c.a)(J,2),U=K[0],$=K[1],z=Object(n.useState)(),B=Object(c.a)(z,2),H=B[0],Q=B[1],R=Object(n.useState)(""),V=Object(c.a)(R,2),W=(V[0],V[1]),F=Object(n.useState)(!1),G=Object(c.a)(F,2),P=G[0],X=G[1],Y=Object(n.useCallback)(Object(b.a)(j.a.mark((function e(){var t,c,n,s;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,M(!0),e.next=4,x.a.post("/api/lnd/addinvoice",{value:a,memo:i,expiry:100});case 4:t=e.sent,c=t.data,y(c.payment_request),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),W(null!==(n=null===e.t0||void 0===e.t0||null===(s=e.t0.response)||void 0===s?void 0:s.data.errorMessage)&&void 0!==n?n:"An unknown error has occurred");case 12:return e.prev=12,M(!1),e.finish(12);case 15:case"end":return e.stop()}}),e,null,[[0,9,12,15]])}))),[a,i]),Z=Object(n.useCallback)(Object(b.a)(j.a.mark((function e(){var t,a,c,n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,M(!0),e.next=4,x.a.post("/api/lnd/newaddress",{type:"p2wkh"});case 4:t=e.sent,a=t.data,_(a.address),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),W(null!==(c=null===e.t0||void 0===e.t0||null===(n=e.t0.response)||void 0===n?void 0:n.data.errorMessage)&&void 0!==c?c:"An unknown error has occurred");case 12:return e.prev=12,M(!1),e.finish(12);case 15:case"end":return e.stop()}}),e,null,[[0,9,12,15]])}))),[]),ee=Object(n.useCallback)(function(){var e=Object(b.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Q(t);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[]);Object(n.useEffect)((function(){P?Y():Z()}),[Y,Z,P]);var te=Object(n.useCallback)((function(){X(!P)}),[P]),ae=Object(n.useCallback)((function(){P?navigator.clipboard.writeText(q):navigator.clipboard.writeText(T)}),[P,q,T]),ce=Object(n.useCallback)(Object(b.a)(j.a.mark((function e(){var t,a,c;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!H){e.next=13;break}return e.prev=1,$(!0),e.next=5,Object(C.h)({publicKey:H.pk,message:"$$__SHOCKWALLET__INVOICE__"+q})(p);case 5:$(!1),k.push("/overview"),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(1),W(null!==(t=null!==(a=null===e.t0||void 0===e.t0||null===(c=e.t0.response)||void 0===c?void 0:c.data.errorMessage)&&void 0!==a?a:null===e.t0||void 0===e.t0?void 0:e.t0.message)&&void 0!==t?t:"An unknown error has occurred"),$(!1);case 13:case"end":return e.stop()}}),e,null,[[1,9]])}))),[H,q,k]);return Object(o.jsxs)("div",{className:"request-form-container",children:[U?Object(o.jsx)(h.a,{overlay:!0,text:"Sending Invoice..."}):null,P?H?Object(o.jsx)(g.a,{selected:!0,contact:H,selectContact:ee}):Object(o.jsx)(f.a,{selectContact:ee,features:["contact"]}):null,Object(o.jsxs)("div",{className:"qr-code-container",children:[Object(o.jsx)("div",{className:"qr-code",children:L?Object(o.jsx)(h.a,{overlay:!0,small:!0,text:""}):Object(o.jsx)(v.a,{value:P?q:T,size:180,fgColor:P?"#f5a623":"#4285b9",bgColor:"#001220"})}),Object(o.jsxs)("div",{className:r()({"qr-code-mode":!0,"lightning-active":P}),onClick:te,children:[Object(o.jsx)("p",{className:"qr-code-switch-name qr-code-on-chain-switch",children:"On-Chain"}),Object(o.jsx)("div",{className:"qr-code-switch",children:Object(o.jsx)("div",{className:"qr-code-switch-handle"})}),Object(o.jsx)("p",{className:"qr-code-switch-name qr-code-lightning-switch",children:"Lightning"})]})]}),Object(o.jsxs)("div",{className:"copy-clipboard-btn",onClick:ae,children:[Object(o.jsx)("i",{className:"fas fa-copy"}),Object(o.jsx)("p",{className:"copy-clipboard-btn-text",children:"Copy to Clipboard"})]}),Object(o.jsxs)("div",{className:"invoice-details",children:[Object(o.jsx)("p",{className:"invoice-details-change",onClick:d,children:"Change"}),Object(o.jsxs)("div",{className:"invoice-detail",children:[Object(o.jsx)("p",{className:"invoice-detail-title",children:"Amount"}),Object(o.jsxs)("p",{className:"invoice-detail-value",children:[a," ",u.toUpperCase()]})]}),Object(o.jsxs)("div",{className:"invoice-detail",children:[Object(o.jsx)("p",{className:"invoice-detail-title",children:"Description"}),Object(o.jsx)("p",{className:"invoice-detail-value",children:i})]})]}),P&&H?Object(o.jsx)(m.a,{wrapperStyle:{padding:0,marginTop:23},slideText:"SLIDE TO SEND",onSuccess:ce}):null]})};t.default=function(){var e=Object(n.useState)(0),t=Object(c.a)(e,2),a=t[0],s=t[1],l=Object(n.useState)(""),d=Object(c.a)(l,2),j=d[0],b=d[1],p=Object(n.useState)(0),v=Object(c.a)(p,2),O=v[0],h=v[1],m=Object(n.useState)("sats"),x=Object(c.a)(m,2),g=x[0],f=x[1],C=Object(n.useCallback)((function(e){"amount"===e.target.name&&s(e.target.value),"description"===e.target.name&&b(e.target.value),"unit"===e.target.name&&f(e.target.value)}),[]),N=Object(n.useCallback)((function(){O<1&&h(O+1)}),[O]),w=Object(n.useCallback)((function(){O>0&&h(O-1)}),[O]),S=Object(n.useCallback)((function(){return 0===O?Object(o.jsx)(u,{amount:a,description:j,onInputChange:C}):1===O?Object(o.jsx)(k,{amount:a,description:j,unit:g,prevStep:w}):void 0}),[O,a,j,C,w,g]),q=1===O,y=Array.from({length:2});return Object(o.jsxs)(i.a,{containerClassName:"request-page",contentClassName:"request-page-content",title:"REQUEST",children:[S(),Object(o.jsxs)("div",{className:"request-page-footer",children:[q?null:Object(o.jsxs)("div",{className:"request-page-controls",children:[Object(o.jsx)("div",{className:"request-page-control",onClick:N,children:"Skip"}),Object(o.jsx)("div",{className:"request-page-control request-page-next",onClick:N,children:"Next"})]}),Object(o.jsx)("div",{className:"request-page-indicators",children:y.map((function(e,t){return Object(o.jsx)("div",{className:r()({"request-page-indicator":!0,"request-page-indicator-active":t===O})})}))})]})]})}}}]);
//# sourceMappingURL=28.1d41ad0f.chunk.js.map