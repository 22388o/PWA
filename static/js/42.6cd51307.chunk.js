(this["webpackJsonpshocknet-pwa"]=this["webpackJsonpshocknet-pwa"]||[]).push([[42],{891:function(e,t,a){"use strict";a.r(t);var c=a(3),n=a.n(c),s=a(5),i=a(13),d=a(1),o=a(18),l=a(892),r=a.n(l),u=a(631),b=a(896),j=a.n(b),p=a(47),f=a(183),v=(a(899),a(32)),m=a(4);t.default=function(e){var t=e.publicKey,a=e.tipData,c=e.toggleOpen,l=Object(o.useDispatch)(),b=Object(o.useSelector)((function(e){return e.guest.user})),O=Object(o.useSelector)((function(e){var t;return null===(t=e.guest.paymentRequest)||void 0===t?void 0:t.response})),h=Object(d.useState)(!1),x=Object(i.a)(h,2),N=x[0],g=x[1],y=Object(d.useState)("10"),k=Object(i.a)(y,2),C=k[0],I=k[1],w=Object(d.useState)(!1),S=Object(i.a)(w,2),T=S[0],P=S[1],q=Object(d.useState)(""),E=Object(i.a)(q,2),R=E[0],D=E[1],V=Object(d.useState)(!1),A=Object(i.a)(V,2),J=A[0],K=A[1],Y=Object(d.useCallback)((function(){P(!0),u.a.rebuild();var e=setTimeout((function(){P(!1),u.a.rebuild()}),500);return function(){clearTimeout(e)}}),[]),z=Object(d.useCallback)(Object(s.a)(n.a.mark((function e(){var c,s;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,g(!0),e.next=4,l(Object(p.d)({senderPair:b,recipientPublicKey:t,amount:parseFloat(C),metadata:{targetType:"tip",ackInfo:a.postID}}));case 4:c=e.sent,s=c.ackNode,g(!1),s&&D(s),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.error(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])}))),[l,b,t,C,a.postID]);Object(d.useEffect)((function(){R&&Object(v.e)({query:"".concat(t,"::orderToResponse/").concat(R,"::on")}).then((function(){return Object(v.e)({query:"".concat(t,"::orderToResponse/").concat(R)})})).then((function(e){"orderAck"===e.type&&K(!0)}))}),[R,t,K]);var B=Object(d.useCallback)((function(){c()}),[c]),F="";return O&&(F="paymentRequest"),J&&(F="done"),Object(m.jsxs)("div",{className:"tip-modal","data-v-0fa44d70":"",children:[N?Object(m.jsx)("div",{className:"tip-modal-loading","data-v-0fa44d70":"",children:Object(m.jsx)(f.a,{text:"Submitting Tip Request...",style:{marginBottom:0},"data-v-0fa44d70":""})}):null,Object(m.jsx)("div",{className:"tip-modal-head","data-v-0fa44d70":"",children:Object(m.jsx)("div",{className:"tip-modal-title","data-v-0fa44d70":"",children:"Send Tip"})}),""===F&&Object(m.jsxs)("div",{className:"tip-modal-content","data-v-0fa44d70":"",children:[Object(m.jsx)("p",{className:"tip-modal-instructions","data-v-0fa44d70":"",children:"Please specify the amount of sats you'd like to tip this user with below and we'll generate an invoice for you to scan."}),Object(m.jsx)("input",{className:"tip-modal-input",value:C,onChange:function(e){return I(e.target.value)},"data-v-0fa44d70":""})]}),"paymentRequest"===F&&Object(m.jsxs)("div",{className:"tip-modal-content","data-v-0fa44d70":"",children:[Object(m.jsx)("p",{className:"tip-modal-instructions","data-v-0fa44d70":"",children:"We've successfully generated an invoice for you to tip, please scan the QR Code below using a Lightning wallet to pay it!"}),Object(m.jsx)("div",{className:"tip-modal-qr-code-container","data-v-0fa44d70":"",children:Object(m.jsx)(j.a,{value:O,size:210,bgColor:"#4db1ff",fgColor:"#1b2129","data-v-0fa44d70":""})}),Object(m.jsxs)("div",{className:"tip-modal-action-btns","data-v-0fa44d70":"",children:[Object(m.jsx)("a",{href:"lightning:".concat(O),className:"tip-modal-action-btn","data-v-0fa44d70":"",children:"PAY INVOICE"}),Object(m.jsx)(r.a,{text:O,onCopy:Y,"data-v-0fa44d70":"",children:Object(m.jsx)("div",{className:"tip-modal-action-btn","data-v-0fa44d70":"",children:T?"INVOICE COPIED!":"COPY INVOICE"})})]})]}),"done"===F&&Object(m.jsx)("div",{className:"tip-modal-footer",onClick:B,"data-v-0fa44d70":"",children:Object(m.jsx)("div",{className:"tip-modal-submit","data-v-0fa44d70":"",children:"TIP SENT!"})}),""===F&&Object(m.jsx)("div",{className:"tip-modal-footer",onClick:z,"data-v-0fa44d70":"",children:Object(m.jsx)("div",{className:"tip-modal-submit","data-v-0fa44d70":"",children:"SEND TIP"})})]})}},899:function(e,t,a){}}]);
//# sourceMappingURL=42.6cd51307.chunk.js.map