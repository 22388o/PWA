(this["webpackJsonpshocknet-pwa"]=this["webpackJsonpshocknet-pwa"]||[]).push([[14,7],{439:function(e,t,a){"use strict";a.d(t,"a",(function(){return s}));var n=a(3),c=a(72),r=a.n(c),i=a(88),o=(a(440),a(7)),s=73,l={minHeight:s};t.b=function(e){var t=e.pageTitle,a=e.drawerVisible,c=void 0!==a&&a,s=e.onHeight,u=void 0===s?i.a:s,d=Object(n.useCallback)((function(){window.history.back()}),[]),b=Object(n.useCallback)((function(e){if(e)try{u(e.getBoundingClientRect().height)}catch(t){console.log("Error inside onHeight mechanism in DialogNav:"),console.log(t)}}),[u]);return Object(o.jsxs)("div",{className:"dialog-nav-container",ref:b,style:l,"data-v-3c387bc6":"",children:[Object(o.jsx)("div",{className:"dialog-nav-back",onClick:d,"data-v-3c387bc6":"",children:Object(o.jsx)("i",{className:"icon icon-thin-back","data-v-3c387bc6":""})}),Object(o.jsx)("p",{className:"dialog-nav-title","data-v-3c387bc6":"",children:t}),Object(o.jsxs)("div",{className:r()({"dialog-nav-menu-btn":!0,"dialog-nav-hidden":!c}),"data-v-3c387bc6":"",children:[Object(o.jsx)("div",{className:"dialog-nav-menu-dash","data-v-3c387bc6":""}),Object(o.jsx)("div",{className:"dialog-nav-menu-dash","data-v-3c387bc6":""}),Object(o.jsx)("div",{className:"dialog-nav-menu-dash","data-v-3c387bc6":""})]})]})}},440:function(e,t,a){},442:function(e,t,a){"use strict";a(3),a(455);var n=a(7);t.a=function(e){var t=e.tipCounter,a=e.tipValue,c=e.zoomed;return a>0?Object(n.jsxs)("div",{className:"ribbon-container",style:{opacity:c?0:1},"data-v-1330fce2":"",children:[Object(n.jsx)("p",{className:"ribbon-title","data-v-1330fce2":"",children:"Total Tips"}),Object(n.jsxs)("p",{className:"ribbon-value","data-v-1330fce2":"",children:[t," ",1===t?"Tip":"Tips"]})]}):null}},455:function(e,t,a){},465:function(e,t,a){"use strict";a.d(t,"a",(function(){return O}));var n=a(21),c=a(2),r=a.n(c),i=a(6),o=a(0),s=a(16),l=a(480),u=a.n(l),d=a(509),b=a.n(d),f=function(){var e=Object(i.a)(r.a.mark((function e(t){var a;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,b.a._init){e.next=4;break}return e.next=4,new Promise((function(e,t){b.a.init("ShockWalletStore").then((function(){return console.log("File cache initialized!"),b.a.persist()})).then((function(a){a.persistent?e(a):t(a)}))}));case 4:return e.next=6,b.a.load(t);case 6:return a=e.sent,e.abrupt("return",a.createURL());case 10:return e.prev=10,e.t0=e.catch(0),console.warn(e.t0),e.abrupt("return",!1);case 14:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t){return e.apply(this,arguments)}}(),v=function(e,t){var a=document.querySelectorAll(t);return a&&a.length&&a.forEach((function(t){t.src||(t.src=e,t.muted=!0,t.autoplay=!0)})),!!(null===a||void 0===a?void 0:a.length)},p=function(e,t){return b.a.save(e,t)},j=function(e){var t=Promise.resolve();return e.forEach((function(e){t=t.then((function(){return e()}))})),t},m={"video/embedded":{formats:["mp4","webm"],element:"video",options:{autoplay:!0,muted:!0}},"image/embedded":{formats:["jpg","png","webp","jpeg"],element:"img",options:{}}},h=function(e){var t,a,n=null===(t=e.name)||void 0===t||null===(a=t.split("."))||void 0===a?void 0:a.slice(-1)[0],c=Object.entries(m).filter((function(e){var t=Object(s.a)(e,2);t[0];return t[1].formats.includes(n)}))[0];if(c){var r=Object(s.a)(c,2),i=r[0],l=r[1];return Object(o.a)({name:i},l)}return null},g=new u.a,O=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],a=arguments.length>2&&void 0!==arguments[2]&&arguments[2],c=e.map((function(e){var n=e.contentItems,c=e.id;return Object.entries(n).filter((function(e){var t=Object(s.a)(e,2),a=(t[0],t[1]);return m[a.type]})).map((function(e){var n=Object(s.a)(e,2),o=n[0],l=n[1];return function(){return new Promise((function(e){!g.get(l.magnetURI)||a?g.add(l.magnetURI,function(){var a=Object(i.a)(r.a.mark((function a(n){var u;return r.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:e(!0),(u=n.files.filter((function(e){var t,a,n=null===(t=e.name)||void 0===t||null===(a=t.split("."))||void 0===a?void 0:a.slice(-1)[0],c=Object.entries(m).filter((function(e){var t=Object(s.a)(e,2);t[0];return t[1].formats.includes(n)}))[0];return!!c&&Object(s.a)(c,2)[1].formats.includes(n)}))).map(function(){var e=Object(i.a)(r.a.mark((function e(a){var n,i,u,d,b,p;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=h(a)){e.next=3;break}return e.abrupt("return");case 3:return i="".concat(c,"-").concat(o,"-").concat(a.name),u=n.element,d="".concat(u,'[data-torrent="').concat(l.magnetURI,'"]'),e.next=8,f(i);case 8:if(!(b=e.sent)){e.next=14;break}return(p=g.get(l.magnetURI))&&p.destroy(),v(b,d),e.abrupt("return");case 14:document.querySelectorAll(d).forEach((function(e){var c=decodeURIComponent(l.magnetURI.replace(/.*(ws=)/gi,"")),r=n.formats.filter((function(e){return c.toLowerCase().endsWith(".".concat(e.toLowerCase()))})),i=Object(s.a)(r,1)[0],o=e.getAttribute("src");!t&&i||o?e.setAttribute("src",c):a.renderTo(e,n.options)}));case 16:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),n.on("done",(function(){u.map((function(e){var t=h(e),a="".concat(c,"-").concat(o,"-").concat(e.name),n=t.element,s="".concat(n,'[data-torrent="').concat(l.magnetURI,'"]');return e.getBlob(function(){var e=Object(i.a)(r.a.mark((function e(t,n){var c,i;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=3;break}return console.warn(t),e.abrupt("return");case 3:return e.next=5,p(a,n);case 5:if("false"!==(null===(c=document.querySelector(s))||void 0===c?void 0:c.dataset.played)||(null===c||void 0===c?void 0:c.getAttribute("src"))){e.next=11;break}return e.next=9,f(a);case 9:i=e.sent,v(i,s);case 11:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}()),e}))}));case 4:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()):e(!0)}))}}))})).reduce((function(e,t){return[].concat(Object(n.a)(e),Object(n.a)(t))}),[]);j(c)}},470:function(e,t,a){},481:function(e,t){},483:function(e,t){},484:function(e,t){},485:function(e,t){},486:function(e,t){},488:function(e,t){},489:function(e,t){},490:function(e,t){},494:function(e,t){},495:function(e,t){},496:function(e,t){},497:function(e,t){},498:function(e,t){},499:function(e,t){},500:function(e,t){},501:function(e,t){},502:function(e,t){},503:function(e,t){},504:function(e,t){},505:function(e,t){},506:function(e,t){},507:function(e,t){},668:function(e,t,a){},669:function(e,t,a){},670:function(e,t,a){},715:function(e,t,a){"use strict";a.r(t);var n=a(2),c=a.n(n),r=a(6),i=a(16),o=a(3),s=a(40),l=a(22),u=a(145),d=a(439),b=a(14),f=a(465),v=a(0),p=(a(442),a(470),a(668),a(7)),j=function(e){var t=e.id,a=e.item,n=e.index,c=e.postId,r=e.width,i=e.selected,s=e.updateSelection,l=decodeURIComponent(a.magnetURI.replace(/.*(ws=)/gi,"")),u={opacity:1};r&&(u.width=r);var d=Object(o.useCallback)((function(){i!==t&&s(t)}),[t,s,i]);return Object(p.jsxs)("div",{className:"media-container",onClick:d,style:{position:"relative"},"data-v-41bd1829":"",children:[Object(p.jsx)("img",{className:"image torrent-img torrent-img-".concat(c,"-").concat(t),alt:"Post Media","data-torrent":a.magnetURI,"data-file-key":n,style:u,src:l,"data-v-41bd1829":""}),i===t&&Object(p.jsx)("div",{style:Object(v.a)(Object(v.a)({},u),{},{opacity:1,position:"absolute",top:0,backgroundColor:"rgb(255,255,255,0.2)",height:"100%",display:"flex",alignItems:"center",justifyContent:"center"}),"data-v-41bd1829":"",children:Object(p.jsx)("i",{class:"far fa-check-circle fa-3x",style:{opacity:1},"data-v-41bd1829":""})})]})},m=(a(669),function(e){var t=e.id,a=e.item,n=e.index,c=e.postId,r=e.width,i=e.selected,s=e.updateSelection,l=decodeURIComponent(a.magnetURI.replace(/.*(ws=)/gi,"")),u={};r&&(u.width=r);var d=Object(o.useCallback)((function(){i!==t&&s(t)}),[t,s]);return Object(p.jsxs)("div",{className:"media-container",style:{position:"relative"},"data-v-a7efbf44":"",children:[Object(p.jsx)("div",{className:"video-container",style:{cursor:"pointer"},"data-v-a7efbf44":"",children:Object(p.jsx)("video",{style:u,className:"torrent-video torrent-video-".concat(c,"-").concat(t),"data-torrent":a.magnetURI,"data-file-key":n,controls:!0,"data-played":"false",src:l,"data-v-a7efbf44":""})}),Object(p.jsx)("div",{onClick:d,style:Object(v.a)(Object(v.a)({},u),{},{opacity:i===t?1:0,position:"absolute",top:0,backgroundColor:"rgb(255,255,255,0.2)",height:"100%",display:"flex",alignItems:"center",justifyContent:"center"}),"data-v-a7efbf44":"",children:Object(p.jsx)("i",{class:"far fa-check-circle fa-3x",style:{opacity:1},"data-v-a7efbf44":""})})]})});a(670),t.default=function(){Object(s.b)();var e=Object(l.g)(),t=Object(s.c)((function(e){return e.content.publishedContent})),a=Object(s.c)((function(e){return e.node.avatar})),n=Object(o.useState)(!1),v=Object(i.a)(n,2),h=v[0],g=v[1],O=Object(o.useState)(null),x=Object(i.a)(O,2),y=x[0],w=x[1],k=Object(o.useState)(""),C=Object(i.a)(k,2),I=C[0],N=C[1],S=Object(o.useState)("public"),R=Object(i.a)(S,2),U=R[0],T=R[1],P=Object(o.useState)(!1),A=Object(i.a)(P,2),E=A[0],L=(A[1],Object(o.useState)("")),q=Object(i.a)(L,2),D=q[0],B=q[1],H=(Object(o.useMemo)((function(){Object(f.a)([{id:"content",contentItems:t}])}),[t]),Object(o.useCallback)(function(){var a=Object(r.a)(c.a.mark((function a(n){var r,i,o,s;return c.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(n.preventDefault(),console.log("submitting"),""!==D||""!==I){a.next=5;break}return w("at least one paragraph or one media is required"),a.abrupt("return");case 5:return g(!0),r=[],""!==I&&r.push({type:"text/paragraph",text:I}),i="private"===U,""!==D&&(o=t[D])&&r.push({type:o.type,width:o.width,height:o.height,magnetURI:o.magnetURI,isPreview:E,isPrivate:i}),a.prev=10,a.next=13,b.a.post("/api/gun/wall",{tags:[],title:"Post",contentItems:r});case 13:200===a.sent.status?(console.log("post created successfully"),g(!1),e.push("/profile")):(w("invalid response status"),g(!1)),a.next=22;break;case 17:a.prev=17,a.t0=a.catch(10),console.log(a.t0),w(null!==(s=null===a.t0||void 0===a.t0?void 0:a.t0.errorMessage)&&void 0!==s?s:null===a.t0||void 0===a.t0?void 0:a.t0.message),g(!1);case 22:case"end":return a.stop()}}),a,null,[[10,17]])})));return function(e){return a.apply(this,arguments)}}(),[D,I,t,E,U,e,g,w])),M=Object(o.useCallback)(function(){var e=Object(r.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),w(null),N("");case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[]),V=Object(o.useCallback)((function(e){var t=e.target,a=t.value;switch(t.name){case"paragraph":return void N(a);case"postType":return console.log(a),void T(a);default:return}}),[N]);Object(o.useCallback)((function(e){e.preventDefault(),B(e.target.getAttribute("propid"))}),[D,B]);return console.log(D),Object(p.jsxs)("div",{className:"publish-content-form-container m-1","data-v-9b62859a":"",children:[h?Object(p.jsx)(u.a,{overlay:!0,fullScreen:!0,text:"Creating post...","data-v-9b62859a":""}):null,Object(p.jsx)(d.b,{drawerVisible:!1,pageTitle:"CREATE POST","data-v-9b62859a":""}),Object(p.jsxs)("form",{className:"publish-content-form",onSubmit:H,onReset:M,"data-v-9b62859a":"",children:[Object(p.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"1rem"},"data-v-9b62859a":"",children:[Object(p.jsx)("div",{className:"profile-avatar",style:{backgroundImage:"url(".concat(a,")")},"data-v-9b62859a":""}),Object(p.jsxs)("div",{"data-v-9b62859a":"",children:[Object(p.jsx)("h2",{"data-v-9b62859a":"",children:"Say Something"}),Object(p.jsx)("div",{className:"line","data-v-9b62859a":""})]}),Object(p.jsx)("div",{style:{width:"122px"},"data-v-9b62859a":""})]}),Object(p.jsx)("textarea",{className:"input-field",name:"paragraph",value:I,onChange:V,placeholder:"What's up?",rows:4,"data-v-9b62859a":""}),Object(p.jsxs)("div",{style:{marginLeft:"auto",display:"flex",alignItems:"center"},"data-v-9b62859a":"",children:[Object(p.jsxs)("strong",{"data-v-9b62859a":"",children:["Audience:"," ",Object(p.jsx)("i",{className:"fas ".concat("public"===U?"fa-globe-europe":"fa-credit-card"),"data-v-9b62859a":""})]}),Object(p.jsxs)("select",{name:"postType",id:"postType",onChange:V,style:{appearance:"none",backgroundColor:"rgba(0,0,0,0)",color:"var(--main-blue)",marginLeft:"0.3rem"},"data-v-9b62859a":"",children:[Object(p.jsx)("option",{value:"public",style:{backgroundColor:"rgba(0,0,0,0)",color:"var(--main-blue)"},"data-v-9b62859a":"",children:"Public"}),Object(p.jsx)("option",{value:"private","data-v-9b62859a":"",children:"Paywall"})]})]}),Object(p.jsx)("div",{style:{display:"flex",alignItems:"center",overflow:"auto",whiteSpace:"nowrap"},"data-v-9b62859a":"",children:Object.entries(t).map((function(e,t){var a=Object(i.a)(e,2),n=a[0],c=a[1];return"image/embedded"===c.type?Object(p.jsx)("div",{style:{width:100,margin:"1em"},"data-v-9b62859a":"",children:Object(p.jsx)(j,{id:n,item:c,index:t,postId:"content",width:"100px",selected:D,updateSelection:B,"data-v-9b62859a":""},"".concat(t))}):"video/embedded"===c.type?Object(p.jsx)("div",{style:{width:100},"data-v-9b62859a":"",children:Object(p.jsx)(m,{id:n,item:c,index:t,postId:"content",width:"100px",selected:D,updateSelection:B,"data-v-9b62859a":""},"".concat(t))}):null}))}),y?Object(p.jsx)("p",{className:"error-container","data-v-9b62859a":"",children:y}):null,Object(p.jsxs)("div",{className:"flex-center","data-v-9b62859a":"",children:[Object(p.jsx)("input",{type:"reset",value:"reset",className:"shock-form-button m-1","data-v-9b62859a":""}),Object(p.jsx)("input",{type:"submit",value:"submit",className:"shock-form-button-confirm m-1","data-v-9b62859a":""})]})]})]})}}}]);
//# sourceMappingURL=14.99fde543.chunk.js.map