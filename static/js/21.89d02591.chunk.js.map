{"version":3,"sources":["common/Post/components/Image/index.js","common/Line/index.tsx","common/ProfileDivider/index.tsx","common/ProfileDivider/css/ProfileDivider.module.css","images/clipboard.svg","images/qrcode.svg","pages/OtherUser/css/OtherUser.module.css","pages/OtherUser/components/FollowBtn/FollowBtn.module.css","pages/OtherUser/components/SendReqBtn/SendReqBtn.module.css","common/ContentWall/ContentWall.tsx","images/logo-alone-2.png","pages/Feed/components/BuyServiceModal/index.js","pages/OtherUser/components/FollowBtn/FollowBtn.tsx","pages/OtherUser/components/SendReqBtn/SendReqBtn.tsx","pages/OtherUser/index.tsx"],"names":["Image","id","item","index","postId","tipValue","tipCounter","hideRibbon","width","disableZoom","style","useState","zoomed","setZoomed","zoomLoaded","setZoomLoaded","previewVisible","setPreviewVisible","animationTimer","setAnimationTimer","handleZoomChange","useCallback","value","clearTimeout","timer","setTimeout","contentURL","decodeURIComponent","magnetURI","replace","mainImageStyle","opacity","imgNode","className","alt","data-torrent","data-file-key","src","onLoad","display","isZoomed","onZoomChange","overlayBgColorStart","overlayBgColorEnd","Line","color","length","type","useMemo","borderLeftStyle","borderLeftWidth","borderLeftColor","borderRightStyle","borderRightWidth","borderRightColor","height","borderTopStyle","borderTopWidth","borderTopColor","borderBottomStyle","borderBottomWidth","borderBottomColor","ProfileDivider","onChange","selected","showContentBtn","classNames","gStyles","styles","container","unselected","onClick","module","exports","MEDIA_STYLE","objectFit","ContentWall","publicKey","history","useHistory","React","content","setContent","error","setError","useEffect","subscription","rifle","query","onError","e","JSON","stringify","onData","key","produce","draft","Schema","Utils","warn","slice","then","sub","off","orderedContent","Object","values","sort","a","b","timestamp","map","i","push","author","title","description","BuyServiceModal","service","toggleOpen","dispatch","useDispatch","loading","setLoading","buySuccess","setBuySuccess","copied","setCopied","submitBuy","preventDefault","servicePrice","owner","serviceID","serviceType","Number","console","buyService","revealRes","log","addAvailableToken","seedUrl","tokens","addStreamToken","errorMessage","message","responseError","response","data","copyRes","navigator","clipboard","writeText","Modal","toggleModal","modalOpen","modalTitle","onSubmit","Loader","overlay","text","ModalSubmit","FollowBtn","authenticated","Store","auth","isFollowed","find","f","user","changingStatus","setChangingStatus","handleFollow","res","status","delete","put","Error","alert","handleGuestFollow","followUser","c","SendReqBtn","isInContact","handleClick","sendHandshakeRequest","Post","lazy","SharedPost","QR_IMAGE_SETTINGS","logoAlone","excavate","OtherUserPage","myGunPub","node","profileModalOpen","setProfileModalOpen","useParams","userPublicKey","selectedView","userServices","setUserServices","tipModalData","setTipModalOpen","unlockModalData","setUnlockModalOpen","buyServiceModalData","setBuyServiceModalOpen","shareModalData","setShareModalData","isMe","subscribeFollows","unsubscribeFollows","unsubscribePosts","subPosts","unsubscribeSharedPosts","subSharedPosts","unsubscribeUserProfile","subscribeUserProfile","s","msg","startsWith","toast","dark","displayName","toggleTipModal","tipData","toggleBuyServiceModal","buyData","toggleUnlockModal","unlockData","toggleShareModal","shareData","posts","copyClipboard","handleViewChange","header","ShockAvatar","greyBorder","bio","Pad","amt","insideRow","post","Common","fallback","openTipModal","openUnlockModal","openShareModal","postID","originalPostID","sharerPublicKey","sharedBy","authorId","openDeleteModal","entries","filter","serviceTitle","serviceDescription","serviceCondition","contentStyle","padding","noFullWidth","bgColor","fgColor","size","imageSettings","ClipboardIcon","SendTipModal","UnlockModal","ShareModal","AddBtn","large","iconURL","QRCodeIcon","icon","label","BottomBar"],"mappings":"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","file":"static/js/21.89d02591.chunk.js","sourcesContent":["import React, { useState, useCallback } from \"react\";\nimport { Controlled as ControlledZoom } from \"react-medium-image-zoom\";\nimport TipRibbon from \"../TipRibbon\";\nimport \"react-medium-image-zoom/dist/styles.css\";\nimport \"./css/index.scoped.css\";\n\nconst IMAGE_TRANSITION_MS = 200;\n\nconst Image = ({\n  id = \"\",\n  item,\n  index = 0,\n  postId = \"\",\n  tipValue = 0,\n  tipCounter = 0,\n  hideRibbon = false,\n  width = null,\n  disableZoom = false,\n  style = /** @type {import('react').CSSProperties} */ ({})\n}) => {\n  const [zoomed, setZoomed] = useState(false);\n  const [zoomLoaded, setZoomLoaded] = useState(false);\n  const [previewVisible, setPreviewVisible] = useState(true);\n  const [animationTimer, setAnimationTimer] = useState(null);\n\n  const handleZoomChange = useCallback(\n    value => {\n      clearTimeout(animationTimer);\n      setZoomed(value);\n      if (!value && zoomLoaded) {\n        setZoomLoaded(false);\n        const timer = setTimeout(() => {\n          setPreviewVisible(true);\n        }, IMAGE_TRANSITION_MS);\n        setAnimationTimer(timer);\n      }\n\n      if (value) {\n        setPreviewVisible(false);\n      }\n    },\n    [\n      animationTimer,\n      zoomLoaded,\n      setZoomed,\n      setZoomLoaded,\n      setPreviewVisible,\n      setAnimationTimer\n    ]\n  );\n\n  const contentURL = decodeURIComponent(\n    item.magnetURI.replace(/.*(ws=)/gi, \"\")\n  );\n  const mainImageStyle = { ...style, opacity: previewVisible ? 1 : 0 };\n  if (width) {\n    mainImageStyle.width = width;\n  }\n\n  const imgNode = (\n    <>\n      <img\n        className={`image torrent-img torrent-img-${postId}-${id}`}\n        alt=\"Post Media\"\n        data-torrent={item.magnetURI}\n        data-file-key={index}\n        style={mainImageStyle}\n        src={contentURL}\n      />\n      <img\n        className={`image enlarged-img enlarged-img-${postId}-${id}`}\n        alt=\"Post Media\"\n        data-file-key={index}\n        onLoad={() => {\n          setZoomLoaded(true);\n        }}\n        style={{\n          opacity: zoomed ? 1 : 0,\n          display: zoomed ? \"block\" : \"none\"\n        }}\n        src={contentURL}\n      />\n      {!hideRibbon && (\n        <TipRibbon\n          tipCounter={tipCounter}\n          tipValue={tipValue}\n          zoomed={zoomed}\n        />\n      )}\n    </>\n  );\n\n  return (\n    <div className=\"media-container\">\n      {disableZoom ? (\n        imgNode\n      ) : (\n        <ControlledZoom\n          isZoomed={zoomed}\n          onZoomChange={handleZoomChange}\n          overlayBgColorStart=\"#16191c00\"\n          overlayBgColorEnd=\"#16191c\"\n        >\n          {imgNode}\n        </ControlledZoom>\n      )}\n    </div>\n  );\n};\n\nexport default Image;\n","import { useMemo } from \"react\";\n\nexport interface LineProps {\n  color: string;\n  length: number;\n  type: \"vertical\" | \"horizontal\";\n  width: number;\n}\n\nconst Line = ({ color, length, type, width }: LineProps) => {\n  const style = useMemo<React.CSSProperties>(() => {\n    if (type === \"vertical\") {\n      return {\n        borderLeftStyle: \"solid\",\n        borderLeftWidth: `${width / 2}px`,\n        borderLeftColor: color,\n        borderRightStyle: \"solid\",\n        borderRightWidth: `${width / 2}px`,\n        borderRightColor: color,\n        height: length\n      };\n    }\n\n    if (type === \"horizontal\") {\n      return {\n        borderTopStyle: \"solid\",\n        borderTopWidth: width / 2,\n        borderTopColor: color,\n        borderBottomStyle: \"solid\",\n        borderBottomWidth: width / 2,\n        borderBottomColor: color,\n        width: length\n      };\n    }\n\n    return {};\n  }, [color, length, type, width]);\n\n  return <div style={style} />;\n};\n\nexport default Line;\n","import classNames from \"classnames\";\n\nimport * as gStyles from \"../../styles\";\nimport Line from \"../Line\";\n\nimport styles from \"./css/ProfileDivider.module.css\";\n\nexport interface ProfileDividerProps {\n  onChange(newlySelected: \"posts\" | \"services\" | \"content\"): void;\n  selected: \"posts\" | \"services\" | \"content\";\n  showContentBtn?: boolean;\n}\n\nconst ProfileDivider = ({\n  onChange,\n  selected,\n  showContentBtn\n}: ProfileDividerProps) => {\n  return (\n    <div\n      className={classNames(\n        gStyles.width100,\n        gStyles.rowCentered,\n        gStyles.spaceAround,\n        gStyles.padding12,\n        styles.container\n      )}\n    >\n      <span\n        className={classNames(\n          gStyles.unselectable,\n          selected === \"posts\" ? styles.selected : styles.unselected\n        )}\n        onClick={() => {\n          onChange(\"posts\");\n        }}\n      >\n        Posts\n      </span>\n\n      <div\n        className={classNames(\n          gStyles.absolute,\n          showContentBtn && styles[\"left-line\"]\n        )}\n      >\n        <Line color=\"white\" length={16} type=\"vertical\" width={2} />\n      </div>\n\n      <span\n        className={classNames(\n          gStyles.unselectable,\n          selected === \"services\" ? styles.selected : styles.unselected\n        )}\n        onClick={() => {\n          onChange(\"services\");\n        }}\n      >\n        Services\n      </span>\n\n      {showContentBtn && (\n        <>\n          <div className={classNames(gStyles.absolute, styles[\"right-line\"])}>\n            <Line color=\"white\" length={16} type=\"vertical\" width={2} />\n          </div>\n\n          <span\n            className={classNames(\n              gStyles.unselectable,\n              selected === \"content\" ? styles.selected : styles.unselected\n            )}\n            onClick={() => {\n              onChange(\"content\");\n            }}\n          >\n            Content\n          </span>\n        </>\n      )}\n    </div>\n  );\n};\n\nexport default ProfileDivider;\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"ProfileDivider_container__3ob9k\",\"selected\":\"ProfileDivider_selected__3U98y\",\"unselected\":\"ProfileDivider_unselected__1Z_qd\",\"left-line\":\"ProfileDivider_left-line__2xjlN\",\"right-line\":\"ProfileDivider_right-line__1d2KH\"};","export default __webpack_public_path__ + \"static/media/clipboard.beb19e1e.svg\";","export default __webpack_public_path__ + \"static/media/qrcode.69103c6c.svg\";","// extracted by mini-css-extract-plugin\nmodule.exports = {\"profile-page\":\"OtherUser_profile-page__OhC-_\",\"profile-container\":\"OtherUser_profile-container__2oq7s\",\"profile-cover\":\"OtherUser_profile-cover__3Fq6P\",\"profile-info-container\":\"OtherUser_profile-info-container__3qnqN\",\"profile-avatar\":\"OtherUser_profile-avatar__S6INq\",\"profile-name\":\"OtherUser_profile-name__3chmC\",\"profile-desc\":\"OtherUser_profile-desc__f9Dsj\",\"config-btn\":\"OtherUser_config-btn__t33_B\",\"config-btn-icon\":\"OtherUser_config-btn-icon__1p_6O\",\"config-btn-text\":\"OtherUser_config-btn-text__1Wg_T\",\"profile-choice-container\":\"OtherUser_profile-choice-container__3-xgF\",\"profile-choice-icon\":\"OtherUser_profile-choice-icon__3iOE1\",\"profile-choice-text\":\"OtherUser_profile-choice-text__deYLl\",\"profile-qrcode\":\"OtherUser_profile-qrcode__2Ok54\",\"profile-qrcode-desc\":\"OtherUser_profile-qrcode-desc__3cp0P\",\"profile-clipboard-container\":\"OtherUser_profile-clipboard-container__1P_p8\",\"profile-clipboard-icon\":\"OtherUser_profile-clipboard-icon__1nW2U\",\"profile-clipboard-text\":\"OtherUser_profile-clipboard-text__2g4AC\",\"publish-content-form\":\"OtherUser_publish-content-form__1YdVa\",\"publish-content-title\":\"OtherUser_publish-content-title__3EsYE\",\"publish-content-icon\":\"OtherUser_publish-content-icon__291ch\",\"m-1\":\"OtherUser_m-1__1dpvP\",\"content-container\":\"OtherUser_content-container__1lOOL\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"FollowBtn_container__2c7Cj\",\"text\":\"FollowBtn_text__1o7CS\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"SendReqBtn_container__2nY4E\",\"text\":\"SendReqBtn_text__2_2zC\"};","import React from \"react\";\nimport produce from \"immer\";\nimport { useHistory } from \"react-router-dom\";\n\nimport { rifle } from \"../../utils/WebSocket\";\nimport * as Schema from \"../../schema\";\nimport * as Utils from \"../../utils\";\nimport Image from \"../../common/Post/components/Image\";\n\nimport \"./css/ContentWall.scoped.css\";\n\nexport interface ContentWallProps {\n  publicKey: string;\n}\n\nconst ContentWall: React.FC<ContentWallProps> = ({ publicKey }) => {\n  const history = useHistory();\n  const [content, setContent] = React.useState<\n    Record<string, Schema.PublicContentItem>\n  >({});\n  const [error, setError] = React.useState<string>(\"\");\n\n  React.useEffect(() => {\n    const subscription = rifle({\n      query: `${publicKey}::publishedContentPublic::map.on`,\n      onError(e) {\n        setError(JSON.stringify(e, null, 4));\n      },\n      onData(item, key) {\n        setContent(\n          produce(draft => {\n            if (Schema.isPublicContentItem(item)) {\n              draft[key] = item;\n            } else {\n              Utils.logger.warn(\n                `Invalid/incomplete public published content found for public key ...${publicKey.slice(\n                  -8\n                )}, might be due to pending replication or was deleted if null: ${JSON.stringify(\n                  item,\n                  null,\n                  4\n                )}`\n              );\n            }\n          })\n        );\n      }\n    });\n\n    return () => {\n      subscription.then(sub => sub.off());\n    };\n  }, [publicKey]);\n\n  const orderedContent = React.useMemo(() => {\n    return Object.values(content).sort((a, b) => {\n      return b.timestamp - a.timestamp;\n    });\n  }, [content]);\n\n  if (error) {\n    return <p>{error}</p>;\n  }\n\n  return (\n    <>\n      {orderedContent.map((item, i) => {\n        return (\n          <div\n            className=\"item\"\n            key={item.id}\n            onClick={() => {\n              history.push(`/item/${item.author}/${item.id}`);\n            }}\n          >\n            {item.type === \"image/embedded\" && (\n              <div style={MEDIA_STYLE}>\n                <Image\n                  disableZoom\n                  hideRibbon\n                  id={item.id}\n                  index={i}\n                  item={item}\n                  postId={null}\n                  tipCounter={null}\n                  tipValue={null}\n                  style={MEDIA_STYLE}\n                />\n              </div>\n            )}\n\n            {item.type === \"video/embedded\" && (\n              <div className=\"video-placeholder\" style={MEDIA_STYLE}>\n                <i className=\"fas fa-video video-icon\" />\n              </div>\n            )}\n\n            <div className=\"title-and-description\">\n              <h2 className=\"title\">{item.title}</h2>\n\n              <p className=\"description\">{item.description || \" \"}</p>\n\n              <span className=\"timestamp\">\n                {Utils.formatTimestamp(item.timestamp)}\n              </span>\n            </div>\n          </div>\n        );\n      })}\n    </>\n  );\n};\n\nconst MAX_MEDIA_LONG_EDGE = 100;\n\nconst MEDIA_STYLE: React.CSSProperties = {\n  height: MAX_MEDIA_LONG_EDGE,\n  width: MAX_MEDIA_LONG_EDGE,\n  objectFit: \"contain\"\n};\n\nexport default ContentWall;\n","export default __webpack_public_path__ + \"static/media/logo-alone-2.512c5854.png\";","import React, { useCallback, useEffect, useState } from \"react\";\nimport { useDispatch } from \"react-redux\";\nimport Modal from \"../../../../common/Modal\";\nimport ModalSubmit from \"../../../../common/Modal/components/ModalSubmit\";\nimport { buyService } from \"../../../../actions/OrdersActions\";\nimport {\n  addAvailableToken,\n  addStreamToken\n} from \"../../../../actions/ContentActions\";\nimport Loader from \"../../../../common/Loader\";\nimport \"./css/index.scoped.css\";\n\nconst BuyServiceModal = ({ service, toggleOpen }) => {\n  const dispatch = useDispatch();\n  const [error, setError] = useState(\"\");\n  const [loading, setLoading] = useState(false);\n  const [buySuccess, setBuySuccess] = useState(null);\n  const [copied, setCopied] = useState(false);\n\n  const submitBuy = useCallback(\n    async e => {\n      e.preventDefault();\n      try {\n        const { servicePrice, owner, serviceID, serviceType } = service;\n        if (!owner || !serviceID || typeof Number(servicePrice) !== \"number\") {\n          console.error(\"invalid service provided\");\n          console.error(service);\n          return;\n        }\n        setLoading(true);\n        const revealRes = await buyService(\n          owner,\n          serviceID,\n          servicePrice\n        )(dispatch);\n        console.log(revealRes);\n        setBuySuccess(revealRes);\n        if (serviceType === \"torrentSeed\") {\n          addAvailableToken(revealRes.seedUrl, revealRes.tokens[0])(dispatch);\n        }\n        if (serviceType === \"streamSeed\") {\n          addStreamToken(revealRes.seedUrl, revealRes.tokens[0])(dispatch);\n        }\n      } catch (err) {\n        console.error(err);\n        if (service) {\n          const errorMessage = err.message;\n          const responseError = err.response?.data?.errorMessage;\n          setError(responseError ?? errorMessage);\n        }\n      } finally {\n        setLoading(false);\n      }\n    },\n    [dispatch, service]\n  );\n\n  // Reset the modal's state\n  useEffect(() => {\n    if (!service) {\n      setLoading(false);\n      setError(null);\n      setBuySuccess(null);\n    }\n  }, [buySuccess, service]);\n  const copyRes = useCallback(() => {\n    navigator.clipboard.writeText(JSON.stringify(buySuccess));\n    setCopied(true);\n  }, [buySuccess, setCopied]);\n  return (\n    <Modal\n      toggleModal={toggleOpen}\n      modalOpen={!!service}\n      modalTitle=\"Buy Service\"\n    >\n      {buySuccess ? (\n        <div className=\"tip-modal-success\">\n          <i className=\"tip-success-icon fas fa-check-circle\"></i>\n          <p className=\"tip-success-title\">\n            You successfully bought this service!\n          </p>\n          <p>{JSON.stringify(buySuccess)}</p>\n          <button onClick={copyRes}>COPY TO CLIPBOARD</button>\n          {copied && <p>Copied!</p>}\n          {/*<p className=\"tip-success-desc\">\n            Lorem ipsum, dolor sit amet consectetur adipisicing elit. Sunt\n            ratione repudiandae voluptates debitis esse ea ut molestiae\n            praesentium possimus quia\n          </p>*/}\n        </div>\n      ) : (\n        <form className=\"modal-form tip-form\" onSubmit={submitBuy}>\n          {error ? <div className=\"form-error\">{error}</div> : null}\n          {loading ? <Loader overlay text=\"Sending Tip...\" /> : null}\n          <p className=\"tip-modal-desc\">\n            {service && service.servicePrice} sats will be sent to the owner of\n            the service provider\n          </p>\n          <ModalSubmit text=\"BUY\" onClick={submitBuy} />\n        </form>\n      )}\n    </Modal>\n  );\n};\n\nexport default BuyServiceModal;\n","import { useCallback, useState } from \"react\";\nimport c from \"classnames\";\n\nimport * as Store from \"../../../../store\";\nimport * as Utils from \"../../../../utils\";\nimport * as gStyles from \"../../../../styles\";\n\nimport styles from \"./FollowBtn.module.css\";\nimport { useDispatch } from \"../../../../utils/index\";\nimport { followUser } from \"../../../../actions/GuestActions\";\n\nexport interface FollowBtnProps {\n  publicKey: string;\n}\n\nconst FollowBtn = ({ publicKey }: FollowBtnProps) => {\n  const dispatch = useDispatch();\n  const authenticated = Store.useSelector(({ auth }) => auth.authenticated);\n  const isFollowed = !!Store.useSelector(Store.selectFollows).find(\n    f => f.user === publicKey\n  );\n\n  const [changingStatus, setChangingStatus] = useState(false);\n\n  const handleFollow = useCallback(async () => {\n    try {\n      if (changingStatus) {\n        return;\n      }\n      setChangingStatus(true);\n\n      let res = { status: -1, data: { errorMessage: \"\" } };\n\n      if (isFollowed) {\n        res = await Utils.Http.delete(`/api/gun/follows/${publicKey}`);\n      } else {\n        res = await Utils.Http.put(`/api/gun/follows/${publicKey}`, {});\n      }\n\n      if (res.status !== 200) {\n        throw new Error(res.data.errorMessage);\n      }\n    } catch (e) {\n      if (isFollowed) {\n        alert(`Could not unfollow: ${e.message}`);\n      } else {\n        alert(`Could not follow: ${e.message}`);\n      }\n    } finally {\n      setChangingStatus(false);\n    }\n  }, [changingStatus, setChangingStatus, isFollowed, publicKey]);\n\n  const handleGuestFollow = useCallback(() => {\n    dispatch(followUser({ publicKey }));\n  }, [dispatch, publicKey]);\n\n  return (\n    <div\n      className={styles.container}\n      onClick={authenticated ? handleFollow : handleGuestFollow}\n    >\n      <p className={c(gStyles.unselectable, styles.text)}>\n        {changingStatus ? \"...\" : isFollowed ? \"Unfollow\" : \"Follow\"}\n      </p>\n    </div>\n  );\n};\n\nexport default FollowBtn;\n","import { useCallback, useState } from \"react\";\nimport c from \"classnames\";\nimport { useDispatch } from \"react-redux\";\nimport { useHistory } from \"react-router-dom\";\n\nimport * as Store from \"../../../../store\";\nimport * as Utils from \"../../../../utils\";\nimport * as gStyles from \"../../../../styles\";\nimport { sendHandshakeRequest } from \"../../../../actions/ChatActions\";\n\nimport styles from \"./SendReqBtn.module.css\";\n\nexport interface SendReqBtnProps {\n  publicKey: string;\n}\n\nconst SendReqBtn = ({ publicKey }: SendReqBtnProps) => {\n  const dispatch = useDispatch();\n  const history = useHistory();\n  const isInContact = Store.useSelector(Store.selectIsInContact(publicKey));\n\n  const [changingStatus, setChangingStatus] = useState(false);\n\n  const handleClick = useCallback(async () => {\n    try {\n      if (changingStatus) {\n        return;\n      }\n\n      if (isInContact) {\n        history.push(`/chat/${publicKey}`);\n        return;\n      }\n\n      setChangingStatus(true);\n\n      await dispatch(sendHandshakeRequest(publicKey));\n\n      setChangingStatus(false);\n    } catch (e) {\n      alert(`Could not send contact request: ${e.message}`);\n      Utils.logger.error(e);\n      setChangingStatus(false);\n    }\n  }, [changingStatus, dispatch, history, isInContact, publicKey]);\n\n  return (\n    <div className={c(styles.container)} onClick={handleClick}>\n      <p className={c(gStyles.unselectable, styles.text)}>\n        {changingStatus ? \"...\" : isInContact ? \"Message\" : \"Request Contact\"}\n      </p>\n    </div>\n  );\n};\n\nexport default SendReqBtn;\n","import React, {\n  Suspense,\n  useCallback,\n  useEffect,\n  useLayoutEffect,\n  useState\n} from \"react\";\nimport QRCode, { ImageSettings } from \"qrcode.react\";\nimport { useHistory, useParams } from \"react-router-dom\";\nimport classNames from \"classnames\";\nimport * as Common from \"shock-common\";\nimport { toast } from \"react-toastify\";\n\nimport { rifle } from \"../../utils/WebSocket\";\n\nimport { createGuestUser } from \"../../actions/GuestActions\";\nimport { subscribeUserProfile } from \"../../actions/UserProfilesActions\";\n\nimport BottomBar from \"../../common/BottomBar\";\nimport AddBtn from \"../../common/AddBtn\";\nimport Modal from \"../../common/Modal\";\nimport Loader from \"../../common/Loader\";\nimport ShockAvatar from \"../../common/ShockAvatar\";\nimport ProfileDivider from \"../../common/ProfileDivider\";\nimport Pad from \"../../common/Pad\";\nimport ContentWall from \"../../common/ContentWall\";\nimport GuestTipModal from \"../../common/TipModal\";\n\nimport ClipboardIcon from \"../../images/clipboard.svg\";\nimport QRCodeIcon from \"../../images/qrcode.svg\";\nimport logoAlone from \"../../images/logo-alone-2.png\";\nimport SendTipModal from \"../Feed/components/SendTipModal\";\nimport UnlockModal from \"../Feed/components/UnlockModal\";\nimport BuyServiceModal from \"../Feed/components/BuyServiceModal\";\nimport ShareModal from \"../Feed/components/ShareModal\";\nimport * as Store from \"../../store\";\nimport * as gStyles from \"../../styles\";\n\nimport styles from \"./css/OtherUser.module.css\";\nimport FollowBtn from \"./components/FollowBtn\";\nimport SendReqBtn from \"./components/SendReqBtn\";\nimport {\n  subscribeFollows,\n  unsubscribeFollows,\n  subscribeUserPosts as subPosts,\n  subSharedPosts\n} from \"../../actions/FeedActions\";\nimport { attachMedia } from \"../../utils/Torrents\";\nimport * as Utils from \"../../utils\";\n\nconst Post = React.lazy(() => import(\"../../common/Post\"));\nconst SharedPost = React.lazy(() => import(\"../../common/Post/SharedPost\"));\n\nconst AVATAR_SIZE = 122;\n\nconst OtherUserPage = () => {\n  //#region controller\n  const dispatch = Store.useDispatch();\n  const history = useHistory();\n  const myGunPub = Store.useSelector(({ node }) => node.publicKey);\n  const authenticated = Store.useSelector(({ auth }) => auth.authenticated);\n  const [profileModalOpen, setProfileModalOpen] = useState(false);\n\n  const { publicKey: userPublicKey, selectedView = \"posts\" } = useParams<{\n    publicKey: string;\n    selectedView: \"posts\" | \"services\" | \"content\";\n  }>();\n  const user = Store.useSelector(Store.selectUser(userPublicKey));\n  const [userServices, setUserServices] = useState({});\n  const [tipModalData, setTipModalOpen] = useState(null);\n  const [unlockModalData, setUnlockModalOpen] = useState(null);\n  const [buyServiceModalData, setBuyServiceModalOpen] = useState(null);\n  const [shareModalData, setShareModalData] = useState(null);\n  const isMe = myGunPub === user.publicKey;\n  // Effect to sub follows\n  useEffect(() => {\n    dispatch(subscribeFollows());\n    return () => {\n      dispatch(unsubscribeFollows());\n    };\n  }, [dispatch]);\n\n  useEffect(() => {\n    const unsubscribePosts = dispatch(subPosts(userPublicKey));\n    const unsubscribeSharedPosts = dispatch(subSharedPosts(userPublicKey));\n    const unsubscribeUserProfile = dispatch(\n      subscribeUserProfile(userPublicKey)\n    );\n\n    return () => {\n      unsubscribePosts();\n      unsubscribeSharedPosts();\n      unsubscribeUserProfile();\n    };\n  }, [dispatch, userPublicKey]);\n\n  //effect for services\n  useEffect(() => {\n    const subscription = rifle({\n      onData(data, key) {\n        setUserServices(s => ({\n          ...s,\n          [key]: data\n        }));\n      },\n      query: `${userPublicKey}::offeredServices::map.on`,\n      onError(e) {\n        const msg = Utils.extractErrorMessage(e);\n\n        if (msg.startsWith(\"timeout of \") || msg === \"TIMEOUT_ERR\") {\n          Utils.logger.warn(\n            `Could not fetch this user's (...${userPublicKey.slice(\n              -8\n            )}) offered services due to a timeout error, this can be expected if the data hasn't been populated yet.`\n          );\n        } else {\n          toast.dark(\n            `There was an error fetching ${user.displayName}'s offered services: ${msg}`\n          );\n          Utils.logger.error(e);\n        }\n      }\n    });\n    return () => {\n      subscription.then(sub => {\n        sub.off();\n      });\n    };\n  }, [user.displayName, userPublicKey]);\n\n  const toggleModal = useCallback(() => {\n    setProfileModalOpen(!profileModalOpen);\n  }, [profileModalOpen]);\n\n  const toggleTipModal = useCallback(\n    tipData => {\n      if (tipModalData || !tipData) {\n        setTipModalOpen(null);\n      }\n\n      setTipModalOpen(tipData);\n    },\n    [tipModalData]\n  );\n  const toggleBuyServiceModal = useCallback(\n    buyData => {\n      if (buyServiceModalData || !buyData) {\n        setBuyServiceModalOpen(null);\n      }\n\n      setBuyServiceModalOpen(buyData);\n    },\n    [buyServiceModalData]\n  );\n  const toggleUnlockModal = useCallback(\n    unlockData => {\n      if (unlockModalData || !unlockData) {\n        setUnlockModalOpen(null);\n      }\n\n      setUnlockModalOpen(unlockData);\n    },\n    [unlockModalData]\n  );\n\n  const toggleShareModal = useCallback(\n    shareData => {\n      console.log(\"share click yo\");\n      console.log(shareData);\n      if (shareModalData || !shareData) {\n        setShareModalData(null);\n      }\n\n      setShareModalData(shareData);\n    },\n    [shareModalData]\n  );\n\n  const posts = Store.useSelector(\n    Store.selectPostsNewestToOldest(userPublicKey)\n  );\n\n  const redirectAuth = useCallback(() => {\n    history.push(\"/auth\");\n  }, [history]);\n\n  const copyClipboard = useCallback(() => {\n    navigator.clipboard.writeText(userPublicKey);\n  }, [userPublicKey]);\n\n  const renderPosts = () => {\n    if (posts.length === 0) {\n      return <Loader text=\"loading posts...\" />;\n    }\n    return posts.map(post => {\n      if (Common.isSharedPost(post)) {\n        return (\n          <Suspense fallback={<Loader />} key={post.originalPostID}>\n            <SharedPost\n              openTipModal={toggleTipModal}\n              openUnlockModal={toggleUnlockModal}\n              openShareModal={toggleShareModal}\n              postID={post.originalPostID}\n              sharerPublicKey={post.sharedBy}\n            />\n          </Suspense>\n        );\n      }\n\n      return (\n        <Suspense fallback={<Loader />} key={post.id}>\n          <Post\n            id={post.id}\n            publicKey={post.authorId}\n            openTipModal={toggleTipModal}\n            openUnlockModal={toggleUnlockModal}\n            openDeleteModal={null}\n            openShareModal={toggleShareModal}\n          />\n        </Suspense>\n      );\n    });\n  };\n  const renderServices = () => {\n    return Object.entries(userServices)\n      .filter(([id, service]) => !!service)\n      .map(([id, service]) => {\n        const buyCB = () => {\n          setBuyServiceModalOpen({\n            // @ts-expect-error\n            ...service,\n            serviceID: id,\n            owner: userPublicKey\n          });\n        };\n        return (\n          <div className={styles.post}>\n            <strong>Service ID</strong>\n            <p>{id}</p>\n            <strong>Service Tpe</strong>\n            {/*@ts-expect-error*/}\n            <p>{service.serviceType}</p>\n            <strong>Service Title</strong>\n            {/*@ts-expect-error*/}\n            <p>{service.serviceTitle}</p>\n            <strong>Service Description</strong>\n            {/*@ts-expect-error*/}\n            <p>{service.serviceDescription}</p>\n            <strong>Service Condition</strong>\n            {/*@ts-expect-error*/}\n            <p>{service.serviceCondition}</p>\n            <strong>Service Price</strong>\n            {/*@ts-expect-error*/}\n            <p>{service.servicePrice}</p>\n            <button onClick={buyCB}>BUY SERVICE</button>\n          </div>\n        );\n      });\n  };\n  const renderContent = () => {\n    return (\n      <div className={styles[\"content-container\"]}>\n        <ContentWall publicKey={userPublicKey} />\n      </div>\n    );\n  };\n  const handleViewChange = useCallback(\n    (selected: \"posts\" | \"services\" | \"content\") => {\n      history.replace(`/otherUser/${userPublicKey}/${selected}`);\n    },\n    [history, userPublicKey]\n  );\n  //#endregion controller\n\n  return (\n    <div className={classNames(\"page-container\", styles[\"profile-page\"])}>\n      <div className={classNames(styles[\"profile-container\"])}>\n        <div className=\"profile-cover\">\n          {user.header && (\n            <img\n              className=\"w-100\"\n              alt=\"User set profile header.\"\n              src={`data:image/jpeg;base64,${user.header}`}\n            />\n          )}\n        </div>\n\n        <div className={styles[\"profile-info-container\"]}>\n          <div\n            className={styles[\"profile-avatar\"]}\n            style={{\n              height: `${AVATAR_SIZE}px`,\n              width: `${AVATAR_SIZE}px`\n            }}\n          >\n            <ShockAvatar\n              height={AVATAR_SIZE}\n              publicKey={userPublicKey}\n              greyBorder\n            />\n          </div>\n          <div>\n            <p className={styles[\"profile-name\"]}>{user.displayName}</p>\n            <p className={styles[\"profile-desc\"]}>\n              {user.bio || \"Lightning.Page user\"}\n            </p>\n\n            <div className={gStyles.rowCentered}>\n              {!isMe && <FollowBtn publicKey={userPublicKey} />}\n\n              <Pad amt={24} insideRow />\n\n              {!isMe && <SendReqBtn publicKey={userPublicKey} />}\n            </div>\n          </div>\n        </div>\n\n        <ProfileDivider\n          onChange={handleViewChange}\n          selected={selectedView}\n          showContentBtn\n        />\n        <Pad amt={30} />\n\n        <div>\n          {selectedView === \"posts\" && renderPosts()}\n          {selectedView === \"services\" && renderServices()}\n          {selectedView === \"content\" && renderContent()}\n        </div>\n\n        {/* Allow some wiggle room to avoid the QR btn covering the view selector */}\n        <Pad amt={200} />\n\n        <Modal\n          toggleModal={toggleModal}\n          modalOpen={profileModalOpen}\n          contentStyle={{\n            padding: \"40px 30px\"\n          }}\n          noFullWidth\n        >\n          <QRCode\n            bgColor=\"#23282d\"\n            fgColor=\"#64bbff\"\n            value={userPublicKey}\n            size={180}\n            className={styles[\"profile-qrcode\"]}\n            imageSettings={QR_IMAGE_SETTINGS}\n          />\n          <p className={styles[\"profile-qrcode-desc\"]}>\n            Scan this code to contact this user\n          </p>\n          <div\n            className={styles[\"profile-clipboard-container\"]}\n            onClick={copyClipboard}\n          >\n            <img\n              src={ClipboardIcon}\n              className={styles[\"profile-clipboard-icon\"]}\n              alt=\"\"\n            />\n            <p className={styles[\"profile-clipboard-text\"]}>\n              Tap to copy to clipboard\n            </p>\n          </div>\n        </Modal>\n        <SendTipModal tipData={tipModalData} toggleOpen={toggleTipModal} />\n        <GuestTipModal\n          publicKey={userPublicKey}\n          tipData={tipModalData}\n          toggleOpen={toggleTipModal}\n        />\n        <UnlockModal\n          unlockData={unlockModalData}\n          toggleOpen={toggleUnlockModal}\n        />\n        <BuyServiceModal\n          service={buyServiceModalData}\n          toggleOpen={toggleBuyServiceModal}\n        />\n        <ShareModal shareData={shareModalData} toggleOpen={toggleShareModal} />\n      </div>\n      {authenticated && (\n        <AddBtn\n          onClick={toggleModal}\n          large\n          iconURL={QRCodeIcon}\n          icon={null}\n          label={null}\n        />\n      )}\n\n      <BottomBar />\n    </div>\n  );\n};\n\nconst QR_IMAGE_SETTINGS: ImageSettings = {\n  src: logoAlone,\n  height: 36,\n  width: 36,\n  excavate: true\n};\n\nexport default OtherUserPage;\n"],"sourceRoot":""}