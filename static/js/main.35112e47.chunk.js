(this["webpackJsonpshocknet-pwa"]=this["webpackJsonpshocknet-pwa"]||[]).push([[10],{112:function(e,t,n){"use strict";n.d(t,"a",(function(){return s})),n.d(t,"c",(function(){return l})),n.d(t,"d",(function(){return d})),n.d(t,"e",(function(){return p})),n.d(t,"b",(function(){return f}));var r=n(2),a=n.n(r),c=n(12),o=n(5),u=n(13),i=n(14),s={ADD_MY_SERVICE:"service/add",REMOVE_MY_SERVICE:"service/remove",ADD_BOUGHT_SERVICE:"service/add/bought"},l=function(e,t,n){return function(){var r=Object(o.a)(a.a.mark((function r(o){var i,s,l,d,p,f,b,v,O;return a.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(i=n,!n){r.next=11;break}return r.next=4,u.a.post("/api/gun/put",{path:"$user>offeredServices>".concat(i),value:e});case 4:if(s=r.sent,l=s.data,l.ok){r.next=9;break}return r.abrupt("return","");case 9:r.next=19;break;case 11:return r.next=13,u.a.post("/api/gun/set",{path:"$user>offeredServices",value:e});case 13:if(d=r.sent,p=d.data,f=p.ok,b=p.id,f){r.next=18;break}return r.abrupt("return","");case 18:i=b;case 19:return v=Object.entries(t).map((function(e){var t=Object(c.a)(e,2),n=t[0],r=t[1];if(r)return console.log("setting: ".concat(n," to ").concat(r)),u.a.post("/api/gun/put",{path:"$user>offeredServices>".concat(i,">").concat(n),value:{$$__ENCRYPT__FOR:"me",value:r}})})),r.next=22,Promise.all(v);case 22:if("torrentSeed"!==(O=e.serviceType)&&"streamSeed"!==O){r.next=27;break}return console.log("updating profile with service"),r.next=27,u.a.post("/api/gun/put",{path:"$user>Profile>SeedServiceProvided",value:i});case 27:return r.abrupt("return",i);case 28:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}()},d=function(e){return function(){var t=Object(o.a)(a.a.mark((function t(n){return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,u.a.post("/api/gun/put",{path:"$user>offeredServices>".concat(e),value:null});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},p=function(){return function(e){return Object(i.e)({query:"$user::offeredServices::on",publicKey:"",reconnect:!1,onData:function(){var t=Object(o.a)(a.a.mark((function t(n){var r;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r=Object.entries(n),console.log(r),r.forEach(function(){var t=Object(o.a)(a.a.mark((function t(n){var r,o,i,l;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=Object(c.a)(n,1),"_"!==(o=r[0])){t.next=3;break}return t.abrupt("return");case 3:return t.next=5,u.a.get("/api/gun/user/load/offeredServices>".concat(o));case 5:if(i=t.sent,l=i.data,console.log(l.data),null!==l.data){t.next=11;break}return e({type:s.REMOVE_MY_SERVICE,data:o}),t.abrupt("return");case 11:e({type:s.ADD_MY_SERVICE,data:{id:o,serviceInfo:l.data}});case 12:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()})}},f=function(e,t,n){return function(){var r=Object(o.a)(a.a.mark((function r(c){var o,i,l;return a.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,u.a.post("/api/lnd/unifiedTrx",{type:"service",amt:Number(n),to:e,memo:"",feeLimit:500,ackInfo:t});case 2:return o=r.sent,i=o.data,console.log(i),l=JSON.parse(i.orderAck.response),c({type:s.ADD_BOUGHT_SERVICE,data:{orderAck:l,owner:e,serviceID:t}}),r.abrupt("return",l);case 8:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}()}},13:function(e,t,n){"use strict";var r=n(2),a=n.n(r),c=n(0),o=n(5),u=n(15),i=n.n(u),s=n(33),l={GET:["/healthz","/ping","/favicon.ico","/api/lnd/wallet/status"],POST:["/api/security/exchangeKeys","/api/encryption/exchange"],PUT:[],DELETE:[]},d=function(){var e=Object(o.a)(a.a.mark((function e(t){var r,o,u,i,l,d,p;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.resolve().then(n.bind(null,17));case 2:if(r=e.sent,o=r.store,u=o.getState().encryption.hostKeys,i=o.getState().node.hostId,l=t.data,d=u[i],"false"!==Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_SHOCK_ENCRYPTION_ECC){e.next=10;break}return e.abrupt("return",t);case 10:if(d){e.next=13;break}return console.warn("[ENCRYPTION] Unable to retrieve key for specified Host ID:",i,u),e.abrupt("return",t);case 13:return e.next=15,s.b({publicKey:d,message:JSON.stringify(l)});case 15:return p=e.sent,e.abrupt("return",Object(c.a)(Object(c.a)({},t),{},{data:p}));case 17:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),p=function(){var e=Object(o.a)(a.a.mark((function e(t){var r,o,u,i,l,d,p,f;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return",t);case 2:return e.next=4,Promise.resolve().then(n.bind(null,17));case 4:if(o=e.sent,u=o.store,i=u.getState().encryption.userKeys,l=u.getState().node.hostId,d=t.data,s.d(d)){e.next=11;break}return e.abrupt("return",t);case 11:if(p=null===(r=i[l])||void 0===r?void 0:r.privateKey){e.next=15;break}return console.warn("[ENCRYPTION] Unable to retrieve key for specified Host ID:",l,i),e.abrupt("return",t);case 15:return e.next=17,s.a({privateKey:p,encryptedMessage:d});case 17:return f=e.sent,e.abrupt("return",Object(c.a)(Object(c.a)({},t),{},{data:f}));case 19:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();i.a.interceptors.request.use(function(){var e=Object(o.a)(a.a.mark((function e(t){var r,c,o,u,i;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Promise.resolve().then(n.bind(null,17));case 3:if(r=e.sent,c=r.store,o=c.getState().node.authToken,u=c.getState().encryption.deviceId,(i=0===t.url.indexOf("/"))&&(t.headers.common.Authorization="Bearer ".concat(o),t.headers.common["encryption-device-id"]=u),!i||l[t.method.toUpperCase()].includes(t.url)){e.next=13;break}return e.next=12,d(t);case 12:return e.abrupt("return",e.sent);case 13:return e.abrupt("return",t);case 16:e.prev=16,e.t0=e.catch(0),console.error(e.t0);case 19:case"end":return e.stop()}}),e,null,[[0,16]])})));return function(t){return e.apply(this,arguments)}}()),i.a.interceptors.response.use(function(){var e=Object(o.a)(a.a.mark((function e(t){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",p(t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),function(){var e=Object(o.a)(a.a.mark((function e(t){var n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,p(t.response);case 3:return n=e.sent,t.response=n,e.abrupt("return",Promise.reject(t));case 8:throw e.prev=8,e.t0=e.catch(0),console.error(e.t0),t;case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}()),t.a=i.a},14:function(e,t,n){"use strict";n.d(t,"a",(function(){return g})),n.d(t,"g",(function(){return k})),n.d(t,"h",(function(){return D})),n.d(t,"e",(function(){return I})),n.d(t,"f",(function(){return R})),n.d(t,"b",(function(){return P})),n.d(t,"d",(function(){return C})),n.d(t,"c",(function(){return U}));var r=n(26),a=n(12),c=n(21),o=n(2),u=n.n(o),i=n(0),s=n(5),l=n(167),d=n.n(l),p=n(284),f=n.n(p),b=n(24),v=n(33),O=n(86),h=n(18),E=n(36),j={reconnection:!0,rejectUnauthorized:!1,parser:f.a,withCredentials:!0,transports:["websocket"]},m=new Map,y=null,S=null,g=function(){var e=Object(s.a)(u.a.mark((function e(){var t,r,a,c,o,l,p,f,v=arguments;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=v.length>0&&void 0!==v[0]?v[0]:"",c=v.length>1&&void 0!==v[1]&&v[1],e.next=4,Promise.resolve().then(n.bind(null,17));case 4:if(o=e.sent,l=o.store,p=Object(i.a)(Object(i.a)({},j),{},{auth:{encryptionId:l.getState().encryption.deviceId}}),!(null===(t=y)||void 0===t?void 0:t.connected)||!(null===(r=S)||void 0===r?void 0:r.connected)||c){e.next=9;break}return e.abrupt("return",{GunSocket:y,LNDSocket:S});case 9:return y&&S&&c&&(_(y),_(S)),y=d()("".concat(a,"/gun"),p),S=d()("".concat(a,"/lndstreaming"),p),(f=x(y))("query:data",(function(e){var t,n=m.get(e.subscriptionId);n&&(null===(t=n.onData)||void 0===t||t.call(n,e.response.data,e.response.key))})),f("query:error",(function(e){var t,n=m.get(e.subscriptionId);n&&(null===(t=n.onError)||void 0===t||t.call(n,e.response.data,e.response.key))})),y.on(b.c,(function(){l.dispatch(Object(h.e)(!1))})),y.on("encryption:error",function(){var e=Object(s.a)(u.a.mark((function e(t){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("deviceId"!==t.field&&"Bad Mac"!==t.message){e.next=5;break}return n=l.getState().node.hostIP,e.next=4,l.dispatch(Object(E.b)(n,!1));case 4:l.dispatch(Object(h.e)(!1));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.abrupt("return",{GunSocket:y,LNDSocket:S});case 18:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),_=function(e){e.off("*"),e.close()},T=function(){var e=Object(s.a)(u.a.mark((function e(t){var n,r,a,c,o,i;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.err,r=t.data,a=t.callback,c=t.privateKey,!(n&&!v.d(n)||r&&!v.d(r))){e.next=4;break}return a(n,r),e.abrupt("return");case 4:if(!n){e.next=10;break}return e.next=7,v.a({privateKey:c,encryptedMessage:n});case 7:return o=e.sent,a(o,r),e.abrupt("return");case 10:if(!r){e.next=16;break}return e.next=13,v.a({privateKey:c,encryptedMessage:r});case 13:return i=e.sent,a(n,i),e.abrupt("return");case 16:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),w=function(e){return function(){var t=Object(s.a)(u.a.mark((function t(r,a,c){var o,i,s,l,d,p,f,b,O,h;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Promise.resolve().then(n.bind(null,17));case 2:if(i=t.sent,s=i.store,l=s.getState().encryption,d=l.hostKeys,p=l.userKeys,f=s.getState().node.hostId,!v.e(r)){t.next=9;break}return e.emit(r,a,c),t.abrupt("return");case 9:if(b=d[f],O=null===(o=p[f])||void 0===o?void 0:o.privateKey,b&&O){t.next=14;break}return console.error("[WS] Unable to retrieve key for specified Host ID:",f),t.abrupt("return");case 14:return t.next=16,a?v.b({publicKey:b,message:JSON.stringify(a)}):null;case 16:h=t.sent,e.emit(r,h,(function(e,t){T({err:e,data:t,callback:c,privateKey:O})}));case 18:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}()},x=function(e){return function(){var t=Object(s.a)(u.a.mark((function t(r,a){var o,i,l,d,p,f;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Promise.resolve().then(n.bind(null,17));case 2:if(i=t.sent,l=i.store,d=l.getState().encryption.userKeys,p=l.getState().node.hostId,!v.e(r)){t.next=9;break}return e.on(r,a),t.abrupt("return");case 9:if(f=null===(o=d[p])||void 0===o?void 0:o.privateKey){t.next=13;break}return console.error("[WS] Unable to retrieve key for specified Host ID:",p),t.abrupt("return");case 13:e.on(r,Object(s.a)(u.a.mark((function e(){var t,n,r,o,i=arguments;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(t=i.length,n=new Array(t),r=0;r<t;r++)n[r]=i[r];return e.next=3,Promise.all(n.map(function(){var e=Object(s.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return",t);case 2:if(!t||v.d(t)){e.next=5;break}return console.warn("Non-encrypted socket message",t),e.abrupt("return",t);case 5:return e.abrupt("return",v.a({privateKey:f,encryptedMessage:t}));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 3:o=e.sent,a.apply(void 0,Object(c.a)(o));case 5:case"end":return e.stop()}}),e)}))));case 14:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()},k=function(e){var t=e.eventName,r=e.callback;return new Promise((function(e,a){try{Promise.resolve().then(n.bind(null,17)).then((function(n){var c=n.store,o=x(y),u=w(y);u("subscribe:".concat(t),{token:c.getState().node.authToken},(function(e){if(e)return console.error(e),void a(e)})),r&&o(t,(function(e){r(null,e)})),e({off:function(){u("unsubscribe:".concat(t))}})}))}catch(c){console.error(c)}}))},A=function(e){m.get(e)&&(N(e),m.delete(e))},D=function(e){Array.from(m.entries()).map((function(t){var n=Object(a.a)(t,2),r=n[0],c=n[1];return c.query===e&&(console.log("Unsubscribing by query:",c),A(r),!0)}))},N=function(e){return new Promise((function(t){w(y)("unsubscribe",{subscriptionId:e},(function(){console.debug("[SOCKET] Unsubscribed from event successfully! (".concat(e,")")),t(!0)}))}))},I=function(e){var t=e.query,r=e.publicKey,a=e.reconnect,c=e.onData,o=e.onError;return new Promise((function(e,u){Promise.resolve().then(n.bind(null,17)).then((function(n){var i=n.store;a&&D(t),w(y)("subscribe:query",{$shock:t,token:i.getState().node.authToken,publicKey:r},(function(n,r){if(n)return console.error("Gun rifle error (".concat(t,")")),console.error(n),void u(n);m.set(r.subscriptionId,{onData:c,onError:o,query:t}),e({off:function(){return A(r.subscriptionId)}})}))}))}))},R=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(){t.map((function(e){return e.then((function(e){e.off()}))}))}},P=function(){var e=Object(s.a)(u.a.mark((function e(){var t,n,a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,new Promise((function(e){var t=k({callback:function(n,r){t.then((function(e){return e.off()})),e(r)},eventName:"chats"})}));case 3:return t=e.sent,n=t.map((function(e){return{pk:e.recipientPublicKey,avatar:e.recipientAvatar,displayName:e.recipientDisplayName,didDisconnect:e.didDisconnect}})),a=t.reduce((function(e,t){var n;return Object(i.a)(Object(i.a)({},e),{},Object(r.a)({},t.recipientPublicKey,null===(n=t.messages)||void 0===n?void 0:n.filter((function(e){return e.body&&e.body.trim()&&e.body!==O.b})).sort((function(e,t){return t.timestamp-e.timestamp}))))}),{}),e.abrupt("return",{contacts:n,messages:a});case 9:throw e.prev=9,e.t0=e.catch(0),console.error(e.t0),e.t0;case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}(),C=function(){var e=Object(s.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,new Promise((function(e){var t=k({eventName:"sentRequests",callback:function(n,r){t.then((function(e){return e.off()})),e(r)}})}));case 3:return t=e.sent,e.abrupt("return",t);case 7:e.prev=7,e.t0=e.catch(0),console.error(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),U=function(){var e=Object(s.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,new Promise((function(e){var t=k({eventName:"receivedRequests",callback:function(n,r){t.then((function(e){return e.off()})),e(r)}})}));case 3:return t=e.sent,e.abrupt("return",t.map((function(e){return{id:e.id,pk:e.recipientPublicKey,avatar:e.recipientAvatar,displayName:e.recipientDisplayName,changedAddress:e.recipientChangedRequestAddress,timestamp:e.timestamp}})));case 7:e.prev=7,e.t0=e.catch(0),console.error(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}()},17:function(e,t,n){"use strict";n.r(t),n.d(t,"store",(function(){return Ie})),n.d(t,"persistor",(function(){return Re})),n.d(t,"useSelector",(function(){return Pe})),n.d(t,"useDispatch",(function(){return Ce})),n.d(t,"selectRoot",(function(){return xe})),n.d(t,"selectIsInContact",(function(){return ke})),n.d(t,"selectSelfPublicKey",(function(){return be})),n.d(t,"isAuth",(function(){return ve})),n.d(t,"selectHost",(function(){return Oe})),n.d(t,"selectSelfUser",(function(){return he})),n.d(t,"selectUser",(function(){return Ee})),n.d(t,"selectAllPublicKeys",(function(){return je})),n.d(t,"selectAllOtherPublicKeys",(function(){return me})),n.d(t,"selectFollows",(function(){return ye})),n.d(t,"selectOwnPublishedContent",(function(){return ge})),n.d(t,"selectFeedPosts",(function(){return we}));var r=n(22),a=n(97),c=n(0),o=n(15),u=n.n(o),i=n(36),s=n(18),l={hostId:null,hostIP:null,alias:null,authToken:null,publicKey:null,authTokenExpirationDate:null,authMethod:null,hostingAttemptsDone:!1,webClientPrefix:"https://lightning.page"},d=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:l,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case i.a.RESET_NODE_INFO:return l;case i.a.SET_HOST_IP:var n=t.data;return Object(c.a)(Object(c.a)({},e),{},{hostIP:n});case i.a.SET_HOST_ID:var r=t.data;return Object(c.a)(Object(c.a)({},e),{},{hostId:r});case i.a.SET_AUTHENTICATED_USER:var a=t.data,o=a.authToken,d=a.alias,p=a.publicKey,f=a.authTokenExpirationDate,b=a.authMethod;return u.a.defaults.headers.common.Authorization="Bearer ".concat(o),Object(c.a)(Object(c.a)({},e),{},{authToken:o,authTokenExpirationDate:f,alias:d,publicKey:p,authMethod:b});case i.a.SET_ATTEMPTS_DONE:return Object(c.a)(Object(c.a)({},e),{},{hostingAttemptsDone:!0});case s.a.LOGOUT:return Object(c.a)(Object(c.a)({},e),{},{authToken:null,publicKey:null,authTokenExpirationDate:null,authMethod:null,hostingAttemptsDone:!1});case i.a.SET_WEBCLIENT_PREFIX:return Object(c.a)(Object(c.a)({},e),{},{webClientPrefix:t.data});default:return e}},p={authenticated:!1,authStep:"host",authMethod:null},f={manual:"host",shockWizard:"scan",shockCloud:"inviteCode",hostingTiers:"chooseTier"},b=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case s.a.SET_AUTHENTICATED:return Object(c.a)(Object(c.a)({},e),{},{authenticated:t.data});case s.a.SET_AUTH_STEP:return Object(c.a)(Object(c.a)({},e),{},{authStep:t.data});case s.a.SET_AUTH_METHOD:var n=t.data;return Object(c.a)(Object(c.a)({},e),{},{authMethod:n,authStep:f[n]});case s.a.LOGOUT:return p;default:return e}},v=n(21),O=n(179),h=n.n(O),E=n(32),j={totalBalance:"0",channelBalance:"0",confirmedBalance:"0",pendingChannelBalance:"0",USDRate:null,transactions:{content:[],page:-1,totalPages:0,totalItems:0},payments:{content:[],page:-1,totalPages:0,totalItems:0},channels:[],invoices:{content:[],page:-1,totalPages:0,totalItems:0},peers:[],recentTransactions:[],lightningInfo:{}},m=function(e){return parseInt(e.creation_date||e.settle_date||e.time_stamp,10)},y=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:j,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case E.a.LOAD_BALANCE:var n=t.data,r=n.channelBalance,a=n.confirmedBalance,o=n.pendingChannelBalance,u=new h.a(a).add(r).add(o).toString();return Object(c.a)(Object(c.a)({},e),{},{totalBalance:u,channelBalance:r,confirmedBalance:a,pendingChannelBalance:o});case E.a.LOAD_USD_RATE:var i=t.data;return Object(c.a)(Object(c.a)({},e),{},{USDRate:i});case E.a.LOAD_PEERS:var s=t.data;return Object(c.a)(Object(c.a)({},e),{},{peers:s});case E.a.ADD_PEER:var l=t.data;return Object(c.a)(Object(c.a)({},e),{},{peers:[l].concat(Object(v.a)(e.peers))});case E.a.REMOVE_PEER:var d=t.data;return Object(c.a)(Object(c.a)({},e),{},{peers:e.peers.filter((function(e){return e.pub_key!==d.publicKey}))});case E.a.LOAD_CHANNELS:var p=t.data;return Object(c.a)(Object(c.a)({},e),{},{channels:p});case E.a.LOAD_TRANSACTIONS:var f=t.data;return Object(c.a)(Object(c.a)({},e),{},{transactions:f});case E.a.LOAD_MORE_TRANSACTIONS:var b=t.data;return Object(c.a)(Object(c.a)({},e),{},{transactions:Object(c.a)(Object(c.a)({},b),{},{content:[].concat(Object(v.a)(e.transactions.content),Object(v.a)(b.content))})});case E.a.LOAD_INVOICES:var O=t.data;return Object(c.a)(Object(c.a)({},e),{},{invoices:O});case E.a.LOAD_MORE_INVOICES:var y=t.data;return Object(c.a)(Object(c.a)({},e),{},{invoices:Object(c.a)(Object(c.a)({},y),{},{content:[].concat(Object(v.a)(e.invoices.content),Object(v.a)(y.content))})});case E.a.LOAD_PAYMENTS:var S=t.data;return Object(c.a)(Object(c.a)({},e),{},{payments:S});case E.a.LOAD_MORE_PAYMENTS:var g=t.data;return Object(c.a)(Object(c.a)({},e),{},{payments:Object(c.a)(Object(c.a)({},g),{},{content:[].concat(Object(v.a)(e.payments.content),Object(v.a)(g.content))})});case E.a.LOAD_RECENT_TRANSACTIONS:var _=t.data,T=_.transactions,w=_.payments,x=_.invoices,k=[].concat(Object(v.a)(T.content),Object(v.a)(w.content),Object(v.a)(x.content)).sort((function(e,t){var n=m(e),r=m(t);return n<r?1:n>r?-1:0})).map((function(e){var t=m(e);return e.payment_hash?{type:"payment",hash:e.payment_hash,value:e.value,date:t}:e.payment_request?{type:"invoice",hash:e.payment_request,value:e.value,date:t,message:e.memo}:e.tx_hash?{type:"chain",hash:e.tx_hash,value:e.amount,date:t,message:e.label}:(console.warn("Invalid transaction detected",e),null)})).filter((function(e){return null!==e}));return Object(c.a)(Object(c.a)({},e),{},{transactions:T,payments:w,invoices:x,recentTransactions:k});case E.a.RESET_RECENT_TRANSACTIONS:return Object(c.a)(Object(c.a)({},e),{},{recentTransactions:[]});case E.a.LOAD_LIGHTNING_INFO:var A=t.data;return Object(c.a)(Object(c.a)({},e),{},{lightningInfo:A});default:return e}},S=n(26),g=n(12),_=n(44),T=n(43),w=n(29),x={contacts:[],messages:{},sentRequests:[],receivedRequests:[],requestBlacklist:[]},k=function(e,t){return e.id&&t.id?e.id===t.id:e.localId===t.localId},A=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return e.sort((function(e,t){return t.timestamp-e.timestamp}))},D=function(e){var t,n=e.data,r=e.status,a=e.state,o=e.outgoing,u=void 0!==o&&o,i=null!==(t=a.messages[n.recipientPublicKey])&&void 0!==t?t:[],s=i.filter((function(e){return k(e,n)})),l=Object(g.a)(s,1)[0];if(l&&console.warn("Duplicate Message:",null===l||void 0===l?void 0:l.body),l){var d=i.map((function(e){return k(e,l)?Object(c.a)(Object(c.a)(Object(c.a)({},l),n),{},{status:r,outgoing:u}):e})),p=A(d);return Object(c.a)(Object(c.a)({},a),{},{messages:Object(c.a)(Object(c.a)({},a.messages),{},Object(S.a)({},n.recipientPublicKey,p))})}var f=[Object(c.a)(Object(c.a)({},n),{},{status:r,outgoing:u})].concat(Object(v.a)(i)),b=A(f);return Object(c.a)(Object(c.a)({},a),{},{messages:Object(c.a)(Object(c.a)({},a.messages),{},Object(S.a)({},n.recipientPublicKey,b))})},N=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:x,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case w.a.LOAD_CHAT_DATA:var n=t.data,r=n.contacts,a=n.messages;return Object(c.a)(Object(c.a)({},e),{},{contacts:r,messages:Object(c.a)(Object(c.a)({},e.messages),a)});case w.a.LOAD_SENT_REQUESTS:var o=t.data,u=e.sentRequests.map((function(e){return e.pk})),i=e.sentRequests.filter((function(e){return e.loading&&!u.includes(e.pk)}));return Object(c.a)(Object(c.a)({},e),{},{sentRequests:[].concat(Object(v.a)(i),Object(v.a)(o))});case w.a.LOAD_RECEIVED_REQUESTS:var s=t.data;return Object(c.a)(Object(c.a)({},e),{},{receivedRequests:s});case w.a.SENT_REQUEST:var l=t.data;return Object(c.a)(Object(c.a)({},e),{},{sentRequests:[].concat(Object(v.a)(e.sentRequests),[{avatar:null,changedAddress:!1,displayName:null,id:"loading/"+l,pk:l,timestamp:Date.now(),loading:!0}])});case w.a.ACCEPT_HANDSHAKE_REQUEST:var d=t.data;return Object(c.a)(Object(c.a)({},e),{},{receivedRequests:e.receivedRequests.filter((function(e){return e.id!==d}))});case w.a.DECLINE_HANDSHAKE_REQUEST:var p=t.data;return p&&p.trim()?Object(c.a)(Object(c.a)({},e),{},{requestBlacklist:[].concat(Object(v.a)(e.requestBlacklist),[p])}):e;case w.a.SENDING_MESSAGE:var f=t.data;return D({data:f,status:T.a.SENDING,state:e,outgoing:!0});case w.a.SENT_MESSAGE:var b=t.data;return D({data:b,status:T.a.SENT,state:e,outgoing:!0});case w.a.FAILED_MESSAGE:var O=t.data;return D({data:O,status:T.a.FAILED,state:e,outgoing:!0});case w.a.RECEIVED_MESSAGE:var h=t.data;return D({data:h,status:T.a.RECEIVED,state:e});case w.a.CHAT_WAS_DELETED:var E=t.data.publicKey;return Object(_.a)(e,(function(e){var t=e.contacts.findIndex((function(e){return e.pk===E}));t>-1&&e.contacts.splice(t,1),delete e.messages[E],e.messages[E]=[]}));default:return e}},I=n(84),R={open:!1},P=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:R,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case I.a.SET_DRAWER_OPEN:return Object(c.a)(Object(c.a)({},e),{},{open:t.data});default:return e}},C=n(28),U={seedProviderPub:"JVz7h3yUnbgMwwKxSddGenBlrE9eeDJVYWlmOr941mI.LW5PEWM3Y-DRf-UApdSN76wH6id6zR4mXNyBApihoAA",streamUserToken:"",streamLiveToken:"",streamUrl:"",streamPostId:"",streamContentId:"",streamStatusUrl:"",streamBroadcasterUrl:"",publishedContent:{},publicContent:{},unlockedContent:{},seedInfo:{},availableTokens:{},availableStreamTokens:{}},L=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:U,t=arguments.length>1?arguments[1]:void 0;if(C.f.match(t))return Object(_.a)(e,(function(e){var n=t.payload.item;e.publicContent[n.id]||(e.publicContent[n.id]=n)}));if(C.g.match(t))return Object(_.a)(e,(function(e){var n=t.payload,r=n.content,a=n.res;a.ok&&(e.publishedContent[a.id]=r)}));if(C.h.match(t))return Object(_.a)(e,(function(e){delete e.publishedContent[t.payload.id]}));switch(t.type){case C.a.SET_SEED_PROVIDER_PUB:return Object(c.a)(Object(c.a)({},e),{},{seedProviderPub:t.data});case C.a.ADD_UNLOCKED_CONTENT:var n=t.data,r=Object(c.a)({},e.unlockedContent);return r[n.contentPath]=n.content,Object(c.a)(Object(c.a)({},e),{},{unlockedContent:r});case C.a.ADD_STREAM:var a=t.data;return Object(c.a)(Object(c.a)({},e),{},{streamLiveToken:a.liveToken,streamUserToken:a.seedToken,streamUrl:a.streamUrl,streamPostId:a.streamPostId,streamContentId:a.streamContentId,streamStatusUrl:a.streamStatusUrl,streamBroadcasterUrl:a.streamBroadcasterUrl});case C.a.REMOVE_STREAM:return Object(c.a)(Object(c.a)({},e),{},{streamLiveToken:"",streamUserToken:"",streamUrl:"",streamPostId:"",streamContentId:"",streamStatusUrl:"",streamBroadcasterUrl:""});case C.a.SET_SEED_INFO:var o=t.data;return Object(c.a)(Object(c.a)({},e),{},{seedInfo:o});case C.a.ADD_AVAILABLE_TOKEN:var u=t.data,i=u.seedUrl,s=u.userToken,l=Object(c.a)({},e.availableTokens);return l[i]||(l[i]=[]),l[i].push(s),Object(c.a)(Object(c.a)({},e),{},{availableTokens:l});case C.a.REMOVE_USED_TOKEN:var d=t.data,p=d.seedUrl,f=d.userToken,b=Object(c.a)({},e.availableTokens);if(!b[p])return e;var v=b[p].indexOf(f);return v>-1?(b[p].splice(v,1),Object(c.a)(Object(c.a)({},e),{},{availableTokens:b})):e;case C.a.ADD_STREAM_TOKEN:var O=t.data,h=O.seedUrl,E=O.userToken,j=Object(c.a)({},e.availableStreamTokens);return j[h]||(j[h]=[]),j[h].push(E),Object(c.a)(Object(c.a)({},e),{},{availableStreamTokens:j});case C.a.REMOVE_STREAM_TOKEN:var m=t.data,y=m.seedUrl,S=m.userToken,g=Object(c.a)({},e.availableStreamTokens);if(!g[y])return e;var T=g[y].indexOf(S);return T>-1?(g[y].splice(T,1),Object(c.a)(Object(c.a)({},e),{},{availableStreamTokens:g})):e;default:return e}},K=n(94),M={source:"https://mempool.space/api/v1/fees/recommended",rate:"halfHourFee",feeRates:{fastestFee:0,halfHourFee:0,hourFee:0}},H=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:M,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case K.a.RESET_FEES:return M;case K.a.LOAD_FEE_RATES:var n=t.data;return Object(c.a)(Object(c.a)({},e),{},{feeRates:n});case K.a.SET_SOURCE:var r=t.data;return Object(c.a)(Object(c.a)({},e),{},{feeRates:M.feeRates,source:r});case K.a.SET_RATE:var a=t.data;return Object(c.a)(Object(c.a)({},e),{},{rate:a});default:return e}},B=n(53),F={follows:[{user:"JVz7h3yUnbgMwwKxSddGenBlrE9eeDJVYWlmOr941mI.LW5PEWM3Y-DRf-UApdSN76wH6id6zR4mXNyBApihoAA",status:"ok",private:!1}],posts:{},reloadDone:!1},V=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:F,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case B.a.RESET_FOLLOWS:return F;case B.a.ADD_FOLLOW:var n=t.data,r=e.follows.find((function(e){return n.user===e.user}));return r?Object(c.a)(Object(c.a)({},e),{},{follows:e.follows.map((function(e){return e.user===n.user?n:e}))}):Object(c.a)(Object(c.a)({},e),{},{follows:[].concat(Object(v.a)(e.follows),[n])});case B.a.REMOVE_FOLLOW:var a=t.data;return Object(c.a)(Object(c.a)({},e),{},{follows:e.follows.filter((function(e){return e.user!==a}))});case B.a.UPDATE_FOLLOW:var o=t.data,u=e.follows.map((function(e){return e.user===o.key?Object(c.a)(Object(c.a)({},e),{},{profile:o}):e}));return Object(c.a)(Object(c.a)({},e),{},{follows:u});case B.a.ADD_USER_POST:var i,l=t.data,d=l,p=d.authorId,f=null!==(i=e.posts[p])&&void 0!==i?i:[],b=f.findIndex((function(e){return d.id===e.id})),O=Object(v.a)(f);return-1!==b?O[b]=d:O.push(d),Object(c.a)(Object(c.a)({},e),{},{posts:Object(c.a)(Object(c.a)({},e.posts),{},Object(S.a)({},p,O))});case B.a.DELETE_USER_POST:var h,E=t.data,j=E.id,m=E.authorId,y=(null!==(h=e.posts[m])&&void 0!==h?h:[]).filter((function(e){return e.id!==j}));return Object(c.a)(Object(c.a)({},e),{},{posts:Object(c.a)(Object(c.a)({},e.posts),{},Object(S.a)({},m,y))});case B.a.LOAD_POSTS:var g=t.data;return Object(c.a)(Object(c.a)({},e),{},{posts:g});case B.a.LOAD_SHARED_POST:var _,T=t.data,w=T.id,x=T.sharerId,k=null!==(_=e.posts[x])&&void 0!==_?_:[],A=k.map((function(e){return e.id===w&&"shared"===e.type?Object(c.a)(Object(c.a)({},e),{},{originalPost:T}):e}));return Object(c.a)(Object(c.a)({},e),{},{posts:Object(c.a)(Object(c.a)({},e.posts),{},Object(S.a)({},x,A))});case B.a.RELOAD_FEED:return Object(c.a)(Object(c.a)({},e),{},{reloadDone:!0});case s.a.LOGOUT:return F;default:return e}},q=n(292),W=n(79),G={deviceId:Object(q.a)(),userKeys:{},hostKeys:{}},z=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:G,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case W.a.SET_DEVICE_ID:var n=t.data;return Object(c.a)(Object(c.a)({},e),{},{deviceId:n});case W.a.ADD_USER_KEY_PAIR:var r=t.data,a=r.hostId,o=r.keyPair;return Object(c.a)(Object(c.a)({},e),{},{userKeys:Object(c.a)(Object(c.a)({},e.userKeys),{},Object(S.a)({},a,o))});case W.a.ADD_HOST_KEY:var u=t.data,i=u.hostId,s=u.publicKey;return Object(c.a)(Object(c.a)({},e),{},{hostKeys:Object(c.a)(Object(c.a)({},e.hostKeys),{},Object(S.a)({},i,s))});default:return e}},Y=n(119),$=n(291),J=n(24),Q=n(52),X={},Z=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:X,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case i.a.SET_AUTHENTICATED_USER:var n=t.data.publicKey;return Object(c.a)(Object(c.a)({},e),{},Object(S.a)({},n,Object(c.a)(Object(c.a)({},J.e(n)),e[n])));case Q.a.RESET_USER_PROFILES:return X;case Q.a.LOAD_USER_PROFILE:var r=t.data,a=r.publicKey,o=r.profile;return a&&o?Object(c.a)(Object(c.a)({},e),{},Object(S.a)({},a,Object(c.a)(Object(c.a)(Object(c.a)({},J.e(a)),e[a]),o))):e;case Q.a.REMOVE_USER_PROFILE:var u=t.data.publicKey,s=(e[u],Object(Y.a)(e,[u].map($.a)));return s;case Q.a.UPDATE_USER_PROFILE:var l=t.data,d=l.publicKey,p=l.profile,f=e[d];return f&&p?Object(c.a)(Object(c.a)({},e),{},Object(S.a)({},d,Object(c.a)(Object(c.a)(Object(c.a)({},J.e(d)),f),p))):e;case w.a.LOAD_CHAT_DATA:return Object(_.a)(e,(function(e){t.data.contacts.forEach((function(t){var n=t.pk;e[n]||(e[n]=J.e(n))}))}));case w.a.LOAD_RECEIVED_REQUESTS:case w.a.LOAD_SENT_REQUESTS:return Object(_.a)(e,(function(e){t.data.forEach((function(t){e[t.pk]=Object(c.a)(Object(c.a)({},J.e(t.pk)),e[t.pk])}))}));case w.a.SENT_REQUEST:return Object(_.a)(e,(function(e){var n=t.data;e[n]||(e[n]=J.e(n))}));default:return e}},ee=n(112),te={myServices:{},services:{},boughtServices:{}},ne=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:te,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case ee.a.ADD_MY_SERVICE:var n=t.data,r=n.id,a=n.serviceInfo,o=Object(c.a)({},e.myServices);return o[r]=a,Object(c.a)(Object(c.a)({},e),{},{myServices:o});case ee.a.REMOVE_MY_SERVICE:var u=t.data,i=Object(c.a)({},e.myServices);return delete i[u],Object(c.a)(Object(c.a)({},e),{},{myServices:i});case ee.a.ADD_BOUGHT_SERVICE:var s=t.data,l=s.orderAck,d=s.owner,p=s.serviceID,f=Object(c.a)({},e.boughtServices);f[d]||(f[d]={});var b=f[d];return b[p]||(b[p]=[]),b[p].push(l),Object(c.a)(Object(c.a)({},e),{},{boughtServices:f});default:return e}},re=n(54),ae={dialogText:"",dialogHasCallback:!1},ce=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ae,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case re.a.OPEN_DIALOG:var n=t.data,r=n.text,a=n.hasCallback;return Object(c.a)(Object(c.a)({},e),{},{dialogText:r,dialogHasCallback:a});case re.a.CLOSE_DIALOG:return Object(c.a)(Object(c.a)({},e),{},{dialogText:"",dialogHasCallback:!1});default:return e}},oe=Object(r.c)({node:d,auth:b,encryption:z,wallet:y,chat:N,drawer:P,content:L,fees:H,feed:V,userProfiles:Z,orders:ne,app:ce,users:function(){return{}}}),ue=n(42),ie=n(170),se=n(287),le=n.n(se),de={1:function(e){console.log("--- PeerMigration Started ---");var t=Object(c.a)(Object(c.a)({},e),{},{wallet:Object(c.a)(Object(c.a)({},e.wallet),{},{peers:[]})});return console.log("--- PeerMigration Ended ---",t),t}},pe=n(118),fe=n(124),be=function(e){return e.node.publicKey},ve=function(e){return!!e.node.publicKey},Oe=function(e){return e.node.hostIP},he=function(e){var t=be(e),n=e.userProfiles[t];return n||(console.error("No self user created at auth?"),J.d.createEmptyUser(t))},Ee=function(e){return function(t){var n=t.userProfiles[e];return n||J.d.createEmptyUser(e)}},je=function(e){return Object.keys(e.userProfiles)},me=function(e){var t=be(e);return je(e).filter((function(e){return e!==t}))},ye=function(e){var t=be(e);return e.feed.follows.filter((function(e){return e.user!==t}))},Se=n(74),ge=Object(Se.a)((function(e){return e.content.publishedContent}),(function(e){return e.content.publicContent}),(function(e,t){return Object(c.a)(Object(c.a)({},e),t)})),_e=n(288),Te=n.n(_e),we=function(e){var t=be(e);return Te()(e.feed.posts,(function(e,n){return n!==t}))},xe=function(e){return e},ke=function(e){return function(t){var n=t.chat,r=n.contacts,a=n.sentRequests,c=n.receivedRequests,o=!!r.find((function(t){return t.pk===e})),u=!!a.find((function(t){return t.pk===e})),i=!!c.find((function(t){return t.pk===e}));return o||u||i}},Ae={key:"root",storage:le.a,blacklist:["auth"],version:1,stateReconciler:fe.a,migrate:Object(pe.a)(de,{debug:!1})},De=Object(ie.a)(Ae,oe),Ne=function(){var e=Object(r.a)(a.a),t=window.__REDUX_DEVTOOLS_EXTENSION__?Object(r.e)(De,Object(r.d)(e,window.__REDUX_DEVTOOLS_EXTENSION__())):Object(r.e)(De,e);return{store:t,persistor:Object(ie.b)(t)}}(),Ie=Ne.store,Re=Ne.persistor,Pe=function(e){return Object(ue.c)(e)},Ce=function(){return Object(ue.b)()}},171:function(e,t,n){"use strict";var r=n(0),a=n(80),c=n.n(a),o=n(122),u=(n(350),n(4));t.a=function(e){var t,n=e.text,a=void 0===n?"Loading...":n,i=e.fullScreen,s=void 0!==i&&i,l=e.small,d=void 0!==l&&l,p=e.overlay,f=void 0!==p&&p,b=e.overlayBackground,v=void 0===b?"rgba(44, 51, 58, 0.95)":b,O=e.style,h=void 0===O?{}:O,E=null!==(t=Object(o.b)())&&void 0!==t?t:"100vh",j=window.matchMedia("(display-mode: standalone)").matches,m=s?{height:j?"100%":E,marginBottom:0}:{},y=f?{backgroundColor:v}:{};return Object(u.jsxs)("div",{className:c()({"loading-wall":!0,"loading-small":d,"loading-overlay":f}),style:Object(r.a)(Object(r.a)(Object(r.a)({},m),y),h),"data-v-78b5fb45":"",children:[Object(u.jsxs)("div",{className:"loading-wall-icon","data-v-78b5fb45":"",children:[Object(u.jsx)("span",{className:"loading-circle loading-circle-1","data-v-78b5fb45":""}),Object(u.jsx)("span",{className:"loading-circle loading-circle-2","data-v-78b5fb45":""}),Object(u.jsx)("span",{className:"loading-circle loading-circle-3","data-v-78b5fb45":""}),d?null:Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)("span",{className:"loading-circle loading-circle-4","data-v-78b5fb45":""}),Object(u.jsx)("span",{className:"loading-circle loading-circle-5","data-v-78b5fb45":""})]})]}),a?Object(u.jsx)("div",{className:"loading-wall-text","data-v-78b5fb45":"",children:a}):null]})}},173:function(e,t,n){"use strict";n(558);var r=n(4);t.a=function(e){var t=e.tipCounter,n=e.tipValue,a=e.zoomed;return n>0?Object(r.jsxs)("div",{className:"ribbon-container",style:{opacity:a?0:1},"data-v-1c8fc61c":"",children:[Object(r.jsx)("p",{className:"ribbon-title","data-v-1c8fc61c":"",children:"Total Tips"}),Object(r.jsxs)("p",{className:"ribbon-value","data-v-1c8fc61c":"",children:[t," ",1===t?"Tip":"Tips"]})]}):null}},174:function(e,t,n){"use strict";var r=n(12),a=n(3),c=n(173),o=(n(559),n(125)),u=n(4);"".concat("https://webtorrent.shock.network","/rtmpapi/api/streams/live");t.a=function(e){e.id;var t=e.item,n=(e.index,e.postId,e.tipValue),i=e.tipCounter,s=e.hideRibbon,l=e.width,d=(e.timeout,Object(a.useRef)(null)),p=Object(a.useState)(!1),f=Object(r.a)(p,2),b=f[0],v=(f[1],{width:"100%"});l&&(v.width=l);var O=t.liveStatus;return Object(a.useEffect)((function(){var e=Object(o.a)(d.current,{autoplay:!0,muted:!0,aspectRatio:"16:9"});e.src({src:t.magnetURI,type:"application/x-mpegURL"}),e.play()}),[t]),Object(a.useEffect)((function(){console.log("status:",O)}),[t]),Object(u.jsx)("div",{className:"media-container w-100","data-v-be1dc13f":"",children:Object(u.jsxs)("div",{className:"video-container w-100",style:{cursor:"pointer",width:"100%"},"data-v-be1dc13f":"",children:[!b&&"waiting"===O&&Object(u.jsx)("p",{"data-v-be1dc13f":"",children:"The stream did not start yet."}),!b&&"wasLive"===O&&Object(u.jsx)("p",{"data-v-be1dc13f":"",children:"The stream is over"}),!b&&!O&&Object(u.jsx)("p",{"data-v-be1dc13f":"",children:"The streamer has disconnected."}),Object(u.jsx)("div",{style:"live"===O?{width:"100%"}:{display:"none",width:"100%"},"data-v-be1dc13f":"",children:Object(u.jsx)("video",{className:"video-js vjs-default-skin",ref:d,style:v,preload:"auto",controls:!0,muted:!0,autoPlay:!0,"data-v-be1dc13f":""})}),!s&&Object(u.jsx)(c.a,{tipCounter:i,tipValue:n,zoomed:!1,"data-v-be1dc13f":""})]})})}},18:function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"e",(function(){return a})),n.d(t,"d",(function(){return c})),n.d(t,"c",(function(){return o})),n.d(t,"b",(function(){return u}));var r={RESET_AUTH_INFO:"auth/reset",SET_AUTH_STEP:"auth/step/set",SET_AUTHENTICATED:"auth/authenticated/set",SET_AUTH_METHOD:"auth/method/set",LOGOUT:"auth/logout"},a=function(e){return{type:r.SET_AUTHENTICATED,data:e}},c=function(e){return{type:r.SET_AUTH_STEP,data:e}},o=function(e){return{type:r.SET_AUTH_METHOD,data:e}},u=function(){return{type:r.LOGOUT}}},25:function(e,t,n){"use strict";n.d(t,"j",(function(){return d})),n.d(t,"c",(function(){return p})),n.d(t,"b",(function(){return f.a})),n.d(t,"e",(function(){return b})),n.d(t,"h",(function(){return O})),n.d(t,"f",(function(){return h})),n.d(t,"d",(function(){return E})),n.d(t,"a",(function(){return j})),n.d(t,"i",(function(){return m})),n.d(t,"g",(function(){return y}));var r=n(12),a=n(2),c=n.n(a),o=n(5),u=n(24),i=n(3),s=n.n(i),l=n(81);function d(){var e=s.a.useState(0),t=Object(r.a)(e,2)[1];return s.a.useCallback((function(){t((function(e){return e+1}))}),[])}var p=function(e){if(-1===e)return"";var t=l.DateTime.fromMillis(e).toRelative();return"in 0 seconds"===t?"Just now":t},f=n(13),b=(n(75),{log:function(){var e;return(e=console).log.apply(e,arguments)},warn:function(){var e;return(e=console).warn.apply(e,arguments)},error:function(){var e;return(e=console).error.apply(e,arguments)},debug:function(){var e;return(e=console).debug.apply(e,arguments)}}),v=function(e,t,n){var r=document.createElement("canvas"),a=e.width,c=e.height;return a>c?a>t&&(c=Math.round(c*=t/a),a=t):c>t&&(a=Math.round(a*=t/c),c=t),r.width=a,r.height=c,r.getContext("2d").drawImage(e,0,0,a,c),r.toDataURL("image/jpeg",n)},O=function(){var e=Object(o.a)(c.a.mark((function e(t,n,r){var a,o,i,s,l;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.type.startsWith("image/")){e.next=2;break}throw new TypeError("Got a file of type ".concat(t.type," with size: ").concat(t.size,', expected type to start with "image"'));case 2:return e.next=4,u.k((function(e,n){var r=new FileReader;r.onload=function(t){t.target.result instanceof ArrayBuffer?e(t.target.result):n(new TypeError("Non ArrayBuffer file reader result when trying to load image file."))};var a=function(e){n(new Error("Error inside processImageFile()->imageBuffer->".concat(JSON.stringify(e))))};r.onerror=a,r.onabort=a,r.readAsArrayBuffer(t)}));case 4:return o=e.sent,i=(null!==(a=window.URL)&&void 0!==a?a:window.webkitURL).createObjectURL(new Blob([o],{type:"image/jpeg"})),e.next=8,u.k((function(e,t){var n=new Image;n.src=i,n.onload=function(){e(n)},n.onerror=function(e){t("string"===typeof e?new Error(e):new Error(JSON.stringify(e)))}}));case 8:return s=e.sent,l=v(s,n,r),e.abrupt("return",l);case 11:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),h=function(e){var t=e;return t.startsWith("www.")&&(t="https://"+t),function(){var e;try{e=new URL(t)}catch(n){return!1}return"http:"===e.protocol||"https:"===e.protocol}()?new URL(t).href:""},E=function(e,t){return e.filter((function(e){return e.pk===t}))[0]},j=function(){},m=function(e){var t=Object(i.useState)(e),n=Object(r.a)(t,2),a=n[0],c=n[1];return[a,Object(i.useCallback)((function(){c((function(e){return!e}))}),[])]},y=function(e){return JSON.parse(e)}},28:function(e,t,n){"use strict";n.d(t,"a",(function(){return p})),n.d(t,"l",(function(){return f})),n.d(t,"k",(function(){return b})),n.d(t,"g",(function(){return v})),n.d(t,"f",(function(){return O})),n.d(t,"c",(function(){return h})),n.d(t,"h",(function(){return E})),n.d(t,"o",(function(){return j})),n.d(t,"d",(function(){return m})),n.d(t,"i",(function(){return y})),n.d(t,"b",(function(){return S})),n.d(t,"j",(function(){return g})),n.d(t,"e",(function(){return _})),n.d(t,"n",(function(){return w})),n.d(t,"p",(function(){return x})),n.d(t,"m",(function(){return k}));var r=n(2),a=n.n(r),c=n(5),o=n(126),u=n(13),i=n(14),s=n(43),l=n(25),d=n(54),p={SET_SEED_PROVIDER_PUB:"content/setSeedProviderPub",SET_SEED_INFO:"content/setSeedInfo",PUBLISHED_CONTENT_ADDED:"content/publishedContentAdded",PUBLISHED_CONTENT_REMOVED:"content/publishedContentRemoved",ADD_UNLOCKED_CONTENT:"content/addUnlocked",ADD_STREAM:"content/addStream",REMOVE_STREAM:"content/removeStream",ADD_AVAILABLE_TOKEN:"content/addToken",REMOVE_USED_TOKEN:"content/removeToken",ADD_STREAM_TOKEN:"content/addStreamToken",REMOVE_STREAM_TOKEN:"content/removeStreamToken"},f=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return function(){var n=Object(c.a)(a.a.mark((function n(r){var c;return a.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(t){n.next=5;break}return c={$$__ENCRYPT__FOR:"me",value:e},e||(c=""),n.next=5,u.a.post("/api/gun/put",{path:"$user>seedServiceProviderPubKey",value:c});case 5:r({type:p.SET_SEED_PROVIDER_PUB,data:e});case 6:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()},b=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return function(){var r=Object(c.a)(a.a.mark((function r(c){var o,i;return a.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(o=e.endsWith("/")?e.slice(0,-1):e,n){r.next=5;break}return i=JSON.stringify({seedUrl:o,seedToken:t}),r.next=5,u.a.post("/api/gun/put",{path:"$user>seedServiceSeedData",value:{$$__ENCRYPT__FOR:"me",value:i}});case 5:c({type:p.SET_SEED_INFO,data:{seedUrl:o,seedToken:t}});case 6:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}()},v=Object(o.a)(p.PUBLISHED_CONTENT_ADDED),O=Object(o.a)("content/publicContentAdded"),h=function(e,t){return function(){var n=Object(c.a)(a.a.mark((function n(r){var c,o;return a.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if("public"!==t){n.next=9;break}if(Object(s.b)(e)){n.next=3;break}throw new TypeError("Expected content to upload to be a PublicContentItem");case 3:return n.next=5,u.a.post("/api/gun/put",{path:"$user>publishedContentPublic>".concat(e.id),value:e});case 5:return r(O({item:e})),n.abrupt("return",e);case 9:return n.next=11,u.a.post("/api/gun/set",{path:"$user>publishedContent",value:{$$__ENCRYPT__FOR:"me",value:JSON.stringify(e)}});case 11:return c=n.sent,o=c.data,r(v({content:e,res:o})),n.abrupt("return",o);case 15:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()},E=Object(o.a)(p.PUBLISHED_CONTENT_REMOVED),j=function(e,t,n){return function(){var r=Object(c.a)(a.a.mark((function r(c){var o,i,s,l,d;return a.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,u.a.post("/api/lnd/unifiedTrx",{type:"contentReveal",amt:e,to:t,memo:"",feeLimit:500,ackInfo:n});case 2:if(o=r.sent,i=o.data,(s=JSON.parse(i.orderAck.response))&&s.unlockedContents)for(l in s.unlockedContents)Object.hasOwnProperty.call(s.unlockedContents,l)&&(d=s.unlockedContents[l],c({type:p.ADD_UNLOCKED_CONTENT,data:{contentPath:"".concat(t,">posts>").concat(n),content:d}}));case 6:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}()},m=function(e){var t=e.seedToken,n=e.liveToken,r=e.streamUrl,o=e.streamPostId,i=e.streamContentId,s=e.streamStatusUrl,l=e.streamBroadcasterUrl,d=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return function(){var e=Object(c.a)(a.a.mark((function e(c){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(d){e.next=3;break}return e.next=3,u.a.post("/api/gun/put",{path:"$user>currentStreamInfo",value:{$$__ENCRYPT__FOR:"me",value:JSON.stringify({seedToken:t,liveToken:n,streamUrl:r,streamPostId:o,streamContentId:i,streamStatusUrl:s,streamBroadcasterUrl:l})}});case 3:c({type:p.ADD_STREAM,data:{seedToken:t,liveToken:n,streamUrl:r,streamPostId:o,streamContentId:i,streamStatusUrl:s,streamBroadcasterUrl:l}});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},y=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return function(){var n=Object(c.a)(a.a.mark((function n(r){return a.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(t||Object(d.c)({text:"The recording of the stream will be published in a few moments."})(r),e){n.next=4;break}return n.next=4,u.a.post("/api/gun/put",{path:"$user>currentStreamInfo",value:{$$__ENCRYPT__FOR:"me",value:"NO DATA"}});case 4:r({type:p.REMOVE_STREAM});case 5:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()},S=function(e,t){return function(n){n({type:p.ADD_AVAILABLE_TOKEN,data:{seedUrl:e,userToken:t}})}},g=function(e,t){return function(n){n({type:p.REMOVE_USED_TOKEN,data:{seedUrl:e,userToken:t}})}},_=function(e,t){return function(n){n({type:p.ADD_STREAM_TOKEN,data:{seedUrl:e,userToken:t}})}},T="$user::publishedContent::map.on",w=function(){return function(){var e=Object(c.a)(a.a.mark((function e(t,n){var r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.debug("Subscribing to own published content"),e.next=3,Object(i.e)({query:T,reconnect:!0,publicKey:n().node.publicKey,onData:function(){var e=Object(c.a)(a.a.mark((function e(n,r){var c;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,console.debug("Received own content:"),console.debug(n),"string"===typeof r){e.next=5;break}throw new TypeError("Invalid content key received: ".concat(r));case 5:if(n){e.next=8;break}return t(E({id:r})),e.abrupt("return");case 8:if("string"===typeof n){e.next=10;break}throw new TypeError("Invalid content received (".concat(n,")"));case 10:if(c=Object(l.g)(n),Object(s.c)(c)){e.next=13;break}throw new TypeError("Invalid content received (might be incomplete replication): ".concat(JSON.stringify(c,null,2)));case 13:t(v({content:c,res:{id:r,ok:!0}})),e.next=20;break;case 16:e.prev=16,e.t0=e.catch(0),console.error("Error inside own published content sub:"),console.error(e.t0);case 20:case"end":return e.stop()}}),e,null,[[0,16]])})));return function(t,n){return e.apply(this,arguments)}}()});case 3:return r=e.sent,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},x=function(){return function(){console.debug("Unsubbing own published content."),Object(i.h)(T)}},k=function(){return function(){var e=Object(c.a)(a.a.mark((function e(t){var n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l.e.debug("Subscribing to own public content"),e.next=3,Object(i.e)({query:"$user::publishedContentPublic::map.on",reconnect:!0,onError:function(e){alert("Error inside own public content rifle: ".concat(JSON.stringify(e))),l.e.error("Error inside own public content rifle: ",e)},onData:function(){var e=Object(c.a)(a.a.mark((function e(n){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,null!==n){e.next=3;break}return e.abrupt("return");case 3:if(l.e.debug("Received own public item:"),l.e.debug(n),Object(s.b)(n)){e.next=7;break}throw new TypeError("Invalid public content item: ".concat(JSON.stringify(n,null,2)));case 7:t(O({item:n})),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),l.e.error("Error inside own public content sub:"),l.e.error(e.t0);case 14:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t){return e.apply(this,arguments)}}()});case 3:return n=e.sent,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}},29:function(e,t,n){"use strict";n.d(t,"a",(function(){return O})),n.d(t,"d",(function(){return h})),n.d(t,"f",(function(){return E})),n.d(t,"e",(function(){return j})),n.d(t,"l",(function(){return m})),n.d(t,"b",(function(){return y})),n.d(t,"g",(function(){return S})),n.d(t,"h",(function(){return g})),n.d(t,"c",(function(){return _})),n.d(t,"i",(function(){return T})),n.d(t,"j",(function(){return w})),n.d(t,"k",(function(){return x}));var r=n(26),a=n(0),c=n(12),o=n(2),u=n.n(o),i=n(5),s=n(13),l=n(81),d=n(292),p=n(14),f=n(86),b=n(43),v=n(25),O={LOAD_CHAT_DATA:"chat/loadData",LOAD_SENT_REQUESTS:"chat/loadSentRequests",LOAD_RECEIVED_REQUESTS:"chat/loadReceivedRequests",SET_CHAT_CONTACTS:"chat/contacts",SET_CHAT_MESSAGES:"chat/messages",SENT_REQUEST:"chat/request/sent",ACCEPT_HANDSHAKE_REQUEST:"chat/request/accept",DECLINE_HANDSHAKE_REQUEST:"chat/request/decline",SENDING_MESSAGE:"chat/message/sending",SENT_MESSAGE:"chat/message/sent",FAILED_MESSAGE:"chat/message/failed",RECEIVED_MESSAGE:"chat/message/received",CHAT_WAS_DELETED:"chat/deleted"},h=function(){return function(){var e=Object(i.a)(u.a.mark((function e(t){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(p.b)();case 2:n=e.sent,console.log("LOAD_CHAT_DATA:",n),t({type:O.LOAD_CHAT_DATA,data:n});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},E=function(){return function(){var e=Object(i.a)(u.a.mark((function e(t){var n,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(p.d)();case 2:n=e.sent,r={type:O.LOAD_SENT_REQUESTS,data:n.map((function(e){return{id:e.id,pk:e.recipientPublicKey,avatar:e.recipientAvatar,displayName:e.recipientDisplayName,changedAddress:e.recipientChangedRequestAddress,timestamp:e.timestamp,loading:!1}}))},t(r);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},j=function(){return function(){var e=Object(i.a)(u.a.mark((function e(t,n){var r,a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(p.c)();case 2:r=e.sent,a={type:O.LOAD_RECEIVED_REQUESTS,data:r.map((function(e){return{id:e.id,pk:e.requestorPK,avatar:e.requestorAvatar,displayName:e.requestorDisplayName,timestamp:e.timestamp}}))},t(a);case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},m=function(e,t){return function(){var n=Object(i.a)(u.a.mark((function n(r){var a,c,o;return u.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,s.a.get("/api/gun/user/once/userToIncoming>".concat(t),{headers:{"public-key-for-decryption":e}});case 3:if(a=n.sent,(c=a.data).data){n.next=7;break}throw new Error("Unable to retrieve incoming ID for selected contact.");case 7:return n.next=9,Object(p.e)({query:"".concat(t,"::outgoings>").concat(c.data,">messages::map.on"),publicKey:t,onData:function(e,n){if(e.body&&e.body!==f.b){var a=e,c={body:a.body,id:n,localId:n,outgoing:!1,recipientPublicKey:t,status:b.a.SENT,timestamp:a.timestamp},o={type:O.RECEIVED_MESSAGE,data:c};r(o)}}});case 9:return o=n.sent,n.abrupt("return",o);case 13:return n.prev=13,n.t0=n.catch(0),v.e.error("Error inside subscribeChatMessages, recipient public key: ".concat(t,": "),n.t0),n.abrupt("return",Promise.resolve({off:function(){}}));case 17:case"end":return n.stop()}}),n,null,[[0,13]])})));return function(e){return n.apply(this,arguments)}}()},y=function(e){return function(){var t=Object(i.a)(u.a.mark((function t(n){var r,a;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,s.a.put("/api/gun/requests/".concat(e),{accept:!0});case 2:return r=t.sent,a=r.data,n({type:O.ACCEPT_HANDSHAKE_REQUEST,data:e}),t.abrupt("return",a);case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},S=function(e){return function(){var t=Object(i.a)(u.a.mark((function t(n,r){var a,o,i,l,d,p;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,s.a.post("/api/gun/requests",{publicKey:e});case 2:return a=t.sent,o=a.data,i=r().chat.sentRequests,l=i.filter((function(t){return t.pk===e})),d=Object(c.a)(l,1),d[0]||(p={type:O.SENT_REQUEST,data:e},n(p)),t.abrupt("return",o);case 8:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()},g=function(e){var t=e.publicKey,n=e.message,r=e.localId,c=void 0===r?null:r;return function(){var e=Object(i.a)(u.a.mark((function e(r){var o,i,p;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=null!==c&&void 0!==c?c:Object(d.a)(),e.prev=1,r({type:O.SENDING_MESSAGE,data:{body:n,localId:o,timestamp:l.DateTime.utc().toMillis(),recipientPublicKey:t}}),e.next=5,s.a.post("/api/gun/chats/".concat(t),{body:n});case 5:i=e.sent,p=i.data,console.log(p),r({type:O.SENT_MESSAGE,data:Object(a.a)(Object(a.a)({},p),{},{localId:o,recipientPublicKey:t})}),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),r({type:O.FAILED_MESSAGE,data:{body:n,localId:o,timestamp:l.DateTime.utc().toMillis(),recipientPublicKey:t}});case 14:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(t){return e.apply(this,arguments)}}()},_=function(e){return{type:O.CHAT_WAS_DELETED,data:{publicKey:e}}},T=function(){return function(){var e=Object(i.a)(u.a.mark((function e(t){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,console.debug("Subbing to chats"),e.next=4,Object(p.g)({callback:function(e,n){if(e)console.error("Error in chats subscription: ",e);else{console.debug("sub chat data received: ",n);var c=n.map((function(e){return{pk:e.recipientPublicKey,avatar:e.recipientAvatar,displayName:e.recipientDisplayName,didDisconnect:e.didDisconnect}})),o=n.reduce((function(e,t){var n;return Object(a.a)(Object(a.a)({},e),{},Object(r.a)({},t.recipientPublicKey,null===(n=t.messages)||void 0===n?void 0:n.filter((function(e){return e.body&&e.body.trim()&&e.body!==f.b})).sort((function(e,t){return t.timestamp-e.timestamp}))))}),{});t({type:O.LOAD_CHAT_DATA,data:{contacts:c,messages:o}})}},eventName:"chats"});case 4:return n=e.sent,e.abrupt("return",n);case 8:e.prev=8,e.t0=e.catch(0),alert("Could not subscribe to chats: ".concat(e.t0.message)),console.error("Could not subscribe to chats: ",e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}()},w=function(){return function(){var e=Object(i.a)(u.a.mark((function e(t){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,console.debug("Subbing to received requests"),e.next=4,Object(p.g)({callback:function(e,n){if(e)console.error("Error in received requests subscription: ",e);else{console.debug("sub received requests data received: ",n);var r={type:O.LOAD_RECEIVED_REQUESTS,data:n.map((function(e){return{id:e.id,pk:e.requestorPK,avatar:e.requestorAvatar,displayName:e.requestorDisplayName,timestamp:e.timestamp}}))};t(r)}},eventName:"receivedRequests"});case 4:return n=e.sent,e.abrupt("return",n);case 8:e.prev=8,e.t0=e.catch(0),alert("Could not subscribe to received requests: ".concat(e.t0.message)),console.error("Could not subscribe to received requests: ",e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}()},x=function(){return function(){var e=Object(i.a)(u.a.mark((function e(t){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,console.debug("Subbing to sent requests"),e.next=4,Object(p.g)({callback:function(e,n){if(e)console.error("Error in sent requests subscription: ",e);else{console.debug("sub sent requests data received: ",n);var r={type:O.LOAD_SENT_REQUESTS,data:n.map((function(e){return{id:e.id,pk:e.recipientPublicKey,avatar:e.recipientAvatar,displayName:e.recipientDisplayName,changedAddress:e.recipientChangedRequestAddress,timestamp:e.timestamp,loading:!1}}))};t(r)}},eventName:"sentRequests"});case 4:return n=e.sent,e.abrupt("return",n);case 8:e.prev=8,e.t0=e.catch(0),alert("Could not subscribe to sent requests: ".concat(e.t0.message)),console.error("Could not subscribe to sent requests: ",e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}()}},32:function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"j",(function(){return s})),n.d(t,"h",(function(){return l})),n.d(t,"g",(function(){return d})),n.d(t,"d",(function(){return p})),n.d(t,"f",(function(){return f})),n.d(t,"e",(function(){return b})),n.d(t,"i",(function(){return v})),n.d(t,"c",(function(){return O})),n.d(t,"k",(function(){return h})),n.d(t,"b",(function(){return E}));var r=n(2),a=n.n(r),c=n(5),o=n(15),u=n.n(o),i={LOAD_BALANCE:"wallet/balance/load",LOAD_USD_RATE:"wallet/usdRate/load",LOAD_TRANSACTIONS:"wallet/transactions/load",LOAD_MORE_TRANSACTIONS:"wallet/transactions/loadMore",LOAD_CHANNELS:"wallet/channels/load",LOAD_INVOICES:"wallet/invoices/load",LOAD_MORE_INVOICES:"wallet/invoices/loadMore",LOAD_PAYMENTS:"wallet/payments/load",LOAD_MORE_PAYMENTS:"wallet/payments/loadMore",LOAD_PEERS:"wallet/peers/load",ADD_PEER:"wallet/peers/add",REMOVE_PEER:"wallet/peers/remove",LOAD_RECENT_TRANSACTIONS:"wallet/recentTransactions/load",RESET_RECENT_TRANSACTIONS:"wallet/recentTransactions/reset",LOAD_LIGHTNING_INFO:"wallet/lightningInfo/load"},s=function(){return function(){var e=Object(c.a)(a.a.mark((function e(t){var n,r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,u.a.get("/api/lnd/balance");case 3:n=e.sent,r=n.data,t({type:i.LOAD_BALANCE,data:{channelBalance:r.channel_balance,confirmedBalance:r.confirmed_balance,pendingChannelBalance:r.pending_channel_balance}}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.error("When trying to fetch the balance for the wallet, an error ocurred:",e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}()},l=function(){return function(){var e=Object(c.a)(a.a.mark((function e(t){var n,r,c;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,u.a.get("https://api.coinbase.com/v2/prices/spot?currency=USD");case 3:n=e.sent,r=n.data,c=r.data.amount.replace(/,/g,""),t({type:i.LOAD_USD_RATE,data:c}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.error("An error happened when trying to fetch the USD rate:",e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}()},d=function(e){var t=e.page,n=e.itemsPerPage,r=void 0===n?10:n,o=e.reset,s=void 0!==o&&o;return function(){var e=Object(c.a)(a.a.mark((function e(n,c){var o,l,d;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!((o=c().wallet.transactions).page>=t&&!s||o.totalPages<t)){e.next=4;break}return e.abrupt("return");case 4:return e.next=6,u.a.get("/api/lnd/transactions",{params:{page:t,itemsPerPage:r}});case 6:l=e.sent,d=l.data,n({type:s?i.LOAD_TRANSACTIONS:i.LOAD_MORE_TRANSACTIONS,data:d}),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),console.error("An error ocurred when fetching transactions (fetchTransactions()):",e.t0);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t,n){return e.apply(this,arguments)}}()},p=function(){return function(){var e=Object(c.a)(a.a.mark((function e(t){var n,r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,u.a.get("/api/lnd/listchannels");case 3:n=e.sent,r=n.data,t({type:i.LOAD_CHANNELS,data:r.channels}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.error("An ocurred ocurred when fetching channels (fetchChannels()):",e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}()},f=function(){return function(){var e=Object(c.a)(a.a.mark((function e(t){var n,r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,u.a.get("/api/lnd/listpeers");case 3:return n=e.sent,r=n.data,t({type:i.LOAD_PEERS,data:r.peers}),e.abrupt("return",r);case 9:throw e.prev=9,e.t0=e.catch(0),console.error("An error ocurred while fetching peers (fetchPeers()) (will be re-thrown):",e.t0),e.t0;case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}()},b=function(e){var t=e.page,n=e.itemsPerPage,r=void 0===n?10:n,o=e.reset,s=void 0!==o&&o;return function(){var e=Object(c.a)(a.a.mark((function e(n,c){var o,l,d;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!((o=c().wallet.invoices).page>=t&&!s||o.totalPages<t)){e.next=4;break}return e.abrupt("return");case 4:return e.next=6,u.a.get("/api/lnd/invoices",{params:{page:t,itemsPerPage:r}});case 6:l=e.sent,d=l.data,n({type:s?i.LOAD_INVOICES:i.LOAD_MORE_INVOICES,data:d}),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),console.error("An error ocurred while fetching invoices (fetchInvoices()):",e.t0);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t,n){return e.apply(this,arguments)}}()},v=function(){return function(){var e=Object(c.a)(a.a.mark((function e(t){var n,r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.a.get("/api/lnd/unifiedTrx");case 2:return n=e.sent,r=n.data,t({type:i.LOAD_RECENT_TRANSACTIONS,data:r}),e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},O=function(e){var t=e.publicKey,n=e.host;return function(){var e=Object(c.a)(a.a.mark((function e(r){var c,o,s;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,u.a.post("/api/lnd/connectpeer",{pubkey:t,host:n});case 3:c={pub_key:t,address:n,bytes_sent:0,bytes_recv:0,sat_sent:0,sat_recv:0,inbound:!1},r({type:i.ADD_PEER,data:c}),e.next=11;break;case 7:throw e.prev=7,e.t0=e.catch(0),console.error("An error ocurred while connecting peer --| ".concat(n," |-- with public key --| ").concat(t," |-- in connectPeer()"),e.t0),null!==(o=null===e.t0||void 0===e.t0||null===(s=e.t0.response)||void 0===s?void 0:s.data)&&void 0!==o?o:e.t0;case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()},h=function(e){var t=e.publicKey,n=void 0===t?"":t,r=e.channelCapacity,o=void 0===r?0:r,i=e.pushAmount,s=void 0===i?0:i;return function(){var e=Object(c.a)(a.a.mark((function e(t,r){var c,i,l,d,f;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,c=r().fees,i=c.feeRates,l=c.rate,e.next=4,u.a.post("/api/lnd/openchannel",{pubkey:n,channelCapacity:o.toString(),channelPushAmount:s.toString(),satPerByte:i[l]});case 4:t(p()),e.next=11;break;case 7:throw e.prev=7,e.t0=e.catch(0),console.error("An error ocurred while opening a channel (openChannel()) with public key --| ".concat(n," |--, channel capacity: --| ").concat(o," |-- and push amount: --| ").concat(s," |--:"),e.t0),null!==(d=null===e.t0||void 0===e.t0||null===(f=e.t0.response)||void 0===f?void 0:f.data)&&void 0!==d?d:e.t0;case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,n){return e.apply(this,arguments)}}()},E=function(){return function(){var e=Object(c.a)(a.a.mark((function e(t){var n,r,c,o;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,u.a.get("/api/lnd/getinfo");case 3:n=e.sent,r=n.data,t({type:i.LOAD_LIGHTNING_INFO,data:r}),e.next=12;break;case 8:throw e.prev=8,e.t0=e.catch(0),console.error(e.t0),null!==(c=null===e.t0||void 0===e.t0||null===(o=e.t0.response)||void 0===o?void 0:o.data)&&void 0!==c?c:e.t0;case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}()}},326:function(e,t){},33:function(e,t,n){"use strict";n.d(t,"d",(function(){return h})),n.d(t,"e",(function(){return E})),n.d(t,"c",(function(){return j})),n.d(t,"b",(function(){return m})),n.d(t,"a",(function(){return y}));var r=n(2),a=n.n(r),c=n(5),o=n(20),u=n(100),i=n.n(u),s=n(76),l=function(e){try{return JSON.parse(e)}catch(t){return e}},d=["ping","disconnect","IS_GUN_AUTH","SET_LAST_SEEN_APP","NOT_AUTH"],p=function(e){return o.Buffer.from(e,"base64")},f=function(e){return o.Buffer.from(e).toString("base64")},b=function(e){return e instanceof Uint8Array?e:p(e)},v=function(e){if("string"===typeof e.ciphertext&&"string"===typeof e.iv&&"string"===typeof e.mac&&"string"===typeof e.ephemPublicKey)return e;if(e.ciphertext instanceof Uint8Array&&e.iv instanceof Uint8Array&&e.mac instanceof Uint8Array&&e.ephemPublicKey instanceof Uint8Array)return{ciphertext:f(e.ciphertext),iv:f(e.iv),mac:f(e.mac),ephemPublicKey:f(e.ephemPublicKey)};throw new s.a({field:"encryptedMessage",message:"Unknown encrypted message format"})},O=function(e){if(e.ciphertext instanceof Uint8Array&&e.iv instanceof Uint8Array&&e.mac instanceof Uint8Array&&e.ephemPublicKey instanceof Uint8Array)return e;if("string"===typeof e.ciphertext&&"string"===typeof e.iv&&"string"===typeof e.mac&&"string"===typeof e.ephemPublicKey)return{ciphertext:p(e.ciphertext),iv:p(e.iv),mac:p(e.mac),ephemPublicKey:p(e.ephemPublicKey)};throw new s.a({field:"encryptedMessage",message:"Unknown encrypted message format"})},h=function(e){return(null===e||void 0===e?void 0:e.ciphertext)&&(null===e||void 0===e?void 0:e.iv)&&(null===e||void 0===e?void 0:e.mac)&&(null===e||void 0===e?void 0:e.ephemPublicKey)},E=function(e){return d.includes(e)||"false"===Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_SHOCK_ENCRYPTION_ECC},j=function(){var e=i.a.generatePrivate(),t=i.a.getPublic(e);return{privateKey:e,publicKey:t,privateKeyBase64:f(e),publicKeyBase64:f(t)}},m=function(){var e=Object(c.a)(a.a.mark((function e(t){var n,r,c,u,s,l,d;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.publicKey,r=t.message,c=void 0===r?"":r,u=b(n),a=c,s=o.Buffer.from(a,"utf-8"),e.next=5,i.a.encrypt(u,s);case 5:return l=e.sent,d={ciphertext:l.ciphertext,iv:l.iv,mac:l.mac,ephemPublicKey:l.ephemPublicKey},e.abrupt("return",v(d));case 8:case"end":return e.stop()}var a}),e)})));return function(t){return e.apply(this,arguments)}}(),y=function(){var e=Object(c.a)(a.a.mark((function e(t){var n,r,c,u,s,d;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.privateKey,r=t.encryptedMessage,c=b(n),e.next=4,i.a.decrypt(c,O(r));case 4:return u=e.sent,s=o.Buffer.from(u).toString(),d=l(s),e.abrupt("return",d);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},333:function(e,t){},350:function(e,t,n){},352:function(e,t,n){},354:function(e,t){},355:function(e,t){},36:function(e,t,n){"use strict";n.d(t,"a",(function(){return f})),n.d(t,"e",(function(){return b})),n.d(t,"b",(function(){return h})),n.d(t,"g",(function(){return E})),n.d(t,"c",(function(){return j})),n.d(t,"d",(function(){return m})),n.d(t,"f",(function(){return y}));var r=n(2),a=n.n(r),c=n(5),o=n(78),u=n(15),i=n.n(u),s=n(18),l=n(75),d=n(79),p=n(14),f={RESET_NODE_INFO:"node/reset",SET_HOST_IP:"node/hostIP",SET_HOST_ID:"node/hostId",SET_AUTHENTICATED_USER:"node/authenticatedUser",SET_CONNECTION_STATUS:"node/connectionStatus",SET_NODE_HEALTH:"node/health",SET_WEBCLIENT_PREFIX:"node/setWebClientPrefix"},b=function(e){return function(t){t({type:f.SET_HOST_ID,data:e})}},v=function(e){return function(){var t=Object(c.a)(a.a.mark((function t(n){var r,c,o;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,i.a.get("".concat(e,"/healthz"));case 3:if(c=t.sent,o=c.data){t.next=7;break}throw new Error("NodeActions->fetchNodeHealth()->No data obtained from healthz endpoint");case 7:return(null===(r=o.APIStatus)||void 0===r?void 0:r.message)&&n({type:f.SET_CONNECTION_STATUS,data:!0}),t.abrupt("return",o);case 11:t.prev=11,t.t0=t.catch(0),console.log("NodeActions->fetchNodeHealth()->Error encountered:"),console.log(t.t0),n({type:f.SET_CONNECTION_STATUS,data:!1});case 16:case"end":return t.stop()}}),t,null,[[0,11]])})));return function(e){return t.apply(this,arguments)}}()},O=function(){return function(){var e=Object(c.a)(a.a.mark((function e(t){var n,r,c,o;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.a.get("/api/lnd/wallet/status");case 2:if(n=e.sent,r=n.data,c=r.walletExists,o=r.walletStatus,!c){e.next=8;break}return t({type:s.a.SET_AUTH_STEP,data:"locked"===o?"unlockWallet":"gunAuth"}),e.abrupt("return",o);case 8:return t({type:s.a.SET_AUTH_STEP,data:"createWallet"}),e.abrupt("return","createWallet");case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},h=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return function(){var n=Object(c.a)(a.a.mark((function n(r){var o,u,l,b;return a.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t&&(r({type:f.RESET_NODE_INFO}),r({type:s.a.RESET_AUTH_INFO})),o=function(){var e=Object(c.a)(a.a.mark((function e(t,n){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i.a.defaults.baseURL="".concat(t),r({type:f.SET_HOST_IP,data:t}),e.next=4,Promise.all([r(O()),r(Object(d.b)())]);case 4:Object(p.a)(t,!0);case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),l=e.replace(/^http(s)?:\/\//,""),n.prev=3,n.next=6,v("https://".concat(l))(r);case 6:if(!(u=n.sent)){n.next=12;break}return u.withProtocolHostIP="https://".concat(l),n.next=11,o("https://".concat(l),u);case 11:return n.abrupt("return",u);case 12:n.next=17;break;case 14:n.prev=14,n.t0=n.catch(3),console.log(n.t0);case 17:return console.error("cannot establish https connection, will try http"),n.next=20,v("http://".concat(l))(r);case 20:return(b=n.sent).withProtocolHostIP="http://".concat(l),n.next=24,o("http://".concat(l),b);case 24:return n.abrupt("return",u||b);case 25:case"end":return n.stop()}}),n,null,[[3,14]])})));return function(e){return n.apply(this,arguments)}}()},E=function(e){var t=e.alias,n=e.password;return function(){var e=Object(c.a)(a.a.mark((function e(r){var c,u,d;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,i.a.post("/api/lnd/auth",{alias:t,password:n},{timeout:3e4});case 3:return c=e.sent,u=c.data,r(Object(s.e)(!0)),d=Object(o.a)(u.authorization),r({type:f.SET_AUTHENTICATED_USER,data:{alias:u.user.alias,authToken:u.authorization,publicKey:u.user.publicKey,authTokenExpirationDate:d.exp}}),e.abrupt("return",u);case 11:throw e.prev=11,e.t0=e.catch(0),r(Object(s.e)(!1)),Object(l.a)(e.t0);case 15:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t){return e.apply(this,arguments)}}()},j=function(e){var t=e.alias,n=e.password;return function(){var e=Object(c.a)(a.a.mark((function e(r){var c,u,d;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,i.a.post("/api/lnd/wallet/existing",{alias:t,password:n});case 3:return c=e.sent,u=c.data,r(Object(s.e)(!0)),d=Object(o.a)(u.authorization),r({type:f.SET_AUTHENTICATED_USER,data:{alias:u.user.alias,authToken:u.authorization,publicKey:u.user.publicKey,authTokenExpirationDate:d.exp}}),e.abrupt("return",u);case 11:throw e.prev=11,e.t0=e.catch(0),r(Object(s.e)(!1)),Object(l.a)(e.t0);case 15:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t){return e.apply(this,arguments)}}()},m=function(e){var t=e.alias,n=e.password;return function(){var e=Object(c.a)(a.a.mark((function e(r){var c,u,d;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,i.a.post("/api/lnd/wallet",{alias:t,password:n},{timeout:3e4});case 3:return c=e.sent,u=c.data,r(Object(s.e)(!0)),d=Object(o.a)(u.authorization),r({type:f.SET_AUTHENTICATED_USER,data:{alias:u.user.alias,authToken:u.authorization,publicKey:u.user.publicKey,authTokenExpirationDate:d.exp}}),e.abrupt("return",u);case 11:throw e.prev=11,e.t0=e.catch(0),r(Object(s.e)(!1)),Object(l.a)(e.t0);case 15:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t){return e.apply(this,arguments)}}()},y=function(e){return function(t){t({type:f.SET_WEBCLIENT_PREFIX,data:e})}}},375:function(e,t){},377:function(e,t){},389:function(e,t){},391:function(e,t){},417:function(e,t){},419:function(e,t){},424:function(e,t){},426:function(e,t){},43:function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n.d(t,"d",(function(){return c})),n.d(t,"c",(function(){return o})),n.d(t,"b",(function(){return u}));var r=n(24),a={SENT:"SENT",SENDING:"SENDING",FAILED:"FAILED",RECEIVED:"RECEIVED"},c=function(e){if(!r.i(e))return!1;var t=e;return"string"===typeof t.authorId&&("string"===typeof t.id&&("string"===typeof t.originalAuthor&&"shared"===t.type))},o=function(e){if(!r.i(e))return!1;var t=e;return"string"===typeof t.description&&("number"===typeof t.height&&("number"===typeof t.width&&(!!r.j(t.title)&&("image/embedded"===t.type||"video/embedded"===t.type))))},u=function(e){if(!o(e))return!1;var t=e;return!!r.j(t.author)&&"number"===typeof t.timestamp}},438:function(e,t){},441:function(e,t){},52:function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return d})),n.d(t,"c",(function(){return p}));var r=n(2),a=n.n(r),c=n(5),o=n(25),u=n(14),i={RESET_USER_PROFILES:"userProfiles/profiles/reset",LOAD_USER_PROFILE:"userProfiles/profiles/load",REMOVE_USER_PROFILE:"userProfiles/profiles/remove",UPDATE_USER_PROFILE:"userProfiles/profiles/update"},s=new Set,l=function(e,t){return{type:i.UPDATE_USER_PROFILE,data:{publicKey:e,profile:t}}},d=function(e){return function(t,n){if(s.has(e))return function(){};console.info("subbing user..."+e),s.add(e);var r=Object(u.e)({query:"".concat(e,"::Profile::on"),reconnect:!0,onData:function(r){if(n().userProfiles[e])return t({type:i.UPDATE_USER_PROFILE,data:{publicKey:e,profile:r}}),r;t({type:i.LOAD_USER_PROFILE,data:{publicKey:e,profile:r}})}}),a=Object(u.e)({query:"".concat(e,"::profileBinary::map.on"),reconnect:!0,onData:function(n,r){if("avatar"===r){if("string"!==typeof n&&null!==n)return void o.e.error("Expected avatar data to be string or null, instead got: ".concat(typeof n,". Public key: ").concat(e));t(l(e,{avatar:n}))}else if("header"===r){if("string"!==typeof n&&null!==n)return void o.e.error("Expected header data to be string or null, instead got: ".concat(typeof n,". Public key: ").concat(e));t(l(e,{header:n}))}else o.e.error("Unknown key: ".concat(r," for user binary profile data gun RPC socket"))}});return function(){Object(u.f)(r,a)(),s.delete(e)}}},p=function(e){return Object(c.a)(a.a.mark((function t(){return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:Object(u.h)("".concat(e,"::Profile::on")),Object(u.h)("".concat(e,"::profileBinary::map.on"));case 2:case"end":return t.stop()}}),t)})))}},53:function(e,t,n){"use strict";n.d(t,"a",(function(){return p})),n.d(t,"g",(function(){return h})),n.d(t,"f",(function(){return j})),n.d(t,"e",(function(){return y})),n.d(t,"h",(function(){return S})),n.d(t,"d",(function(){return g})),n.d(t,"b",(function(){return _})),n.d(t,"c",(function(){return T}));var r=n(12),a=n(2),c=n.n(a),o=n(0),u=n(5),i=n(99),s=n(13),l=n(14),d=n(52),p={RESET_FEED:"feed/reset",ADD_FOLLOW:"feed/follows/add",REMOVE_FOLLOW:"feed/follows/remove",UPDATE_FOLLOW:"feed/follows/update",LOAD_POSTS:"feed/posts/load",ADD_USER_POST:"feed/posts/add",DELETE_USER_POST:"feed/posts/delete",LOAD_SHARED_POST:"feed/sharedPosts/load",POST_TIPPED:"feed/posts/tipped",RELOAD_FEED:"feed/reload"},f=function(e){return function(t){return t({type:p.REMOVE_FOLLOW,data:e})}},b=function(e){return function(t){return t({type:p.ADD_FOLLOW,data:e})}},v=function(e,t,n){return function(){var r=Object(u.a)(c.a.mark((function r(a){var u,i,l,f,b;return c.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,s.a.get("/api/gun/otheruser/".concat(t,"/load/posts>").concat(e));case 2:u=r.sent,i=u.data,a(Object(d.b)(t)),l=i.data.tipsSet?Object.values(i.data.tipsSet):[],f=l.length,b=f>0?l.reduce((function(e,t){return Number(t)+Number(e)})):0,a({type:p.LOAD_SHARED_POST,data:Object(o.a)(Object(o.a)({},i.data),{},{authorId:t,sharerId:n,id:e,tipCounter:f,tipValue:b})});case 9:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}()},O="::posts::on",h=function(e){return function(){var t=Object(u.a)(c.a.mark((function t(n){var a;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.info("subbing to posts from:"+e),t.next=3,Object(l.e)({query:e+O,onData:function(t){console.debug("posts from: ".concat(e,": "),t);var a=Object.entries(t),l=a.filter((function(e){var t=Object(r.a)(e,2),n=t[0];return null!==t[1]&&!i.a.includes(n)})).map((function(e){return Object(r.a)(e,1)[0]})),d=a.filter((function(e){var t=Object(r.a)(e,2),n=t[0];return null===t[1]&&!i.a.includes(n)})).map((function(e){return Object(r.a)(e,1)[0]}));l.forEach(function(){var t=Object(u.a)(c.a.mark((function t(r){var a,u,i,l,d;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,s.a.get("/api/gun/otheruser/".concat(e,"/load/posts>").concat(r));case 3:a=t.sent,u=a.data,console.info("processing post: ".concat(r," from ").concat(e)),i=u.data.tipsSet?Object.values(u.data.tipsSet):[],l=i.length,d=l>0?i.reduce((function(e,t){return Number(t)+Number(e)})):0,n({type:p.ADD_USER_POST,data:Object(o.a)(Object(o.a)({},u.data),{},{id:r,authorId:e,type:"post",tipCounter:l,tipValue:d})}),t.next=15;break;case 12:t.prev=12,t.t0=t.catch(0),console.error("When subscribed to posts from public key --| ".concat(e," |-- and trying to download the post with id: --| ").concat(r," |-- an error ocurred:"),t.t0);case 15:case"end":return t.stop()}}),t,null,[[0,12]])})));return function(e){return t.apply(this,arguments)}}()),d.forEach((function(t){return n({type:p.DELETE_USER_POST,data:{id:t,authorId:e,type:"post"}})}))}});case 3:return a=t.sent,t.abrupt("return",a);case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},E="::sharedPosts::on",j=function(e){return function(){var t=Object(u.a)(c.a.mark((function t(n){var a;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(l.e)({query:e+E,onData:function(t){console.debug("shared posts from ".concat(e,": "),t);var a=Object.entries(t),o=a.filter((function(e){var t=Object(r.a)(e,2),n=t[0];return null!==t[1]&&!i.a.includes(n)})).map((function(e){return Object(r.a)(e,1)[0]})),l=a.filter((function(e){var t=Object(r.a)(e,2),n=t[0];return null===t[1]&&!i.a.includes(n)})).map((function(e){return Object(r.a)(e,1)[0]}));o.forEach(function(){var t=Object(u.a)(c.a.mark((function t(r){var a,o,u,i;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,s.a.get("/api/gun/otheruser/".concat(e,"/load/sharedPosts>").concat(r));case 3:if(a=t.sent,(o=a.data).data&&o.data.originalAuthor){t.next=7;break}throw new Error("invalid shared post provided for user ".concat(e));case 7:u=a.data.data,i={authorId:e,id:r,originalAuthor:u.originalAuthor,shareDate:u.shareDate,sharerId:e,originalPost:void 0,type:"shared"},n({type:p.ADD_USER_POST,data:i}),console.debug("dispatching shared post load"),n(v(r,u.originalAuthor,e)),t.next=17;break;case 14:t.prev=14,t.t0=t.catch(0),console.error("User: ".concat(e,"\npostID: ").concat(r,"\n error:"),t.t0);case 17:case"end":return t.stop()}}),t,null,[[0,14]])})));return function(e){return t.apply(this,arguments)}}()),l.forEach((function(t){return n({type:p.DELETE_USER_POST,data:{id:t,authorId:e}})}))}});case 2:return a=t.sent,t.abrupt("return",a);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},m="$user::follows::map.on",y=function(){return function(){var e=Object(u.a)(c.a.mark((function e(t){var n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(l.e)({query:m,reconnect:!0,onData:function(){var e=Object(u.a)(c.a.mark((function e(n,r){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.info("processing follow"),console.info(n),"string"===typeof r){e.next=5;break}return console.warn("Invalid follow key received: ".concat(r)),e.abrupt("return");case 5:if(n){e.next=8;break}return t(f(r)),e.abrupt("return");case 8:if("string"===typeof n.user){e.next=11;break}return console.warn("Invalid follow user received (".concat(n.user,")")),e.abrupt("return");case 11:t(b(n));case 12:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()});case 2:return n=e.sent,console.debug("subbing follows"),e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},S=function(){return function(){console.debug("unsubbing follows"),Object(l.h)(m)}},g=function(e){var t=e.publicKey,n=e.postId,r=e.amount;return function(){var e=Object(u.a)(c.a.mark((function e(a){var o,u;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.a.post("/api/lnd/unifiedTrx",{type:"tip",amt:r,to:t,memo:"Post Tipped!",feeLimit:.006*r+10,ackInfo:n});case 2:o=e.sent,u=o.data,console.log(u),a({type:p.POST_TIPPED,data:{publicKey:t,postId:n,amount:r}});case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},_=function(e){var t=e.id,n=e.authorId;return{type:p.DELETE_USER_POST,data:{id:t,authorId:n}}},T=function(){return{type:p.RELOAD_FEED}}},54:function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"c",(function(){return s})),n.d(t,"b",(function(){return l}));var r=n(2),a=n.n(r),c=n(5),o=null,u=function(){var e=Object(c.a)(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o){e.next=2;break}return e.abrupt("return",Promise.resolve());case 2:return e.abrupt("return",o());case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),i={OPEN_DIALOG:"app/openDialog",CLOSE_DIALOG:"app/closeDialog"},s=function(e){var t=e.text,n=e.cb,r=void 0===n?null:n;return function(e){!function(e){o=e}(r),e({type:i.OPEN_DIALOG,data:{text:t,hasCallback:!!r}})}},l=function(e){return function(t){e&&u(),t({type:i.CLOSE_DIALOG})}}},557:function(e,t,n){},558:function(e,t,n){},559:function(e,t,n){},560:function(e,t,n){},561:function(e,t,n){"use strict";n.r(t);var r=n(3),a=n.n(r),c=n(103),o=n.n(c),u=n(15),i=n.n(u),s=n(2),l=n.n(s),d=n(5),p=n(12),f=n(0),b=n(119),v=n(23),O=n(42),h=n(78),E=n(125),j=n(122),m=n(18),y=n(171),S=n(80),g=n.n(S),_=(n(352),n(55)),T=n(84),w=n(17),x=n(4),k=function(){var e=Object(O.b)(),t=w.useSelector((function(e){return e.drawer.open})),n=Object(r.useCallback)((function(){e(Object(T.b)())}),[e]),a=Object(r.useCallback)((function(){window.confirm("Are you sure you wish to log out?")&&(e(Object(m.b)()),e(Object(T.b)()))}),[e]),c=Object(r.useCallback)((function(){}),[]);return Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("div",{className:g()({"drawer-overlay":!0,"drawer-overlay-open":t}),onClick:n,"data-v-1b89d7b9":""}),Object(x.jsxs)("div",{className:g()({"drawer-container":!0,"drawer-container-open":t}),"data-v-1b89d7b9":"",children:[Object(x.jsxs)("div",{className:"drawer-top-section","data-v-1b89d7b9":"",children:[Object(x.jsxs)(_.c,{className:"drawer-item",to:"/advanced",onClick:n,"data-v-1b89d7b9":"",children:[Object(x.jsx)("div",{className:"drawer-item-icon","data-v-1b89d7b9":"",children:Object(x.jsx)("i",{className:"icon-solid-spending-rule","data-v-1b89d7b9":""})}),Object(x.jsx)("p",{className:"drawer-item-title unselectable","data-v-1b89d7b9":"",children:"Advanced Lightning"})]}),Object(x.jsxs)(_.c,{to:"/Backups",className:"drawer-item",onClick:n,"data-v-1b89d7b9":"",children:[Object(x.jsx)("div",{className:"drawer-item-icon","data-v-1b89d7b9":"",children:Object(x.jsx)("i",{className:"icon-solid-key","data-v-1b89d7b9":""})}),Object(x.jsx)("p",{className:"drawer-item-title unselectable","data-v-1b89d7b9":"",children:"Seed Backup"})]}),Object(x.jsxs)(_.c,{to:"/walletSettings",className:"drawer-item",onClick:n,"data-v-1b89d7b9":"",children:[Object(x.jsx)("div",{className:"drawer-item-icon","data-v-1b89d7b9":"",children:Object(x.jsx)("i",{className:"icon-solid-spending-rule","data-v-1b89d7b9":""})}),Object(x.jsx)("p",{className:"drawer-item-title unselectable","data-v-1b89d7b9":"",children:"Wallet Settings"})]})]}),Object(x.jsxs)("div",{className:"drawer-bottom-section","data-v-1b89d7b9":"",children:[Object(x.jsxs)(_.c,{className:"drawer-item",to:"/moonpay",onClick:n,"data-v-1b89d7b9":"",children:[Object(x.jsx)("div",{className:"drawer-item-icon","data-v-1b89d7b9":"",children:Object(x.jsx)("i",{className:"icon-solid-help","data-v-1b89d7b9":""})}),Object(x.jsx)("p",{className:"drawer-item-title unselectable","data-v-1b89d7b9":"",children:"Buy Bitcoins"})]}),Object(x.jsxs)("div",{className:"drawer-item","data-v-1b89d7b9":"",children:[Object(x.jsx)("div",{className:"drawer-item-icon","data-v-1b89d7b9":"",children:Object(x.jsx)("i",{className:"icon-solid-help","data-v-1b89d7b9":""})}),Object(x.jsx)("p",{className:"drawer-item-title unselectable","data-v-1b89d7b9":"",children:"Help"})]})]}),Object(x.jsxs)("div",{className:"drawer-logout-and-scan","data-v-1b89d7b9":"",children:[Object(x.jsx)(_.c,{to:"/QRScanner",onClick:n,"data-v-1b89d7b9":"",children:Object(x.jsx)("i",{onClick:c,className:"icon-solid-scan",style:{color:"var(--main-blue)"},"data-v-1b89d7b9":""})}),Object(x.jsx)("i",{onClick:a,className:"fas fa-power-off",style:{color:"var(--main-blue)"},"data-v-1b89d7b9":""})]})]})]})},A=n(52),D=(n(557),n(174));var N=n(25),I=n(28),R=n(54),P=a.a.lazy((function(){return Promise.all([n.e(0),n.e(27)]).then(n.bind(null,861))})),C=a.a.lazy((function(){return Promise.all([n.e(0),n.e(17)]).then(n.bind(null,857))})),U=a.a.lazy((function(){return n.e(21).then(n.bind(null,854))})),L=a.a.lazy((function(){return Promise.all([n.e(5),n.e(0),n.e(19)]).then(n.bind(null,859))})),K=a.a.lazy((function(){return Promise.all([n.e(4),n.e(0),n.e(20)]).then(n.bind(null,858))})),M=a.a.lazy((function(){return Promise.all([n.e(0),n.e(25)]).then(n.bind(null,855))})),H=a.a.lazy((function(){return Promise.all([n.e(6),n.e(37)]).then(n.bind(null,847))})),B=a.a.lazy((function(){return Promise.all([n.e(4),n.e(6),n.e(31)]).then(n.bind(null,862))})),F=a.a.lazy((function(){return Promise.all([n.e(5),n.e(18)]).then(n.bind(null,853))})),V=a.a.lazy((function(){return Promise.all([n.e(3),n.e(0),n.e(13)]).then(n.bind(null,848))})),q=a.a.lazy((function(){return Promise.all([n.e(0),n.e(33)]).then(n.bind(null,849))})),W=a.a.lazy((function(){return Promise.all([n.e(7),n.e(38)]).then(n.bind(null,863))})),G=a.a.lazy((function(){return n.e(28).then(n.bind(null,850))})),z=a.a.lazy((function(){return n.e(22).then(n.bind(null,860))})),Y=a.a.lazy((function(){return Promise.all([n.e(7),n.e(29)]).then(n.bind(null,864))})),$=a.a.lazy((function(){return Promise.all([n.e(1),n.e(4),n.e(0),n.e(14)]).then(n.bind(null,856))})),J=a.a.lazy((function(){return Promise.all([n.e(9),n.e(36)]).then(n.bind(null,691))})),Q=a.a.lazy((function(){return Promise.all([n.e(9),n.e(34)]).then(n.bind(null,865))})),X=a.a.lazy((function(){return Promise.all([n.e(5),n.e(23),n.e(30)]).then(n.bind(null,866))})),Z=a.a.lazy((function(){return Promise.all([n.e(0),n.e(32)]).then(n.bind(null,851))})),ee=a.a.lazy((function(){return Promise.all([n.e(1),n.e(0),n.e(24)]).then(n.bind(null,867))})),te=function(e){var t=e.component,n=Object(b.a)(e,["component"]),r=w.useSelector((function(e){return e.auth.authenticated}))?t:F;return Object(x.jsx)(v.b,Object(f.a)(Object(f.a)({},n),{},{component:r}))},ne=function(){var e=Object(O.b)(),t=Object(v.g)(),n=w.useSelector((function(e){return e.node.authToken})),a=w.useSelector((function(e){return e.auth.authenticated})),c=w.useSelector(w.selectSelfPublicKey),o=w.useSelector((function(e){return e.content.streamUrl})),u=w.useSelector((function(e){return e.content.streamStatusUrl})),i=w.useSelector((function(e){return e.content.streamContentId})),s=w.useSelector((function(e){return e.content.streamPostId})),f=w.useSelector((function(e){return e.content.streamUserToken})),b=w.useSelector((function(e){return e.content.streamLiveToken})),S=w.useSelector((function(e){return e.app.dialogText})),g=w.useSelector((function(e){return e.app.dialogHasCallback})),_=Object(r.useState)(0),T=Object(p.a)(_,2),ne=T[0],re=T[1],ae=Object(r.useState)(!1),ce=Object(p.a)(ae,2),oe=ce[0],ue=ce[1],ie=Object(r.useState)(!1),se=Object(p.a)(ie,2),le=se[0],de=se[1];Object(r.useEffect)((function(){if(u){var e,t=setInterval(Object(d.a)(l.a.mark((function n(){return l.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,N.b.get(u);case 3:if(n.sent.data.isLive){n.next=6;break}return n.abrupt("return");case 6:ue(!0),clearInterval(t),e=setTimeout((function(){console.info("upp"),re(Date.now())}),5e3),n.next=13;break;case 11:n.prev=11,n.t0=n.catch(0);case 13:case"end":return n.stop()}}),n,null,[[0,11]])}))),2e3);return function(){clearInterval(t),clearTimeout(e)}}}),[u,ue,re]);var pe=Object(r.useMemo)((function(){return Object(x.jsx)(D.a,{hideRibbon:!0,item:{magnetURI:o,liveStatus:"live"},timeout:1500,id:void 0,index:void 0,postId:void 0,tipCounter:void 0,tipValue:void 0,width:void 0})}),[o,ne]),fe=Object(r.useCallback)((function(){N.b.post("/api/stopStream",{postId:s,contentId:i,endUrl:"https://webtorrent.shock.network/api/stream/end",urlForMagnet:"https://webtorrent.shock.network/api/stream/torrent/".concat(f),obsToken:b}),Object(I.i)()(e),console.info(f),t.push("/profile")}),[e,t,i,b,s,f]);Object(r.useEffect)((function(){E.a.addLanguage("en",{"The media could not be loaded, either because the server or network failed or because the format is not supported.":"Stream Not Available"})}),[]),Object(r.useEffect)((function(){if(n){var t=1e3*Object(h.a)(n).exp<Date.now();Object(m.e)(t)}else e(Object(m.e)(!1))}),[n,e]),Object(r.useEffect)((function(){e(a?Object(A.b)(c):Object(A.c)(c))}),[a,e,c]),Object(r.useEffect)((function(){var e=!!(a&&oe&&o);e!==le&&de(e)}),[a,oe,o,le,de]),Object(r.useEffect)((function(){le&&function(e){var t=document.getElementById(e);if(t){var n=0,r=0,a=0,c=0;document.getElementById(t.id+"Header").onpointerdown=function(e){(e=e||window.event).preventDefault(),a=e.clientX,c=e.clientY,document.onpointerup=u,document.onpointermove=o}}else console.log("draggable set fail");function o(e){console.log("dragging yooo"),(e=e||window.event).preventDefault(),n=a-e.clientX,r=c-e.clientY,a=e.clientX,c=e.clientY,t.style.top=t.offsetTop-r+"px",t.style.left=t.offsetLeft-n+"px"}function u(){console.log("not anymore!"),document.onpointerup=null,document.onpointermove=null}}("floatyVideo")}),[le]);var be=Object(r.useCallback)(Object(d.a)(l.a.mark((function t(){var n,r,a,o,u;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,N.b.get("/api/gun/user/load/seedServiceProviderPubKey",{headers:{"public-key-for-decryption":c}});case 3:n=t.sent,(r=n.data)&&"string"===typeof r.data&&""!==r.data&&Object(I.l)(r.data,!0)(e),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),console.log(t.t0);case 11:return t.prev=11,t.next=14,N.b.get("/api/gun/user/load/seedServiceSeedData",{headers:{"public-key-for-decryption":c}});case 14:a=t.sent,(o=a.data)&&"string"===typeof o.data&&""!==o.data&&(u=JSON.parse(o.data))&&u.seedUrl&&u.seedToken&&Object(I.k)(u.seedUrl,u.seedToken,!0)(e),t.next=22;break;case 19:t.prev=19,t.t1=t.catch(11),console.log(t.t1);case 22:case"end":return t.stop()}}),t,null,[[0,8],[11,19]])}))),[e,c]);Object(r.useEffect)((function(){a&&be()}),[a,be]);var ve=Object(r.useCallback)(Object(d.a)(l.a.mark((function t(){var n,r,a;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,N.b.get("/api/gun/user/load/currentStreamInfo",{headers:{"public-key-for-decryption":c}});case 3:if(n=t.sent,!(r=n.data)||"string"!==typeof r.data||""===r.data){t.next=11;break}if("NO DATA"!==r.data){t.next=9;break}return Object(I.i)(!0,!0)(e),t.abrupt("return");case 9:(a=JSON.parse(r.data))&&Object(I.d)(a,!0)(e);case 11:t.next=16;break;case 13:t.prev=13,t.t0=t.catch(0),console.log(t.t0);case 16:case"end":return t.stop()}}),t,null,[[0,13]])}))),[e,c]);Object(r.useEffect)((function(){a&&ve()}),[a,ve]);var Oe=Object(r.useCallback)((function(){Object(R.b)(!1)(e)}),[R.b,e]),he=Object(r.useCallback)((function(){Object(R.b)(g)(e)}),[g,R.b,e]);return Object(x.jsxs)(j.a,{className:"ShockWallet",children:[le&&Object(x.jsxs)("div",{id:"floatyVideo",className:"floaty-container",children:[Object(x.jsx)("i",{id:"floatyVideoHeader",className:"fas fa-grip-vertical"}),pe,Object(x.jsx)("button",{onClick:fe,children:"CLOSE STREAM"})]}),S&&Object(x.jsx)("div",{className:"fixed-container",children:Object(x.jsxs)("div",{className:"global-dialog",children:[Object(x.jsx)("p",{children:S}),Object(x.jsxs)("div",{className:"d-flex flex-justify-center w-80",children:[g&&Object(x.jsx)("button",{className:"shock-form-button m-t-1 w-50",onClick:Oe,children:"Cancel"}),g&&Object(x.jsx)("div",{style:{width:"1rem"}}),Object(x.jsx)("button",{className:"shock-form-button-confirm m-t-1 w-50",onClick:he,children:"OK"})]})]})}),Object(x.jsx)(k,{}),Object(x.jsx)(r.Suspense,{fallback:Object(x.jsx)(y.a,{fullScreen:!0,text:null}),children:Object(x.jsxs)(v.d,{children:[Object(x.jsx)(v.b,{path:"/auth",exact:!0,component:F}),Object(x.jsx)(te,{path:"/overview",exact:!0,component:P}),Object(x.jsx)(te,{path:"/advanced",exact:!0,component:C}),Object(x.jsx)(te,{path:"/walletSettings",exact:!0,component:U}),Object(x.jsx)(te,{path:"/chat",exact:!0,component:L}),Object(x.jsx)(te,{path:"/chat/:publicKey",component:M}),Object(x.jsx)(te,{path:"/send",exact:!0,component:H}),Object(x.jsx)(te,{path:"/request",exact:!0,component:B}),Object(x.jsx)(te,{path:"/profile",exact:!0,component:K}),Object(x.jsx)(te,{path:"/publishContent",exact:!0,component:W}),Object(x.jsx)(te,{path:"/feed",exact:!0,component:V}),Object(x.jsx)(te,{path:"/moonpay",exact:!0,component:q}),Object(x.jsx)(te,{path:"/createPost",exact:!0,component:z}),Object(x.jsx)(te,{path:"/goLive",exact:!0,component:Y}),Object(x.jsx)(te,{path:"/offerService",exact:!0,component:G}),Object(x.jsx)(te,{path:"/QRScanner",exact:!0,component:X}),Object(x.jsx)(te,{path:"/otherUser/:publicKey/:selectedView?",exact:!0,component:$}),Object(x.jsx)(te,{path:"/Backups",exact:!0,component:Z}),Object(x.jsx)(v.b,{path:"/story",exact:!0,component:J}),Object(x.jsx)(v.b,{path:"/stories",exact:!0,component:Q}),Object(x.jsx)(te,{path:"/item/:publicKey/:id",exact:!0,component:ee}),Object(x.jsx)(v.a,{to:"/overview"})]})})]})},re=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function ae(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://cra.link/PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}var ce=function(e){e&&e instanceof Function&&n.e(39).then(n.bind(null,852)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,c=t.getLCP,o=t.getTTFB;n(e),r(e),a(e),c(e),o(e)}))},oe=n(289);n(560);i.a.defaults.timeout=2e4,o.a.render(Object(x.jsx)(O.a,{store:w.store,children:Object(x.jsx)(oe.a,{loading:null,persistor:w.persistor,children:Object(x.jsx)(a.a.StrictMode,{children:Object(x.jsx)(_.a,{children:Object(x.jsx)(ne,{})})})})}),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("","/service-worker.js");re?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(n){var r=n.headers.get("content-type");404===n.status||null!=r&&-1===r.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):ae(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://cra.link/PWA")}))):ae(t,e)}))}}(),ce(console.log)},75:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(76),a=function(e){var t,n;if("response"in e){var a,c,o,u=null===(a=e.response)||void 0===a?void 0:a.data;return new r.a({field:null!==(c=null===u||void 0===u?void 0:u.field)&&void 0!==c?c:"unknown",message:null!==(o=null===u||void 0===u?void 0:u.errorMessage)&&void 0!==o?o:"An unknown error has occurred"})}return new r.a({field:null!==(t="field"in e&&e.field)&&void 0!==t?t:"unknown",message:null!==(n=e.message)&&void 0!==n?n:"An unknown error has occurred"})}},76:function(e,t,n){"use strict";var r=n(191),a=n(192),c=n(274),o=n(290),u=function(e){Object(a.a)(n,e);var t=Object(c.a)(n);function n(e){var a,c,o;return Object(r.a)(this,n),(o=t.call(this)).field=void 0,o.message=null!==(a=null===e||void 0===e?void 0:e.message)&&void 0!==a?a:"An unknown error has occurred",o.field=null!==(c=null===e||void 0===e?void 0:e.field)&&void 0!==c?c:"unknown",o.name=null===e||void 0===e?void 0:e.name,o.stack=null===e||void 0===e?void 0:e.stack,o}return n}(Object(o.a)(Error));t.a=u},79:function(e,t,n){"use strict";n.d(t,"a",(function(){return d})),n.d(t,"b",(function(){return O}));var r=n(2),a=n.n(r),c=n(5),o=n(292),u=n(15),i=n.n(u),s=n(36),l=n(33),d={ADD_USER_KEY_PAIR:"encryption/userKeyPair",ADD_HOST_KEY:"encryption/hostKey",SET_DEVICE_ID:"encryption/deviceId"},p=null,f=function(e){var t=e.hostId,n=e.keyPair;return function(e){e({type:d.ADD_USER_KEY_PAIR,data:{hostId:t,keyPair:n}})}},b=function(e){var t=e.hostId,n=e.publicKey;return function(e){e({type:d.ADD_HOST_KEY,data:{hostId:t,publicKey:n}})}},v=function(){return function(e,t){var n=t().node.deviceId;return n||e((function(e){var t=Object(o.a)();return e({type:d.SET_DEVICE_ID,data:t}),t}))}},O=function(){return function(){var e=Object(c.a)(a.a.mark((function e(t){var n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,p||(p=t(function(){var e=Object(c.a)(a.a.mark((function e(t){var n,r,c,o;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=t(v()),r=Object(l.c)(),e.next=5,i.a.post("/api/encryption/exchange",{publicKey:r.publicKeyBase64,deviceId:n});case 5:return c=e.sent,o=c.data,t(f({hostId:o.hostId,keyPair:r})),t(b({hostId:o.hostId,publicKey:o.APIPublicKey})),t(Object(s.e)(o.hostId)),e.abrupt("return",{user:r,host:o});case 13:throw e.prev=13,e.t0=e.catch(0),console.error("[ENCRYPTION] Key Exchange Error:",e.t0),e.t0;case 17:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t){return e.apply(this,arguments)}}())),e.next=4,p;case 4:return n=e.sent,p=null,e.abrupt("return",n);case 9:throw e.prev=9,e.t0=e.catch(0),console.error(e.t0),p=null,e.t0;case 14:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}()}},84:function(e,t,n){"use strict";n.d(t,"a",(function(){return o})),n.d(t,"c",(function(){return u})),n.d(t,"b",(function(){return i}));var r=n(2),a=n.n(r),c=n(5),o={SET_DRAWER_OPEN:"drawer/open"},u=function(){return function(){var e=Object(c.a)(a.a.mark((function e(t){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t({type:o.SET_DRAWER_OPEN,data:!0});case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},i=function(){return function(){var e=Object(c.a)(a.a.mark((function e(t){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t({type:o.SET_DRAWER_OPEN,data:!1});case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}},86:function(e,t,n){"use strict";n.d(t,"b",(function(){return r})),n.d(t,"a",(function(){return a})),n.d(t,"c",(function(){return c}));var r="$$__SHOCKWALLET__INITIAL__MESSAGE",a=function(e){return e.split(" ").map((function(e){return"".concat(e.slice(0,1).toUpperCase()).concat(e.slice(1).toLowerCase())})).join(" ")},c=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";if(t)return t;var n=e.slice(-8);return"Anon".concat(n)}},94:function(e,t,n){"use strict";n.d(t,"a",(function(){return u})),n.d(t,"b",(function(){return i})),n.d(t,"d",(function(){return s})),n.d(t,"c",(function(){return l}));var r=n(2),a=n.n(r),c=n(5),o=n(13),u={RESET_FEES:"fees/reset",LOAD_FEE_RATES:"fees/feeRates/load",SET_SOURCE:"fees/source/set",SET_RATE:"fees/rate/set"},i=function(){return function(){var e=Object(c.a)(a.a.mark((function e(t,n){var r,c,i;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n().fees.source,e.next=3,o.a.get(r);case 3:return c=e.sent,i=c.data,t({type:u.LOAD_FEE_RATES,data:i}),e.abrupt("return",i);case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},s=function(e){return{type:u.SET_SOURCE,data:e}},l=function(e){return{type:u.SET_RATE,data:e}}},99:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var r=["_","#"]}},[[561,11,12]]]);
//# sourceMappingURL=main.35112e47.chunk.js.map