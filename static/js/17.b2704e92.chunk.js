(this["webpackJsonpshocknet-pwa"]=this["webpackJsonpshocknet-pwa"]||[]).push([[17],{610:function(e,t,a){"use strict";var c=a(0),n=a(88),s=a.n(n),i=a(7),d=a(183),o=(a(619),a(4)),r=function(e){var t=e.children,a=void 0===t?null:t,c=e.style,n=void 0===c?{}:c,i=e.contentClass,d=void 0===i?"":i;return Object(o.jsx)("div",{className:s()("content",d),style:n,"data-v-2f53777a":"",children:a})},l=(a(620),function(e){var t=e.title,a=void 0===t?"":t,c=e.toggleModal,n=void 0===c?i.b:c,s=e.forceRenderTitleBar,d=void 0!==s&&s,r=e.hideXBtn,l=void 0!==r&&r;return a||d?Object(o.jsxs)("div",{className:"head","data-v-dc643cd0":"",children:[Object(o.jsx)("p",{className:"head-title","data-v-dc643cd0":"",children:a}),!l&&Object(o.jsx)("div",{className:"head-close",onClick:n,"data-v-dc643cd0":"",children:Object(o.jsx)("i",{className:"fas fa-times","data-v-dc643cd0":""})})]}):null}),b=(a(621),function(e){var t=e.modalOpen,a=void 0!==t&&t,n=e.toggleModal,b=e.modalTitle,v=void 0===b?"":b,j=e.children,m=e.contentStyle,h=void 0===m?i.c:m,O=e.disableBackdropClose,f=void 0!==O&&O,x=e.forceRenderTitleBar,p=void 0!==x&&x,N=e.hideXBtn,g=void 0!==N&&N,k=e.noFullWidth,C=void 0!==k&&k,y=e.blueBtn,q=void 0===y?"":y,S=e.disableBlueBtn,w=void 0!==S&&S,R=e.onClickBlueBtn,B=void 0===R?i.b:R,E=e.redBtn,A=void 0===E?"":E,M=e.disableRedBtn,T=void 0!==M&&M,K=e.onClickRedBtn,P=void 0===K?i.b:K,D=e.contentClass,I=void 0===D?"":D,Q=e.error,U=void 0===Q?"":Q,z=e.textIfLoading,L=void 0===z?"":z,W=Object(c.useCallback)((function(){n()}),[n]),H=Object(c.useCallback)((function(){f||n()}),[f,n]);return Object(o.jsxs)("div",{className:s()({modal:!0,open:a}),"data-v-510ca6a4":"",children:[Object(o.jsx)("div",{className:"backdrop",onClick:H,"data-v-510ca6a4":""}),Object(o.jsxs)("div",{className:s()({container:!0,"container-no-full-width":C}),"data-v-510ca6a4":"",children:[L&&Object(o.jsx)(d.a,{overlay:!0,style:u,text:L,"data-v-510ca6a4":""}),Object(o.jsx)(l,{title:v,toggleModal:W,forceRenderTitleBar:p,hideXBtn:g,"data-v-510ca6a4":""}),U&&Object(o.jsx)("div",{className:"form-error form-error-margin","data-v-510ca6a4":"",children:U}),Object(o.jsx)(r,{style:h,contentClass:I,"data-v-510ca6a4":"",children:"string"===typeof j?Object(o.jsx)("p",{className:"text-align-center","data-v-510ca6a4":"",children:j}):j}),Object(o.jsxs)("div",{className:"color-buttons","data-v-510ca6a4":"",children:[q&&Object(o.jsx)("button",{disabled:w,className:s()("color-btn","blue-btn"),onClick:B,"data-v-510ca6a4":"",children:q}),A&&Object(o.jsx)("button",{disabled:T,className:s()("color-btn","red-btn"),onClick:P,"data-v-510ca6a4":"",children:A})]})]})]})}),u={borderRadius:"15px"};t.a=Object(c.memo)(b)},616:function(e,t,a){"use strict";var c=a(0),n=a(88),s=a.n(n),i=(a(617),a(38)),d=a(7),o=a(91),r=a(609),l=a(19),b=a(4),u=function(e){var t=e.pageTitle,a=e.absolute,n=void 0!==a&&a,u=e.solid,v=void 0!==u&&u,j=e.enableBackButton,m=void 0!==j&&j,h=e.onHeight,O=void 0===h?d.b:h,f=Object(i.b)(),x=Object(c.useCallback)((function(){window.history.back()}),[]),p=Object(c.useCallback)((function(){f(Object(o.c)())}),[f]),N=Object(l.useSelector)((function(e){return e.node.publicKey})),g=Object(c.useCallback)((function(e){if(e)try{O(e.getBoundingClientRect().height)}catch(t){console.log("Error inside onHeight mechanism in MainNav:"),console.log(t)}}),[O]);return Object(b.jsxs)("div",{className:s()({"main-nav-container":!0,"main-nav-absolute":n,"main-nav-solid":v}),ref:g,"data-v-933595cd":"",children:[m?Object(b.jsx)("div",{className:"main-nav-back",onClick:x,"data-v-933595cd":"",children:Object(b.jsx)("i",{className:"icon icon-thin-back","data-v-933595cd":""})}):Object(b.jsx)(r.a,{height:40,publicKey:N,"data-v-933595cd":""}),Object(b.jsx)("p",{className:"main-nav-title unselectable","data-v-933595cd":"",children:t}),Object(b.jsxs)("div",{className:"main-nav-menu-btn",onClick:p,"data-v-933595cd":"",children:[Object(b.jsx)("div",{className:"main-nav-menu-dash","data-v-933595cd":""}),Object(b.jsx)("div",{className:"main-nav-menu-dash","data-v-933595cd":""}),Object(b.jsx)("div",{className:"main-nav-menu-dash","data-v-933595cd":""})]})]})};t.a=Object(c.memo)(u)},617:function(e,t,a){},619:function(e,t,a){},620:function(e,t,a){},621:function(e,t,a){},628:function(e,t,a){"use strict";var c=a(0),n=a(59),s=a(19),i=a(4),d=function(){return Object(s.useSelector)((function(e){return e.node.authToken}))?Object(i.jsxs)("div",{className:"bottom-nav-container",children:[Object(i.jsx)(n.c,{className:"bottom-nav-btn",to:"/overview",activeClassName:"active-nav-btn",children:Object(i.jsx)("i",{className:"bottom-nav-btn-icon icon-thin-wallet"})}),Object(i.jsx)(n.c,{className:"bottom-nav-btn",to:"/chat",activeClassName:"active-nav-btn",children:Object(i.jsx)("i",{className:"bottom-nav-btn-icon icon-thin-chat"})}),Object(i.jsx)(n.c,{className:"bottom-nav-btn",to:"/profile",activeClassName:"active-nav-btn",children:Object(i.jsx)("i",{className:"bottom-nav-btn-icon icon-thin-profile"})}),Object(i.jsx)(n.c,{className:"bottom-nav-btn",to:"/feed",activeClassName:"active-nav-btn",children:Object(i.jsx)("i",{className:"bottom-nav-btn-icon icon-thin-feed"})})]}):null};t.a=Object(c.memo)(d)},629:function(e,t,a){"use strict";var c=a(13),n=a(0),s=a(88),i=a.n(s),d=(a(634),a(4)),o=function(e){var t=e.label,a=void 0===t?null:t,s=e.icon,o=void 0===s?null:s,r=e.iconURL,l=void 0===r?null:r,b=e.onClick,u=void 0===b?void 0:b,v=e.nestedMode,j=void 0!==v&&v,m=e.large,h=void 0!==m&&m,O=e.small,f=void 0!==O&&O,x=e.relative,p=void 0!==x&&x,N=e.children,g=void 0===N?null:N,k=e.style,C=void 0===k?{}:k,y=Object(n.useState)(!1),q=Object(c.a)(y,2),S=q[0],w=q[1],R=Object(n.useCallback)((function(){j&&w(!S)}),[S,j]),B=Object(n.useMemo)((function(){return l?Object(d.jsx)("img",{src:l,className:"add-btn-icon",alt:"","data-v-06e0640d":""}):Object(d.jsx)("i",{className:"fas fa-".concat(null!==o&&void 0!==o?o:"plus"),"data-v-06e0640d":""})}),[o,l]),E=Object(n.useMemo)((function(){return a?Object(d.jsx)("p",{className:"add-btn-label","data-v-06e0640d":"",children:a}):null}),[a]);return Object(d.jsxs)("div",{className:i()({"add-btn-container":!0,"add-btn-round-container":!a,"add-btn-large":h,"add-btn-small":f}),"data-v-06e0640d":"",children:[Object(d.jsxs)("div",{className:i()({"add-btn":!0,"add-btn-round":!a,"add-btn-extended":!!a,"add-btn-relative":p,"add-btn-open":S,"add-btn-nested":j}),onClick:null!==u&&void 0!==u?u:R,style:C,"data-v-06e0640d":"",children:[B,E]}),g?Object(d.jsx)("div",{className:i()({"add-btn-options":!0,"add-btn-options-open":S}),"data-v-06e0640d":"",children:g}):null]})};t.a=Object(n.memo)(o)},634:function(e,t,a){},636:function(e,t,a){"use strict";a.d(t,"a",(function(){return c}));var c=function(){return!navigator.userAgent.match(/(iPad)|(iPhone)|(iPod)|(android)|(webOS)/i)}},643:function(e,t,a){"use strict";var c=a(0),n=a(660),s=a(636),i=(a(644),a(4)),d={wizard:{title:"SCAN A",target:"QR CODE",description:"Point your camera at a ShockWizard QR Code"},invoice:{title:"SCAN AN",target:"INVOICE",description:"Point your camera at an LND Invoice"}},o=function(e){var t=e.mode,a=void 0===t?"wizard":t,c=e.onScan,o=e.onError,r=e.onClose,l=d[a],b={};return Object(s.a)()||(b.facingMode={exact:"environment"}),Object(i.jsxs)("div",{className:"qr-code-scanner-container","data-v-c0ec647f":"",children:[Object(i.jsx)("div",{className:"qr-scanner-top-section","data-v-c0ec647f":"",children:Object(i.jsx)("i",{className:"fas fa-times",onClick:r,"data-v-c0ec647f":""})}),Object(i.jsx)(n.a,{constraints:{video:b},onScan:c,onError:o,"data-v-c0ec647f":""}),Object(i.jsx)("div",{className:"qr-scanner-target","data-v-c0ec647f":""}),Object(i.jsxs)("div",{className:"qr-scanner-bottom-section","data-v-c0ec647f":"",children:[Object(i.jsxs)("p",{className:"qr-scanner-bottom-title","data-v-c0ec647f":"",children:[l.title," ",Object(i.jsx)("span",{className:"qr-scanner-bottom-title-highlight","data-v-c0ec647f":"",children:l.target})]}),Object(i.jsx)("p",{className:"qr-scanner-bottom-description","data-v-c0ec647f":"",children:l.description}),Object(i.jsx)("div",{className:"qr-scanner-btn",onClick:r,"data-v-c0ec647f":"",children:"Cancel Scan"})]})]})};t.a=Object(c.memo)(o)},644:function(e,t,a){},737:function(e,t,a){},738:function(e,t,a){},739:function(e,t,a){},916:function(e,t,a){"use strict";a.r(t);var c=a(3),n=a.n(c),s=a(5),i=a(23),d=a(13),o=a(0),r=a.n(o),l=a(50),b=a(68),u=a(628),v=a(9),j=a(59),m=a(19),h=a(7),O=a(609),f={height:"55px",width:"55px"},x=a(193),p=(a(737),a(4)),N=function(e){var t=e.id,a=m.useDispatch(),c=m.useSelector(m.selectSingleConvo(t)),n=m.useSelector(m.selectConvoMessages(t)),s=n.slice().sort((function(e,t){return e.timestamp-t.timestamp}))[n.length-1],i=m.useSelector(m.selectUser(c.with)),d=0===n.length||(null===s||void 0===s?void 0:s.body)===v.a?"No messages yet":"received"===(null===s||void 0===s?void 0:s.state)?"> "+s.body:s.body;return r.a.useEffect((function(){return a(Object(l.n)(t))}),[a,t]),Object(p.jsxs)(j.b,{to:"/chat/".concat(t),className:"container","data-v-e94a5879":"",children:[Object(p.jsxs)("div",{className:"author-container","data-v-e94a5879":"",children:[Object(p.jsx)("div",{className:"author-avatar",style:f,"data-v-e94a5879":"",children:Object(p.jsx)(O.a,{publicKey:c.with,height:55,"data-v-e94a5879":""})}),Object(p.jsxs)("div",{className:"author-details","data-v-e94a5879":"",children:[Object(p.jsx)("p",{className:"author-username","data-v-e94a5879":"",children:Object(x.b)(i.publicKey,i.displayName)}),Object(p.jsx)("p",{className:"author-text","data-v-e94a5879":"",children:d})]})]}),Object(p.jsx)("p",{className:"timestamp","data-v-e94a5879":"",children:h.f((null===s||void 0===s?void 0:s.timestamp)||Date.now())})]})},g=Object(o.memo)(N),k=(a(738),function(e){var t=e.publicKey,a=void 0===t?"":t,c=e.time,n=e.sent,s=e.id,i=m.useSelector(m.selectUser(a));return Object(p.jsxs)(j.b,{to:"/chat/".concat(s),className:"request-container","data-v-36ce3382":"",children:[Object(p.jsxs)("div",{className:"request-author-container","data-v-36ce3382":"",children:[Object(p.jsx)("div",{className:"request-author-avatar",style:f,"data-v-36ce3382":"",children:Object(p.jsx)(O.a,{publicKey:a,height:55,"data-v-36ce3382":""})}),Object(p.jsxs)("div",{className:"request-author-details","data-v-36ce3382":"",children:[Object(p.jsxs)("p",{className:"request-author-username","data-v-36ce3382":"",children:[n?"Sent Request":"Received Request"," - ",i.displayName]}),Object(p.jsx)("p",{className:"request-author-text","data-v-36ce3382":"",children:"Request pending acceptance..."})]})]}),Object(p.jsx)("p",{className:"request-timestamp","data-v-36ce3382":"",children:c})]})}),C=Object(o.memo)(k),y=a(616),q=a(629),S=a(183),w=a(64),R=(a(739),a(610)),B=a(643),E=function(){var e=h.n(),t=Object(o.useState)(!1),a=Object(d.a)(t,2),c=a[0],r=a[1],v=Object(o.useState)(""),j=Object(d.a)(v,2),O=j[0],f=j[1],x=Object(o.useState)(!1),N=Object(d.a)(x,2),k=N[0],E=N[1],A=m.useSelector(m.selectConvos),M=h.a,T=m.useSelector(m.selectReceivedRequests),K=Object(o.useState)(!1),P=Object(d.a)(K,2),D=P[0],I=P[1],Q=m.useSelector(m.selectCurrentHandshakeAddress);Object(o.useEffect)((function(){var t=e(Object(l.p)());return function(){t.then((function(e){return e.off()}))}}),[e]),Object(o.useEffect)((function(){var t=e(Object(l.q)(Q));return function(){t.then((function(e){return e.off()}))}}),[Q,e]),Object(o.useEffect)((function(){var t=e(Object(l.o)());return function(){t.then((function(e){return e.off()}))}})),Object(o.useEffect)((function(){var t=A.map((function(t){return e(Object(b.b)(t.with))}));return t.push.apply(t,Object(i.a)(T.map((function(t){return e(Object(b.b)(t.from))})))),function(){t.map((function(e){return e()}))}}),[A,e,T]);var U=Object(o.useCallback)((function(){r(!c)}),[c]),z=Object(o.useCallback)(function(){var t=Object(s.a)(n.a.mark((function t(a){var c,s,i,d;return n.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a){t.next=2;break}return t.abrupt("return");case 2:if(t.prev=2,c=a,a.startsWith("https://")&&(s=a.split("/"),c=s[s.length-1]),f(null),E(!0),null===(i=(n=c).startsWith("http")?n.split("/").slice(-1)[0]:n)||void 0===i?void 0:i.length){t.next=10;break}throw new w.a({field:"publicKey",message:"Please specify a public key"});case 10:if(/^[0-9A-Za-z\-_.+/]+[=]{0,3}/.test(i)){t.next=12;break}throw new w.a({field:"publicKey",message:"Invalid public key format specified"});case 12:return t.next=14,e(Object(l.l)(c));case 14:r(!1),t.next=22;break;case 17:t.prev=17,t.t0=t.catch(2),d=t.t0 instanceof w.a?t.t0.message:"An unknown error has occurred",console.error(t.t0),f(d);case 22:return t.prev=22,E(!1),t.finish(22);case 25:case"end":return t.stop()}var n}),t,null,[[2,17,22,25]])})));return function(e){return t.apply(this,arguments)}}(),[e]),L=Object(o.useCallback)(Object(s.a)(n.a.mark((function e(){var t;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,navigator.clipboard.readText();case 3:return t=e.sent,e.abrupt("return",z(t));case 7:e.prev=7,e.t0=e.catch(0),alert(e.t0.message);case 10:case"end":return e.stop()}}),e,null,[[0,7]])}))),[z]),W=Object(o.useCallback)((function(){I(!0)}),[I]),H=Object(o.useCallback)((function(){I(!1)}),[I]),X=Object(o.useCallback)((function(e){console.log(e),f(e.message)}),[f]),J=Object(o.useCallback)((function(e){e&&e.text&&(z(e.text),I(!1),console.log(e.text))}),[z,I]);return D?Object(p.jsx)("div",{"data-v-2cdb5363":"",children:Object(p.jsx)(B.a,{mode:"invoice",onClose:H,onError:X,onScan:J,"data-v-2cdb5363":""})}):(console.log(O),Object(p.jsxs)("div",{className:"page-container messages-page","data-v-2cdb5363":"",children:[Object(p.jsx)(y.a,{solid:!0,pageTitle:"MESSAGES","data-v-2cdb5363":""}),Object(p.jsxs)("div",{className:"messages-container","data-v-2cdb5363":"",children:[Object(p.jsxs)("div",{className:"message-list-container no-scrollbar","data-v-2cdb5363":"",children:[M.length>0?Object(p.jsx)("p",{className:"messages-section-title","data-v-2cdb5363":"",children:"Sent Requests"}):null,M.map((function(e){return Object(p.jsx)(C,{publicKey:e.pk,sent:!0,time:void 0,id:e.id,"data-v-2cdb5363":""},e.id)})),T.length>0?Object(p.jsx)("p",{className:"messages-section-title","data-v-2cdb5363":"",children:"Received Requests"}):null,T.map((function(e){return Object(p.jsx)(C,{publicKey:e.from,sent:!1,time:void 0,id:e.id,"data-v-2cdb5363":""},e.id)})),A.length>0?Object(p.jsx)("p",{className:"messages-section-title","data-v-2cdb5363":"",children:"Messages"}):null,A.map((function(e){return Object(p.jsx)(g,{id:e.id,"data-v-2cdb5363":""},e.id)}))]}),Object(p.jsx)(q.a,{onClick:U,label:"REQUEST","data-v-2cdb5363":""}),Object(p.jsxs)(R.a,{modalTitle:"SEND REQUEST",toggleModal:U,modalOpen:c,"data-v-2cdb5363":"",children:[k?Object(p.jsx)(S.a,{text:"Sending Request...",overlay:!0,style:{borderRadius:"0 0 15px 15px"},"data-v-2cdb5363":""}):null,O?Object(p.jsx)("div",{className:"send-request-error","data-v-2cdb5363":"",children:O}):null,Object(p.jsxs)("div",{className:"send-request-cards","data-v-2cdb5363":"",children:[Object(p.jsxs)("div",{className:"send-request-card",onClick:W,"data-v-2cdb5363":"",children:[Object(p.jsx)("i",{className:"send-request-card-icon fas fa-qrcode","data-v-2cdb5363":""}),Object(p.jsx)("p",{className:"send-request-card-title","data-v-2cdb5363":"",children:"SCAN QR"}),Object(p.jsx)("p",{className:"send-request-card-desc","data-v-2cdb5363":"",children:"Scan another users QR to send a message request."})]}),Object(p.jsxs)("div",{className:"send-request-card",onClick:L,"data-v-2cdb5363":"",children:[Object(p.jsx)("i",{className:"send-request-card-icon fas fa-clipboard","data-v-2cdb5363":""}),Object(p.jsx)("p",{className:"send-request-card-title","data-v-2cdb5363":"",children:"PASTE CLIPBOARD"}),Object(p.jsx)("p",{className:"send-request-card-desc","data-v-2cdb5363":"",children:"Paste another users Public Key to send a message request."})]})]})]})]}),Object(p.jsx)(u.a,{"data-v-2cdb5363":""})]}))};t.default=Object(o.memo)(E)}}]);
//# sourceMappingURL=17.b2704e92.chunk.js.map