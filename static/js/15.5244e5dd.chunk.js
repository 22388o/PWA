(this["webpackJsonpshocknet-pwa"]=this["webpackJsonpshocknet-pwa"]||[]).push([[15],{488:function(e,a,n){"use strict";var c=n(3),t=n(78),s=n.n(t),l=(n(490),n(8)),i=function(e){var a=e.children,n=e.style;return Object(l.jsx)("div",{className:"modal-content",style:n,children:a})},d=(n(491),function(e){var a=e.title,n=e.toggleModal;return a?Object(l.jsxs)("div",{className:"modal-head",children:[Object(l.jsx)("p",{className:"modal-head-title",children:a}),Object(l.jsx)("div",{className:"modal-head-close",onClick:n,children:Object(l.jsx)("i",{className:"fas fa-times"})})]}):null});n(492),a.a=function(e){var a=e.modalOpen,n=void 0!==a&&a,t=e.toggleModal,r=e.modalTitle,o=void 0===r?"":r,b=e.children,u=e.contentStyle,j=void 0===u?{}:u,v=Object(c.useCallback)((function(){t()}),[t]);return Object(l.jsxs)("div",{className:s()({modal:!0,"modal-open":n}),children:[Object(l.jsx)("div",{className:"modal-backdrop",onClick:v}),Object(l.jsxs)("div",{className:"modal-container",children:[Object(l.jsx)(d,{title:o,toggleModal:v}),Object(l.jsx)(i,{style:j,children:b})]})]})}},490:function(e,a,n){},491:function(e,a,n){},492:function(e,a,n){},493:function(e,a,n){"use strict";var c=n(30),t=n(78),s=n.n(t),l=(n(498),n(8));a.a=function(e){var a=e.label,n=e.name,t=e.onChange,i=e.inputAction,d=e.actionIcon,r=e.value,o=e.inputMode,b=void 0===o?"text":o,u=e.type,j=void 0===u?"text":u,v=e.element,O=void 0===v?"input":v,m=e.small,h=void 0!==m&&m,p=e.disabled;return Object(l.jsxs)("div",{className:s()({group:!0,"group-disabled":p,"group-small":h}),children:[a?Object(l.jsx)("p",{className:"group-label",children:a}):null,Object(l.jsxs)("div",{className:s()({"group-input-container":!0,"group-input-textarea-container":"textarea"===O}),children:["textarea"===O?Object(l.jsx)("textarea",{className:"group-input group-input-textarea",name:n,onChange:t,inputMode:b,value:r,disabled:p}):Object(l.jsx)("input",{className:"group-input",type:j,name:n,onChange:t,inputMode:b,value:r,disabled:p}),i&&d?Object(l.jsx)("div",{className:"group-input-action",onClick:i,children:Object(l.jsx)("i",{className:s()(Object(c.a)({"group-input-action-icon":!0,fas:!0},d,!0)),onClick:i})}):null]})]})}},498:function(e,a,n){},500:function(e,a,n){"use strict";n.d(a,"b",(function(){return r})),n.d(a,"a",(function(){return o}));var c=n(21),t=n(162),s=n.n(t),l=/(\d+)(\d{3})/gi,i=1e8,d=function e(a){return l.test(a)?e(a.replace(l,"$1,$2")):a},r=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",a=e.split("."),n=Object(c.a)(a,2),t=n[0],s=n[1],l=d(t),i=s?"."+s:"";return l+i},o=function(e){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"0";console.debug("Converting ".concat(e," Sats to USD (").concat(a,")"));var n=s()(e).div(i).toString();return s()((null===a||void 0===a?void 0:a.toString())||"0").times(n)}},502:function(e,a,n){"use strict";var c=n(21),t=n(3),s=n(78),l=n.n(s),i=(n(503),n(8));a.a=function(e){var a=e.label,n=void 0===a?null:a,s=e.icon,d=void 0===s?null:s,r=e.iconURL,o=void 0===r?null:r,b=e.onClick,u=void 0===b?void 0:b,j=e.nestedMode,v=void 0!==j&&j,O=e.large,m=void 0!==O&&O,h=e.small,p=void 0!==h&&h,x=e.relative,f=void 0!==x&&x,N=e.children,g=void 0===N?null:N,k=e.style,y=void 0===k?{}:k,C=Object(t.useState)(!1),S=Object(c.a)(C,2),_=S[0],M=S[1],D=Object(t.useCallback)((function(){v&&M(!_)}),[_,v]),w=Object(t.useMemo)((function(){return o?Object(i.jsx)("img",{src:o,className:"add-btn-icon",alt:""}):Object(i.jsx)("i",{className:"fas fa-".concat(null!==d&&void 0!==d?d:"plus")})}),[d,o]),A=Object(t.useMemo)((function(){return n?Object(i.jsx)("p",{className:"add-btn-label",children:n}):null}),[n]);return Object(i.jsxs)("div",{className:l()({"add-btn-container":!0,"add-btn-round-container":!n,"add-btn-large":m,"add-btn-small":p}),children:[Object(i.jsxs)("div",{className:l()({"add-btn":!0,"add-btn-round":!n,"add-btn-extended":!!n,"add-btn-relative":f,"add-btn-open":_,"add-btn-nested":v}),onClick:null!==u&&void 0!==u?u:D,style:y,children:[w,A]}),g?Object(i.jsx)("div",{className:l()({"add-btn-options":!0,"add-btn-options-open":_}),children:g}):null]})}},503:function(e,a,n){},616:function(e,a,n){},617:function(e,a,n){},618:function(e,a,n){},619:function(e,a,n){},620:function(e,a,n){},621:function(e,a,n){},749:function(e,a,n){"use strict";n.r(a);var c=n(21),t=n(3),s=n(41),l=n(78),i=n.n(l),d=n(36),r=n(500),o=n(514),b=n(502),u=n(119),j=(n(616),n(8)),v=function(e){var a=e.hash,n=e.value,c=e.date,t=e.unconfirmed,l=Object(s.d)((function(e){var a;return null!==(a=e.wallet.USDRate)&&void 0!==a?a:"0"})),i=n.replace(/,/g,""),d=Object(r.b)(Object(r.a)(i,l).toFixed(2)),o=c?u.DateTime.fromSeconds(parseInt(c,10)).toRelative():"unknown";return Object(j.jsxs)("div",{className:"advanced-transaction-container",children:[Object(j.jsxs)("div",{className:"advanced-transaction-info",children:[Object(j.jsx)("div",{className:"advanced-transaction-avatar"}),Object(j.jsxs)("div",{className:"advanced-transaction-author",children:[Object(j.jsx)("p",{className:"advanced-transaction-author-name",children:a}),Object(j.jsxs)("div",{style:{display:"flex"},children:[Object(j.jsx)("p",{className:"advanced-transaction-type",children:"Payment"}),t&&Object(j.jsx)("i",{className:"far fa-clock",style:{marginLeft:"0.5rem",color:"red"}})]})]})]}),Object(j.jsxs)("div",{className:"advanced-transaction-value-container",children:[Object(j.jsx)("p",{className:"advanced-transaction-time",children:o}),Object(j.jsx)("p",{className:"advanced-transaction-value",children:n}),Object(j.jsxs)("p",{className:"advanced-transaction-usd",children:[d," USD"]})]})]})},O=(n(617),function(e){var a=e.address,n=e.sendable,c=e.receivable,s=e.active,l=e.pendingStatus,d=void 0===l?"":l,o=Object(t.useMemo)((function(){return Object(r.b)(n)}),[n]),b=Object(t.useMemo)((function(){return Object(r.b)(c)}),[c]);return Object(j.jsxs)("div",{className:"advanced-channel-container",children:[Object(j.jsxs)("div",{className:"advanced-channel-name-container",children:[Object(j.jsx)("div",{className:i()({"advanced-channel-status":!0,"advanced-channel-status-offline":!s})}),Object(j.jsx)("p",{style:{marginLeft:"0.5rem"},children:d})]}),Object(j.jsxs)("p",{className:"advanced-channel-address",children:["Address: ",a]}),Object(j.jsxs)("div",{className:"advanced-channel-capacity-container",children:[Object(j.jsxs)("div",{className:"advanced-channel-capacity",children:["Sendable: ",o," sats"]}),Object(j.jsxs)("div",{className:"advanced-channel-capacity",children:["Receivable: ",b," sats"]})]})]})}),m=(n(618),function(e){var a=e.sent,n=e.received,c=e.address,t=e.publicKey,s=Object(r.b)(a.toString()),l=Object(r.b)(n.toString());return Object(j.jsxs)("div",{className:"advanced-transaction-container",children:[Object(j.jsxs)("div",{className:"advanced-transaction-info",children:[Object(j.jsx)("div",{className:"advanced-transaction-avatar"}),Object(j.jsxs)("div",{className:"advanced-transaction-author",children:[Object(j.jsx)("p",{className:"advanced-peer-address",children:c}),Object(j.jsx)("p",{className:"advanced-peer-public-key",children:null!==t&&void 0!==t?t:"Unknown public key"})]})]}),Object(j.jsxs)("div",{className:"advanced-peer-value-container",children:[Object(j.jsxs)("p",{className:"advanced-peer-value",children:[Object(j.jsx)("span",{className:"peer-value-title",children:"Sent:"})," ",s]}),Object(j.jsxs)("p",{className:"advanced-peer-value",children:[Object(j.jsx)("span",{className:"peer-value-title",children:"Received:"})," ",l]})]})]})}),h=n(2),p=n.n(h),x=n(6),f=n(488),N=n(493),g=(n(619),n(156)),k=function(e){var a=e.open,n=void 0!==a&&a,l=e.toggleModal,i=Object(s.c)(),r=Object(t.useState)(!1),o=Object(c.a)(r,2),b=o[0],u=o[1],v=Object(t.useState)(""),O=Object(c.a)(v,2),m=O[0],h=O[1],k=Object(t.useState)(""),y=Object(c.a)(k,2),C=y[0],S=y[1],_=Object(t.useState)(""),M=Object(c.a)(_,2),D=M[0],w=M[1],A=Object(t.useCallback)((function(e){var a=e.target,n=a.name,c=a.value;"publicKey"===n&&S(c),"host"===n&&h(c)}),[]),E=Object(t.useCallback)(function(){var e=Object(x.a)(p.a.mark((function e(a){var n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.preventDefault(),u(!0),e.prev=2,e.next=5,i(Object(d.b)({publicKey:C,host:m}));case 5:l(),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(2),w(null!==(n=null===e.t0||void 0===e.t0?void 0:e.t0.errorMessage)&&void 0!==n?n:null===e.t0||void 0===e.t0?void 0:e.t0.message);case 11:return e.prev=11,u(!1),e.finish(11);case 14:case"end":return e.stop()}}),e,null,[[2,8,11,14]])})));return function(a){return e.apply(this,arguments)}}(),[i,C,m,l]);return Object(j.jsx)(f.a,{toggleModal:l,modalOpen:n,modalTitle:"ADD PEER",children:Object(j.jsxs)("form",{className:"modal-form",onSubmit:E,children:[D?Object(j.jsx)("div",{className:"form-error",children:D}):null,b?Object(j.jsx)(g.a,{overlay:!0,text:"Adding Peer..."}):null,Object(j.jsx)(N.a,{onChange:A,name:"publicKey",label:"Public Key",value:C,small:!0}),Object(j.jsx)(N.a,{onChange:A,name:"host",label:"Host IP",value:m,small:!0}),Object(j.jsx)("div",{className:"modal-submit-container",children:Object(j.jsx)("button",{className:"modal-submit-btn",type:"submit",children:"ADD PEER"})})]})})},y=(n(620),n(92)),C=function(e){var a=e.open,n=void 0!==a&&a,l=e.toggleModal,i=Object(s.c)(),r=Object(t.useState)(!1),o=Object(c.a)(r,2),b=o[0],u=o[1],v=Object(t.useState)(""),O=Object(c.a)(v,2),m=O[0],h=O[1],k=Object(t.useState)(""),C=Object(c.a)(k,2),S=C[0],_=C[1],M=Object(t.useState)(""),D=Object(c.a)(M,2),w=D[0],A=D[1],E=Object(t.useState)(""),P=Object(c.a)(E,2),K=P[0],R=P[1],U=Object(t.useCallback)((function(e){var a=e.target,n=a.name,c=a.value;"publicKey"===n&&A(c),"pushAmount"===n&&_(c),"channelCapacity"===n&&h(c)}),[]),L=Object(t.useCallback)(function(){var e=Object(x.a)(p.a.mark((function e(a){var n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.preventDefault(),u(!0),e.prev=2,e.next=5,i(Object(y.b)());case 5:return e.next=7,i(Object(d.j)({publicKey:w,channelCapacity:m,pushAmount:S}));case 7:l(),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(2),R(null!==(n=null===e.t0||void 0===e.t0?void 0:e.t0.errorMessage)&&void 0!==n?n:null===e.t0||void 0===e.t0?void 0:e.t0.message);case 13:return e.prev=13,u(!1),e.finish(13);case 16:case"end":return e.stop()}}),e,null,[[2,10,13,16]])})));return function(a){return e.apply(this,arguments)}}(),[i,w,m,S,l]);return Object(j.jsx)(f.a,{toggleModal:l,modalOpen:n,modalTitle:"OPEN CHANNEL",children:Object(j.jsxs)("form",{className:"modal-form",onSubmit:L,children:[K?Object(j.jsx)("div",{className:"form-error",children:K}):null,b?Object(j.jsx)(g.a,{overlay:!0,text:"Adding Peer..."}):null,Object(j.jsx)(N.a,{onChange:U,name:"publicKey",label:"Node Public Key",value:w,small:!0}),Object(j.jsx)(N.a,{onChange:U,name:"channelCapacity",label:"Channel Capacity (sats)",value:m,inputMode:"number",small:!0}),Object(j.jsx)(N.a,{onChange:U,name:"pushAmount",label:"Push Amount (sats)",value:S,inputMode:"number",small:!0}),Object(j.jsx)("div",{className:"modal-submit-container",children:Object(j.jsx)("button",{className:"modal-submit-btn",type:"submit",children:"OPEN CHANNEL"})})]})})},S=n(18),_=(n(621),n(25));a.default=function(){var e=Object(t.useState)("transactions"),a=Object(c.a)(e,2),n=a[0],l=a[1],u=Object(t.useState)(1),h=Object(c.a)(u,1)[0],p=Object(t.useState)(!1),x=Object(c.a)(p,2),f=x[0],N=x[1],g=Object(t.useState)(!1),y=Object(c.a)(g,2),M=y[0],D=y[1],w=Object(t.useState)([]),A=Object(c.a)(w,2),E=A[0],P=A[1],K=Object(s.c)(),R=_.useSelector((function(e){return e.wallet.confirmedBalance})),U=_.useSelector((function(e){return e.wallet.channelBalance})),L=_.useSelector((function(e){return e.wallet.transactions})),T=_.useSelector((function(e){return e.wallet.channels})),B=_.useSelector((function(e){return e.wallet.peers})),F=_.useSelector((function(e){return e.wallet.USDRate}));Object(t.useEffect)((function(){var e=1===h;K(Object(d.f)({page:h,reset:e})),K(Object(d.d)({page:h,reset:e})),K(Object(d.c)()),K(Object(d.e)())}),[h,K]),Object(t.useEffect)((function(){S.a.get("/api/lnd/pendingchannels").then((function(e){var a=e.data;console.log("pending channels:"),console.log(a);var n=function(e,a){return{remote_pubkey:e.remote_node_pub,remote_balance:e.remote_balance,local_balance:e.local_balance,ip:"",active:!1,pendingStatus:a}},c=[];a.pending_open_channels.forEach((function(e){var a=e.channel;c.push(n(a,"Pending Open"))})),a.waiting_close_channels.forEach((function(e){var a=e.channel;c.push(n(a,"Pending Close"))})),a.pending_force_closing_channels.forEach((function(e){var a=e.channel;c.push(n(a,"Pending Force Close"))})),P(c)}))}),[]);var H=Object(t.useMemo)((function(){return Object(r.b)(Object(r.a)(R,F).toFixed(2))}),[F,R]),I=Object(t.useMemo)((function(){return Object(r.b)(Object(r.a)(U,F).toFixed(2))}),[F,U]),J=Object(t.useCallback)((function(e){l(e)}),[]),$=Object(t.useCallback)((function(){N(!f)}),[f]),V=Object(t.useCallback)((function(){D(!M)}),[M]),q=Object(t.useCallback)((function(){J("transactions")}),[J]),z=Object(t.useCallback)((function(){J("peers")}),[J]),G=Object(t.useCallback)((function(){J("channels")}),[J]);return Object(j.jsxs)("div",{className:"page-container advanced-page",children:[Object(j.jsxs)("div",{className:"advanced-header",children:[Object(j.jsx)(o.a,{absolute:!0,pageTitle:"ADVANCED",enableBackButton:!1}),Object(j.jsxs)("div",{className:"advanced-balance-container",children:[Object(j.jsx)("div",{className:"advanced-balance-icon-container",children:Object(j.jsx)("i",{className:"advanced-balance-icon fas fa-link"})}),Object(j.jsxs)("div",{className:"advanced-balance-btc-container",children:[Object(j.jsx)("p",{className:"advanced-balance-btc",children:Object(r.b)(R)}),Object(j.jsxs)("p",{className:"advanced-balance-usd",children:[H," USD"]})]})]}),Object(j.jsxs)("div",{className:"advanced-balance-container",style:{paddingBottom:25},children:[Object(j.jsx)("div",{className:"advanced-balance-icon-container",children:Object(j.jsx)("i",{className:"advanced-balance-icon fas fa-bolt"})}),Object(j.jsxs)("div",{className:"advanced-balance-btc-container",children:[Object(j.jsx)("p",{className:"advanced-balance-btc",children:Object(r.b)(U)}),Object(j.jsxs)("p",{className:"advanced-balance-usd",children:[I," USD"]})]})]})]}),Object(j.jsxs)("div",{className:"advanced-accordions-container",children:[Object(j.jsxs)("div",{className:i()({"advanced-accordion-container":!0,"accordion-open":"transactions"===n}),children:[Object(j.jsx)("div",{className:"advanced-accordion-header",onClick:q,children:Object(j.jsx)("p",{className:"advanced-accordion-title",children:"Transactions"})}),Object(j.jsx)("div",{className:"advanced-accordion-content-container",children:Object(j.jsx)("div",{className:"advanced-accordion-content",children:L.content.map((function(e){return Object(j.jsx)(v,{date:e.time_stamp,hash:e.tx_hash,value:Object(r.b)(e.amount),unconfirmed:0===e.num_confirmations},e.tx_hash)}))})})]}),Object(j.jsxs)("div",{className:i()({"advanced-accordion-container":!0,"accordion-open":"peers"===n}),children:[Object(j.jsx)("div",{className:"advanced-accordion-header",onClick:z,children:Object(j.jsx)("p",{className:"advanced-accordion-title",children:"Peers"})}),Object(j.jsxs)("div",{className:"advanced-accordion-content-container",children:[Object(j.jsx)("div",{className:"advanced-accordion-content",children:B.map((function(e){return Object(j.jsx)(m,{address:e.address,publicKey:e.pub_key,sent:e.sat_sent,received:e.sat_recv},e.address+e.pub_key)}))}),Object(j.jsx)(b.a,{nestedMode:!0,relative:!0,children:Object(j.jsx)(b.a,{label:"ADD PEER",onClick:$,icon:"link"})})]})]}),Object(j.jsxs)("div",{className:i()({"advanced-accordion-container":!0,"accordion-open":"channels"===n}),children:[Object(j.jsx)("div",{className:"advanced-accordion-header",onClick:G,children:Object(j.jsx)("p",{className:"advanced-accordion-title",children:"Channels"})}),Object(j.jsx)("div",{className:"advanced-accordion-content-container",children:Object(j.jsxs)("div",{className:"advanced-accordion-content",children:[T.map((function(e){return Object(j.jsx)(O,{address:e.remote_pubkey,receivable:e.remote_balance,sendable:e.local_balance,active:e.active},e.chan_id)})),E.map((function(e){return Object(j.jsx)(O,{address:e.remote_pubkey,receivable:e.remote_balance,sendable:e.local_balance,active:e.active,pendingStatus:e.pendingStatus},e.chan_id)})),Object(j.jsx)(b.a,{nestedMode:!0,relative:!0,children:Object(j.jsx)(b.a,{label:"ADD CHANNEL",small:!0,onClick:V,icon:"exchange-alt"})})]})})]})]}),Object(j.jsx)(k,{open:f,toggleModal:$}),Object(j.jsx)(C,{open:M,toggleModal:V})]})}}}]);
//# sourceMappingURL=15.5244e5dd.chunk.js.map