(this["webpackJsonpshocknet-pwa"]=this["webpackJsonpshocknet-pwa"]||[]).push([[12],{482:function(e,t,n){"use strict";var a=n(3),c=n(73),r=n.n(c),s=(n(484),n(7)),o=function(e){var t=e.children,n=e.style;return Object(s.jsx)("div",{className:"modal-content",style:n,children:t})},i=(n(485),function(e){var t=e.title,n=e.toggleModal;return t?Object(s.jsxs)("div",{className:"modal-head",children:[Object(s.jsx)("p",{className:"modal-head-title",children:t}),Object(s.jsx)("div",{className:"modal-head-close",onClick:n,children:Object(s.jsx)("i",{className:"fas fa-times"})})]}):null});n(486),t.a=function(e){var t=e.modalOpen,n=void 0!==t&&t,c=e.toggleModal,l=e.modalTitle,u=void 0===l?"":l,d=e.children,b=e.contentStyle,j=void 0===b?{}:b,f=Object(a.useCallback)((function(){c()}),[c]);return Object(s.jsxs)("div",{className:r()({modal:!0,"modal-open":n}),children:[Object(s.jsx)("div",{className:"modal-backdrop",onClick:f}),Object(s.jsxs)("div",{className:"modal-container",children:[Object(s.jsx)(i,{title:u,toggleModal:f}),Object(s.jsx)(o,{style:j,children:d})]})]})}},484:function(e,t,n){},485:function(e,t,n){},486:function(e,t,n){},487:function(e,t,n){"use strict";var a=n(26),c=n(73),r=n.n(c),s=(n(496),n(7));t.a=function(e){var t=e.label,n=e.name,c=e.onChange,o=e.inputAction,i=e.actionIcon,l=e.value,u=e.inputMode,d=void 0===u?"text":u,b=e.type,j=void 0===b?"text":b,f=e.element,m=void 0===f?"input":f,p=e.small,v=void 0!==p&&p,O=e.disabled;return Object(s.jsxs)("div",{className:r()({group:!0,"group-disabled":O,"group-small":v}),children:[t?Object(s.jsx)("p",{className:"group-label",children:t}):null,Object(s.jsxs)("div",{className:r()({"group-input-container":!0,"group-input-textarea-container":"textarea"===m}),children:["textarea"===m?Object(s.jsx)("textarea",{className:"group-input group-input-textarea",name:n,onChange:c,inputMode:d,value:l,disabled:O}):Object(s.jsx)("input",{className:"group-input",type:j,name:n,onChange:c,inputMode:d,value:l,disabled:O}),o&&i?Object(s.jsx)("div",{className:"group-input-action",onClick:o,children:Object(s.jsx)("i",{className:r()(Object(a.a)({"group-input-action-icon":!0,fas:!0},i,!0)),onClick:o})}):null]})]})}},493:function(e,t,n){"use strict";var a=n(53),c=n(7);t.a=function(){return Object(c.jsxs)("div",{className:"bottom-nav-container",children:[Object(c.jsx)(a.c,{className:"bottom-nav-btn",to:"/overview",activeClassName:"active-nav-btn",children:Object(c.jsx)("i",{className:"bottom-nav-btn-icon icon-thin-wallet"})}),Object(c.jsx)(a.c,{className:"bottom-nav-btn",to:"/chat",activeClassName:"active-nav-btn",children:Object(c.jsx)("i",{className:"bottom-nav-btn-icon icon-thin-chat"})}),Object(c.jsx)(a.c,{className:"bottom-nav-btn",to:"/profile",activeClassName:"active-nav-btn",children:Object(c.jsx)("i",{className:"bottom-nav-btn-icon icon-thin-profile"})}),Object(c.jsx)(a.c,{className:"bottom-nav-btn",to:"/feed",activeClassName:"active-nav-btn",children:Object(c.jsx)("i",{className:"bottom-nav-btn-icon icon-thin-feed"})})]})}},496:function(e,t,n){},509:function(e,t,n){"use strict";n(3),n(565);var a=n(7);t.a=function(e){var t=e.text,n=void 0===t?"Submit":t,c=e.onClick;return Object(a.jsx)("div",{className:"modal-submit-btn",onClick:c,children:Object(a.jsx)("p",{className:"modal-submit-btn-text",children:n})})}},510:function(e,t,n){"use strict";n.d(t,"a",(function(){return x}));var a=n(15),c=n(2),r=n.n(c),s=n(5),o=n(0),i=n(17),l=n(534),u=n.n(l),d=n(563),b=n.n(d),j=function(){var e=Object(s.a)(r.a.mark((function e(t){var n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,b.a._init){e.next=4;break}return e.next=4,new Promise((function(e,t){b.a.init("ShockWalletStore").then((function(){return console.log("File cache initialized!"),b.a.persist()})).then((function(n){n.persistent?e(n):t(n)}))}));case 4:return e.next=6,b.a.load(t);case 6:return n=e.sent,e.abrupt("return",n.createURL());case 10:return e.prev=10,e.t0=e.catch(0),console.warn(e.t0),e.abrupt("return",!1);case 14:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t){return e.apply(this,arguments)}}(),f=function(e,t){var n=document.querySelectorAll(t);return n&&n.length&&n.forEach((function(t){t.src||(t.src=e,t.muted=!0,t.autoplay=!0)})),!!(null===n||void 0===n?void 0:n.length)},m=function(e,t){return b.a.save(e,t)},p=function(e){var t=Promise.resolve();return e.forEach((function(e){t=t.then((function(){return e()}))})),t},v={"video/embedded":{formats:["mp4","webm"],element:"video",options:{autoplay:!0,muted:!0}},"image/embedded":{formats:["jpg","png","webp","jpeg"],element:"img",options:{}}},O=function(e){var t,n,a=null===(t=e.name)||void 0===t||null===(n=t.split("."))||void 0===n?void 0:n.slice(-1)[0],c=Object.entries(v).filter((function(e){var t=Object(i.a)(e,2);t[0];return t[1].formats.includes(a)}))[0];if(c){var r=Object(i.a)(c,2),s=r[0],l=r[1];return Object(o.a)({name:s},l)}return null},h=new u.a,x=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],c=e.map((function(e){var a=e.contentItems,c=e.id;return Object.entries(a).filter((function(e){var t=Object(i.a)(e,2),n=(t[0],t[1]);return v[n.type]})).map((function(e){var a=Object(i.a)(e,2),o=a[0],l=a[1];return function(){return new Promise((function(e){!h.get(l.magnetURI)||n?h.add(l.magnetURI,function(){var n=Object(s.a)(r.a.mark((function n(a){var u;return r.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:e(!0),(u=a.files.filter((function(e){var t,n,a=null===(t=e.name)||void 0===t||null===(n=t.split("."))||void 0===n?void 0:n.slice(-1)[0],c=Object.entries(v).filter((function(e){var t=Object(i.a)(e,2);t[0];return t[1].formats.includes(a)}))[0];return!!c&&Object(i.a)(c,2)[1].formats.includes(a)}))).map(function(){var e=Object(s.a)(r.a.mark((function e(n){var a,s,u,d,b,m;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=O(n)){e.next=3;break}return e.abrupt("return");case 3:return s="".concat(c,"-").concat(o,"-").concat(n.name),u=a.element,d="".concat(u,'[data-torrent="').concat(l.magnetURI,'"]'),e.next=8,j(s);case 8:if(!(b=e.sent)){e.next=14;break}return(m=h.get(l.magnetURI))&&m.destroy(),f(b,d),e.abrupt("return");case 14:document.querySelectorAll(d).forEach((function(e){var c=decodeURIComponent(l.magnetURI.replace(/.*(ws=)/gi,"")),r=a.formats.filter((function(e){return c.toLowerCase().endsWith(".".concat(e.toLowerCase()))})),s=Object(i.a)(r,1)[0],o=e.getAttribute("src");!t&&s||o?e.setAttribute("src",c):n.renderTo(e,a.options)}));case 16:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),a.on("done",(function(){u.map((function(e){var t=O(e),n="".concat(c,"-").concat(o,"-").concat(e.name),a=t.element,i="".concat(a,'[data-torrent="').concat(l.magnetURI,'"]');return e.getBlob(function(){var e=Object(s.a)(r.a.mark((function e(t,a){var c,s;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=3;break}return console.warn(t),e.abrupt("return");case 3:return e.next=5,m(n,a);case 5:if("false"!==(null===(c=document.querySelector(i))||void 0===c?void 0:c.dataset.played)||(null===c||void 0===c?void 0:c.getAttribute("src"))){e.next=11;break}return e.next=9,j(n);case 9:s=e.sent,f(s,i);case 11:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),e}))}));case 4:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()):e(!0)}))}}))})).reduce((function(e,t){return[].concat(Object(a.a)(e),Object(a.a)(t))}),[]);p(c)}},535:function(e,t){},537:function(e,t){},538:function(e,t){},539:function(e,t){},540:function(e,t){},542:function(e,t){},543:function(e,t){},544:function(e,t){},548:function(e,t){},549:function(e,t){},550:function(e,t){},551:function(e,t){},552:function(e,t){},553:function(e,t){},554:function(e,t){},555:function(e,t){},556:function(e,t){},557:function(e,t){},558:function(e,t){},559:function(e,t){},560:function(e,t){},561:function(e,t){},564:function(e,t,n){"use strict";var a=n(2),c=n.n(a),r=n(5),s=n(17),o=n(3),i=n(33),l=n(482),u=n(509),d=n(487),b=n(31),j=n(150),f=(n(566),n(7));t.a=function(e){var t=e.tipData,n=e.toggleOpen,a=Object(i.c)(),m=Object(o.useState)(""),p=Object(s.a)(m,2),v=p[0],O=p[1],h=Object(o.useState)(!1),x=Object(s.a)(h,2),g=x[0],N=x[1],k=Object(o.useState)(0),w=Object(s.a)(k,2),y=w[0],S=w[1],C=Object(o.useState)(!1),I=Object(s.a)(C,2),M=I[0],P=I[1],U=Object(o.useCallback)((function(e){"amount"===e.target.name&&S(e.target.value)}),[]),D=Object(o.useCallback)(function(){var e=Object(r.a)(c.a.mark((function e(n){var r,s,o,i;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),e.prev=1,N(!0),e.next=5,a(Object(b.c)({amount:y,publicKey:t.publicKey,postId:t.postID}));case 5:P(!0),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(1),console.error(e.t0),t&&(o=e.t0.message,i=null===(r=e.t0.response)||void 0===r||null===(s=r.data)||void 0===s?void 0:s.errorMessage,O(null!==i&&void 0!==i?i:o));case 12:return e.prev=12,N(!1),e.finish(12);case 15:case"end":return e.stop()}}),e,null,[[1,8,12,15]])})));return function(t){return e.apply(this,arguments)}}(),[a,y,t]);return Object(o.useEffect)((function(){t||(N(!1),O(null),P(!1))}),[t]),Object(f.jsx)(l.a,{toggleModal:n,modalOpen:!!t,modalTitle:"Send Tip",children:M?Object(f.jsxs)("div",{className:"tip-modal-success",children:[Object(f.jsx)("i",{className:"tip-success-icon fas fa-check-circle"}),Object(f.jsx)("p",{className:"tip-success-title",children:"Post tipped successfully!"}),Object(f.jsx)("p",{className:"tip-success-desc"})]}):Object(f.jsxs)("form",{className:"modal-form tip-form",onSubmit:D,children:[v?Object(f.jsx)("div",{className:"form-error",children:v}):null,g?Object(f.jsx)(j.a,{overlay:!0,text:"Sending Tip..."}):null,Object(f.jsx)("p",{className:"tip-modal-desc",children:"Please specify the amount of sats you'd like to tip this user with below."}),Object(f.jsx)(d.a,{name:"amount",onChange:U,value:y,inputMode:"decimal",small:!0}),Object(f.jsx)(u.a,{text:"SEND TIP",onClick:D})]})})}},565:function(e,t,n){},566:function(e,t,n){},567:function(e,t,n){"use strict";var a=n(2),c=n.n(a),r=n(5),s=n(17),o=n(3),i=n(33),l=n(482),u=n(509),d=(n(487),n(42)),b=n(150),j=(n(568),n(7));t.a=function(e){var t=e.unlockData,n=e.toggleOpen,a=Object(i.c)(),f=Object(o.useState)(""),m=Object(s.a)(f,2),p=m[0],v=m[1],O=Object(o.useState)(!1),h=Object(s.a)(O,2),x=h[0],g=h[1],N=Object(o.useState)(!1),k=Object(s.a)(N,2),w=k[0],y=k[1],S=Object(o.useCallback)(function(){var e=Object(r.a)(c.a.mark((function e(n){var r,s,o,i;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),e.prev=1,g(!0),e.next=5,Object(d.j)(100,t.publicKey,t.postID)(a);case 5:y(!0),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(1),console.error(e.t0),t&&(o=e.t0.message,i=null===(r=e.t0.response)||void 0===r||null===(s=r.data)||void 0===s?void 0:s.errorMessage,v(null!==i&&void 0!==i?i:o));case 12:return e.prev=12,g(!1),e.finish(12);case 15:case"end":return e.stop()}}),e,null,[[1,8,12,15]])})));return function(t){return e.apply(this,arguments)}}(),[a,t]);return Object(o.useEffect)((function(){t||(g(!1),v(null),y(!1))}),[t]),Object(j.jsx)(l.a,{toggleModal:n,modalOpen:!!t,modalTitle:"Unlock content",children:w?Object(j.jsxs)("div",{className:"tip-modal-success",children:[Object(j.jsx)("i",{className:"tip-success-icon fas fa-check-circle"}),Object(j.jsx)("p",{className:"tip-success-title",children:"Content unlocked successfully!"})]}):Object(j.jsxs)("form",{className:"modal-form tip-form",onSubmit:S,children:[p?Object(j.jsx)("div",{className:"form-error",children:p}):null,x?Object(j.jsx)(b.a,{overlay:!0,text:"Sending Tip..."}):null,Object(j.jsx)("p",{className:"tip-modal-desc",children:"100 sats will be sent to the owner of the post to unlock the content"}),Object(j.jsx)(u.a,{text:"UNLOCK",onClick:S})]})})}},568:function(e,t,n){},716:function(e,t,n){},717:function(e,t,n){},761:function(e,t,n){"use strict";n.r(t);var a=n(15),c=n(17),r=n(3),s=n.n(r),o=n(21),i=n(92),l=n(510),u=n(20),d=n(493),b=n(73),j=n.n(b),f=(n(716),n(7)),m=function(e){var t=e.username,n=e.avatar,a=e.addButton,c=void 0!==a&&a,r=e.large,s=void 0!==r&&r,o=e.main,i=void 0!==o&&o;return Object(f.jsxs)("div",{className:j()({"followed-user":!0,"followed-user-large":s,"followed-user-main":i}),children:[Object(f.jsx)("div",{className:"followed-user-avatar",style:{backgroundImage:"url(".concat(n,")")},children:c?Object(f.jsx)("div",{className:"user-add-btn",children:Object(f.jsx)("i",{className:"fas fa-plus"})}):null}),t?Object(f.jsx)("p",{className:"followed-user-name",children:t}):null]})},p=n(564),v=n(150),O=n(56),h=(n(717),n(567)),x=s.a.lazy((function(){return Promise.all([n.e(1),n.e(3)]).then(n.bind(null,523))})),g=s.a.lazy((function(){return Promise.all([n.e(1),n.e(23)]).then(n.bind(null,745))}));t.default=function(){var e=u.useSelector(u.selectFollows),t=u.useSelector((function(e){return e.feed.posts})),n=u.useSelector((function(e){return e.userProfiles})),s=Object(r.useState)(null),b=Object(c.a)(s,2),j=b[0],N=b[1],k=Object(r.useState)(null),w=Object(c.a)(k,2),y=w[0],S=w[1],C=u.useSelector(u.selectSelfUser).avatar,I=Object(r.useMemo)((function(){return t?Object.values(t).reduce((function(e,t){return[].concat(Object(a.a)(e),Object(a.a)(t))}),[]).filter((function(t){return Object(O.b)(t)?!!e.find((function(e){return e.user===t.sharerId})):!!e.find((function(e){return e.user===t.authorId}))})).sort((function(e,t){var n=Object(O.b)(e)?e.shareDate:e.date;return(Object(O.b)(t)?t.shareDate:t.date)-n})):[]}),[e,t]),M=Object(r.useCallback)((function(e){console.log(e),!j&&e||N(null),N(e)}),[j]),P=Object(r.useCallback)((function(e){console.log(e),!y&&e||S(null),S(e)}),[y]);return Object(r.useLayoutEffect)((function(){Object(l.a)(I.filter((function(e){return"post"===e.type})),!1)}),[I]),Object(f.jsxs)("div",{className:"page-container feed-page",children:[Object(f.jsxs)("div",{className:"following-bar-container",children:[Object(f.jsx)(m,{addButton:!0,large:!0,main:!0,avatar:C?"data:image/jpeg;base64,".concat(C):null,username:null}),Object(f.jsx)("div",{className:"following-bar-list",children:null===e||void 0===e?void 0:e.map((function(e){var t,a=e.user,c=null!==(t=n[a])&&void 0!==t?t:o.d(a);return Object(f.jsx)(m,{username:Object(i.c)(a,c.displayName),avatar:"data:image/jpeg;base64,".concat(c.avatar)},a)}))})]}),Object(f.jsxs)("div",{className:"tabs-holder",children:[Object(f.jsx)("p",{className:"tab active",children:"Feed"}),Object(f.jsx)("p",{className:"tab",children:"Saved"}),Object(f.jsx)("p",{className:"tab",children:"Videos"})]}),Object(f.jsx)("div",{className:"posts-holder",children:I.map((function(e,t){if("shared"===e.type){var a=n[e.sharerId],c=e.originalAuthor,s=n[c];return Object(f.jsx)(r.Suspense,{fallback:Object(f.jsx)(v.a,{}),children:Object(f.jsx)(g,{originalPost:e.originalPost,originalPostProfile:s,sharedTimestamp:e.shareDate,sharerProfile:a,postPublicKey:c,openTipModal:M,openUnlockModal:P,isOnlineNode:!0})},t)}var o=n[e.authorId];return Object(f.jsx)(r.Suspense,{fallback:Object(f.jsx)(v.a,{}),children:Object(f.jsx)(x,{id:e.id,timestamp:e.date,contentItems:e.contentItems,avatar:"data:image/jpeg;base64,".concat(null===o||void 0===o?void 0:o.avatar),username:Object(i.c)(null===o||void 0===o?void 0:o.publicKey,null===o||void 0===o?void 0:o.displayName),publicKey:e.authorId,openTipModal:M,openUnlockModal:P,isOnlineNode:!0,tipCounter:void 0,tipValue:void 0})},t)}))}),Object(f.jsx)(p.a,{tipData:j,toggleOpen:M}),Object(f.jsx)(h.a,{unlockData:y,toggleOpen:P}),Object(f.jsx)(d.a,{})]})}}}]);
//# sourceMappingURL=12.905eaa65.chunk.js.map