{"version":3,"sources":["common/InputGroup/index.js","common/DialogNav/index.js","pages/Profile/offerService.tsx"],"names":["InputGroup","label","name","onChange","inputAction","actionIcon","value","inputMode","type","element","small","disabled","className","classNames","group","onClick","fas","DIALOG_NAV_MIN_HEIGHT_PX","CONTAINER_STYLE","minHeight","DialogNav","pageTitle","drawerVisible","onHeight","Utils","goBack","useCallback","window","history","back","divRefCb","el","getBoundingClientRect","height","e","console","log","ref","style","OfferService","dispatch","useDispatch","useHistory","useSelector","content","seedInfo","seedUrl","seedToken","publicKey","node","userProfiles","useState","loading","setLoading","error","setError","serviceType","setServiceType","servicePrice","setServicePrice","onInputChange","target","preventDefault","onSubmit","a","serviceID","SeedServiceProvided","clear","serviceTitle","serviceDescription","serviceCondition","encrypt","serviceSeedUrl","serviceSeedToken","createService","res","push","message","onDiscard","overflow","overlay","fullScreen","text","onReset","display","justifyContent","marginBottom"],"mappings":"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","file":"static/js/27.6b13fb3c.chunk.js","sourcesContent":["import classNames from \"classnames\";\nimport \"./css/index.scoped.css\";\n\nconst InputGroup = ({\n  label,\n  name,\n  onChange,\n  inputAction,\n  actionIcon,\n  value,\n  inputMode = \"text\",\n  type = \"text\",\n  element = \"input\",\n  small = false,\n  disabled\n}) => {\n  return (\n    <div\n      className={classNames({\n        group: true,\n        \"group-disabled\": disabled,\n        \"group-small\": small\n      })}\n    >\n      {label ? <p className=\"group-label\">{label}</p> : null}\n      <div\n        className={classNames({\n          \"group-input-container\": true,\n          \"group-input-textarea-container\": element === \"textarea\"\n        })}\n      >\n        {element === \"textarea\" ? (\n          <textarea\n            className=\"group-input group-input-textarea\"\n            name={name}\n            onChange={onChange}\n            inputMode={inputMode}\n            value={value}\n            disabled={disabled}\n          />\n        ) : (\n          <input\n            className=\"group-input\"\n            type={type}\n            name={name}\n            onChange={onChange}\n            inputMode={inputMode}\n            value={value}\n            disabled={disabled}\n          />\n        )}\n        {inputAction && actionIcon ? (\n          <div className=\"group-input-action\" onClick={inputAction}>\n            <i\n              className={classNames({\n                \"group-input-action-icon\": true,\n                fas: true,\n                [actionIcon]: true\n              })}\n              onClick={inputAction}\n            ></i>\n          </div>\n        ) : null}\n      </div>\n    </div>\n  );\n};\n\nexport default InputGroup;\n","// @ts-check\nimport { useCallback } from \"react\";\nimport classNames from \"classnames\";\n/**\n * @typedef {import('react').RefCallback<HTMLElement>} DivRefCallback\n */\n\nimport * as Utils from \"../../utils\";\n\nimport \"./css/index.scoped.css\";\n\nexport const DIALOG_NAV_MIN_HEIGHT_PX = 73;\n/** @type {import('react').CSSProperties} */\nconst CONTAINER_STYLE = {\n  minHeight: DIALOG_NAV_MIN_HEIGHT_PX\n};\n\nconst DialogNav = ({\n  pageTitle,\n  drawerVisible = false,\n  onHeight = Utils.EMPTY_FN\n}) => {\n  const goBack = useCallback(() => {\n    window.history.back();\n  }, []);\n\n  /** @type {DivRefCallback} */\n  const divRefCb = useCallback(\n    el => {\n      // https://www.pluralsight.com/tech-blog/getting-size-and-position-of-an-element-in-react/\n      if (!el) return;\n      try {\n        onHeight(el.getBoundingClientRect().height);\n      } catch (e) {\n        console.log(`Error inside onHeight mechanism in DialogNav:`);\n        console.log(e);\n      }\n    },\n    [onHeight]\n  );\n\n  return (\n    <div\n      className=\"dialog-nav-container\"\n      ref={divRefCb}\n      style={CONTAINER_STYLE}\n    >\n      <div className=\"dialog-nav-back\" onClick={goBack}>\n        <i className=\"icon icon-thin-back\"></i>\n      </div>\n      <p className=\"dialog-nav-title\">{pageTitle}</p>\n      <div\n        className={classNames({\n          \"dialog-nav-menu-btn\": true,\n          \"dialog-nav-hidden\": !drawerVisible\n        })}\n      >\n        <div className=\"dialog-nav-menu-dash\" />\n        <div className=\"dialog-nav-menu-dash\" />\n        <div className=\"dialog-nav-menu-dash\" />\n      </div>\n    </div>\n  );\n};\n\nexport default DialogNav;\n","import React, { useCallback, useState } from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport DialogNav from \"../../common/DialogNav\";\nimport Loader from \"../../common/Loader\";\nimport InputGroup from \"../../common/InputGroup\";\nimport { createService } from \"../../actions/OrdersActions\";\nimport { useHistory } from \"react-router\";\nimport \"./css/index.scoped.css\";\n\nconst OfferService = () => {\n  const dispatch = useDispatch();\n  const history = useHistory();\n  //@ts-expect-error\n  const { seedUrl, seedToken } = useSelector(({ content }) => content.seedInfo);\n  //@ts-expect-error\n  const publicKey = useSelector(({ node }) => node.publicKey);\n  //@ts-expect-error\n  const userProfiles = useSelector(({ userProfiles }) => userProfiles);\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState(null);\n  const [serviceType, setServiceType] = useState(\"torrentSeed\");\n  const [servicePrice, setServicePrice] = useState(0);\n  //optional fields\n\n  const onInputChange = useCallback(\n    e => {\n      const { value, name } = e.target;\n      e.preventDefault();\n      switch (name) {\n        case \"type\": {\n          setServiceType(value);\n          return;\n        }\n        case \"price\": {\n          setServicePrice(value);\n          return;\n        }\n        default:\n          return;\n      }\n    },\n    [setServiceType, setServicePrice]\n  );\n  const onSubmit = useCallback(\n    async e => {\n      e.preventDefault();\n      if (!seedUrl || !seedToken) {\n        setError(\"seed url and token are not set in config\");\n        return;\n      }\n      if (servicePrice <= 0) {\n        setError(\"service price must be greater than 0\");\n        return;\n      }\n      try {\n        setLoading(true);\n        let serviceID = \"\";\n        if (\n          userProfiles[publicKey] &&\n          userProfiles[publicKey].SeedServiceProvided\n        ) {\n          serviceID = userProfiles[publicKey].SeedServiceProvided;\n        }\n        const clear = {\n          serviceType,\n          serviceTitle: \"Content Seeding\",\n          serviceDescription: \"\",\n          serviceCondition: \"\",\n          servicePrice\n        };\n        const encrypt = {\n          serviceSeedUrl: seedUrl,\n          serviceSeedToken: seedToken\n        };\n        const res = await createService(clear, encrypt, serviceID)(dispatch);\n        console.log(res);\n        setLoading(false);\n        history.push(\"/profile\");\n      } catch (err) {\n        setLoading(false);\n        setError(err.message || err);\n      }\n    },\n    [serviceType, servicePrice, history]\n  );\n  const onDiscard = useCallback(\n    async e => {\n      e.preventDefault();\n      setError(null);\n      setServiceType(\"torrentSeed\");\n      setServicePrice(0);\n    },\n    [setError, setServiceType, setServicePrice]\n  );\n\n  return (\n    <div\n      className=\"publish-content-form-container m-1\"\n      style={{ overflow: \"auto\" }}\n    >\n      {loading ? (\n        <Loader overlay fullScreen text=\"Creating service...\" />\n      ) : null}\n      <DialogNav drawerVisible={false} pageTitle=\"\" />\n      <form\n        className=\"publish-content-form\"\n        onSubmit={onSubmit}\n        onReset={onDiscard}\n      >\n        <div\n          style={{\n            display: \"flex\",\n            justifyContent: \"center\",\n            marginBottom: \"1rem\"\n          }}\n        >\n          <div>\n            <h2>Offer service</h2>\n            <div className=\"line\"></div>\n          </div>\n        </div>\n        <div>\n          <select name=\"type\" value={serviceType} onChange={onInputChange}>\n            <option value=\"torrentSeed\">Content Seeding</option>\n          </select>\n          {/*@ts-ignore */}\n          <InputGroup\n            label=\"Service Price\"\n            name=\"price\"\n            type=\"number\"\n            actionIcon={null}\n            value={servicePrice}\n            onChange={onInputChange}\n            disabled={false}\n            inputAction={null}\n          />\n        </div>\n        {error ? <p className=\"error-container\">{error}</p> : null}\n        <div className=\"flex-center\">\n          <input type=\"reset\" value=\"reset\" className=\"shock-form-button m-1\" />\n          <input\n            type=\"submit\"\n            value=\"submit\"\n            className=\"shock-form-button-confirm m-1\"\n          />\n        </div>\n      </form>\n    </div>\n  );\n};\nexport default OfferService;\n"],"sourceRoot":""}