(this["webpackJsonpshocknet-pwa"]=this["webpackJsonpshocknet-pwa"]||[]).push([[40],{721:function(e,a,t){"use strict";t.r(a);var c=t(3),n=t.n(c),s=t(5),i=t(13),o=t(1),l=t(18),d=t(892),r=t.n(d),u=t(629),b=t(896),j=t.n(b),p=t(58),f=t(183),v=(t(899),t(32)),m=t(4);a.default=function(e){var a=e.publicKey,t=e.tipData,c=e.toggleOpen,d=Object(l.useDispatch)(),b=Object(l.useSelector)((function(e){return e.guest.user})),O=Object(l.useSelector)((function(e){var a;return null===(a=e.guest.paymentRequest)||void 0===a?void 0:a.response})),h=Object(o.useState)(!1),x=Object(i.a)(h,2),N=x[0],g=x[1],y=Object(o.useState)("10"),k=Object(i.a)(y,2),C=k[0],I=k[1],w=Object(o.useState)(!1),S=Object(i.a)(w,2),T=S[0],P=S[1],q=Object(o.useState)(""),E=Object(i.a)(q,2),R=E[0],D=E[1],V=Object(o.useState)(!1),A=Object(i.a)(V,2),J=A[0],K=A[1],Y=Object(o.useCallback)((function(){P(!0),u.a.rebuild();var e=setTimeout((function(){P(!1),u.a.rebuild()}),500);return function(){clearTimeout(e)}}),[]),z=Object(o.useCallback)(Object(s.a)(n.a.mark((function e(){var c,s;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,g(!0),e.next=4,d(Object(p.d)({senderPair:b,recipientPublicKey:a,amount:parseFloat(C),metadata:{targetType:"tip",ackInfo:t.postID}}));case 4:c=e.sent,s=c.ackNode,g(!1),s&&D(s),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.error(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])}))),[d,b,a,C,t.postID]);Object(o.useEffect)((function(){R&&Object(v.e)({query:"".concat(a,"::orderToResponse/").concat(R,"::on")}).then((function(){return Object(v.e)({query:"".concat(a,"::orderToResponse/").concat(R)})})).then((function(e){"orderAck"===e.type&&K(!0)}))}),[R,a,K]);var B=Object(o.useCallback)((function(){c()}),[c]),F="";return O&&(F="paymentRequest"),J&&(F="done"),Object(m.jsxs)("div",{className:"tip-modal","data-v-e771aafe":"",children:[N?Object(m.jsx)("div",{className:"tip-modal-loading","data-v-e771aafe":"",children:Object(m.jsx)(f.a,{text:"Submitting Tip Request...",style:{marginBottom:0},"data-v-e771aafe":""})}):null,Object(m.jsx)("div",{className:"tip-modal-head","data-v-e771aafe":"",children:Object(m.jsx)("div",{className:"tip-modal-title","data-v-e771aafe":"",children:"Send Tip"})}),""===F&&Object(m.jsxs)("div",{className:"tip-modal-content","data-v-e771aafe":"",children:[Object(m.jsx)("p",{className:"tip-modal-instructions","data-v-e771aafe":"",children:"Please specify the amount of sats you'd like to tip this user with below and we'll generate an invoice for you to scan."}),Object(m.jsx)("input",{className:"tip-modal-input",value:C,onChange:function(e){return I(e.target.value)},"data-v-e771aafe":""})]}),"paymentRequest"===F&&Object(m.jsxs)("div",{className:"tip-modal-content","data-v-e771aafe":"",children:[Object(m.jsx)("p",{className:"tip-modal-instructions","data-v-e771aafe":"",children:"We've successfully generated an invoice for you to tip, please scan the QR Code below using a Lightning wallet to pay it!"}),Object(m.jsx)("div",{className:"tip-modal-qr-code-container","data-v-e771aafe":"",children:Object(m.jsx)(j.a,{value:O,size:210,bgColor:"#4db1ff",fgColor:"#1b2129","data-v-e771aafe":""})}),Object(m.jsxs)("div",{className:"tip-modal-action-btns","data-v-e771aafe":"",children:[Object(m.jsx)("a",{href:"lightning:".concat(O),className:"tip-modal-action-btn","data-v-e771aafe":"",children:"PAY INVOICE"}),Object(m.jsx)(r.a,{text:O,onCopy:Y,"data-v-e771aafe":"",children:Object(m.jsx)("div",{className:"tip-modal-action-btn","data-v-e771aafe":"",children:T?"INVOICE COPIED!":"COPY INVOICE"})})]})]}),"done"===F&&Object(m.jsx)("div",{className:"tip-modal-footer",onClick:B,"data-v-e771aafe":"",children:Object(m.jsx)("div",{className:"tip-modal-submit","data-v-e771aafe":"",children:"TIP SENT!"})}),""===F&&Object(m.jsx)("div",{className:"tip-modal-footer",onClick:z,"data-v-e771aafe":"",children:Object(m.jsx)("div",{className:"tip-modal-submit","data-v-e771aafe":"",children:"SEND TIP"})})]})}},899:function(e,a,t){}}]);
//# sourceMappingURL=40.1b9adfc9.chunk.js.map