(this["webpackJsonpshocknet-pwa"]=this["webpackJsonpshocknet-pwa"]||[]).push([[19],{494:function(e,t,a){"use strict";var n=a(3),c=a(78),r=a.n(c),s=(a(495),a(8));t.a=function(e){var t=e.pageTitle,a=e.drawerVisible,c=Object(n.useCallback)((function(){window.history.back()}),[]);return Object(s.jsxs)("div",{className:"dialog-nav-container",children:[Object(s.jsx)("div",{className:"dialog-nav-back",onClick:c,children:Object(s.jsx)("i",{className:"icon icon-thin-back"})}),Object(s.jsx)("p",{className:"dialog-nav-title",children:t}),Object(s.jsxs)("div",{className:r()({"dialog-nav-menu-btn":!0,"dialog-nav-hidden":!a}),children:[Object(s.jsx)("div",{className:"dialog-nav-menu-dash"}),Object(s.jsx)("div",{className:"dialog-nav-menu-dash"}),Object(s.jsx)("div",{className:"dialog-nav-menu-dash"})]})]})}},495:function(e,t,a){},523:function(e,t,a){"use strict";a(3);var n=a(494),c=(a(535),a(8));t.a=function(e){var t=e.containerClassName,a=void 0===t?"":t,r=e.contentClassName,s=void 0===r?"":r,o=e.title,i=e.children,l=e.disableNav,u=void 0!==l&&l;return Object(c.jsxs)("div",{className:"page-container dialog-page ".concat(a),style:u?{paddingTop:0}:{},children:[u?null:Object(c.jsx)(n.a,{pageTitle:o}),Object(c.jsx)("div",{className:"dialog-content-container ".concat(s),children:i})]})}},535:function(e,t,a){},536:function(e,t,a){},576:function(e,t,a){"use strict";var n=a(582),c=function(){return!navigator.userAgent.match(/(iPad)|(iPhone)|(iPod)|(android)|(webOS)/i)},r=(a(536),a(8)),s={wizard:{title:"SCAN A",target:"QR CODE",description:"Point your camera at a ShockWizard QR Code"},invoice:{title:"SCAN AN",target:"INVOICE",description:"Point your camera at an LND Invoice"}};t.a=function(e){var t=e.mode,a=void 0===t?"wizard":t,o=e.onScan,i=e.onError,l=e.onClose,u=s[a],b=c()?"user":"environment";return Object(r.jsxs)("div",{className:"qr-code-scanner-container",children:[Object(r.jsx)("div",{className:"qr-scanner-top-section",children:Object(r.jsx)("i",{className:"fas fa-times",onClick:l})}),Object(r.jsx)(n.a,{constraints:{video:{facingMode:{exact:b}}},onScan:o,onError:i}),Object(r.jsx)("div",{className:"qr-scanner-target"}),Object(r.jsxs)("div",{className:"qr-scanner-bottom-section",children:[Object(r.jsxs)("p",{className:"qr-scanner-bottom-title",children:[u.title," ",Object(r.jsx)("span",{className:"qr-scanner-bottom-title-highlight",children:u.target})]}),Object(r.jsx)("p",{className:"qr-scanner-bottom-description",children:u.description}),Object(r.jsx)("div",{className:"qr-scanner-btn",onClick:l,children:"Cancel Scan"})]})]})}},648:function(e,t,a){},649:function(e,t,a){},650:function(e,t,a){},651:function(e,t,a){},754:function(e,t,a){"use strict";a.r(t);var n=a(2),c=a.n(n),r=a(6),s=a(21),o=a(3),i=a(41),l=a(119),u=a(29),b=a(18),d=a(52),j=a(23),h=a(523),O=a(78),p=a.n(O),m=a(8),f=function(){var e=Object(i.c)(),t=Object(o.useState)(),a=Object(s.a)(t,2),n=a[0],l=a[1],b=Object(o.useState)(""),h=Object(s.a)(b,2),O=h[0],f=h[1],v=Object(o.useState)(!1),x=Object(s.a)(v,2),k=x[0],N=x[1],g=Object(o.useCallback)((function(e){var t=e.target,a=t.value;switch(t.name){case"hostIP":return void f(a);default:return}}),[]),C=function(){var t=Object(r.a)(c.a.mark((function t(a){var n,r,s;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,a.preventDefault(),!k){t.next=4;break}return t.abrupt("return");case 4:return N(!0),l(null),n=O.replace(/^http(s)?:\/\//gi,""),t.next=9,Object(d.c)(n)(e);case 9:r=t.sent,s=r.withProtocolHostIP,Object(u.a)(s),t.next=18;break;case 14:t.prev=14,t.t0=t.catch(0),N(!1),l("Unable to connect to host");case 18:case"end":return t.stop()}}),t,null,[[0,14]])})));return function(e){return t.apply(this,arguments)}}(),w=Object(o.useCallback)((function(){e(Object(j.c)(null)),e(Object(j.d)(null))}),[e]);return Object(m.jsxs)("div",{className:"auth-form-container",children:[!k&&Object(m.jsx)("p",{className:"auth-form-container-title",children:"Connect to Node"}),Object(m.jsx)("form",{className:"auth-form",onSubmit:C,children:k?Object(m.jsx)("p",{children:"Connecting..."}):Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("input",{type:"text",name:"hostIP",placeholder:"Host Address (in IP or DNS form)",value:O,onChange:g,className:p()({"input-field":!0,"input-field-error":!!n})}),n?Object(m.jsx)("p",{className:"error-container",children:n}):null,Object(m.jsx)("button",{className:"submit-btn",type:"submit",children:"Connect"}),Object(m.jsx)("p",{className:"inline-link",onClick:w,children:"Choose another method"})]})})]})},v=a(156),x=a(25),k=function(){var e=Object(i.c)(),t=Object(o.useState)(),a=Object(s.a)(t,2),n=a[0],l=a[1],u=Object(o.useState)(""),b=Object(s.a)(u,2),h=b[0],O=b[1],p=x.useSelector((function(e){return e.node.alias})),f=Object(o.useState)(!1),k=Object(s.a)(f,2),N=k[0],g=k[1],C=Object(o.useState)(""),w=Object(s.a)(C,2),S=w[0],y=w[1],P=Object(o.useState)(!1),I=Object(s.a)(P,2),W=I[0],A=I[1],z=Object(o.useCallback)((function(e){var t=e.target,a=t.value;switch(t.name){case"alias":return void O(a);case"password":return void y(a);default:return}}),[]),D=Object(o.useCallback)(function(){var t=Object(r.a)(c.a.mark((function t(a){var n;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a.preventDefault(),A(!0),t.prev=2,t.next=5,e(Object(d.f)({alias:h||p,password:S}));case 5:n=t.sent,console.log("Wallet Response:",n),t.next=13;break;case 9:t.prev=9,t.t0=t.catch(2),l(t.t0.message),A(!1);case 13:case"end":return t.stop()}}),t,null,[[2,9]])})));return function(e){return t.apply(this,arguments)}}(),[h,N,p,S,e,l]),E=Object(o.useCallback)((function(){e(Object(j.c)(null)),e(Object(j.d)(null))}),[e]);return Object(m.jsxs)("div",{className:"auth-form-container",children:[W?Object(m.jsx)(v.a,{overlay:!0,fullScreen:!0,text:"Unlocking Wallet..."}):null,Object(m.jsx)("p",{className:"auth-form-container-title",children:"Unlock Wallet"}),Object(m.jsxs)("form",{className:"auth-form",onSubmit:D,children:[p&&!N?Object(m.jsxs)(m.Fragment,{children:[Object(m.jsxs)("div",{style:{display:"flex",justifyContent:"space-around",alignItems:"center",flexDirection:"row",width:"100%"},children:[Object(m.jsxs)("span",{children:["Alias: ",p]}),Object(m.jsx)("span",{className:"inline-link",style:{marginTop:"0px"},onClick:function(){g(!0)},children:"change"})]}),Object(m.jsx)("div",{style:{height:24}})]}):Object(m.jsx)("input",{type:"text",name:"alias",placeholder:"Wallet Alias",value:h,onChange:z,className:"input-field",autoCorrect:"off",autoCapitalize:"none"}),Object(m.jsx)("input",{type:"password",name:"password",placeholder:"Wallet Password",value:S,onChange:z,className:"input-field"}),n?Object(m.jsx)("p",{className:"error-container",children:n}):null,Object(m.jsx)("button",{className:"submit-btn",children:"Unlock"}),Object(m.jsx)("p",{className:"inline-link",onClick:E,children:"Create a new alias"}),Object(m.jsx)("p",{className:"inline-link",onClick:E,children:"Choose another method"})]})]})},N=function(){var e=Object(i.c)(),t=Object(o.useState)(),a=Object(s.a)(t,2),n=a[0],l=a[1],u=Object(o.useState)(""),b=Object(s.a)(u,2),h=b[0],O=b[1],p=Object(o.useState)(""),f=Object(s.a)(p,2),x=f[0],k=f[1],N=Object(o.useState)(""),g=Object(s.a)(N,2),C=g[0],w=g[1],S=Object(o.useState)(!1),y=Object(s.a)(S,2),P=y[0],I=y[1],W=Object(o.useCallback)((function(e){var t=e.target,a=t.value;switch(t.name){case"alias":return void O(a);case"password":return void k(a);case"confirmPassword":return void w(a);default:return}}),[]),A=Object(o.useCallback)(function(){var t=Object(r.a)(c.a.mark((function t(a){var n;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a.preventDefault(),!(h.length<3||h.length>32)){t.next=4;break}return l("Please specify an alias that is 3-32 characters long"),t.abrupt("return");case 4:if(x===C){t.next=7;break}return l("Password and Confirm password fields must match"),t.abrupt("return");case 7:if(!(x.length<8||x.length>32)){t.next=10;break}return l("Password length should be 8-32 characters long"),t.abrupt("return");case 10:return t.prev=10,I(!0),t.next=14,e(Object(d.d)({alias:h,password:x}));case 14:n=t.sent,console.log("Wallet Response:",n),t.next=21;break;case 18:t.prev=18,t.t0=t.catch(10),l(t.t0.message);case 21:return t.prev=21,I(!1),t.finish(21);case 24:case"end":return t.stop()}}),t,null,[[10,18,21,24]])})));return function(e){return t.apply(this,arguments)}}(),[h,x,C,e]),z=Object(o.useCallback)((function(){e(Object(j.c)(null)),e(Object(j.d)(null))}),[e]);return Object(m.jsxs)("div",{className:"auth-form-container",children:[P?Object(m.jsx)(v.a,{overlay:!0,fullScreen:!0,text:"Creating New Wallet..."}):null,Object(m.jsx)("p",{className:"auth-form-container-title",children:"Create New Wallet"}),Object(m.jsxs)("form",{className:"auth-form",onSubmit:A,children:[Object(m.jsx)("input",{type:"text",name:"alias",placeholder:"Wallet Alias",value:h,onChange:W,className:"input-field",autoCorrect:"off",autoCapitalize:"none"}),Object(m.jsx)("input",{type:"password",name:"password",placeholder:"Wallet Password",value:x,onChange:W,className:"input-field"}),Object(m.jsx)("input",{type:"password",name:"confirmPassword",placeholder:"Confirm Wallet Password",value:C,onChange:W,className:"input-field"}),n?Object(m.jsx)("p",{className:"error-container",children:n}):null,Object(m.jsx)("button",{className:"submit-btn",children:"Create"}),Object(m.jsx)("p",{className:"inline-link",onClick:z,children:"Choose another method"})]})]})},g=a.p+"static/media/shocklogo-dark.ebc8cee3.png",C=(a(648),function(){return Object(m.jsx)("div",{className:"auth-logo-header",children:Object(m.jsx)("img",{className:"auth-logo",src:g,alt:"ShockWallet Logo"})})}),w=(a(649),function(e){var t=e.icon,a=e.details,n=e.method,c=Object(i.c)(),r=Object(o.useCallback)((function(){c(Object(j.c)(n))}),[c,n]);return Object(m.jsxs)("div",{className:"choice-container",onClick:r,children:[Object(m.jsx)("div",{className:"choice-icon-container",children:Object(m.jsx)("i",{className:"choice-icon fas fa-".concat(t)})}),Object(m.jsx)("p",{className:"choice-info",children:a})]})}),S=(a(650),function(){var e=Object(i.c)(),t=Object(o.useCallback)((function(){e(Object(j.c)("shockCloud"))}),[e]);return Object(m.jsxs)("div",{className:"choices-step-container",children:[Object(m.jsx)("p",{className:"choices-title",children:"Node Up"}),Object(m.jsx)("p",{className:"choices-desc",children:"In a decentralized network, a node is like a personal server that works even as your mobile sleeps."}),Object(m.jsxs)("div",{className:"choices-container",children:[Object(m.jsx)(w,{icon:"code-branch",details:"I already have a node, and want to enter a network address",method:"manual"}),Object(m.jsx)(w,{icon:"qrcode",details:"I'll install the ShockNode Wizard app on a computer",method:"shockWizard"}),Object(m.jsx)(w,{icon:"cloud",details:"I'd like a personal cloud node provided as a service",method:"shockCloud"}),Object(m.jsx)("p",{className:"inline-link",onClick:t,children:"I have a guest invite"})]})]})}),y="pool.shock.network",P=function(){var e=Object(i.c)(),t=Object(i.d)((function(e){return e.node.hostingAttemptsDone})),a=Object(o.useState)(!1),n=Object(s.a)(a,2),l=n[0],h=n[1],O=Object(o.useState)(""),f=Object(s.a)(O,2),x=f[0],k=f[1],N=Object(o.useState)(""),g=Object(s.a)(N,2),C=g[0],w=g[1],S=Object(o.useCallback)((function(e){var t=e.target,a=t.value;switch(t.name){case"inviteCode":return void w(a);default:return}}),[]),P=function(){var e=Object(r.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,a){var n=t.match(/:(\d+)/);if(!n)return e(t);var c=new WebSocket("wss://".concat(y,"/ws/healthz"));c.addEventListener("open",(function(e){c.send("health(".concat(n[1],")"))})),c.addEventListener("message",(function(t){var a=JSON.parse(t.data);a.api_uri&&""!=a.api_uri&&(c.close(),e(a.api_uri))}))})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),I=Object(o.useCallback)(function(){var a=Object(r.a)(c.a.mark((function a(n){var r,s,o,i,l,j,O,p;return c.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,n.preventDefault(),k(null),h(!0),a.next=6,b.a.get("https://".concat(y,"/mainnet"),{headers:{Accept:"application/json",Authorization:"Bearer ".concat(C)}});case 6:return r=a.sent,s=r.data,o=s.data.address,a.next=11,P(o);case 11:return i=a.sent,l=i.replace(/^http(s)?:\/\//gi,""),j=t?0:4,a.next=16,Object(d.c)(l,!0,j)(e);case 16:O=a.sent,p=O.withProtocolHostIP,t&&Object(d.b)()(e),Object(u.a)(p),a.next=26;break;case 22:a.prev=22,a.t0=a.catch(0),h(!1),k("Unable to connect to host");case 26:case"end":return a.stop()}}),a,null,[[0,22]])})));return function(e){return a.apply(this,arguments)}}(),[e,d.b,t,C]),W=Object(o.useCallback)((function(){e(Object(j.c)(null)),e(Object(j.d)(null))}),[e]);return Object(m.jsxs)("div",{className:"auth-form-container",children:[Object(m.jsx)("p",{className:"auth-form-container-title",children:"Invitation Code"}),Object(m.jsxs)("form",{className:"auth-form",onSubmit:I,children:[l?Object(m.jsx)(v.a,{fullScreen:!0,overlay:!0}):null,Object(m.jsx)("input",{type:"text",name:"inviteCode",placeholder:"Enter your invitation code",value:C,onChange:S,className:p()({"input-field":!0,"input-field-error":!!x})}),x?Object(m.jsx)("p",{className:"error-container",children:x}):null,Object(m.jsx)("button",{className:"submit-btn",type:"submit",children:"Connect"}),Object(m.jsx)("p",{className:"inline-link",onClick:W,children:"Choose another method"})]})]})},I=a(576),W=function(){var e=Object(i.c)(),t=Object(o.useState)(),a=Object(s.a)(t,2),n=(a[0],a[1]),l=Object(o.useState)(!1),b=Object(s.a)(l,2),h=b[0],O=b[1],p=Object(o.useCallback)(function(){var t=Object(r.a)(c.a.mark((function t(a,n){var r,s,o;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,console.log("connectHostIP:",a),r=a.replace(/^http(s)?:\/\//gi,""),t.next=5,Object(d.c)("".concat(r,":").concat(n))(e);case 5:return s=t.sent,o=s.withProtocolHostIP,Object(u.a)(o),t.abrupt("return",!0);case 11:return t.prev=11,t.t0=t.catch(0),t.abrupt("return",!1);case 14:case"end":return t.stop()}}),t,null,[[0,11]])})));return function(e,a){return t.apply(this,arguments)}}(),[e]),f=Object(o.useCallback)(function(){var e=Object(r.a)(c.a.mark((function e(t){var a,r,s,o;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,t){e.next=3;break}return e.abrupt("return");case 3:return O(!0),console.log("Scanned Code:",t),n(null),a=JSON.parse(t.text),r=a.internalIP,s=a.externalIP,o=a.walletPort,e.next=9,p(r,o);case 9:if(!e.sent){e.next=13;break}return O(!1),e.abrupt("return",!0);case 13:return e.next=15,p(s,o);case 15:if(!e.sent){e.next=19;break}return O(!1),e.abrupt("return",!0);case 19:n("Unable to connect to host, please ensure that your ShockWizard node is up and fully synced to the blockchain."),e.next=27;break;case 22:e.prev=22,e.t0=e.catch(0),O(!1),console.error(e.t0),n(e.t0.message);case 27:case"end":return e.stop()}}),e,null,[[0,22]])})));return function(t){return e.apply(this,arguments)}}(),[p]),x=Object(o.useCallback)((function(e){console.error(e),n("Unable to detect a camera, please make sure that the Camera permission is allowed in order to be able to scan QR Codes")}),[]),k=Object(o.useCallback)((function(){e(Object(j.c)(null)),e(Object(j.d)(null))}),[e]);return Object(m.jsxs)("div",{className:"auth-form-container",children:[h?Object(m.jsx)(v.a,{fullScreen:!0,overlay:!0,text:"Loading Host..."}):null,Object(m.jsx)(I.a,{mode:"wizard",onScan:f,onError:x,onClose:k})]})};a(651),t.default=function(){var e=Object(i.c)(),t=Object(i.d)((function(e){return e.node.hostIP})),a=Object(o.useState)(!!t),n=Object(s.a)(a,2),O=n[0],p=n[1],v=Object(o.useState)(null),x=Object(s.a)(v,2),g=x[0],w=x[1],y=Object(i.d)((function(e){return e.node.authTokenExpirationDate})),I=Object(i.d)((function(e){return e.node.authToken})),A=Object(i.d)((function(e){return e.auth.authStep})),z=Object(i.d)((function(e){return e.auth.authMethod})),D=Object(o.useMemo)((function(){return"manual"===z&&"host"===A?Object(m.jsx)(f,{}):"shockWizard"===z&&"scan"===A?Object(m.jsx)(W,{}):"shockCloud"===z&&"inviteCode"===A?Object(m.jsx)(P,{}):"unlockWallet"===A||"gunAuth"===A?Object(m.jsx)(k,{}):"createWallet"===A?Object(m.jsx)(N,{}):Object(m.jsx)(S,{})}),[A,z]),E=Object(o.useCallback)(Object(r.a)(c.a.mark((function a(){var n,r,s,o;return c.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(a.prev=0,!t){a.next=25;break}return console.log("Loading cached node IP"),a.next=5,Object(d.c)(t,!1)(e);case 5:if(!!a.sent&&p(!1),!(I&&l.DateTime.fromSeconds(y).diffNow().milliseconds>0)){a.next=24;break}return p(!0),a.next=11,b.a.get("/api/gun/auth");case 11:if(n=a.sent,(r=n.data).data){a.next=19;break}return a.next=16,b.a.get("/api/lnd/wallet/status");case 16:s=a.sent,o=s.data,console.log(o);case 19:return Object(j.d)("unlockWallet"),Object(u.a)(t),p(!1),e(Object(j.e)(r.data)),a.abrupt("return");case 24:I&&(p(!0),Object(j.d)("unlockWallet"),p(!1));case 25:a.next=31;break;case 27:a.prev=27,a.t0=a.catch(0),w("Unable to connect to cached Node IP, make sure ShockAPI is up and running on your machine"),p(!1);case 31:case"end":return a.stop()}}),a,null,[[0,27]])}))),[t,e,I,y]);return Object(o.useEffect)((function(){E()}),[E]),Object(m.jsxs)(h.a,{disableNav:!0,contentClassName:"auth-page-content",children:[Object(m.jsx)(C,{}),O&&Object(m.jsx)("span",{children:"Loading..."}),g&&Object(m.jsxs)("span",{children:["There was an error: ",g]}),!O&&!g&&D]})}}}]);
//# sourceMappingURL=19.02f77037.chunk.js.map